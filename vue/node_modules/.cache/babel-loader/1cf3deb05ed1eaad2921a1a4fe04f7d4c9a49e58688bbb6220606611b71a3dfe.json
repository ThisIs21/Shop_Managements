{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport OwnerLayouts from \"@/components/OwnerLayouts.vue\";\nimport axios from \"axios\";\nexport default {\n  name: \"InventoryValueOwners\",\n  components: {\n    OwnerLayouts\n  },\n  data() {\n    return {\n      inventory: [],\n      filteredInventory: [],\n      categories: [],\n      selectedCategory: \"\",\n      loading: false,\n      errorMessage: \"\"\n    };\n  },\n  methods: {\n    async fetchInventory() {\n      this.loading = true;\n      this.errorMessage = \"\";\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (!token) {\n          this.errorMessage = \"Token autentikasi tidak ditemukan. Silakan login kembali.\";\n          return;\n        }\n        const response = await axios.get(\"http://localhost:8081/api/v1/owner/reports/inventory-detail\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        this.inventory = response.data.data || [];\n        this.filteredInventory = [...this.inventory];\n        this.categories = [...new Set(this.inventory.map(item => item.category))];\n      } catch (err) {\n        console.error(\"Failed to load inventory:\", err);\n        this.errorMessage = \"Gagal mengambil data inventaris. Periksa koneksi atau coba lagi.\";\n      } finally {\n        this.loading = false;\n      }\n    },\n    filterByCategory() {\n      if (!this.selectedCategory) {\n        this.filteredInventory = [...this.inventory];\n      } else {\n        this.filteredInventory = this.inventory.filter(item => item.category === this.selectedCategory);\n      }\n    },\n    async exportData(type) {\n      if (this.loading) return;\n      this.loading = true;\n      this.errorMessage = \"\";\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (!token) {\n          this.errorMessage = \"Token autentikasi tidak ditemukan. Silakan login kembali.\";\n          return;\n        }\n        const response = await axios.get(`http://localhost:8081/api/v1/owner/reports/inventory-detail?export=${type}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          },\n          responseType: type === \"pdf\" ? \"blob\" : \"text\"\n        });\n        const url = window.URL.createObjectURL(new Blob([response.data], {\n          type: type === \"pdf\" ? \"application/pdf\" : \"text/csv\"\n        }));\n        const link = document.createElement(\"a\");\n        link.href = url;\n        link.setAttribute(\"download\", `inventory_report.${type}`);\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        window.URL.revokeObjectURL(url);\n      } catch (err) {\n        console.error(\"Export failed:\", err);\n        this.errorMessage = \"Gagal mengekspor data. Periksa koneksi atau coba lagi.\";\n      } finally {\n        this.loading = false;\n      }\n    }\n  },\n  mounted() {\n    this.fetchInventory();\n  }\n};","map":{"version":3,"names":["OwnerLayouts","axios","name","components","data","inventory","filteredInventory","categories","selectedCategory","loading","errorMessage","methods","fetchInventory","token","localStorage","getItem","response","get","headers","Authorization","Set","map","item","category","err","console","error","filterByCategory","filter","exportData","type","responseType","url","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","body","appendChild","click","removeChild","revokeObjectURL","mounted"],"sources":["C:\\Users\\Personal\\Documents\\PKL\\penjualan\\vuee\\aplikasi\\src\\views\\InventoryValueOwners.vue"],"sourcesContent":["<template>\n  <OwnerLayouts>\n    <div class=\"layout-content-container flex flex-col max-w-[960px] flex-1\">\n      <!-- HEADER -->\n      <div class=\"flex flex-wrap justify-between gap-3 p-4\">\n        <div class=\"flex min-w-72 flex-col gap-3\">\n          <p\n            class=\"text-[#111418] tracking-light text-[32px] font-bold leading-tight\"\n          >\n            Inventory Value Report\n          </p>\n          <p class=\"text-[#60758a] text-sm font-normal leading-normal\">\n            View the total value of your inventory based on purchase price\n          </p>\n        </div>\n        <div class=\"flex items-center\">\n          <router-link to=\"/report-owners\">\n            <button\n              class=\"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-[#f0f2f5] text-[#111418] text-sm font-bold leading-normal tracking-[0.015em]\"\n            >\n              <span class=\"truncate\">Kembali ke Report Owners</span>\n            </button>\n          </router-link>\n        </div>\n      </div>\n\n      <!-- ALERT ERROR -->\n      <div\n        v-if=\"errorMessage\"\n        class=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mx-4\"\n        role=\"alert\"\n      >\n        <span class=\"block sm:inline\">{{ errorMessage }}</span>\n      </div>\n\n      <!-- FILTER -->\n      <h3\n        class=\"text-[#111418] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4\"\n      >\n        Filters\n      </h3>\n      <div class=\"flex max-w-[480px] flex-wrap items-end gap-4 px-4 py-3\">\n        <label class=\"flex flex-col min-w-40 flex-1\">\n          <p class=\"text-[#111418] text-base font-medium leading-normal pb-2\">\n            Category\n          </p>\n          <select\n            v-model=\"selectedCategory\"\n            @change=\"filterByCategory\"\n            class=\"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border border-[#dbe0e6] bg-white focus:border-[#dbe0e6] h-14 placeholder:text-[#60758a] p-[15px] text-base font-normal leading-normal\"\n          >\n            <option value=\"\">All Categories</option>\n            <option v-for=\"cat in categories\" :key=\"cat\" :value=\"cat\">\n              {{ cat }}\n            </option>\n          </select>\n        </label>\n      </div>\n\n      <!-- EXPORT BUTTONS -->\n      <div class=\"flex justify-stretch\">\n        <div class=\"flex flex-1 gap-3 flex-wrap px-4 py-3 justify-end\">\n          <button\n            @click=\"exportData('csv')\"\n            class=\"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-[#f0f2f5] text-[#111418] text-sm font-bold leading-normal tracking-[0.015em]\"\n            :disabled=\"loading\"\n          >\n            <span class=\"truncate\">Export to CSV</span>\n          </button>\n          <button\n            @click=\"exportData('pdf')\"\n            class=\"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-[#f0f2f5] text-[#111418] text-sm font-bold leading-normal tracking-[0.015em]\"\n            :disabled=\"loading\"\n          >\n            <span class=\"truncate\">Export to PDF</span>\n          </button>\n        </div>\n      </div>\n\n      <!-- TABLE -->\n      <div class=\"px-4 py-3 @container\">\n        <div\n          class=\"flex overflow-hidden rounded-lg border border-[#dbe0e6] bg-white\"\n        >\n          <table class=\"flex-1\">\n            <thead>\n              <tr class=\"bg-white\">\n                <th\n                  class=\"px-4 py-3 text-left text-[#111418] text-sm font-medium\"\n                >\n                  Product Name\n                </th>\n                <th\n                  class=\"px-4 py-3 text-left text-[#111418] text-sm font-medium\"\n                >\n                  Product Code\n                </th>\n                <th\n                  class=\"px-4 py-3 text-left text-[#111418] text-sm font-medium\"\n                >\n                  Category\n                </th>\n                <th\n                  class=\"px-4 py-3 text-left text-[#111418] text-sm font-medium\"\n                >\n                  Unit\n                </th>\n                <th\n                  class=\"px-4 py-3 text-left text-[#111418] text-sm font-medium\"\n                >\n                  Stock Quantity\n                </th>\n                <th\n                  class=\"px-4 py-3 text-left text-[#111418] text-sm font-medium\"\n                >\n                  Purchase Price\n                </th>\n                <th\n                  class=\"px-4 py-3 text-left text-[#111418] text-sm font-medium\"\n                >\n                  Total Stock Value\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              <!-- LOADING SPINNER -->\n              <tr v-if=\"loading\">\n                <td colspan=\"7\" class=\"text-center py-6\">\n                  <div class=\"flex justify-center items-center space-x-2\">\n                    <svg\n                      class=\"animate-spin h-6 w-6 text-gray-600\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      fill=\"none\"\n                      viewBox=\"0 0 24 24\"\n                    >\n                      <circle\n                        class=\"opacity-25\"\n                        cx=\"12\"\n                        cy=\"12\"\n                        r=\"10\"\n                        stroke=\"currentColor\"\n                        stroke-width=\"4\"\n                      ></circle>\n                      <path\n                        class=\"opacity-75\"\n                        fill=\"currentColor\"\n                        d=\"M4 12a8 8 0 018-8v8H4z\"\n                      ></path>\n                    </svg>\n                    <span>Loading data...</span>\n                  </div>\n                </td>\n              </tr>\n\n              <!-- DATA -->\n              <tr\n                v-for=\"item in filteredInventory\"\n                :key=\"item.product_code\"\n                class=\"border-t border-t-[#dbe0e6]\"\n                v-else\n              >\n                <td class=\"px-4 py-2 text-[#111418] text-sm\">\n                  {{ item.product_name }}\n                </td>\n                <td class=\"px-4 py-2 text-[#60758a] text-sm\">\n                  {{ item.product_code }}\n                </td>\n                <td class=\"px-4 py-2 text-[#60758a] text-sm\">\n                  {{ item.category }}\n                </td>\n                <td class=\"px-4 py-2 text-[#60758a] text-sm\">\n                  {{ item.unit }}\n                </td>\n                <td class=\"px-4 py-2 text-[#60758a] text-sm\">\n                  {{ item.stock_quantity }}\n                </td>\n                <td class=\"px-4 py-2 text-[#60758a] text-sm\">\n                  ${{ item.purchase_price.toFixed(2) }}\n                </td>\n                <td class=\"px-4 py-2 text-[#60758a] text-sm\">\n                  ${{ item.total_value.toFixed(2) }}\n                </td>\n              </tr>\n\n              <!-- EMPTY -->\n              <tr v-if=\"!loading && filteredInventory.length === 0\">\n                <td colspan=\"7\" class=\"text-center py-4 text-[#60758a]\">\n                  No data available\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  </OwnerLayouts>\n</template>\n\n<script>\nimport OwnerLayouts from \"@/components/OwnerLayouts.vue\";\nimport axios from \"axios\";\n\nexport default {\n  name: \"InventoryValueOwners\",\n  components: { OwnerLayouts },\n  data() {\n    return {\n      inventory: [],\n      filteredInventory: [],\n      categories: [],\n      selectedCategory: \"\",\n      loading: false,\n      errorMessage: \"\",\n    };\n  },\n  methods: {\n    async fetchInventory() {\n      this.loading = true;\n      this.errorMessage = \"\";\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (!token) {\n          this.errorMessage =\n            \"Token autentikasi tidak ditemukan. Silakan login kembali.\";\n          return;\n        }\n\n        const response = await axios.get(\n          \"http://localhost:8081/api/v1/owner/reports/inventory-detail\",\n          {\n            headers: { Authorization: `Bearer ${token}` },\n          }\n        );\n\n        this.inventory = response.data.data || [];\n        this.filteredInventory = [...this.inventory];\n        this.categories = [\n          ...new Set(this.inventory.map((item) => item.category)),\n        ];\n      } catch (err) {\n        console.error(\"Failed to load inventory:\", err);\n        this.errorMessage =\n          \"Gagal mengambil data inventaris. Periksa koneksi atau coba lagi.\";\n      } finally {\n        this.loading = false;\n      }\n    },\n    filterByCategory() {\n      if (!this.selectedCategory) {\n        this.filteredInventory = [...this.inventory];\n      } else {\n        this.filteredInventory = this.inventory.filter(\n          (item) => item.category === this.selectedCategory\n        );\n      }\n    },\n    async exportData(type) {\n      if (this.loading) return;\n\n      this.loading = true;\n      this.errorMessage = \"\";\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (!token) {\n          this.errorMessage =\n            \"Token autentikasi tidak ditemukan. Silakan login kembali.\";\n          return;\n        }\n\n        const response = await axios.get(\n          `http://localhost:8081/api/v1/owner/reports/inventory-detail?export=${type}`,\n          {\n            headers: { Authorization: `Bearer ${token}` },\n            responseType: type === \"pdf\" ? \"blob\" : \"text\",\n          }\n        );\n\n        const url = window.URL.createObjectURL(\n          new Blob([response.data], {\n            type: type === \"pdf\" ? \"application/pdf\" : \"text/csv\",\n          })\n        );\n        const link = document.createElement(\"a\");\n        link.href = url;\n        link.setAttribute(\"download\", `inventory_report.${type}`);\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        window.URL.revokeObjectURL(url);\n      } catch (err) {\n        console.error(\"Export failed:\", err);\n        this.errorMessage =\n          \"Gagal mengekspor data. Periksa koneksi atau coba lagi.\";\n      } finally {\n        this.loading = false;\n      }\n    },\n  },\n  mounted() {\n    this.fetchInventory();\n  },\n};\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}