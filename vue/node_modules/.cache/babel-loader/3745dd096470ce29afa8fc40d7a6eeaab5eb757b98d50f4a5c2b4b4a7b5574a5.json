{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\nimport { ref, computed } from \"vue\";\nimport axios from \"axios\";\nimport CashierSidebar from \"../components/CashierSidebar.vue\";\n\n// ðŸ”¹ Dummy products (bisa diganti ambil dari API)\n\nexport default {\n  __name: 'CashierPage',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const products = ref([{\n      id: 1,\n      name: \"Kaos Polos Hitam\",\n      price: 50,\n      stock: 10\n    }, {\n      id: 2,\n      name: \"Kemeja Putih\",\n      price: 80,\n      stock: 5\n    }, {\n      id: 3,\n      name: \"Jaket Hoodie\",\n      price: 120,\n      stock: 3\n    }]);\n    const cart = ref([]);\n    const addToCart = product => {\n      const existing = cart.value.find(item => item.id === product.id);\n      if (existing) {\n        if (existing.qty < product.stock) {\n          existing.qty++;\n        }\n      } else {\n        cart.value.push({\n          ...product,\n          qty: 1\n        });\n      }\n    };\n    const removeFromCart = index => {\n      cart.value.splice(index, 1);\n    };\n\n    // ðŸ”¹ Order Summary\n    const subtotal = computed(() => cart.value.reduce((sum, item) => sum + item.price * item.qty, 0));\n    const tax = computed(() => subtotal.value * 0.1);\n    const total = computed(() => subtotal.value + tax.value);\n\n    // ðŸ”¹ Payment\n    const selectedPaymentMethod = ref(\"cash\");\n    const amountReceived = ref(0);\n    const change = computed(() => {\n      const received = parseFloat(amountReceived.value);\n      return received > total.value ? received - total.value : 0;\n    });\n    const formatCurrency = val => `Rp${Number(val).toLocaleString()}`;\n\n    // ðŸ”¹ Backend API\n    const handlePayNow = async () => {\n      if (cart.value.length === 0) {\n        alert(\"Cart masih kosong!\");\n        return;\n      }\n      try {\n        const token = localStorage.getItem(\"token\");\n        const response = await axios.post(\"http://localhost:8081/api/v1/sales\", {\n          customer_id: 1,\n          voucher_code: null,\n          date: new Date().toISOString(),\n          items: cart.value.map(item => ({\n            product_id: item.id,\n            qty: item.qty,\n            price: item.price\n          }))\n        }, {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            \"Content-Type\": \"application/json\"\n          }\n        });\n        alert(\"Pembayaran berhasil! ID Transaksi: \" + response.data.data.id);\n        cart.value = []; // kosongkan cart setelah berhasil\n      } catch (err) {\n        console.error(err);\n        alert(\"Gagal melakukan pembayaran: \" + (err.response?.data?.message || err.message));\n      }\n    };\n    const handlePrintReceipt = () => {\n      alert(\"Mencetak struk...\");\n    };\n    const __returned__ = {\n      products,\n      cart,\n      addToCart,\n      removeFromCart,\n      subtotal,\n      tax,\n      total,\n      selectedPaymentMethod,\n      amountReceived,\n      change,\n      formatCurrency,\n      handlePayNow,\n      handlePrintReceipt,\n      ref,\n      computed,\n      get axios() {\n        return axios;\n      },\n      CashierSidebar\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","axios","CashierSidebar","products","id","name","price","stock","cart","addToCart","product","existing","value","find","item","qty","push","removeFromCart","index","splice","subtotal","reduce","sum","tax","total","selectedPaymentMethod","amountReceived","change","received","parseFloat","formatCurrency","val","Number","toLocaleString","handlePayNow","length","alert","token","localStorage","getItem","response","post","customer_id","voucher_code","date","Date","toISOString","items","map","product_id","headers","Authorization","data","err","console","error","message","handlePrintReceipt"],"sources":["C:/Users/SPC STYLE 5/aplikasi/src/views/CashierPage.vue"],"sourcesContent":["<template>\n  <div\n    class=\"relative flex size-full min-h-screen flex-col bg-white group/design-root overflow-x-hidden\"\n    style=\"font-family: Manrope, 'Noto Sans', sans-serif\"\n  >\n    <div class=\"layout-container flex h-full grow\">\n      <CashierSidebar />\n\n      <main\n        class=\"flex flex-col flex-1 pt-10 pb-10 px-8 max-w-5xl mx-auto w-full\"\n      >\n        <h2 class=\"text-2xl font-bold text-[#111418] mb-8 text-center\">\n          Cashier - Create Order\n        </h2>\n\n        <!-- ðŸ”¹ Product List -->\n        <section class=\"mb-8\">\n          <h3 class=\"text-lg font-semibold text-[#111418] mb-3 text-left\">\n            Select Clothes\n          </h3>\n          <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div\n              v-for=\"product in products\"\n              :key=\"product.id\"\n              class=\"border rounded-lg p-4 flex flex-col justify-between\"\n            >\n              <div>\n                <h4 class=\"font-semibold text-[#111418]\">\n                  {{ product.name }}\n                </h4>\n                <p class=\"text-sm text-[#60758a]\">\n                  Price: {{ formatCurrency(product.price) }}\n                </p>\n                <p class=\"text-sm text-green-600\">\n                  Stock: {{ product.stock }}\n                </p>\n              </div>\n              <button\n                @click=\"addToCart(product)\"\n                class=\"mt-3 w-full rounded-lg bg-[#0d80f2] py-2 text-white text-sm font-medium hover:bg-[#0a6ad1] transition\"\n              >\n                Add to Cart\n              </button>\n            </div>\n          </div>\n        </section>\n\n        <!-- ðŸ”¹ Cart -->\n        <section class=\"mb-8\" v-if=\"cart.length > 0\">\n          <h3 class=\"text-lg font-semibold text-[#111418] mb-3 text-left\">\n            Cart\n          </h3>\n          <table class=\"w-full text-left border\">\n            <thead>\n              <tr class=\"bg-[#f8f9fa]\">\n                <th class=\"p-2\">Item</th>\n                <th class=\"p-2\">Qty</th>\n                <th class=\"p-2\">Price</th>\n                <th class=\"p-2\">Subtotal</th>\n                <th class=\"p-2\">Action</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr\n                v-for=\"(item, index) in cart\"\n                :key=\"item.id\"\n                class=\"border-t\"\n              >\n                <td class=\"p-2\">{{ item.name }}</td>\n                <td class=\"p-2\">\n                  <input\n                    type=\"number\"\n                    v-model.number=\"item.qty\"\n                    min=\"1\"\n                    :max=\"item.stock\"\n                    class=\"w-16 border rounded p-1\"\n                  />\n                </td>\n                <td class=\"p-2\">{{ formatCurrency(item.price) }}</td>\n                <td class=\"p-2\">\n                  {{ formatCurrency(item.price * item.qty) }}\n                </td>\n                <td class=\"p-2\">\n                  <button\n                    @click=\"removeFromCart(index)\"\n                    class=\"text-red-600 hover:underline\"\n                  >\n                    Remove\n                  </button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </section>\n\n        <!-- ðŸ”¹ Order Summary -->\n        <section class=\"mb-8\" v-if=\"cart.length > 0\">\n          <h3 class=\"text-lg font-semibold text-[#111418] mb-3 text-left\">\n            Order Summary\n          </h3>\n          <div class=\"space-y-3\">\n            <div class=\"flex justify-between items-center text-base text-[#60758a]\">\n              <span>Subtotal</span>\n              <span>{{ formatCurrency(subtotal) }}</span>\n            </div>\n            <div class=\"flex justify-between items-center text-base text-[#60758a]\">\n              <span>Tax (10%)</span>\n              <span>{{ formatCurrency(tax) }}</span>\n            </div>\n            <div\n              class=\"flex justify-between items-center border-t border-[#dbe0e6] pt-3 text-lg font-bold text-[#111418]\"\n            >\n              <span>Total</span>\n              <span>{{ formatCurrency(total) }}</span>\n            </div>\n          </div>\n        </section>\n\n        <!-- ðŸ”¹ Payment Method -->\n        <section class=\"mb-8\" v-if=\"cart.length > 0\">\n          <h3 class=\"text-lg font-semibold text-[#111418] mb-3 text-left\">\n            Payment Method\n          </h3>\n          <label\n            class=\"flex items-center gap-3 rounded-lg border border-[#dbe0e6] p-4 cursor-pointer bg-[#f8f9fa]\"\n          >\n            <input\n              type=\"radio\"\n              class=\"h-5 w-5 accent-[#0d80f2]\"\n              name=\"paymentMethod\"\n              value=\"cash\"\n              v-model=\"selectedPaymentMethod\"\n            />\n            <span class=\"text-base font-medium\">Cash</span>\n          </label>\n        </section>\n\n        <!-- ðŸ”¹ Cash Input -->\n        <div class=\"mb-8\" v-if=\"selectedPaymentMethod === 'cash' && cart.length > 0\">\n          <label class=\"block\">\n            <span class=\"block text-sm font-medium text-[#111418] mb-1\">\n              Amount Received\n            </span>\n            <input\n              v-model.number=\"amountReceived\"\n              type=\"number\"\n              placeholder=\"Enter amount\"\n              class=\"w-full rounded-lg border border-[#dbe0e6] p-3 text-base text-[#111418]\"\n            />\n          </label>\n          <p class=\"text-sm text-[#60758a]\">\n            Change:\n            <span class=\"font-semibold text-[#111418]\">\n              {{ formatCurrency(change) }}\n            </span>\n          </p>\n        </div>\n\n        <!-- ðŸ”¹ Buttons -->\n        <div class=\"flex flex-col gap-4 w-full max-w-sm mx-auto mt-8\" v-if=\"cart.length > 0\">\n          <button\n            @click=\"handlePayNow\"\n            class=\"w-full rounded-lg bg-[#0d80f2] py-4 text-white text-lg font-semibold shadow-sm hover:bg-[#0a6ad1] transition\"\n          >\n            Pay Now\n          </button>\n          <button\n            @click=\"handlePrintReceipt\"\n            class=\"w-full rounded-lg bg-[#f0f2f5] py-4 text-[#111418] text-lg font-semibold border border-[#dbe0e6] shadow-sm hover:bg-[#e6e8eb] transition\"\n          >\n            Print Receipt\n          </button>\n        </div>\n      </main>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from \"vue\";\nimport axios from \"axios\";\nimport CashierSidebar from \"../components/CashierSidebar.vue\";\n\n// ðŸ”¹ Dummy products (bisa diganti ambil dari API)\nconst products = ref([\n  { id: 1, name: \"Kaos Polos Hitam\", price: 50, stock: 10 },\n  { id: 2, name: \"Kemeja Putih\", price: 80, stock: 5 },\n  { id: 3, name: \"Jaket Hoodie\", price: 120, stock: 3 },\n]);\n\nconst cart = ref([]);\n\nconst addToCart = (product) => {\n  const existing = cart.value.find((item) => item.id === product.id);\n  if (existing) {\n    if (existing.qty < product.stock) {\n      existing.qty++;\n    }\n  } else {\n    cart.value.push({ ...product, qty: 1 });\n  }\n};\n\nconst removeFromCart = (index) => {\n  cart.value.splice(index, 1);\n};\n\n// ðŸ”¹ Order Summary\nconst subtotal = computed(() =>\n  cart.value.reduce((sum, item) => sum + item.price * item.qty, 0)\n);\nconst tax = computed(() => subtotal.value * 0.1);\nconst total = computed(() => subtotal.value + tax.value);\n\n// ðŸ”¹ Payment\nconst selectedPaymentMethod = ref(\"cash\");\nconst amountReceived = ref(0);\nconst change = computed(() => {\n  const received = parseFloat(amountReceived.value);\n  return received > total.value ? received - total.value : 0;\n});\n\nconst formatCurrency = (val) => `Rp${Number(val).toLocaleString()}`;\n\n// ðŸ”¹ Backend API\nconst handlePayNow = async () => {\n  if (cart.value.length === 0) {\n    alert(\"Cart masih kosong!\");\n    return;\n  }\n  try {\n    const token = localStorage.getItem(\"token\");\n    const response = await axios.post(\n      \"http://localhost:8081/api/v1/sales\",\n      {\n        customer_id: 1,\n        voucher_code: null,\n        date: new Date().toISOString(),\n        items: cart.value.map((item) => ({\n          product_id: item.id,\n          qty: item.qty,\n          price: item.price,\n        })),\n      },\n      {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          \"Content-Type\": \"application/json\",\n        },\n      }\n    );\n    alert(\"Pembayaran berhasil! ID Transaksi: \" + response.data.data.id);\n    cart.value = []; // kosongkan cart setelah berhasil\n  } catch (err) {\n    console.error(err);\n    alert(\"Gagal melakukan pembayaran: \" + (err.response?.data?.message || err.message));\n  }\n};\n\nconst handlePrintReceipt = () => {\n  alert(\"Mencetak struk...\");\n};\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}