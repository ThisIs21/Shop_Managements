{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport { ref, onMounted } from 'vue';\nimport PurchasingLayouts from '../components/PurchasingLayouts.vue';\nimport axios from 'axios';\n\n// State untuk menyimpan data dashboard\n\nexport default {\n  __name: 'DashboardPembelian',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const dashboardData = ref({\n      purchase_orders_to_process: 0,\n      returns_to_review: 0,\n      products_in_stock: 0\n    });\n\n    // Fungsi untuk mengambil data dari backend\n    const fetchDashboardData = async () => {\n      try {\n        // Ambil jumlah purchase orders dengan status SUBMITTED\n        const purchaseResponse = await axios.get('/api/v1/pembelian/purchases', {\n          params: {\n            status: 'SUBMITTED',\n            size: 1\n          },\n          // size=1 untuk mengurangi data\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        dashboardData.value.purchase_orders_to_process = purchaseResponse.data.total || 0;\n\n        // Ambil jumlah purchase returns dengan status PENDING\n        const returnResponse = await axios.get('/api/v1/pembelian/purchase-returns', {\n          params: {\n            status: 'PENDING',\n            size: 1\n          },\n          // size=1 untuk mengurangi data\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        dashboardData.value.returns_to_review = returnResponse.data.total || 0;\n\n        // Ambil jumlah produk dengan stok > 0\n        const productResponse = await axios.get('/api/v1/products', {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        // Filter produk dengan stok > 0\n        const productsInStock = productResponse.data.filter(product => product.stock > 0);\n        dashboardData.value.products_in_stock = productsInStock.length;\n      } catch (error) {\n        console.error('Gagal mengambil data dashboard:', error);\n      }\n    };\n\n    // Panggil fungsi saat komponen dimuat\n    onMounted(fetchDashboardData);\n    const __returned__ = {\n      dashboardData,\n      fetchDashboardData,\n      ref,\n      onMounted,\n      PurchasingLayouts,\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","PurchasingLayouts","axios","dashboardData","purchase_orders_to_process","returns_to_review","products_in_stock","fetchDashboardData","purchaseResponse","get","params","status","size","headers","Authorization","localStorage","getItem","value","data","total","returnResponse","productResponse","productsInStock","filter","product","stock","length","error","console"],"sources":["C:/Users/Personal/Documents/PKL/aplikasi/aplikasi/src/views/DashboardPembelian.vue"],"sourcesContent":["<template>\n  <PurchasingLayouts>\n    <div class=\"p-8\">\n      <div class=\"mb-6\">\n        <h1 class=\"text-[#111418] text-[32px] font-bold leading-tight tracking-[-0.015em]\">\n          Purchase Dashboard\n        </h1>\n        <p class=\"text-[#60758a] text-sm font-normal leading-normal mt-1\">\n          Welcome back, Sarah! Here's an overview of your purchase activities.\n        </p>\n      </div>\n\n      <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8\">\n        <div class=\"flex flex-col gap-2 rounded-lg p-6 border border-[#dbe0e6]\">\n          <p class=\"text-[#111418] text-base font-medium leading-normal\">\n            Purchase Orders to Process\n          </p>\n          <p class=\"text-[#111418] text-2xl font-bold leading-tight\">\n            {{ dashboardData.purchase_orders_to_process || 0 }}\n          </p>\n        </div>\n        <div class=\"flex flex-col gap-2 rounded-lg p-6 border border-[#dbe0e6]\">\n          <p class=\"text-[#111418] text-base font-medium leading-normal\">\n            Returns to Review\n          </p>\n          <p class=\"text-[#111418] text-2xl font-bold leading-tight\">\n            {{ dashboardData.returns_to_review || 0 }}\n          </p>\n        </div>\n        <div class=\"flex flex-col gap-2 rounded-lg p-6 border border-[#dbe0e6]\">\n          <p class=\"text-[#111418] text-base font-medium leading-normal\">\n            Products in Stock\n          </p>\n          <p class=\"text-[#111418] text-2xl font-bold leading-tight\">\n            {{ dashboardData.products_in_stock || 0 }}\n          </p>\n        </div>\n      </div>\n    </div>\n  </PurchasingLayouts>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue';\nimport PurchasingLayouts from '../components/PurchasingLayouts.vue';\nimport axios from 'axios';\n\n// State untuk menyimpan data dashboard\nconst dashboardData = ref({\n  purchase_orders_to_process: 0,\n  returns_to_review: 0,\n  products_in_stock: 0,\n});\n\n// Fungsi untuk mengambil data dari backend\nconst fetchDashboardData = async () => {\n  try {\n    // Ambil jumlah purchase orders dengan status SUBMITTED\n    const purchaseResponse = await axios.get('/api/v1/pembelian/purchases', {\n      params: { status: 'SUBMITTED', size: 1 }, // size=1 untuk mengurangi data\n      headers: { Authorization: `Bearer ${localStorage.getItem('token')}` },\n    });\n    dashboardData.value.purchase_orders_to_process = purchaseResponse.data.total || 0;\n\n    // Ambil jumlah purchase returns dengan status PENDING\n    const returnResponse = await axios.get('/api/v1/pembelian/purchase-returns', {\n      params: { status: 'PENDING', size: 1 }, // size=1 untuk mengurangi data\n      headers: { Authorization: `Bearer ${localStorage.getItem('token')}` },\n    });\n    dashboardData.value.returns_to_review = returnResponse.data.total || 0;\n\n    // Ambil jumlah produk dengan stok > 0\n    const productResponse = await axios.get('/api/v1/products', {\n      headers: { Authorization: `Bearer ${localStorage.getItem('token')}` },\n    });\n    // Filter produk dengan stok > 0\n    const productsInStock = productResponse.data.filter(product => product.stock > 0);\n    dashboardData.value.products_in_stock = productsInStock.length;\n\n  } catch (error) {\n    console.error('Gagal mengambil data dashboard:', error);\n  }\n};\n\n// Panggil fungsi saat komponen dimuat\nonMounted(fetchDashboardData);\n</script>"],"mappings":";;AA2CA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,OAAOC,iBAAiB,MAAM,qCAAqC;AACnE,OAAOC,KAAK,MAAM,OAAO;;AAEzB;;;;;;;;IACA,MAAMC,aAAa,GAAGJ,GAAG,CAAC;MACxBK,0BAA0B,EAAE,CAAC;MAC7BC,iBAAiB,EAAE,CAAC;MACpBC,iBAAiB,EAAE;IACrB,CAAC,CAAC;;IAEF;IACA,MAAMC,kBAAkB,GAAG,MAAAA,CAAA,KAAY;MACrC,IAAI;QACF;QACA,MAAMC,gBAAgB,GAAG,MAAMN,KAAK,CAACO,GAAG,CAAC,6BAA6B,EAAE;UACtEC,MAAM,EAAE;YAAEC,MAAM,EAAE,WAAW;YAAEC,IAAI,EAAE;UAAE,CAAC;UAAE;UAC1CC,OAAO,EAAE;YAAEC,aAAa,EAAE,UAAUC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;UAAG;QACtE,CAAC,CAAC;QACFb,aAAa,CAACc,KAAK,CAACb,0BAA0B,GAAGI,gBAAgB,CAACU,IAAI,CAACC,KAAK,IAAI,CAAC;;QAEjF;QACA,MAAMC,cAAc,GAAG,MAAMlB,KAAK,CAACO,GAAG,CAAC,oCAAoC,EAAE;UAC3EC,MAAM,EAAE;YAAEC,MAAM,EAAE,SAAS;YAAEC,IAAI,EAAE;UAAE,CAAC;UAAE;UACxCC,OAAO,EAAE;YAAEC,aAAa,EAAE,UAAUC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;UAAG;QACtE,CAAC,CAAC;QACFb,aAAa,CAACc,KAAK,CAACZ,iBAAiB,GAAGe,cAAc,CAACF,IAAI,CAACC,KAAK,IAAI,CAAC;;QAEtE;QACA,MAAME,eAAe,GAAG,MAAMnB,KAAK,CAACO,GAAG,CAAC,kBAAkB,EAAE;UAC1DI,OAAO,EAAE;YAAEC,aAAa,EAAE,UAAUC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;UAAG;QACtE,CAAC,CAAC;QACF;QACA,MAAMM,eAAe,GAAGD,eAAe,CAACH,IAAI,CAACK,MAAM,CAACC,OAAO,IAAIA,OAAO,CAACC,KAAK,GAAG,CAAC,CAAC;QACjFtB,aAAa,CAACc,KAAK,CAACX,iBAAiB,GAAGgB,eAAe,CAACI,MAAM;MAEhE,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;MACzD;IACF,CAAC;;IAED;IACA3B,SAAS,CAACO,kBAAkB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}