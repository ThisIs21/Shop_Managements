{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, onMounted } from \"vue\";\nimport OwnerLayouts from \"../components/OwnerLayouts.vue\";\nimport axios from \"axios\";\nimport { useRouter } from \"vue-router\";\nexport default {\n  __name: 'AddProductOwner',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const product = ref({\n      name: \"\",\n      cost_price: null,\n      sell_price: null,\n      stock: 0,\n      category_id: null,\n      unit_id: null,\n      supplier_id: null\n    });\n    const categories = ref([]);\n    const units = ref([]);\n    const suppliers = ref([]);\n    const fetchData = async () => {\n      const token = localStorage.getItem(\"token\");\n      if (!token) return;\n      try {\n        const [catRes, unitRes, supRes] = await Promise.all([axios.get(\"http:localhost:8081/api/v1/owner/categories\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }), axios.get(\"http:localhost:8081/api/v1/owner/units\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }), axios.get(\"http:localhost:8081/api/v1/ownersuppliers\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        })]);\n        categories.value = catRes.data.data.map(c => ({\n          id: c.ID,\n          name: c.Name\n        }));\n        units.value = unitRes.data.data.map(u => ({\n          id: u.ID,\n          name: u.Name\n        }));\n        suppliers.value = supRes.data.data.map(s => ({\n          id: s.ID,\n          name: s.Name\n        }));\n      } catch (err) {\n        console.error(err);\n      }\n    };\n    const createProduct = async () => {\n      const token = localStorage.getItem(\"token\");\n      if (!token) return alert(\"Please login\");\n      try {\n        await axios.post(\"http:localhost:8081/api/v1/products\", product.value, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        alert(\"Product added\");\n        router.push(\"/management-product\");\n      } catch (err) {\n        console.error(err);\n        alert(\"Failed to add product\");\n      }\n    };\n    onMounted(() => fetchData());\n    const __returned__ = {\n      router,\n      product,\n      categories,\n      units,\n      suppliers,\n      fetchData,\n      createProduct,\n      ref,\n      onMounted,\n      OwnerLayouts,\n      get axios() {\n        return axios;\n      },\n      get useRouter() {\n        return useRouter;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","OwnerLayouts","axios","useRouter","router","product","name","cost_price","sell_price","stock","category_id","unit_id","supplier_id","categories","units","suppliers","fetchData","token","localStorage","getItem","catRes","unitRes","supRes","Promise","all","get","headers","Authorization","value","data","map","c","id","ID","Name","u","s","err","console","error","createProduct","alert","post","push"],"sources":["C:/Users/Personal/Documents/PKL/aplikasi/aplikasi/src/views/AddProductOwner.vue"],"sourcesContent":["<template>\n  <OwnerLayouts>\n    <div class=\"flex flex-1 flex-col py-5 p-8\">\n      <div class=\"layout-content-container flex flex-col flex-1\">\n        <form @submit.prevent=\"createProduct\" class=\"flex flex-col flex-1\">\n          <!-- Header -->\n          <div class=\"flex flex-wrap justify-between gap-3 p-4\">\n            <div class=\"flex flex-col gap-3\">\n              <p\n                class=\"text-[#111418] tracking-light text-[32px] font-bold leading-tight\"\n              >\n                Add Product\n              </p>\n            </div>\n          </div>\n\n          <!-- Form Inputs -->\n          <div class=\"flex flex-col gap-4 p-4\">\n            <div>\n              <label>Product Name</label>\n              <input\n                type=\"text\"\n                v-model=\"product.name\"\n                class=\"w-full border p-2 rounded\"\n                required\n              />\n            </div>\n\n            <div>\n              <label>Purchase Price</label>\n              <input\n                type=\"number\"\n                v-model.number=\"product.cost_price\"\n                class=\"w-full border p-2 rounded\"\n                required\n              />\n            </div>\n\n            <div>\n              <label>Selling Price</label>\n              <input\n                type=\"number\"\n                v-model.number=\"product.sell_price\"\n                class=\"w-full border p-2 rounded\"\n                required\n              />\n            </div>\n\n            <div>\n              <label>Stock</label>\n              <input\n                type=\"number\"\n                v-model.number=\"product.stock\"\n                class=\"w-full border p-2 rounded\"\n              />\n            </div>\n\n            <!-- Dropdowns -->\n            <div>\n              <label>Category</label>\n              <select\n                v-model.number=\"product.category_id\"\n                class=\"w-full border p-2 rounded\"\n                required\n              >\n                <option disabled value=\"\">Select category</option>\n                <option v-for=\"cat in categories\" :key=\"cat.id\" :value=\"cat.id\">\n                  {{ cat.name }}\n                </option>\n              </select>\n            </div>\n\n            <div>\n              <label>Unit</label>\n              <select\n                v-model.number=\"product.unit_id\"\n                class=\"w-full border p-2 rounded\"\n                required\n              >\n                <option disabled value=\"\">Select unit</option>\n                <option v-for=\"unit in units\" :key=\"unit.id\" :value=\"unit.id\">\n                  {{ unit.name }}\n                </option>\n              </select>\n            </div>\n\n            <div>\n              <label>Supplier</label>\n              <select\n                v-model.number=\"product.supplier_id\"\n                class=\"w-full border p-2 rounded\"\n                required\n              >\n                <option disabled value=\"\">Select supplier</option>\n                <option v-for=\"sup in suppliers\" :key=\"sup.id\" :value=\"sup.id\">\n                  {{ sup.name }}\n                </option>\n              </select>\n            </div>\n          </div>\n\n          <!-- Buttons -->\n          <div class=\"flex justify-end p-4 gap-3\">\n            <router-link to=\"/management-product\">\n              <button type=\"button\" class=\"bg-gray-300 px-4 py-2 rounded\">\n                Cancel\n              </button>\n            </router-link>\n            <button\n              type=\"submit\"\n              class=\"bg-blue-500 text-white px-4 py-2 rounded\"\n            >\n              Save\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </OwnerLayouts>\n</template>\n\n<script setup>\nimport { ref, onMounted } from \"vue\";\nimport OwnerLayouts from \"../components/OwnerLayouts.vue\";\nimport axios from \"axios\";\nimport { useRouter } from \"vue-router\";\n\nconst router = useRouter();\n\nconst product = ref({\n  name: \"\",\n  cost_price: null,\n  sell_price: null,\n  stock: 0,\n  category_id: null,\n  unit_id: null,\n  supplier_id: null,\n});\n\nconst categories = ref([]);\nconst units = ref([]);\nconst suppliers = ref([]);\n\nconst fetchData = async () => {\n  const token = localStorage.getItem(\"token\");\n  if (!token) return;\n\n  try {\n    const [catRes, unitRes, supRes] = await Promise.all([\n      axios.get(\"http:localhost:8081/api/v1/owner/categories\", {\n        headers: { Authorization: `Bearer ${token}` },\n      }),\n      axios.get(\"http:localhost:8081/api/v1/owner/units\", {\n        headers: { Authorization: `Bearer ${token}` },\n      }),\n      axios.get(\"http:localhost:8081/api/v1/ownersuppliers\", {\n        headers: { Authorization: `Bearer ${token}` },\n      }),\n    ]);\n\n    categories.value = catRes.data.data.map((c) => ({\n      id: c.ID,\n      name: c.Name,\n    }));\n    units.value = unitRes.data.data.map((u) => ({ id: u.ID, name: u.Name }));\n    suppliers.value = supRes.data.data.map((s) => ({ id: s.ID, name: s.Name }));\n  } catch (err) {\n    console.error(err);\n  }\n};\n\nconst createProduct = async () => {\n  const token = localStorage.getItem(\"token\");\n  if (!token) return alert(\"Please login\");\n\n  try {\n    await axios.post(\n      \"http:localhost:8081/api/v1/products\",\n      product.value,\n      {\n        headers: { Authorization: `Bearer ${token}` },\n      }\n    );\n    alert(\"Product added\");\n    router.push(\"/management-product\");\n  } catch (err) {\n    console.error(err);\n    alert(\"Failed to add product\");\n  }\n};\n\nonMounted(() => fetchData());\n</script>\n\n<style scoped>\n/* Opsional styling */\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}