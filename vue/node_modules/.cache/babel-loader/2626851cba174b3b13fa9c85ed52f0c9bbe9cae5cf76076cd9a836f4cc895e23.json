{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport axios from \"axios\";\nimport OwnerLayouts from \"../components/OwnerLayouts.vue\";\nexport default {\n  __name: 'EditUsers',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const user = ref({\n      name: \"\",\n      email: \"\",\n      password: \"\",\n      role_id: \"\",\n      status: \"active\" // Default value\n    });\n    const roles = ref([]);\n    const router = useRouter();\n\n    // Fungsi untuk mengambil daftar role dari backend\n    const fetchRoles = async () => {\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (!token) {\n          console.error(\"No JWT token found in localStorage.\");\n          return;\n        }\n        const apiUrl = \"http://192.168.100.111:8081/api/v1/roles\";\n        const response = await axios.get(apiUrl, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (response.data && response.data.data) {\n          roles.value = response.data.data;\n        }\n      } catch (error) {\n        console.error(\"Error fetching roles:\", error.response ? error.response.data : error.message);\n      }\n    };\n\n    // Fungsi untuk mengirim data user baru ke backend\n    const createUser = async () => {\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (!token) {\n          console.error(\"No JWT token found in localStorage.\");\n          return;\n        }\n\n        // Validasi sederhana\n        if (!user.value.name || !user.value.email || !user.value.password || !user.value.role_id) {\n          alert(\"Please fill in all required fields.\");\n          return;\n        }\n        const apiUrl = \"http://192.168.100.111:8081/api/v1/users\";\n        const response = await axios.post(apiUrl, user.value, {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`\n          }\n        });\n        console.log(\"User created successfully:\", response.data);\n\n        // Navigasi kembali ke halaman manajemen pengguna setelah berhasil\n        router.push(\"/management-user\");\n      } catch (error) {\n        console.error(\"Error creating user:\", error.response ? error.response.data : error.message);\n        alert(\"Failed to create user. Please check the console for details.\");\n      }\n    };\n    onMounted(() => {\n      fetchRoles();\n    });\n    const __returned__ = {\n      user,\n      roles,\n      router,\n      fetchRoles,\n      createUser,\n      ref,\n      onMounted,\n      get useRouter() {\n        return useRouter;\n      },\n      get axios() {\n        return axios;\n      },\n      OwnerLayouts\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","useRouter","axios","OwnerLayouts","user","name","email","password","role_id","status","roles","router","fetchRoles","token","localStorage","getItem","console","error","apiUrl","response","get","headers","Authorization","data","value","message","createUser","alert","post","log","push"],"sources":["C:/Users/SPC STYLE 5/aplikasi/src/views/EditUsers.vue"],"sourcesContent":["<template>\r\n  <OwnerLayouts>\r\n    <div class=\"p-8\">\r\n      <div class=\"flex flex-wrap items-center justify-between gap-3 p-4\">\r\n        <p\r\n          class=\"text-[#111418] tracking-light text-[32px] font-bold leading-tight min-w-72\"\r\n        >\r\n          Edit User\r\n        </p>\r\n        <router-link\r\n          to=\"/management-user\"\r\n          class=\"flex items-center gap-2 text-[#60758a] text-base font-normal leading-normal\"\r\n        >\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            width=\"20px\"\r\n            height=\"20px\"\r\n            viewBox=\"0 0 24 24\"\r\n            fill=\"none\"\r\n            stroke=\"currentColor\"\r\n            stroke-width=\"2\"\r\n            stroke-linecap=\"round\"\r\n            stroke-linejoin=\"round\"\r\n          >\r\n            <path d=\"M19 12H5\"></path>\r\n            <path d=\"M12 19L5 12L12 5\"></path>\r\n          </svg>\r\n          <span class=\"truncate\">Kembali</span>\r\n        </router-link>\r\n      </div>\r\n\r\n      <form\r\n        @submit.prevent=\"createUser\"\r\n        class=\"flex flex-col w-[512px] max-w-[512px] py-5\"\r\n      >\r\n        <div class=\"flex flex-col flex-wrap items-end gap-4 px-4 py-3\">\r\n          <label class=\"flex flex-col min-w-40 flex-1 w-full\">\r\n            <p class=\"text-[#111418] text-base font-medium leading-normal pb-2\">\r\n              Name\r\n            </p>\r\n            <input\r\n              v-model=\"user.name\"\r\n              placeholder=\"Enter name\"\r\n              class=\"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border border-[#dbe0e6] bg-white focus:border-[#dbe0e6] h-14 placeholder:text-[#60758a] p-[15px] text-base font-normal leading-normal\"\r\n            />\r\n          </label>\r\n        </div>\r\n        <div class=\"flex flex-col flex-wrap items-end gap-4 px-4 py-3\">\r\n          <label class=\"flex flex-col min-w-40 flex-1 w-full\">\r\n            <p class=\"text-[#111418] text-base font-medium leading-normal pb-2\">\r\n              Email\r\n            </p>\r\n            <input\r\n              v-model=\"user.email\"\r\n              type=\"email\"\r\n              placeholder=\"Enter email\"\r\n              class=\"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border border-[#dbe0e6] bg-white focus:border-[#dbe0e6] h-14 placeholder:text-[#60758a] p-[15px] text-base font-normal leading-normal\"\r\n            />\r\n          </label>\r\n        </div>\r\n        <div class=\"flex flex-col flex-wrap items-end gap-4 px-4 py-3\">\r\n          <label class=\"flex flex-col min-w-40 flex-1 w-full\">\r\n            <p class=\"text-[#111418] text-base font-medium leading-normal pb-2\">\r\n              Password\r\n            </p>\r\n            <input\r\n              v-model=\"user.password\"\r\n              type=\"password\"\r\n              placeholder=\"Enter password\"\r\n              class=\"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border border-[#dbe0e6] bg-white focus:border-[#dbe0e6] h-14 placeholder:text-[#60758a] p-[15px] text-base font-normal leading-normal\"\r\n            />\r\n          </label>\r\n        </div>\r\n        <div class=\"flex flex-col flex-wrap items-end gap-4 px-4 py-3\">\r\n          <label class=\"flex flex-col min-w-40 flex-1 w-full\">\r\n            <p class=\"text-[#111418] text-base font-medium leading-normal pb-2\">\r\n              Role\r\n            </p>\r\n            <select\r\n              v-model=\"user.role_id\"\r\n              class=\"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border border-[#dbe0e6] bg-white focus:border-[#dbe0e6] h-14 placeholder:text-[#60758a] p-[15px] text-base font-normal leading-normal\"\r\n            >\r\n              <option v-for=\"role in roles\" :key=\"role.ID\" :value=\"role.ID\">\r\n                {{ role.Name }}\r\n              </option>\r\n            </select>\r\n          </label>\r\n        </div>\r\n        <div class=\"flex flex-col flex-wrap items-end gap-4 px-4 py-3\">\r\n          <label class=\"flex flex-col min-w-40 flex-1 w-full\">\r\n            <p class=\"text-[#111418] text-base font-medium leading-normal pb-2\">\r\n              Status\r\n            </p>\r\n            <select\r\n              v-model=\"user.status\"\r\n              class=\"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border border-[#dbe0e6] bg-white focus:border-[#dbe0e6] h-14 placeholder:text-[#60758a] p-[15px] text-base font-normal leading-normal\"\r\n            >\r\n              <option value=\"active\">Active</option>\r\n              <option value=\"inactive\">Inactive</option>\r\n            </select>\r\n          </label>\r\n        </div>\r\n        <div class=\"flex justify-stretch\">\r\n          <div class=\"flex flex-1 gap-3 flex-wrap px-4 py-3 justify-end\">\r\n            <router-link\r\n              to=\"/management-user\"\r\n              class=\"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-[#f0f2f5] text-[#111418] text-sm font-bold leading-normal tracking-[0.015em]\"\r\n            >\r\n              <span class=\"truncate\">Cancel</span>\r\n            </router-link>\r\n            <button\r\n              type=\"submit\"\r\n              class=\"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-[#0d80f2] text-white text-sm font-bold leading-normal tracking-[0.015em]\"\r\n            >\r\n              <span class=\"truncate\">Save</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </OwnerLayouts>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport axios from \"axios\";\r\nimport OwnerLayouts from \"../components/OwnerLayouts.vue\";\r\n\r\nconst user = ref({\r\n  name: \"\",\r\n  email: \"\",\r\n  password: \"\",\r\n  role_id: \"\",\r\n  status: \"active\", // Default value\r\n});\r\n\r\nconst roles = ref([]);\r\nconst router = useRouter();\r\n\r\n// Fungsi untuk mengambil daftar role dari backend\r\nconst fetchRoles = async () => {\r\n  try {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      console.error(\"No JWT token found in localStorage.\");\r\n      return;\r\n    }\r\n\r\n    const apiUrl = \"http://192.168.100.111:8081/api/v1/roles\";\r\n    const response = await axios.get(apiUrl, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    });\r\n\r\n    if (response.data && response.data.data) {\r\n      roles.value = response.data.data;\r\n    }\r\n  } catch (error) {\r\n    console.error(\r\n      \"Error fetching roles:\",\r\n      error.response ? error.response.data : error.message\r\n    );\r\n  }\r\n};\r\n\r\n// Fungsi untuk mengirim data user baru ke backend\r\nconst createUser = async () => {\r\n  try {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      console.error(\"No JWT token found in localStorage.\");\r\n      return;\r\n    }\r\n\r\n    // Validasi sederhana\r\n    if (\r\n      !user.value.name ||\r\n      !user.value.email ||\r\n      !user.value.password ||\r\n      !user.value.role_id\r\n    ) {\r\n      alert(\"Please fill in all required fields.\");\r\n      return;\r\n    }\r\n\r\n    const apiUrl = \"http://192.168.100.111:8081/api/v1/users\";\r\n    const response = await axios.post(apiUrl, user.value, {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    });\r\n\r\n    console.log(\"User created successfully:\", response.data);\r\n\r\n    // Navigasi kembali ke halaman manajemen pengguna setelah berhasil\r\n    router.push(\"/management-user\");\r\n  } catch (error) {\r\n    console.error(\r\n      \"Error creating user:\",\r\n      error.response ? error.response.data : error.message\r\n    );\r\n    alert(\"Failed to create user. Please check the console for details.\");\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  fetchRoles();\r\n});\r\n</script>\r\n"],"mappings":";AA4HA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,SAASC,SAAS,QAAQ,YAAY;AACtC,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,YAAY,MAAM,gCAAgC;;;;;;;IAEzD,MAAMC,IAAI,GAAGL,GAAG,CAAC;MACfM,IAAI,EAAE,EAAE;MACRC,KAAK,EAAE,EAAE;MACTC,QAAQ,EAAE,EAAE;MACZC,OAAO,EAAE,EAAE;MACXC,MAAM,EAAE,QAAQ,CAAE;IACpB,CAAC,CAAC;IAEF,MAAMC,KAAK,GAAGX,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMY,MAAM,GAAGV,SAAS,CAAC,CAAC;;IAE1B;IACA,MAAMW,UAAU,GAAG,MAAAA,CAAA,KAAY;MAC7B,IAAI;QACF,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;QAC3C,IAAI,CAACF,KAAK,EAAE;UACVG,OAAO,CAACC,KAAK,CAAC,qCAAqC,CAAC;UACpD;QACF;QAEA,MAAMC,MAAM,GAAG,0CAA0C;QACzD,MAAMC,QAAQ,GAAG,MAAMjB,KAAK,CAACkB,GAAG,CAACF,MAAM,EAAE;UACvCG,OAAO,EAAE;YACPC,aAAa,EAAE,UAAUT,KAAK;UAChC;QACF,CAAC,CAAC;QAEF,IAAIM,QAAQ,CAACI,IAAI,IAAIJ,QAAQ,CAACI,IAAI,CAACA,IAAI,EAAE;UACvCb,KAAK,CAACc,KAAK,GAAGL,QAAQ,CAACI,IAAI,CAACA,IAAI;QAClC;MACF,CAAC,CAAC,OAAON,KAAK,EAAE;QACdD,OAAO,CAACC,KAAK,CACX,uBAAuB,EACvBA,KAAK,CAACE,QAAQ,GAAGF,KAAK,CAACE,QAAQ,CAACI,IAAI,GAAGN,KAAK,CAACQ,OAC/C,CAAC;MACH;IACF,CAAC;;IAED;IACA,MAAMC,UAAU,GAAG,MAAAA,CAAA,KAAY;MAC7B,IAAI;QACF,MAAMb,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;QAC3C,IAAI,CAACF,KAAK,EAAE;UACVG,OAAO,CAACC,KAAK,CAAC,qCAAqC,CAAC;UACpD;QACF;;QAEA;QACA,IACE,CAACb,IAAI,CAACoB,KAAK,CAACnB,IAAI,IAChB,CAACD,IAAI,CAACoB,KAAK,CAAClB,KAAK,IACjB,CAACF,IAAI,CAACoB,KAAK,CAACjB,QAAQ,IACpB,CAACH,IAAI,CAACoB,KAAK,CAAChB,OAAO,EACnB;UACAmB,KAAK,CAAC,qCAAqC,CAAC;UAC5C;QACF;QAEA,MAAMT,MAAM,GAAG,0CAA0C;QACzD,MAAMC,QAAQ,GAAG,MAAMjB,KAAK,CAAC0B,IAAI,CAACV,MAAM,EAAEd,IAAI,CAACoB,KAAK,EAAE;UACpDH,OAAO,EAAE;YACP,cAAc,EAAE,kBAAkB;YAClCC,aAAa,EAAE,UAAUT,KAAK;UAChC;QACF,CAAC,CAAC;QAEFG,OAAO,CAACa,GAAG,CAAC,4BAA4B,EAAEV,QAAQ,CAACI,IAAI,CAAC;;QAExD;QACAZ,MAAM,CAACmB,IAAI,CAAC,kBAAkB,CAAC;MACjC,CAAC,CAAC,OAAOb,KAAK,EAAE;QACdD,OAAO,CAACC,KAAK,CACX,sBAAsB,EACtBA,KAAK,CAACE,QAAQ,GAAGF,KAAK,CAACE,QAAQ,CAACI,IAAI,GAAGN,KAAK,CAACQ,OAC/C,CAAC;QACDE,KAAK,CAAC,8DAA8D,CAAC;MACvE;IACF,CAAC;IAED3B,SAAS,CAAC,MAAM;MACdY,UAAU,CAAC,CAAC;IACd,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}