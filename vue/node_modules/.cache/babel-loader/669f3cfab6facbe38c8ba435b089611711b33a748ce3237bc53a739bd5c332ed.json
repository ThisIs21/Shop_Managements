{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport KepalaGudangSidebar from \"@/components/KepalaGudangSidebar.vue\";\nexport default {\n  __name: 'PurchaseReturnKepalaGudang',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const purchaseReturns = ref([]);\n    const loading = ref(true);\n    const error = ref(null);\n    const fetchPurchaseReturns = async () => {\n      try {\n        const token = localStorage.getItem(\"token\"); // ambil token dari localStorage\n\n        const response = await axios.get(\"http://localhost:8081/api/v1/history/purchase-returns\", {\n          headers: {\n            Authorization: `Bearer ${token}` // kirim token\n          }\n        });\n        purchaseReturns.value = (response.data || []).map(item => ({\n          id: item.id,\n          purchase_id: item.purchase_id,\n          user_id: item.user_id,\n          total: item.total,\n          date: item.date,\n          status: item.status\n        }));\n      } catch (err) {\n        console.error(\"Gagal fetch data retur:\", err);\n        error.value = err.response?.data?.error || \"Gagal mengambil data dari server.\";\n      } finally {\n        loading.value = false;\n      }\n    };\n    const formatNumber = num => {\n      if (!num) return \"0\";\n      return new Intl.NumberFormat(\"id-ID\").format(num);\n    };\n    const formatDate = date => {\n      if (!date) return \"-\";\n      return new Date(date).toLocaleString(\"id-ID\");\n    };\n    onMounted(fetchPurchaseReturns);\n    const __returned__ = {\n      purchaseReturns,\n      loading,\n      error,\n      fetchPurchaseReturns,\n      formatNumber,\n      formatDate,\n      ref,\n      onMounted,\n      get axios() {\n        return axios;\n      },\n      KepalaGudangSidebar\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","axios","KepalaGudangSidebar","purchaseReturns","loading","error","fetchPurchaseReturns","token","localStorage","getItem","response","get","headers","Authorization","value","data","map","item","id","purchase_id","user_id","total","date","status","err","console","formatNumber","num","Intl","NumberFormat","format","formatDate","Date","toLocaleString"],"sources":["C:/Users/Personal/Documents/PKL/aplikasi/aplikasi/src/views/PurchaseReturnKepalaGudang.vue"],"sourcesContent":["<template>\n  <div class=\"flex\">\n    <!-- Sidebar -->\n    <KepalaGudangSidebar />\n\n    <!-- Main content -->\n    <main class=\"flex-1 ml-64 p-6 bg-gray-50 min-h-screen\">\n      <h1 class=\"text-2xl font-bold mb-6\">Purchase Return Requests</h1>\n\n      <!-- Error -->\n      <div v-if=\"error\" class=\"mb-4 p-3 bg-red-100 text-red-700 rounded\">\n        {{ error }}\n      </div>\n\n      <!-- Loading -->\n      <div v-if=\"loading\" class=\"text-gray-600\">Loading data...</div>\n\n      <!-- Table -->\n      <div v-else class=\"overflow-x-auto bg-white shadow rounded-lg\">\n        <table class=\"min-w-full text-sm\">\n          <thead class=\"bg-gray-100\">\n            <tr>\n              <th class=\"px-4 py-2 text-left\">ID</th>\n              <th class=\"px-4 py-2 text-left\">Purchase ID</th>\n              <th class=\"px-4 py-2 text-left\">User ID</th>\n              <th class=\"px-4 py-2 text-left\">Total</th>\n              <th class=\"px-4 py-2 text-left\">Date</th>\n              <th class=\"px-4 py-2 text-left\">Status</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              v-for=\"item in purchaseReturns\"\n              :key=\"item.id\"\n              class=\"border-t hover:bg-gray-50\"\n            >\n              <td class=\"px-4 py-2\">{{ item.id }}</td>\n              <td class=\"px-4 py-2\">{{ item.purchase_id }}</td>\n              <td class=\"px-4 py-2\">{{ item.user_id }}</td>\n              <td class=\"px-4 py-2\">Rp {{ formatNumber(item.total) }}</td>\n              <td class=\"px-4 py-2\">\n                {{ formatDate(item.date) }}\n              </td>\n              <td class=\"px-4 py-2\">\n                <span\n                  :class=\"{\n                    'text-yellow-600 font-semibold': item.status === 'PENDING',\n                    'text-green-600 font-semibold': item.status === 'APPROVED',\n                    'text-red-600 font-semibold': item.status === 'REJECTED',\n                  }\"\n                >\n                  {{ item.status }}\n                </span>\n              </td>\n            </tr>\n            <tr v-if=\"purchaseReturns.length === 0\">\n              <td colspan=\"6\" class=\"text-center py-4 text-gray-500\">\n                Tidak ada data retur pembelian\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </main>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport KepalaGudangSidebar from \"@/components/KepalaGudangSidebar.vue\";\n\nconst purchaseReturns = ref([]);\nconst loading = ref(true);\nconst error = ref(null);\n\nconst fetchPurchaseReturns = async () => {\n  try {\n    const token = localStorage.getItem(\"token\"); // ambil token dari localStorage\n\n    const response = await axios.get(\n      \"http://localhost:8081/api/v1/history/purchase-returns\",\n      {\n        headers: {\n          Authorization: `Bearer ${token}`, // kirim token\n        },\n      }\n    );\n\n    purchaseReturns.value = (response.data || []).map((item) => ({\n      id: item.id,\n      purchase_id: item.purchase_id,\n      user_id: item.user_id,\n      total: item.total,\n      date: item.date,\n      status: item.status,\n    }));\n  } catch (err) {\n    console.error(\"Gagal fetch data retur:\", err);\n    error.value =\n      err.response?.data?.error || \"Gagal mengambil data dari server.\";\n  } finally {\n    loading.value = false;\n  }\n};\n\n\nconst formatNumber = (num) => {\n  if (!num) return \"0\";\n  return new Intl.NumberFormat(\"id-ID\").format(num);\n};\n\nconst formatDate = (date) => {\n  if (!date) return \"-\";\n  return new Date(date).toLocaleString(\"id-ID\");\n};\n\nonMounted(fetchPurchaseReturns);\n</script>\n"],"mappings":";;AAoEA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,mBAAmB,MAAM,sCAAsC;;;;;;;IAEtE,MAAMC,eAAe,GAAGJ,GAAG,CAAC,EAAE,CAAC;IAC/B,MAAMK,OAAO,GAAGL,GAAG,CAAC,IAAI,CAAC;IACzB,MAAMM,KAAK,GAAGN,GAAG,CAAC,IAAI,CAAC;IAEvB,MAAMO,oBAAoB,GAAG,MAAAA,CAAA,KAAY;MACvC,IAAI;QACF,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;;QAE7C,MAAMC,QAAQ,GAAG,MAAMT,KAAK,CAACU,GAAG,CAC9B,uDAAuD,EACvD;UACEC,OAAO,EAAE;YACPC,aAAa,EAAE,UAAUN,KAAK,EAAE,CAAE;UACpC;QACF,CACF,CAAC;QAEDJ,eAAe,CAACW,KAAK,GAAG,CAACJ,QAAQ,CAACK,IAAI,IAAI,EAAE,EAAEC,GAAG,CAAEC,IAAI,KAAM;UAC3DC,EAAE,EAAED,IAAI,CAACC,EAAE;UACXC,WAAW,EAAEF,IAAI,CAACE,WAAW;UAC7BC,OAAO,EAAEH,IAAI,CAACG,OAAO;UACrBC,KAAK,EAAEJ,IAAI,CAACI,KAAK;UACjBC,IAAI,EAAEL,IAAI,CAACK,IAAI;UACfC,MAAM,EAAEN,IAAI,CAACM;QACf,CAAC,CAAC,CAAC;MACL,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZC,OAAO,CAACpB,KAAK,CAAC,yBAAyB,EAAEmB,GAAG,CAAC;QAC7CnB,KAAK,CAACS,KAAK,GACTU,GAAG,CAACd,QAAQ,EAAEK,IAAI,EAAEV,KAAK,IAAI,mCAAmC;MACpE,CAAC,SAAS;QACRD,OAAO,CAACU,KAAK,GAAG,KAAK;MACvB;IACF,CAAC;IAGD,MAAMY,YAAY,GAAIC,GAAG,IAAK;MAC5B,IAAI,CAACA,GAAG,EAAE,OAAO,GAAG;MACpB,OAAO,IAAIC,IAAI,CAACC,YAAY,CAAC,OAAO,CAAC,CAACC,MAAM,CAACH,GAAG,CAAC;IACnD,CAAC;IAED,MAAMI,UAAU,GAAIT,IAAI,IAAK;MAC3B,IAAI,CAACA,IAAI,EAAE,OAAO,GAAG;MACrB,OAAO,IAAIU,IAAI,CAACV,IAAI,CAAC,CAACW,cAAc,CAAC,OAAO,CAAC;IAC/C,CAAC;IAEDjC,SAAS,CAACM,oBAAoB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}