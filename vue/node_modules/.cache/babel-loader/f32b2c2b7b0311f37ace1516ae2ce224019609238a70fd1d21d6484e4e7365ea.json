{"ast":null,"code":"import { ref, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport OwnerLayouts from \"../components/OwnerLayouts.vue\"; // ✅ perhatikan path\nimport dayjs from \"dayjs\";\nexport default {\n  __name: 'ReportStockOpnameOwners',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const reports = ref([]);\n    const loading = ref(false);\n    const error = ref(null);\n    const fetchReports = async () => {\n      loading.value = true;\n      error.value = null;\n      try {\n        const res = await axios.get(\"http://localhost:8881/api/v1/history/stock-opnames\");\n        // ✅ sesuaikan struktur JSON dengan backend kamu\n        reports.value = res.data?.data || [];\n      } catch (err) {\n        console.error(\"Failed to fetch stock opname data:\", err);\n        error.value = \"Gagal mengambil data laporan\";\n      } finally {\n        loading.value = false;\n      }\n    };\n    onMounted(() => {\n      fetchReports();\n    });\n    const __returned__ = {\n      reports,\n      loading,\n      error,\n      fetchReports,\n      ref,\n      onMounted,\n      get axios() {\n        return axios;\n      },\n      OwnerLayouts,\n      get dayjs() {\n        return dayjs;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","axios","OwnerLayouts","dayjs","reports","loading","error","fetchReports","value","res","get","data","err","console"],"sources":["C:/Users/Personal/Documents/PKL/aplikasi/aplikasi/src/views/ReportStockOpnameOwners.vue"],"sourcesContent":["<script setup>\nimport { ref, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport OwnerLayouts from \"../components/OwnerLayouts.vue\"; // ✅ perhatikan path\nimport dayjs from \"dayjs\";\n\nconst reports = ref([]);\nconst loading = ref(false);\nconst error = ref(null);\n\nconst fetchReports = async () => {\n  loading.value = true;\n  error.value = null;\n  try {\n    const res = await axios.get(\"http://localhost:8881/api/v1/history/stock-opnames\");\n    // ✅ sesuaikan struktur JSON dengan backend kamu\n    reports.value = res.data?.data || [];\n  } catch (err) {\n    console.error(\"Failed to fetch stock opname data:\", err);\n    error.value = \"Gagal mengambil data laporan\";\n  } finally {\n    loading.value = false;\n  }\n};\n\nonMounted(() => {\n  fetchReports();\n});\n</script>\n\n<template>\n  <OwnerLayouts>\n    <div class=\"p-6\">\n      <h1 class=\"text-2xl font-bold mb-4\">Stockopname Summary Report</h1>\n      <p class=\"text-gray-500 mb-6\">\n        Overview of stocktake activities and discrepancies.\n      </p>\n\n      <!-- Filters -->\n      <div class=\"flex gap-4 mb-4\">\n        <input\n          type=\"date\"\n          class=\"border p-2 rounded\"\n        />\n        <button\n          class=\"px-4 py-2 bg-blue-600 text-white rounded\"\n        >\n          Apply\n        </button>\n        <button\n          class=\"px-4 py-2 bg-green-600 text-white rounded\"\n        >\n          Export to CSV\n        </button>\n        <button\n          class=\"px-4 py-2 bg-red-600 text-white rounded\"\n        >\n          Export to PDF\n        </button>\n      </div>\n\n      <!-- Table -->\n      <div class=\"overflow-x-auto\">\n        <table class=\"min-w-full border border-gray-300\">\n          <thead class=\"bg-gray-100\">\n            <tr>\n              <th class=\"px-4 py-2 border\">Date</th>\n              <th class=\"px-4 py-2 border\">Note</th>\n              <th class=\"px-4 py-2 border\">Products Counted</th>\n              <th class=\"px-4 py-2 border\">Total Discrepancy</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-if=\"loading\">\n              <td colspan=\"4\" class=\"text-center py-4\">Loading...</td>\n            </tr>\n            <tr v-else-if=\"error\">\n              <td colspan=\"4\" class=\"text-center text-red-500 py-4\">{{ error }}</td>\n            </tr>\n            <tr v-else-if=\"!reports.length\">\n              <td colspan=\"4\" class=\"text-center py-4\">No data available</td>\n            </tr>\n            <tr v-for=\"(report, index) in reports\" :key=\"index\">\n              <td class=\"px-4 py-2 border\">\n                {{ dayjs(report.date).format(\"DD/MM/YYYY\") }}\n              </td>\n              <td class=\"px-4 py-2 border\">{{ report.note }}</td>\n              <td class=\"px-4 py-2 border\">{{ report.products_counted }}</td>\n              <td class=\"px-4 py-2 border\">{{ report.total_discrepancy }}</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </OwnerLayouts>\n</template>\n"],"mappings":"AACA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,YAAY,MAAM,gCAAgC,CAAC,CAAC;AAC3D,OAAOC,KAAK,MAAM,OAAO;;;;;;;IAEzB,MAAMC,OAAO,GAAGL,GAAG,CAAC,EAAE,CAAC;IACvB,MAAMM,OAAO,GAAGN,GAAG,CAAC,KAAK,CAAC;IAC1B,MAAMO,KAAK,GAAGP,GAAG,CAAC,IAAI,CAAC;IAEvB,MAAMQ,YAAY,GAAG,MAAAA,CAAA,KAAY;MAC/BF,OAAO,CAACG,KAAK,GAAG,IAAI;MACpBF,KAAK,CAACE,KAAK,GAAG,IAAI;MAClB,IAAI;QACF,MAAMC,GAAG,GAAG,MAAMR,KAAK,CAACS,GAAG,CAAC,oDAAoD,CAAC;QACjF;QACAN,OAAO,CAACI,KAAK,GAAGC,GAAG,CAACE,IAAI,EAAEA,IAAI,IAAI,EAAE;MACtC,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZC,OAAO,CAACP,KAAK,CAAC,oCAAoC,EAAEM,GAAG,CAAC;QACxDN,KAAK,CAACE,KAAK,GAAG,8BAA8B;MAC9C,CAAC,SAAS;QACRH,OAAO,CAACG,KAAK,GAAG,KAAK;MACvB;IACF,CAAC;IAEDR,SAAS,CAAC,MAAM;MACdO,YAAY,CAAC,CAAC;IAChB,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}