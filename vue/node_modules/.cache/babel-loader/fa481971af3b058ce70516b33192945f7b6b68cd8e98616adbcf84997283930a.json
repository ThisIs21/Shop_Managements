{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted, computed } from \"vue\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport axios from \"axios\";\nimport OwnerLayouts from \"../components/OwnerLayouts.vue\";\nconst API_URL = \"http://192.168.100.111:8081/api/v1/categories\";\nexport default {\n  __name: 'AddCategoryOwner',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const category = ref({\n      name: \"\"\n    });\n    const route = useRoute();\n    const router = useRouter();\n    const isEdit = computed(() => route.params.id !== undefined);\n    const fetchCategory = async id => {\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (!token) {\n          console.error(\"No JWT token found in localStorage.\");\n          return;\n        }\n        const response = await axios.get(`${API_URL}/${id}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (response.data && response.data.data) {\n          // API balikin field \"Name\"\n          category.value.name = response.data.data.Name;\n        }\n      } catch (error) {\n        console.error(\"Error fetching category:\", error);\n        alert(\"Failed to fetch category data.\");\n      }\n    };\n    const handleSubmit = async () => {\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (!token) {\n          console.error(\"No JWT token found in localStorage.\");\n          return;\n        }\n        if (!category.value.name) {\n          alert(\"Please fill in the category name.\");\n          return;\n        }\n        if (isEdit.value) {\n          await axios.put(`${API_URL}/${route.params.id}`, category.value, {\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: `Bearer ${token}`\n            }\n          });\n          alert(\"Category updated successfully.\");\n        } else {\n          await axios.post(API_URL, category.value, {\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: `Bearer ${token}`\n            }\n          });\n          alert(\"Category created successfully.\");\n        }\n        router.push(\"/management-category\");\n      } catch (error) {\n        console.error(\"Error saving category:\", error);\n        alert(\"Failed to save category. Please check the console.\");\n      }\n    };\n    onMounted(() => {\n      if (isEdit.value) {\n        fetchCategory(route.params.id);\n      }\n    });\n    const __returned__ = {\n      category,\n      route,\n      router,\n      isEdit,\n      API_URL,\n      fetchCategory,\n      handleSubmit,\n      ref,\n      onMounted,\n      computed,\n      get useRoute() {\n        return useRoute;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get axios() {\n        return axios;\n      },\n      OwnerLayouts\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","computed","useRoute","useRouter","axios","OwnerLayouts","API_URL","category","name","route","router","isEdit","params","id","undefined","fetchCategory","token","localStorage","getItem","console","error","response","get","headers","Authorization","data","value","Name","alert","handleSubmit","put","post","push"],"sources":["C:/Users/SPC STYLE 5/aplikasi/src/views/AddCategoryOwner.vue"],"sourcesContent":["<template>\n  <OwnerLayouts>\n    <div class=\"p-8\">\n      <div class=\"flex flex-wrap items-center justify-between gap-3 p-4\">\n        <p\n          class=\"text-[#111418] tracking-light text-[32px] font-bold leading-tight min-w-72\"\n        >\n          {{ isEdit ? \"Edit Category\" : \"Add Category\" }}\n        </p>\n        <router-link\n          to=\"/management-category\"\n          class=\"flex items-center gap-2 text-[#60758a] text-base font-normal leading-normal\"\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"20px\"\n            height=\"20px\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            stroke-width=\"2\"\n            stroke-linecap=\"round\"\n            stroke-linejoin=\"round\"\n          >\n            <path d=\"M19 12H5\"></path>\n            <path d=\"M12 19L5 12L12 5\"></path>\n          </svg>\n          <span class=\"truncate\">Kembali</span>\n        </router-link>\n      </div>\n\n      <form\n        @submit.prevent=\"handleSubmit\"\n        class=\"flex flex-col w-[512px] max-w-[512px] py-5\"\n      >\n        <div class=\"flex flex-col flex-wrap items-end gap-4 px-4 py-3\">\n          <label class=\"flex flex-col min-w-40 flex-1 w-full\">\n            <p class=\"text-[#111418] text-base font-medium leading-normal pb-2\">\n              Name\n            </p>\n            <input\n              v-model=\"category.name\"\n              placeholder=\"Enter category name\"\n              class=\"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border border-[#dbe0e6] bg-white focus:border-[#dbe0e6] h-14 placeholder:text-[#60758a] p-[15px] text-base font-normal leading-normal\"\n            />\n          </label>\n        </div>\n        <div class=\"flex justify-stretch\">\n          <div class=\"flex flex-1 gap-3 flex-wrap px-4 py-3 justify-end\">\n            <router-link\n              to=\"/management-category\"\n              class=\"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-[#f0f2f5] text-[#111418] text-sm font-bold leading-normal tracking-[0.015em]\"\n            >\n              <span class=\"truncate\">Cancel</span>\n            </router-link>\n            <button\n              type=\"submit\"\n              class=\"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-[#0d80f2] text-white text-sm font-bold leading-normal tracking-[0.015em]\"\n            >\n              <span class=\"truncate\">Save</span>\n            </button>\n          </div>\n        </div>\n      </form>\n    </div>\n  </OwnerLayouts>\n</template>\n\n<script setup>\nimport { ref, onMounted, computed } from \"vue\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport axios from \"axios\";\nimport OwnerLayouts from \"../components/OwnerLayouts.vue\";\n\nconst category = ref({\n  name: \"\",\n});\n\nconst route = useRoute();\nconst router = useRouter();\nconst isEdit = computed(() => route.params.id !== undefined);\n\nconst API_URL = \"http://192.168.100.111:8081/api/v1/categories\";\n\nconst fetchCategory = async (id) => {\n  try {\n    const token = localStorage.getItem(\"token\");\n    if (!token) {\n      console.error(\"No JWT token found in localStorage.\");\n      return;\n    }\n    const response = await axios.get(`${API_URL}/${id}`, {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    });\n    if (response.data && response.data.data) {\n      // API balikin field \"Name\"\n      category.value.name = response.data.data.Name;\n    }\n  } catch (error) {\n    console.error(\"Error fetching category:\", error);\n    alert(\"Failed to fetch category data.\");\n  }\n};\n\nconst handleSubmit = async () => {\n  try {\n    const token = localStorage.getItem(\"token\");\n    if (!token) {\n      console.error(\"No JWT token found in localStorage.\");\n      return;\n    }\n\n    if (!category.value.name) {\n      alert(\"Please fill in the category name.\");\n      return;\n    }\n\n    if (isEdit.value) {\n      await axios.put(`${API_URL}/${route.params.id}`, category.value, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n      });\n      alert(\"Category updated successfully.\");\n    } else {\n      await axios.post(API_URL, category.value, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n      });\n      alert(\"Category created successfully.\");\n    }\n    router.push(\"/management-category\");\n  } catch (error) {\n    console.error(\"Error saving category:\", error);\n    alert(\"Failed to save category. Please check the console.\");\n  }\n};\n\nonMounted(() => {\n  if (isEdit.value) {\n    fetchCategory(route.params.id);\n  }\n});\n</script>\n"],"mappings":";AAqEA,SAASA,GAAG,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,KAAK;AAC9C,SAASC,QAAQ,EAAEC,SAAS,QAAQ,YAAY;AAChD,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,YAAY,MAAM,gCAAgC;AAUzD,MAAMC,OAAO,GAAG,+CAA+C;;;;;;;IAR/D,MAAMC,QAAQ,GAAGR,GAAG,CAAC;MACnBS,IAAI,EAAE;IACR,CAAC,CAAC;IAEF,MAAMC,KAAK,GAAGP,QAAQ,CAAC,CAAC;IACxB,MAAMQ,MAAM,GAAGP,SAAS,CAAC,CAAC;IAC1B,MAAMQ,MAAM,GAAGV,QAAQ,CAAC,MAAMQ,KAAK,CAACG,MAAM,CAACC,EAAE,KAAKC,SAAS,CAAC;IAI5D,MAAMC,aAAa,GAAG,MAAOF,EAAE,IAAK;MAClC,IAAI;QACF,MAAMG,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;QAC3C,IAAI,CAACF,KAAK,EAAE;UACVG,OAAO,CAACC,KAAK,CAAC,qCAAqC,CAAC;UACpD;QACF;QACA,MAAMC,QAAQ,GAAG,MAAMjB,KAAK,CAACkB,GAAG,CAAC,GAAGhB,OAAO,IAAIO,EAAE,EAAE,EAAE;UACnDU,OAAO,EAAE;YACPC,aAAa,EAAE,UAAUR,KAAK;UAChC;QACF,CAAC,CAAC;QACF,IAAIK,QAAQ,CAACI,IAAI,IAAIJ,QAAQ,CAACI,IAAI,CAACA,IAAI,EAAE;UACvC;UACAlB,QAAQ,CAACmB,KAAK,CAAClB,IAAI,GAAGa,QAAQ,CAACI,IAAI,CAACA,IAAI,CAACE,IAAI;QAC/C;MACF,CAAC,CAAC,OAAOP,KAAK,EAAE;QACdD,OAAO,CAACC,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;QAChDQ,KAAK,CAAC,gCAAgC,CAAC;MACzC;IACF,CAAC;IAED,MAAMC,YAAY,GAAG,MAAAA,CAAA,KAAY;MAC/B,IAAI;QACF,MAAMb,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;QAC3C,IAAI,CAACF,KAAK,EAAE;UACVG,OAAO,CAACC,KAAK,CAAC,qCAAqC,CAAC;UACpD;QACF;QAEA,IAAI,CAACb,QAAQ,CAACmB,KAAK,CAAClB,IAAI,EAAE;UACxBoB,KAAK,CAAC,mCAAmC,CAAC;UAC1C;QACF;QAEA,IAAIjB,MAAM,CAACe,KAAK,EAAE;UAChB,MAAMtB,KAAK,CAAC0B,GAAG,CAAC,GAAGxB,OAAO,IAAIG,KAAK,CAACG,MAAM,CAACC,EAAE,EAAE,EAAEN,QAAQ,CAACmB,KAAK,EAAE;YAC/DH,OAAO,EAAE;cACP,cAAc,EAAE,kBAAkB;cAClCC,aAAa,EAAE,UAAUR,KAAK;YAChC;UACF,CAAC,CAAC;UACFY,KAAK,CAAC,gCAAgC,CAAC;QACzC,CAAC,MAAM;UACL,MAAMxB,KAAK,CAAC2B,IAAI,CAACzB,OAAO,EAAEC,QAAQ,CAACmB,KAAK,EAAE;YACxCH,OAAO,EAAE;cACP,cAAc,EAAE,kBAAkB;cAClCC,aAAa,EAAE,UAAUR,KAAK;YAChC;UACF,CAAC,CAAC;UACFY,KAAK,CAAC,gCAAgC,CAAC;QACzC;QACAlB,MAAM,CAACsB,IAAI,CAAC,sBAAsB,CAAC;MACrC,CAAC,CAAC,OAAOZ,KAAK,EAAE;QACdD,OAAO,CAACC,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;QAC9CQ,KAAK,CAAC,oDAAoD,CAAC;MAC7D;IACF,CAAC;IAED5B,SAAS,CAAC,MAAM;MACd,IAAIW,MAAM,CAACe,KAAK,EAAE;QAChBX,aAAa,CAACN,KAAK,CAACG,MAAM,CAACC,EAAE,CAAC;MAChC;IACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}