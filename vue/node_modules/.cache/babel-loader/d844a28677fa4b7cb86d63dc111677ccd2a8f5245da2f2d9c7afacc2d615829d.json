{"ast":null,"code":"import { ref, onMounted, watch } from \"vue\";\nimport axios from \"axios\";\nimport KepalaGudangSidebar from \"@/components/KepalaGudangSidebar.vue\";\n\n// State\n\nexport default {\n  __name: 'PurchaseReturnKepalaGudang',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const purchaseReturns = ref([]);\n    const loading = ref(false);\n    const showApprovalModal = ref(false);\n    const showRejectModal = ref(false);\n    const showDetailsModal = ref(false);\n    const showHistoryModal = ref(false);\n    const selectedReturnId = ref(null);\n    const selectedReturn = ref(null);\n    const rejectReason = ref(\"\");\n    const approving = ref(false);\n    const rejecting = ref(false);\n    const loadingHistory = ref(false);\n    const historyReturns = ref([]);\n    const historyFilter = ref(\"\");\n\n    // Ambil role dari localStorage\n    const role = localStorage.getItem(\"role\") || \"kepalagudang\";\n\n    // Mapping role ke path backend\n    const endpointMap = {\n      kepalagudang: \"kepala-gudang\",\n      owner: \"owner\",\n      admin: \"admin\"\n    };\n\n    // Helper buat dapetin base URL sesuai role\n    const getBaseUrl = () => {\n      const path = endpointMap[role] || \"kepala-gudang\";\n      return `http://localhost:8081/api/v1/${path}`;\n    };\n\n    // Inisialisasi axios dengan baseURL\n    const api = axios.create({\n      baseURL: \"http://localhost:8081/api/v1\"\n    });\n    const savedToken = localStorage.getItem(\"token\");\n    if (savedToken) {\n      api.defaults.headers.common[\"Authorization\"] = `Bearer ${savedToken}`;\n    }\n\n    // Fetch data dari backend sesuai role\n    const fetchPurchaseReturns = async (status = \"PENDING\") => {\n      loading.value = true;\n      try {\n        const url = `${getBaseUrl()}/purchase-returns`;\n        const res = await api.get(url, {\n          params: {\n            status,\n            page: 1,\n            size: 10\n          }\n        });\n        console.log(\"Respon backend Purchase Returns:\", res.data);\n        if (res.data.data && Array.isArray(res.data.data)) {\n          purchaseReturns.value = res.data.data;\n        } else {\n          purchaseReturns.value = [];\n        }\n        console.log(\"Purchase Returns loaded:\", purchaseReturns.value);\n      } catch (err) {\n        console.error(\"Gagal ambil data Purchase Returns:\", err.response?.data || err);\n        alert(`Gagal mengambil data retur: ${err.response?.status || \"\"} - ${err.response?.data?.error || err.message}`);\n        purchaseReturns.value = [];\n      } finally {\n        loading.value = false;\n      }\n    };\n    const fetchPurchaseReturnHistory = async () => {\n      loadingHistory.value = true;\n      try {\n        const url = `${getBaseUrl()}/purchase-returns/history`;\n        const res = await api.get(url, {\n          params: {\n            status: historyFilter.value,\n            page: 1,\n            size: 10\n          }\n        });\n        if (res.data.data && Array.isArray(res.data.data)) {\n          historyReturns.value = res.data.data;\n        } else {\n          historyReturns.value = [];\n        }\n        console.log(\"Purchase Return History loaded:\", historyReturns.value);\n      } catch (err) {\n        console.error(\"Gagal ambil data Purchase Return History:\", err.response?.data || err);\n        alert(`Gagal mengambil data riwayat retur: ${err.response?.status || \"\"} - ${err.response?.data?.error || err.message}`);\n        historyReturns.value = [];\n      } finally {\n        loadingHistory.value = false;\n      }\n    };\n\n    // Open Approval Modal\n    const openApprovalModal = async id => {\n      try {\n        const url = `${getBaseUrl()}/purchase-returns/${id}`;\n        const response = await api.get(url, {\n          params: {\n            include_approver: true\n          }\n        });\n        selectedReturn.value = response.data;\n        selectedReturnId.value = id;\n        showApprovalModal.value = true;\n      } catch (error) {\n        console.error(\"Error fetching purchase return:\", error.response ? error.response.data : error.message);\n        alert(\"Gagal memuat detail retur: \" + (error.response?.data?.error || error.message));\n      }\n    };\n\n    // Close Approval Modal\n    const closeApprovalModal = () => {\n      showApprovalModal.value = false;\n      selectedReturn.value = null;\n      selectedReturnId.value = null;\n    };\n\n    // Confirm Approve\n    const confirmApprove = async () => {\n      if (!selectedReturnId.value) return;\n      approving.value = true;\n      try {\n        const url = `${getBaseUrl()}/purchase-returns/${selectedReturnId.value}/approve`;\n        const response = await api.post(url, {});\n        if (response.status === 200) {\n          alert(\"Retur berhasil disetujui!\");\n          closeApprovalModal();\n          fetchPurchaseReturns();\n        }\n      } catch (error) {\n        console.error(\"Error approving purchase return:\", error.response ? error.response.data : error.message);\n        alert(\"Gagal menyetujui retur: \" + (error.response?.data?.error || error.message));\n      } finally {\n        approving.value = false;\n      }\n    };\n\n    // Open Reject Modal\n    const openRejectModal = async id => {\n      try {\n        const url = `${getBaseUrl()}/purchase-returns/${id}`;\n        const response = await api.get(url, {\n          params: {\n            include_approver: true\n          }\n        });\n        selectedReturn.value = response.data;\n        selectedReturnId.value = id;\n        rejectReason.value = \"\";\n        showRejectModal.value = true;\n      } catch (error) {\n        console.error(\"Error fetching purchase return:\", error.response ? error.response.data : error.message);\n        alert(\"Gagal memuat detail retur: \" + (error.response?.data?.error || error.message));\n      }\n    };\n\n    // Close Reject Modal\n    const closeRejectModal = () => {\n      showRejectModal.value = false;\n      selectedReturn.value = null;\n      selectedReturnId.value = null;\n      rejectReason.value = \"\";\n    };\n\n    // Confirm Reject\n    const confirmReject = async () => {\n      if (!selectedReturnId.value || !rejectReason.value.trim()) {\n        alert(\"Alasan penolakan wajib diisi!\");\n        return;\n      }\n      rejecting.value = true;\n      try {\n        const url = `${getBaseUrl()}/purchase-returns/${selectedReturnId.value}/reject`;\n        const response = await api.post(url, {\n          reason: rejectReason.value.trim()\n        });\n        if (response.status === 200) {\n          alert(\"Retur berhasil ditolak!\");\n          closeRejectModal();\n          fetchPurchaseReturns();\n        }\n      } catch (error) {\n        console.error(\"Error rejecting purchase return:\", error.response ? error.response.data : error.message);\n        alert(\"Gagal menolak retur: \" + (error.response?.data?.error || error.message));\n      } finally {\n        rejecting.value = false;\n      }\n    };\n\n    // View Details\n    const viewDetails = async id => {\n      try {\n        const url = `${getBaseUrl()}/purchase-returns/${id}`;\n        const response = await api.get(url, {\n          params: {\n            include_approver: true\n          }\n        });\n        selectedReturn.value = response.data;\n        selectedReturnId.value = id;\n        showDetailsModal.value = true;\n      } catch (error) {\n        console.error(\"Error fetching purchase return details:\", error.response ? error.response.data : error.message);\n        alert(\"Gagal memuat detail retur: \" + (error.response?.data?.error || error.message));\n      }\n    };\n\n    // Close Details Modal\n    const closeDetailsModal = () => {\n      showDetailsModal.value = false;\n      selectedReturn.value = null;\n      selectedReturnId.value = null;\n    };\n\n    // Open History Modal\n    const openHistoryModal = () => {\n      showHistoryModal.value = true;\n      fetchPurchaseReturnHistory();\n    };\n\n    // Close History Modal\n    const closeHistoryModal = () => {\n      showHistoryModal.value = false;\n      historyReturns.value = [];\n      historyFilter.value = \"\";\n    };\n\n    // Watch filter changes\n    watch(historyFilter, () => {\n      fetchPurchaseReturnHistory();\n    });\n\n    // Format Return Number\n    const formatReturnNumber = id => {\n      return `2025-${String(id).padStart(3, \"0\")}`;\n    };\n\n    // Get Status Class\n    const getStatusClass = status => {\n      switch (status) {\n        case \"PENDING\":\n          return \"bg-yellow-200 text-yellow-800\";\n        case \"APPROVED\":\n          return \"bg-green-200 text-green-800\";\n        case \"REJECTED\":\n          return \"bg-red-200 text-red-800\";\n        default:\n          return \"bg-gray-200 text-gray-800\";\n      }\n    };\n\n    // Get Status Text\n    const getStatusText = status => {\n      switch (status) {\n        case \"PENDING\":\n          return \"Pending\";\n        case \"APPROVED\":\n          return \"Approved\";\n        case \"REJECTED\":\n          return \"Rejected\";\n        default:\n          return status;\n      }\n    };\n\n    // Get First Product Name\n    const getFirstProductName = items => {\n      if (items && items.length > 0) {\n        return items[0].Product?.name || items[0].product_name || \"N/A\";\n      }\n      return \"N/A\";\n    };\n\n    // Get Supplier Name from Items\n    const getSupplierName = items => {\n      if (items && items.length > 0) {\n        return items[0].Product?.supplier?.name || \"N/A\";\n      }\n      return \"N/A\";\n    };\n\n    // Get Supplier Name from History\n    const getSupplierNameFromHistory = item => {\n      return item.supplier_id ? \"Supplier ID: \" + item.supplier_id : \"N/A\";\n    };\n\n    // Format Date\n    const formatDate = dateStr => {\n      if (!dateStr) return \"N/A\";\n      const date = new Date(dateStr);\n      return date.toLocaleDateString(\"id-ID\", {\n        day: \"2-digit\",\n        month: \"2-digit\",\n        year: \"numeric\"\n      });\n    };\n\n    // Format Currency\n    const formatCurrency = amount => {\n      return amount !== undefined && amount !== null ? new Intl.NumberFormat(\"id-ID\", {\n        style: \"currency\",\n        currency: \"IDR\",\n        minimumFractionDigits: 0\n      }).format(amount) : \"Rp 0\";\n    };\n    onMounted(() => {\n      fetchPurchaseReturns();\n    });\n    const __returned__ = {\n      purchaseReturns,\n      loading,\n      showApprovalModal,\n      showRejectModal,\n      showDetailsModal,\n      showHistoryModal,\n      selectedReturnId,\n      selectedReturn,\n      rejectReason,\n      approving,\n      rejecting,\n      loadingHistory,\n      historyReturns,\n      historyFilter,\n      role,\n      endpointMap,\n      getBaseUrl,\n      api,\n      savedToken,\n      fetchPurchaseReturns,\n      fetchPurchaseReturnHistory,\n      openApprovalModal,\n      closeApprovalModal,\n      confirmApprove,\n      openRejectModal,\n      closeRejectModal,\n      confirmReject,\n      viewDetails,\n      closeDetailsModal,\n      openHistoryModal,\n      closeHistoryModal,\n      formatReturnNumber,\n      getStatusClass,\n      getStatusText,\n      getFirstProductName,\n      getSupplierName,\n      getSupplierNameFromHistory,\n      formatDate,\n      formatCurrency,\n      ref,\n      onMounted,\n      watch,\n      get axios() {\n        return axios;\n      },\n      KepalaGudangSidebar\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","watch","axios","KepalaGudangSidebar","purchaseReturns","loading","showApprovalModal","showRejectModal","showDetailsModal","showHistoryModal","selectedReturnId","selectedReturn","rejectReason","approving","rejecting","loadingHistory","historyReturns","historyFilter","role","localStorage","getItem","endpointMap","kepalagudang","owner","admin","getBaseUrl","path","api","create","baseURL","savedToken","defaults","headers","common","fetchPurchaseReturns","status","value","url","res","get","params","page","size","console","log","data","Array","isArray","err","error","response","alert","message","fetchPurchaseReturnHistory","openApprovalModal","id","include_approver","closeApprovalModal","confirmApprove","post","openRejectModal","closeRejectModal","confirmReject","trim","reason","viewDetails","closeDetailsModal","openHistoryModal","closeHistoryModal","formatReturnNumber","String","padStart","getStatusClass","getStatusText","getFirstProductName","items","length","Product","name","product_name","getSupplierName","supplier","getSupplierNameFromHistory","item","supplier_id","formatDate","dateStr","date","Date","toLocaleDateString","day","month","year","formatCurrency","amount","undefined","Intl","NumberFormat","style","currency","minimumFractionDigits","format"],"sources":["C:/Users/Personal/Documents/PKL/aplikasi/aplikasi/src/views/PurchaseReturnKepalaGudang.vue"],"sourcesContent":["<template>\n  <div\n    class=\"flex size-full min-h-screen flex-col bg-white font-manrope lg:flex-row\"\n  >\n    <!-- Sidebar tetap ada -->\n    <KepalaGudangSidebar />\n\n    <div class=\"flex flex-1 flex-col\">\n      <main class=\"flex-1 p-8\">\n        <div class=\"layout-content-container flex flex-col flex-1\">\n          <div class=\"mb-6 flex flex-wrap justify-between items-center gap-3\">\n            <div>\n              <p\n                class=\"text-[#111418] tracking-light text-[32px] font-bold leading-tight\"\n              >\n                Purchase Return Requests\n              </p>\n              <p class=\"text-[#60758a] text-sm font-normal leading-normal\">\n                Review and approve or reject purchase return requests from\n                suppliers.\n              </p>\n            </div>\n            <div class=\"flex gap-2\">\n              <button\n                @click=\"fetchPurchaseReturns\"\n                :disabled=\"loading\"\n                class=\"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50\"\n              >\n                {{ loading ? \"Loading...\" : \"Refresh Pending Returns\" }}\n              </button>\n              <button\n                @click=\"openHistoryModal\"\n                class=\"px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600\"\n              >\n                View Return History\n              </button>\n            </div>\n          </div>\n\n          <!-- Tabel Data -->\n          <div class=\"px-4 py-3 @container\">\n            <div\n              class=\"flex overflow-hidden rounded-lg border border-[#dbe0e6] bg-white\"\n            >\n              <table class=\"flex-1\">\n                <thead>\n                  <tr class=\"bg-white\">\n                    <th\n                      class=\"px-4 py-3 text-left w-[120px] text-sm font-medium\"\n                    >\n                      Return No.\n                    </th>\n                    <th\n                      class=\"px-4 py-3 text-left w-[120px] text-sm font-medium\"\n                    >\n                      Purchase No.\n                    </th>\n                    <th\n                      class=\"px-4 py-3 text-left w-[150px] text-sm font-medium\"\n                    >\n                      Date\n                    </th>\n                    <th\n                      class=\"px-4 py-3 text-left w-[200px] text-sm font-medium\"\n                    >\n                      Supplier\n                    </th>\n                    <th\n                      class=\"px-4 py-3 text-left w-[200px] text-sm font-medium\"\n                    >\n                      Product\n                    </th>\n                    <th\n                      class=\"px-4 py-3 text-left w-[120px] text-sm font-medium\"\n                    >\n                      Total\n                    </th>\n                    <th\n                      class=\"px-4 py-3 text-left w-[100px] text-sm font-medium\"\n                    >\n                      Status\n                    </th>\n                    <th\n                      class=\"px-4 py-3 text-left w-[150px] text-sm font-medium\"\n                    >\n                      Actions\n                    </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr v-if=\"loading\">\n                    <td colspan=\"8\" class=\"text-center py-8 text-gray-500\">\n                      Loading returns...\n                    </td>\n                  </tr>\n                  <tr v-else-if=\"purchaseReturns.length === 0\">\n                    <td colspan=\"8\" class=\"text-center py-8 text-gray-500\">\n                      Tidak ada retur pending.\n                    </td>\n                  </tr>\n                  <tr\n                    v-else\n                    v-for=\"item in purchaseReturns\"\n                    :key=\"item.ID\"\n                    class=\"border-t border-t-[#dbe0e6]\"\n                  >\n                    <td class=\"px-4 py-2 text-sm\">\n                      RTN-{{ formatReturnNumber(item.ID) }}\n                    </td>\n                    <td class=\"px-4 py-2 text-sm\">\n                      {{\n                        item.PurchaseID\n                          ? `PO-${String(item.PurchaseID).padStart(3, \"0\")}`\n                          : \"N/A\"\n                      }}\n                    </td>\n                    <td class=\"px-4 py-2 text-sm\">\n                      {{ formatDate(item.Date) }}\n                    </td>\n                    <td class=\"px-4 py-2 text-sm\">\n                      {{ getSupplierName(item.Items) || \"N/A\" }}\n                    </td>\n                    <td class=\"px-4 py-2 text-sm\">\n                      {{ getFirstProductName(item.Items) }}\n                    </td>\n                    <td class=\"px-4 py-2 text-sm\">\n                      {{ formatCurrency(item.Total) }}\n                    </td>\n                    <td class=\"px-4 py-2 text-sm\">\n                      <span\n                        :class=\"getStatusClass(item.Status)\"\n                        class=\"px-3 py-1 rounded-lg text-xs font-medium\"\n                      >\n                        {{ getStatusText(item.Status) }}\n                      </span>\n                    </td>\n                    <td class=\"px-4 py-2 text-sm font-bold\">\n                      <div v-if=\"item.Status === 'PENDING'\" class=\"flex gap-2\">\n                        <button\n                          @click=\"openApprovalModal(item.ID)\"\n                          class=\"px-3 py-1 bg-green-500 text-white rounded text-xs hover:bg-green-600\"\n                        >\n                          Approve\n                        </button>\n                        <button\n                          @click=\"openRejectModal(item.ID)\"\n                          class=\"px-3 py-1 bg-red-500 text-white rounded text-xs hover:bg-red-600\"\n                        >\n                          Reject\n                        </button>\n                        <button\n                          @click=\"viewDetails(item.ID)\"\n                          class=\"px-3 py-1 bg-blue-500 text-white rounded text-xs hover:bg-blue-600\"\n                        >\n                          View Details\n                        </button>\n                      </div>\n                      <div v-else class=\"flex gap-2\">\n                        <button\n                          @click=\"viewDetails(item.ID)\"\n                          class=\"px-3 py-1 bg-blue-500 text-white rounded text-xs hover:bg-blue-600\"\n                        >\n                          View Details\n                        </button>\n                        <span class=\"text-gray-500\">Completed</span>\n                      </div>\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n\n        <!-- Approval Modal -->\n        <div\n          v-if=\"showApprovalModal\"\n          class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\n        >\n          <div class=\"bg-white rounded-lg p-6 max-w-md w-full\">\n            <h2 class=\"text-xl font-bold mb-4\">Approve Purchase Return</h2>\n            <div class=\"mb-4\">\n              <p>\n                <strong>Return No:</strong> RTN-{{\n                  formatReturnNumber(selectedReturnId)\n                }}\n              </p>\n              <p>\n                <strong>Purchase No:</strong>\n                {{\n                  selectedReturn?.PurchaseID\n                    ? `PO-${String(selectedReturn.PurchaseID).padStart(3, \"0\")}`\n                    : \"N/A\"\n                }}\n              </p>\n              <p>\n                <strong>Supplier:</strong>\n                {{ getSupplierName(selectedReturn?.Items) || \"N/A\" }}\n              </p>\n              <p>\n                <strong>Total:</strong>\n                {{ formatCurrency(selectedReturn?.Total || 0) }}\n              </p>\n              <p>\n                <strong>Requested By:</strong> User ID\n                {{ selectedReturn?.UserID || \"N/A\" }}\n              </p>\n            </div>\n            <div class=\"flex justify-end gap-2\">\n              <button\n                @click=\"closeApprovalModal\"\n                class=\"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600\"\n              >\n                Cancel\n              </button>\n              <button\n                @click=\"confirmApprove\"\n                :disabled=\"approving\"\n                class=\"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:opacity-50\"\n              >\n                {{ approving ? \"Approving...\" : \"Approve\" }}\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <!-- Reject Modal -->\n        <div\n          v-if=\"showRejectModal\"\n          class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\n        >\n          <div class=\"bg-white rounded-lg p-6 max-w-md w-full\">\n            <h2 class=\"text-xl font-bold mb-4\">Reject Purchase Return</h2>\n            <div class=\"mb-4\">\n              <p>\n                <strong>Return No:</strong> RTN-{{\n                  formatReturnNumber(selectedReturnId)\n                }}\n              </p>\n              <p>\n                <strong>Purchase No:</strong>\n                {{\n                  selectedReturn?.PurchaseID\n                    ? `PO-${String(selectedReturn.PurchaseID).padStart(3, \"0\")}`\n                    : \"N/A\"\n                }}\n              </p>\n              <p>\n                <strong>Supplier:</strong>\n                {{ getSupplierName(selectedReturn?.Items) || \"N/A\" }}\n              </p>\n              <p>\n                <strong>Total:</strong>\n                {{ formatCurrency(selectedReturn?.Total || 0) }}\n              </p>\n              <p>\n                <strong>Requested By:</strong> User ID\n                {{ selectedReturn?.UserID || \"N/A\" }}\n              </p>\n            </div>\n            <div class=\"mb-4\">\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\"\n                >Alasan Penolakan</label\n              >\n              <textarea\n                v-model=\"rejectReason\"\n                placeholder=\"Masukkan alasan penolakan...\"\n                rows=\"3\"\n                class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500\"\n                required\n              ></textarea>\n            </div>\n            <div class=\"flex justify-end gap-2\">\n              <button\n                @click=\"closeRejectModal\"\n                class=\"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600\"\n              >\n                Cancel\n              </button>\n              <button\n                @click=\"confirmReject\"\n                :disabled=\"rejecting || !rejectReason.trim()\"\n                class=\"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 disabled:opacity-50\"\n              >\n                {{ rejecting ? \"Rejecting...\" : \"Reject\" }}\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <!-- View Details Modal -->\n        <div\n          v-if=\"showDetailsModal\"\n          class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\n        >\n          <div\n            class=\"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto\"\n          >\n            <div class=\"flex justify-between items-center mb-4\">\n              <h2 class=\"text-xl font-bold\">Return Details</h2>\n              <button\n                @click=\"closeDetailsModal\"\n                class=\"text-gray-500 hover:text-gray-700 text-xl\"\n              >\n                &times;\n              </button>\n            </div>\n            <div v-if=\"selectedReturn\" class=\"space-y-4\">\n              <p>\n                <strong>Return No:</strong> RTN-{{\n                  formatReturnNumber(selectedReturnId)\n                }}\n              </p>\n              <p>\n                <strong>Purchase No:</strong>\n                {{\n                  selectedReturn?.PurchaseID\n                    ? `PO-${String(selectedReturn.PurchaseID).padStart(3, \"0\")}`\n                    : \"N/A\"\n                }}\n              </p>\n              <p>\n                <strong>Supplier:</strong>\n                {{ getSupplierName(selectedReturn?.Items) || \"N/A\" }}\n              </p>\n              <p>\n                <strong>Date:</strong> {{ formatDate(selectedReturn.Date) }}\n              </p>\n              <p>\n                <strong>Total:</strong>\n                {{ formatCurrency(selectedReturn.Total) }}\n              </p>\n              <p>\n                <strong>Requested By:</strong> User ID\n                {{ selectedReturn.UserID || \"N/A\" }}\n              </p>\n              <p v-if=\"selectedReturn.Notes\">\n                <strong>Additional Notes:</strong> {{ selectedReturn.Notes }}\n              </p>\n\n              <h3 class=\"text-lg font-semibold mt-4\">Return Items</h3>\n              <div class=\"overflow-x-auto\">\n                <table class=\"min-w-full bg-white border border-gray-300\">\n                  <thead>\n                    <tr class=\"bg-gray-100\">\n                      <th class=\"px-4 py-2 text-left text-gray-600\">Product</th>\n                      <th class=\"px-4 py-2 text-left text-gray-600\">Qty</th>\n                      <th class=\"px-4 py-2 text-left text-gray-600\">Price</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr\n                      v-for=\"(item, index) in selectedReturn.Items\"\n                      :key=\"index\"\n                      class=\"border-t border-gray-300\"\n                    >\n                      <td class=\"px-4 py-2 text-gray-700\">\n                        {{ item.Product?.name || item.product_name || \"N/A\" }}\n                      </td>\n                      <td class=\"px-4 py-2 text-gray-700\">{{ item.Qty }}</td>\n                      <td class=\"px-4 py-2 text-gray-700\">\n                        {{ formatCurrency(item.Price) }}\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- History Modal -->\n        <div\n          v-if=\"showHistoryModal\"\n          class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\n        >\n          <div\n            class=\"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto\"\n          >\n            <div class=\"flex justify-between items-center mb-4\">\n              <h2 class=\"text-xl font-bold\">Purchase Return History</h2>\n              <button\n                @click=\"closeHistoryModal\"\n                class=\"text-gray-500 hover:text-gray-700 text-xl\"\n              >\n                &times;\n              </button>\n            </div>\n            <div class=\"mb-4\">\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\"\n                >Filter by Status</label\n              >\n              <select\n                v-model=\"historyFilter\"\n                class=\"w-full px-3 py-2 border border-gray-300 rounded-md\"\n              >\n                <option value=\"\">All</option>\n                <option value=\"APPROVED\">Approved</option>\n                <option value=\"REJECTED\">Rejected</option>\n              </select>\n            </div>\n            <div class=\"overflow-x-auto\">\n              <table class=\"min-w-full bg-white border border-gray-300\">\n                <thead>\n                  <tr class=\"bg-gray-100\">\n                    <th class=\"px-4 py-2 text-left text-gray-600\">\n                      Return No.\n                    </th>\n                    <th class=\"px-4 py-2 text-left text-gray-600\">\n                      Purchase No.\n                    </th>\n                    <th class=\"px-4 py-2 text-left text-gray-600\">Date</th>\n                    <th class=\"px-4 py-2 text-left text-gray-600\">Supplier</th>\n                    <th class=\"px-4 py-2 text-left text-gray-600\">Total</th>\n                    <th class=\"px-4 py-2 text-left text-gray-600\">Status</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr v-if=\"loadingHistory\">\n                    <td colspan=\"6\" class=\"text-center py-8 text-gray-500\">\n                      Loading history...\n                    </td>\n                  </tr>\n                  <tr v-else-if=\"historyReturns.length === 0\">\n                    <td colspan=\"6\" class=\"text-center py-8 text-gray-500\">\n                      No history available.\n                    </td>\n                  </tr>\n                  <tr\n                    v-else\n                    v-for=\"item in historyReturns\"\n                    :key=\"item.id\"\n                    class=\"border-t border-gray-300\"\n                  >\n                    <td class=\"px-4 py-2 text-sm\">\n                      RTN-{{ formatReturnNumber(item.id) }}\n                    </td>\n                    <td class=\"px-4 py-2 text-sm\">\n                      {{\n                        item.purchase_id\n                          ? `PO-${String(item.purchase_id).padStart(3, \"0\")}`\n                          : \"N/A\"\n                      }}\n                    </td>\n                    <td class=\"px-4 py-2 text-sm\">\n                      {{ formatDate(item.date) }}\n                    </td>\n                    <td class=\"px-4 py-2 text-sm\">\n                      {{ getSupplierNameFromHistory(item) || \"N/A\" }}\n                    </td>\n                    <td class=\"px-4 py-2 text-sm\">\n                      {{ formatCurrency(item.total) }}\n                    </td>\n                    <td class=\"px-4 py-2 text-sm\">\n                      <span\n                        :class=\"getStatusClass(item.status)\"\n                        class=\"px-3 py-1 rounded-lg text-xs font-medium\"\n                      >\n                        {{ getStatusText(item.status) }}\n                      </span>\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, watch } from \"vue\";\nimport axios from \"axios\";\nimport KepalaGudangSidebar from \"@/components/KepalaGudangSidebar.vue\";\n\n// State\nconst purchaseReturns = ref([]);\nconst loading = ref(false);\nconst showApprovalModal = ref(false);\nconst showRejectModal = ref(false);\nconst showDetailsModal = ref(false);\nconst showHistoryModal = ref(false);\nconst selectedReturnId = ref(null);\nconst selectedReturn = ref(null);\nconst rejectReason = ref(\"\");\nconst approving = ref(false);\nconst rejecting = ref(false);\nconst loadingHistory = ref(false);\nconst historyReturns = ref([]);\nconst historyFilter = ref(\"\");\n\n// Ambil role dari localStorage\nconst role = localStorage.getItem(\"role\") || \"kepalagudang\";\n\n// Mapping role ke path backend\nconst endpointMap = {\n  kepalagudang: \"kepala-gudang\",\n  owner: \"owner\",\n  admin: \"admin\",\n};\n\n// Helper buat dapetin base URL sesuai role\nconst getBaseUrl = () => {\n  const path = endpointMap[role] || \"kepala-gudang\";\n  return `http://localhost:8081/api/v1/${path}`;\n};\n\n// Inisialisasi axios dengan baseURL\nconst api = axios.create({ baseURL: \"http://localhost:8081/api/v1\" });\nconst savedToken = localStorage.getItem(\"token\");\nif (savedToken) {\n  api.defaults.headers.common[\"Authorization\"] = `Bearer ${savedToken}`;\n}\n\n// Fetch data dari backend sesuai role\nconst fetchPurchaseReturns = async (status = \"PENDING\") => {\n  loading.value = true;\n  try {\n    const url = `${getBaseUrl()}/purchase-returns`;\n    const res = await api.get(url, {\n      params: { status, page: 1, size: 10 },\n    });\n\n    console.log(\"Respon backend Purchase Returns:\", res.data);\n\n    if (res.data.data && Array.isArray(res.data.data)) {\n      purchaseReturns.value = res.data.data;\n    } else {\n      purchaseReturns.value = [];\n    }\n\n    console.log(\"Purchase Returns loaded:\", purchaseReturns.value);\n  } catch (err) {\n    console.error(\n      \"Gagal ambil data Purchase Returns:\",\n      err.response?.data || err\n    );\n    alert(\n      `Gagal mengambil data retur: ${err.response?.status || \"\"} - ${\n        err.response?.data?.error || err.message\n      }`\n    );\n    purchaseReturns.value = [];\n  } finally {\n    loading.value = false;\n  }\n};\n\nconst fetchPurchaseReturnHistory = async () => {\n  loadingHistory.value = true;\n  try {\n    const url = `${getBaseUrl()}/purchase-returns/history`;\n    const res = await api.get(url, {\n      params: { status: historyFilter.value, page: 1, size: 10 },\n    });\n    if (res.data.data && Array.isArray(res.data.data)) {\n      historyReturns.value = res.data.data;\n    } else {\n      historyReturns.value = [];\n    }\n    console.log(\"Purchase Return History loaded:\", historyReturns.value);\n  } catch (err) {\n    console.error(\n      \"Gagal ambil data Purchase Return History:\",\n      err.response?.data || err\n    );\n    alert(\n      `Gagal mengambil data riwayat retur: ${err.response?.status || \"\"} - ${\n        err.response?.data?.error || err.message\n      }`\n    );\n    historyReturns.value = [];\n  } finally {\n    loadingHistory.value = false;\n  }\n};\n\n// Open Approval Modal\nconst openApprovalModal = async (id) => {\n  try {\n    const url = `${getBaseUrl()}/purchase-returns/${id}`;\n    const response = await api.get(url, {\n      params: { include_approver: true },\n    });\n    selectedReturn.value = response.data;\n    selectedReturnId.value = id;\n    showApprovalModal.value = true;\n  } catch (error) {\n    console.error(\n      \"Error fetching purchase return:\",\n      error.response ? error.response.data : error.message\n    );\n    alert(\n      \"Gagal memuat detail retur: \" +\n        (error.response?.data?.error || error.message)\n    );\n  }\n};\n\n// Close Approval Modal\nconst closeApprovalModal = () => {\n  showApprovalModal.value = false;\n  selectedReturn.value = null;\n  selectedReturnId.value = null;\n};\n\n// Confirm Approve\nconst confirmApprove = async () => {\n  if (!selectedReturnId.value) return;\n\n  approving.value = true;\n  try {\n    const url = `${getBaseUrl()}/purchase-returns/${\n      selectedReturnId.value\n    }/approve`;\n    const response = await api.post(url, {});\n    if (response.status === 200) {\n      alert(\"Retur berhasil disetujui!\");\n      closeApprovalModal();\n      fetchPurchaseReturns();\n    }\n  } catch (error) {\n    console.error(\n      \"Error approving purchase return:\",\n      error.response ? error.response.data : error.message\n    );\n    alert(\n      \"Gagal menyetujui retur: \" +\n        (error.response?.data?.error || error.message)\n    );\n  } finally {\n    approving.value = false;\n  }\n};\n\n// Open Reject Modal\nconst openRejectModal = async (id) => {\n  try {\n    const url = `${getBaseUrl()}/purchase-returns/${id}`;\n    const response = await api.get(url, {\n      params: { include_approver: true },\n    });\n    selectedReturn.value = response.data;\n    selectedReturnId.value = id;\n    rejectReason.value = \"\";\n    showRejectModal.value = true;\n  } catch (error) {\n    console.error(\n      \"Error fetching purchase return:\",\n      error.response ? error.response.data : error.message\n    );\n    alert(\n      \"Gagal memuat detail retur: \" +\n        (error.response?.data?.error || error.message)\n    );\n  }\n};\n\n// Close Reject Modal\nconst closeRejectModal = () => {\n  showRejectModal.value = false;\n  selectedReturn.value = null;\n  selectedReturnId.value = null;\n  rejectReason.value = \"\";\n};\n\n// Confirm Reject\nconst confirmReject = async () => {\n  if (!selectedReturnId.value || !rejectReason.value.trim()) {\n    alert(\"Alasan penolakan wajib diisi!\");\n    return;\n  }\n\n  rejecting.value = true;\n  try {\n    const url = `${getBaseUrl()}/purchase-returns/${\n      selectedReturnId.value\n    }/reject`;\n    const response = await api.post(url, {\n      reason: rejectReason.value.trim(),\n    });\n    if (response.status === 200) {\n      alert(\"Retur berhasil ditolak!\");\n      closeRejectModal();\n      fetchPurchaseReturns();\n    }\n  } catch (error) {\n    console.error(\n      \"Error rejecting purchase return:\",\n      error.response ? error.response.data : error.message\n    );\n    alert(\n      \"Gagal menolak retur: \" + (error.response?.data?.error || error.message)\n    );\n  } finally {\n    rejecting.value = false;\n  }\n};\n\n// View Details\nconst viewDetails = async (id) => {\n  try {\n    const url = `${getBaseUrl()}/purchase-returns/${id}`;\n    const response = await api.get(url, {\n      params: { include_approver: true },\n    });\n    selectedReturn.value = response.data;\n    selectedReturnId.value = id;\n    showDetailsModal.value = true;\n  } catch (error) {\n    console.error(\n      \"Error fetching purchase return details:\",\n      error.response ? error.response.data : error.message\n    );\n    alert(\n      \"Gagal memuat detail retur: \" +\n        (error.response?.data?.error || error.message)\n    );\n  }\n};\n\n// Close Details Modal\nconst closeDetailsModal = () => {\n  showDetailsModal.value = false;\n  selectedReturn.value = null;\n  selectedReturnId.value = null;\n};\n\n// Open History Modal\nconst openHistoryModal = () => {\n  showHistoryModal.value = true;\n  fetchPurchaseReturnHistory();\n};\n\n// Close History Modal\nconst closeHistoryModal = () => {\n  showHistoryModal.value = false;\n  historyReturns.value = [];\n  historyFilter.value = \"\";\n};\n\n// Watch filter changes\nwatch(historyFilter, () => {\n  fetchPurchaseReturnHistory();\n});\n\n// Format Return Number\nconst formatReturnNumber = (id) => {\n  return `2025-${String(id).padStart(3, \"0\")}`;\n};\n\n// Get Status Class\nconst getStatusClass = (status) => {\n  switch (status) {\n    case \"PENDING\":\n      return \"bg-yellow-200 text-yellow-800\";\n    case \"APPROVED\":\n      return \"bg-green-200 text-green-800\";\n    case \"REJECTED\":\n      return \"bg-red-200 text-red-800\";\n    default:\n      return \"bg-gray-200 text-gray-800\";\n  }\n};\n\n// Get Status Text\nconst getStatusText = (status) => {\n  switch (status) {\n    case \"PENDING\":\n      return \"Pending\";\n    case \"APPROVED\":\n      return \"Approved\";\n    case \"REJECTED\":\n      return \"Rejected\";\n    default:\n      return status;\n  }\n};\n\n// Get First Product Name\nconst getFirstProductName = (items) => {\n  if (items && items.length > 0) {\n    return items[0].Product?.name || items[0].product_name || \"N/A\";\n  }\n  return \"N/A\";\n};\n\n// Get Supplier Name from Items\nconst getSupplierName = (items) => {\n  if (items && items.length > 0) {\n    return items[0].Product?.supplier?.name || \"N/A\";\n  }\n  return \"N/A\";\n};\n\n// Get Supplier Name from History\nconst getSupplierNameFromHistory = (item) => {\n  return item.supplier_id ? \"Supplier ID: \" + item.supplier_id : \"N/A\";\n};\n\n// Format Date\nconst formatDate = (dateStr) => {\n  if (!dateStr) return \"N/A\";\n  const date = new Date(dateStr);\n  return date.toLocaleDateString(\"id-ID\", {\n    day: \"2-digit\",\n    month: \"2-digit\",\n    year: \"numeric\",\n  });\n};\n\n// Format Currency\nconst formatCurrency = (amount) => {\n  return amount !== undefined && amount !== null\n    ? new Intl.NumberFormat(\"id-ID\", {\n        style: \"currency\",\n        currency: \"IDR\",\n        minimumFractionDigits: 0,\n      }).format(amount)\n    : \"Rp 0\";\n};\n\nonMounted(() => {\n  fetchPurchaseReturns();\n});\n</script>\n\n<style scoped>\n@container (max-width: 120px) {\n  .table-column-120 {\n    display: none;\n  }\n}\n@container (max-width: 240px) {\n  .table-column-240 {\n    display: none;\n  }\n}\n@container (max-width: 360px) {\n  .table-column-360 {\n    display: none;\n  }\n}\n@container (max-width: 480px) {\n  .table-column-480 {\n    display: none;\n  }\n}\n@container (max-width: 600px) {\n  .table-column-600 {\n    display: none;\n  }\n}\n@container (max-width: 720px) {\n  .table-column-720 {\n    display: none;\n  }\n}\n@container (max-width: 840px) {\n  .table-column-840 {\n    display: none;\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}