{"ast":null,"code":"import { ref, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport OwnerLayouts from \"../components/OwnerLayouts.vue\";\nexport default {\n  __name: 'ManagementVoucherOwner',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const vouchers = ref([]);\n    const loading = ref(true);\n    const showModal = ref(false);\n    const isEditMode = ref(false);\n    const formData = ref({\n      id: null,\n      code: \"\",\n      type: \"PERCENT\",\n      value: 0,\n      active: true\n    });\n    const fetchVouchers = async () => {\n      try {\n        const token = localStorage.getItem(\"token\");\n        const res = await axios.get(\"http://localhost:8081/api/v1/vouchers\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        vouchers.value = res.data.data || [];\n      } catch (err) {\n        console.error(\"Error fetching vouchers:\", err);\n      } finally {\n        loading.value = false;\n      }\n    };\n    const openCreateModal = () => {\n      isEditMode.value = false;\n      formData.value = {\n        id: null,\n        code: \"\",\n        type: \"PERCENT\",\n        value: 0,\n        active: true\n      };\n      showModal.value = true;\n    };\n    const openEditModal = voucher => {\n      isEditMode.value = true;\n      formData.value = {\n        id: voucher.ID,\n        code: voucher.Code,\n        type: voucher.Type,\n        value: voucher.Value,\n        active: voucher.Active\n      };\n      showModal.value = true;\n    };\n    const closeModal = () => {\n      showModal.value = false;\n    };\n    const submitForm = async () => {\n      try {\n        const token = localStorage.getItem(\"token\");\n        const url = isEditMode.value ? `http://localhost:8081/api/v1/owner/vouchers/${formData.value.id}` : \"http://localhost:8081/api/v1/owner/vouchers\";\n        const method = isEditMode.value ? \"put\" : \"post\";\n        const payload = {\n          code: formData.value.code,\n          type: formData.value.type,\n          value: formData.value.value,\n          active: formData.value.active\n        };\n        await axios({\n          method,\n          url,\n          data: payload,\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        fetchVouchers();\n        closeModal();\n      } catch (err) {\n        console.error(\"Error saving voucher:\", err);\n      }\n    };\n    const confirmDelete = async id => {\n      if (!confirm(\"Are you sure want to delete this voucher?\")) return;\n      try {\n        const token = localStorage.getItem(\"token\");\n        await axios.delete(`http://localhost:8081/api/v1/owner/vouchers/${id}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        fetchVouchers();\n      } catch (err) {\n        console.error(\"Error deleting voucher:\", err);\n      }\n    };\n    onMounted(() => {\n      fetchVouchers();\n    });\n    const __returned__ = {\n      vouchers,\n      loading,\n      showModal,\n      isEditMode,\n      formData,\n      fetchVouchers,\n      openCreateModal,\n      openEditModal,\n      closeModal,\n      submitForm,\n      confirmDelete,\n      ref,\n      onMounted,\n      get axios() {\n        return axios;\n      },\n      OwnerLayouts\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","axios","OwnerLayouts","vouchers","loading","showModal","isEditMode","formData","id","code","type","value","active","fetchVouchers","token","localStorage","getItem","res","get","headers","Authorization","data","err","console","error","openCreateModal","openEditModal","voucher","ID","Code","Type","Value","Active","closeModal","submitForm","url","method","payload","confirmDelete","confirm","delete"],"sources":["C:/Users/Personal/Documents/PKL/PKL Shop Managements/vue/src/views/ManagementVoucherOwner.vue"],"sourcesContent":["<template>\r\n  <OwnerLayouts>\r\n    <div class=\"flex flex-1 justify-center py-5\">\r\n      <div class=\"layout-content-container flex flex-col max-w-[960px] flex-1\">\r\n        <!-- Title -->\r\n        <div class=\"flex flex-wrap justify-between gap-3 p-4\">\r\n          <p\r\n            class=\"text-[#111418] tracking-light text-[32px] font-bold leading-tight min-w-72\"\r\n          >\r\n            Management Voucher\r\n          </p>\r\n          <button\r\n            @click=\"openCreateModal\"\r\n            class=\"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-8 px-4 bg-[#f0f2f5] text-[#111418] text-sm font-medium leading-normal\"\r\n          >\r\n            <span class=\"truncate\">Add Voucher</span>\r\n          </button>\r\n        </div>\r\n\r\n        <!-- Table -->\r\n        <div class=\"px-4 py-3\">\r\n          <div\r\n            class=\"flex overflow-hidden rounded-lg border border-[#dbe0e6] bg-white\"\r\n          >\r\n            <table class=\"flex-1\">\r\n              <thead>\r\n                <tr class=\"bg-white\">\r\n                  <th class=\"px-4 py-3 text-left text-sm font-medium\">ID</th>\r\n                  <th class=\"px-4 py-3 text-left text-sm font-medium\">Code</th>\r\n                  <th class=\"px-4 py-3 text-left text-sm font-medium\">Type</th>\r\n                  <th class=\"px-4 py-3 text-left text-sm font-medium\">Value</th>\r\n                  <th class=\"px-4 py-3 text-left text-sm font-medium\">\r\n                    Active\r\n                  </th>\r\n                  <th class=\"px-4 py-3 text-left text-sm font-medium\">\r\n                    Actions\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr v-if=\"loading\" class=\"border-t\">\r\n                  <td\r\n                    colspan=\"6\"\r\n                    class=\"h-[72px] text-center text-sm text-[#60758a]\"\r\n                  >\r\n                    Loading...\r\n                  </td>\r\n                </tr>\r\n                <tr v-else-if=\"vouchers.length === 0\" class=\"border-t\">\r\n                  <td\r\n                    colspan=\"6\"\r\n                    class=\"h-[72px] text-center text-sm text-[#60758a]\"\r\n                  >\r\n                    No vouchers found.\r\n                  </td>\r\n                </tr>\r\n                <tr\r\n                  v-for=\"voucher in vouchers\"\r\n                  :key=\"voucher.ID\"\r\n                  class=\"border-t\"\r\n                >\r\n                  <td class=\"px-4 py-2 text-sm\">{{ voucher.ID }}</td>\r\n                  <td class=\"px-4 py-2 text-sm\">{{ voucher.Code }}</td>\r\n                  <td class=\"px-4 py-2 text-sm\">{{ voucher.Type }}</td>\r\n                  <td class=\"px-4 py-2 text-sm\">{{ voucher.Value }}</td>\r\n                  <td class=\"px-4 py-2 text-sm\">\r\n                    <span\r\n                      :class=\"\r\n                        voucher.Active ? 'text-green-600' : 'text-red-600'\r\n                      \"\r\n                    >\r\n                      {{ voucher.Active ? \"Active\" : \"Inactive\" }}\r\n                    </span>\r\n                  </td>\r\n                  <td class=\"px-4 py-2 text-sm font-bold text-[#60758a]\">\r\n                    <span\r\n                      class=\"text-blue-500 hover:underline cursor-pointer\"\r\n                      @click=\"openEditModal(voucher)\"\r\n                      >Edit</span\r\n                    >\r\n                    /\r\n                    <span\r\n                      class=\"text-red-500 hover:underline cursor-pointer\"\r\n                      @click=\"confirmDelete(voucher.ID)\"\r\n                      >Delete</span\r\n                    >\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Modal -->\r\n        <div\r\n          v-if=\"showModal\"\r\n          class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\"\r\n        >\r\n          <div class=\"bg-white rounded-lg p-6 w-full max-w-md\">\r\n            <h2 class=\"text-xl font-bold mb-4\">\r\n              {{ isEditMode ? \"Edit Voucher\" : \"Create Voucher\" }}\r\n            </h2>\r\n            <form @submit.prevent=\"submitForm\">\r\n              <!-- Code -->\r\n              <div class=\"mb-4\">\r\n                <label class=\"block text-sm font-medium mb-1\">Code</label>\r\n                <input\r\n                  v-model=\"formData.code\"\r\n                  type=\"text\"\r\n                  class=\"w-full rounded-lg border border-[#dbe0e6] p-2 text-sm\"\r\n                  placeholder=\"Enter voucher code\"\r\n                  required\r\n                />\r\n              </div>\r\n\r\n              <!-- Type -->\r\n              <div class=\"mb-4\">\r\n                <label class=\"block text-sm font-medium mb-1\">Type</label>\r\n                <select\r\n                  v-model=\"formData.type\"\r\n                  class=\"w-full rounded-lg border border-[#dbe0e6] p-2 text-sm\"\r\n                  required\r\n                >\r\n                  <option value=\"PERCENT\">PERCENT</option>\r\n                  <option value=\"AMOUNT\">AMOUNT</option>\r\n                </select>\r\n              </div>\r\n\r\n              <!-- Value -->\r\n              <div class=\"mb-4\">\r\n                <label class=\"block text-sm font-medium mb-1\">Value</label>\r\n                <input\r\n                  v-model.number=\"formData.value\"\r\n                  type=\"number\"\r\n                  class=\"w-full rounded-lg border border-[#dbe0e6] p-2 text-sm\"\r\n                  placeholder=\"Enter voucher value\"\r\n                  required\r\n                />\r\n              </div>\r\n\r\n              <!-- Active -->\r\n              <div class=\"mb-4\">\r\n                <label class=\"block text-sm font-medium mb-1\">Active</label>\r\n                <select\r\n                  v-model=\"formData.active\"\r\n                  class=\"w-full rounded-lg border border-[#dbe0e6] p-2 text-sm\"\r\n                >\r\n                  <option :value=\"true\">Active</option>\r\n                  <option :value=\"false\">Inactive</option>\r\n                </select>\r\n              </div>\r\n\r\n              <!-- Buttons -->\r\n              <div class=\"flex justify-end gap-3\">\r\n                <button\r\n                  type=\"button\"\r\n                  @click=\"closeModal\"\r\n                  class=\"px-4 py-2 bg-gray-200 text-sm rounded-lg\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  class=\"px-4 py-2 bg-blue-500 text-white text-sm rounded-lg\"\r\n                >\r\n                  {{ isEditMode ? \"Update\" : \"Create\" }}\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </OwnerLayouts>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from \"vue\";\r\nimport axios from \"axios\";\r\nimport OwnerLayouts from \"../components/OwnerLayouts.vue\";\r\n\r\nconst vouchers = ref([]);\r\nconst loading = ref(true);\r\nconst showModal = ref(false);\r\nconst isEditMode = ref(false);\r\nconst formData = ref({\r\n  id: null,\r\n  code: \"\",\r\n  type: \"PERCENT\",\r\n  value: 0,\r\n  active: true,\r\n});\r\n\r\nconst fetchVouchers = async () => {\r\n  try {\r\n    const token = localStorage.getItem(\"token\");\r\n    const res = await axios.get(\"http://localhost:8081/api/v1/vouchers\", {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    });\r\n    vouchers.value = res.data.data || [];\r\n  } catch (err) {\r\n    console.error(\"Error fetching vouchers:\", err);\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\nconst openCreateModal = () => {\r\n  isEditMode.value = false;\r\n  formData.value = {\r\n    id: null,\r\n    code: \"\",\r\n    type: \"PERCENT\",\r\n    value: 0,\r\n    active: true,\r\n  };\r\n  showModal.value = true;\r\n};\r\n\r\nconst openEditModal = (voucher) => {\r\n  isEditMode.value = true;\r\n  formData.value = {\r\n    id: voucher.ID,\r\n    code: voucher.Code,\r\n    type: voucher.Type,\r\n    value: voucher.Value,\r\n    active: voucher.Active,\r\n  };\r\n  showModal.value = true;\r\n};\r\n\r\nconst closeModal = () => {\r\n  showModal.value = false;\r\n};\r\n\r\nconst submitForm = async () => {\r\n  try {\r\n    const token = localStorage.getItem(\"token\");\r\n    const url = isEditMode.value\r\n      ? `http://localhost:8081/api/v1/owner/vouchers/${formData.value.id}`\r\n      : \"http://localhost:8081/api/v1/owner/vouchers\";\r\n    const method = isEditMode.value ? \"put\" : \"post\";\r\n    const payload = {\r\n      code: formData.value.code,\r\n      type: formData.value.type,\r\n      value: formData.value.value,\r\n      active: formData.value.active,\r\n    };\r\n    await axios({\r\n      method,\r\n      url,\r\n      data: payload,\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    });\r\n    fetchVouchers();\r\n    closeModal();\r\n  } catch (err) {\r\n    console.error(\"Error saving voucher:\", err);\r\n  }\r\n};\r\n\r\nconst confirmDelete = async (id) => {\r\n  if (!confirm(\"Are you sure want to delete this voucher?\")) return;\r\n  try {\r\n    const token = localStorage.getItem(\"token\");\r\n    await axios.delete(`http://localhost:8081/api/v1/owner/vouchers/${id}`, {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    });\r\n    fetchVouchers();\r\n  } catch (err) {\r\n    console.error(\"Error deleting voucher:\", err);\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  fetchVouchers();\r\n});\r\n</script>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}