{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport axios from \"axios\";\nimport OwnerLayouts from \"../components/OwnerLayouts.vue\";\n\n// --- Product object (snake_case) ---\n\nexport default {\n  __name: 'AddProductOwner',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const product = ref({\n      name: \"\",\n      code: \"\",\n      description: \"\",\n      cost_price: null,\n      sell_price: null,\n      stock: null,\n      category_id: null,\n      unit_id: null,\n      supplier_id: null\n    });\n    const categories = ref([]);\n    const units = ref([]);\n    const suppliers = ref([]);\n    const loading = ref(false);\n    const router = useRouter();\n\n    // --- Fetch categories, units, suppliers ---\n    const fetchData = async () => {\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (!token) return;\n        const [catRes, unitRes, supRes] = await Promise.all([axios.get(\"http://192.168.100.111:8081/api/v1/categories\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }), axios.get(\"http://192.168.100.111:8081/api/v1/units\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }), axios.get(\"http://192.168.100.111:8081/api/v1/suppliers\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        })]);\n        categories.value = catRes.data.data || [];\n        units.value = unitRes.data.data || [];\n        suppliers.value = supRes.data.data || [];\n      } catch (err) {\n        console.error(\"Error fetching data:\", err.response?.data || err.message);\n      }\n    };\n\n    // --- Create product ---\n    const createProduct = async () => {\n      // Frontend validation\n      if (!product.value.name || !product.value.category_id || !product.value.unit_id || product.value.cost_price === null || product.value.sell_price === null || !product.value.supplier_id) {\n        alert(\"Please fill in all required fields.\");\n        return;\n      }\n      loading.value = true;\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (!token) {\n          alert(\"Authentication token missing. Please log in.\");\n          loading.value = false;\n          return;\n        }\n        await axios.post(\"http://192.168.100.111:8081/api/v1/products\", product.value, {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`\n          }\n        });\n        alert(\"Product added successfully!\");\n        router.push(\"/management-product\");\n      } catch (err) {\n        console.error(\"Error creating product:\", err.response?.data || err.message);\n        alert(\"Failed to add product. Check console for details.\");\n      } finally {\n        loading.value = false;\n      }\n    };\n    onMounted(() => {\n      fetchData();\n    });\n\n    // --- Reusable components ---\n    const InputField = {\n      props: [\"label\", \"modelValue\", \"type\", \"placeholder\"],\n      emits: [\"update:modelValue\"],\n      template: `\n    <label class=\"flex flex-col min-w-40 flex-1\">\n      <p class=\"text-[#111418] text-base font-medium leading-normal pb-2\">{{ label }}</p>\n      <input\n        :type=\"type || 'text'\"\n        :placeholder=\"placeholder\"\n        class=\"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border border-[#dbe0e6] bg-white focus:border-[#dbe0e6] h-14 p-[15px] text-base font-normal leading-normal placeholder:text-[#60758a]\"\n        :value=\"modelValue\"\n        @input=\"$emit('update:modelValue', $event.target.value)\"\n      />\n    </label>\n  `\n    };\n    const TextAreaField = {\n      props: [\"label\", \"modelValue\", \"placeholder\"],\n      emits: [\"update:modelValue\"],\n      template: `\n    <label class=\"flex flex-col min-w-40 flex-1\">\n      <p class=\"text-[#111418] text-base font-medium leading-normal pb-2\">{{ label }}</p>\n      <textarea\n        :placeholder=\"placeholder\"\n        class=\"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border border-[#dbe0e6] bg-white focus:border-[#dbe0e6] min-h-36 p-[15px] text-base font-normal leading-normal placeholder:text-[#60758a]\"\n        :value=\"modelValue\"\n        @input=\"$emit('update:modelValue', $event.target.value)\"\n      ></textarea>\n    </label>\n  `\n    };\n    const SelectField = {\n      props: [\"label\", \"modelValue\", \"options\"],\n      emits: [\"update:modelValue\"],\n      template: `\n    <label class=\"flex flex-col min-w-40 flex-1\">\n      <p class=\"text-[#111418] text-base font-medium leading-normal pb-2\">{{ label }}</p>\n      <select\n        class=\"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border border-[#dbe0e6] bg-white focus:border-[#dbe0e6] h-14 p-[15px] text-base font-normal leading-normal\"\n        :value=\"modelValue\"\n        @change=\"$emit('update:modelValue', Number($event.target.value))\"\n      >\n        <option disabled value=\"\">Select {{ label.toLowerCase() }}</option>\n        <option v-for=\"opt in options\" :key=\"opt.id\" :value=\"opt.id\">{{ opt.name }}</option>\n      </select>\n    </label>\n  `\n    };\n    const __returned__ = {\n      product,\n      categories,\n      units,\n      suppliers,\n      loading,\n      router,\n      fetchData,\n      createProduct,\n      InputField,\n      TextAreaField,\n      SelectField,\n      ref,\n      onMounted,\n      get useRouter() {\n        return useRouter;\n      },\n      get axios() {\n        return axios;\n      },\n      OwnerLayouts\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","useRouter","axios","OwnerLayouts","product","name","code","description","cost_price","sell_price","stock","category_id","unit_id","supplier_id","categories","units","suppliers","loading","router","fetchData","token","localStorage","getItem","catRes","unitRes","supRes","Promise","all","get","headers","Authorization","value","data","err","console","error","response","message","createProduct","alert","post","push","InputField","props","emits","template","TextAreaField","SelectField"],"sources":["C:/Users/SPC STYLE 5/aplikasi/src/views/AddProductOwner.vue"],"sourcesContent":["<template>\n  <OwnerLayouts>\n    <div class=\"flex flex-1 flex-col py-5 p-8\">\n      <div class=\"layout-content-container flex flex-col flex-1\">\n        <form @submit.prevent=\"createProduct\" class=\"flex flex-col flex-1\">\n\n          <!-- Header -->\n          <div class=\"flex flex-wrap justify-between gap-3 p-4\">\n            <div class=\"flex flex-col gap-3\">\n              <p class=\"text-[#111418] tracking-light text-[32px] font-bold leading-tight\">\n                Add Product\n              </p>\n              <p class=\"text-[#60758a] text-sm font-normal leading-normal\">\n                Fill in the details below to add a new product to your inventory.\n              </p>\n            </div>\n            <router-link to=\"/management-product\">\n              <button type=\"button\" class=\"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-8 px-4 bg-[#f0f2f5] text-[#111418] text-sm font-medium leading-normal\">\n                <span class=\"truncate\">Kembali</span>\n              </button>\n            </router-link>\n          </div>\n\n          <!-- Form Inputs -->\n          <div class=\"flex flex-col gap-4 p-4\">\n            <InputField label=\"Product Name\" v-model=\"product.name\" placeholder=\"Enter product name\" />\n            <InputField label=\"Product Code\" v-model=\"product.code\" placeholder=\"Enter product code\" />\n            <TextAreaField label=\"Description\" v-model=\"product.description\" placeholder=\"Enter product description\" />\n            <InputField label=\"Purchase Price\" v-model.number=\"product.cost_price\" type=\"number\" placeholder=\"Enter purchase price\" />\n            <InputField label=\"Selling Price\" v-model.number=\"product.sell_price\" type=\"number\" placeholder=\"Enter selling price\" />\n            <InputField label=\"Stock\" v-model.number=\"product.stock\" type=\"number\" placeholder=\"Enter stock quantity\" />\n\n            <SelectField label=\"Category\" v-model.number=\"product.category_id\" :options=\"categories\" />\n            <SelectField label=\"Unit\" v-model.number=\"product.unit_id\" :options=\"units\" />\n            <SelectField label=\"Supplier\" v-model.number=\"product.supplier_id\" :options=\"suppliers\" />\n          </div>\n\n          <!-- Buttons -->\n          <div class=\"flex justify-stretch\">\n            <div class=\"flex flex-1 gap-3 flex-wrap p-4 justify-end\">\n              <router-link to=\"/management-product\">\n                <button type=\"button\" class=\"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-[#f0f2f5] text-[#111418] text-sm font-bold leading-normal tracking-[0.015em]\">\n                  <span class=\"truncate\">Cancel</span>\n                </button>\n              </router-link>\n              <button type=\"submit\" :disabled=\"loading\" class=\"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-[#0d80f2] text-white text-sm font-bold leading-normal tracking-[0.015em]\" :class=\"{ 'opacity-50 cursor-not-allowed': loading }\">\n                <span v-if=\"loading\">Saving...</span>\n                <span v-else>Save</span>\n              </button>\n            </div>\n          </div>\n\n        </form>\n      </div>\n    </div>\n  </OwnerLayouts>\n</template>\n\n<script setup>\nimport { ref, onMounted } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport axios from \"axios\";\nimport OwnerLayouts from \"../components/OwnerLayouts.vue\";\n\n// --- Product object (snake_case) ---\nconst product = ref({\n  name: \"\",\n  code: \"\",\n  description: \"\",\n  cost_price: null,\n  sell_price: null,\n  stock: null,\n  category_id: null,\n  unit_id: null,\n  supplier_id: null,\n});\n\nconst categories = ref([]);\nconst units = ref([]);\nconst suppliers = ref([]);\nconst loading = ref(false);\nconst router = useRouter();\n\n// --- Fetch categories, units, suppliers ---\nconst fetchData = async () => {\n  try {\n    const token = localStorage.getItem(\"token\");\n    if (!token) return;\n\n    const [catRes, unitRes, supRes] = await Promise.all([\n      axios.get(\"http://192.168.100.111:8081/api/v1/categories\", { headers: { Authorization: `Bearer ${token}` } }),\n      axios.get(\"http://192.168.100.111:8081/api/v1/units\", { headers: { Authorization: `Bearer ${token}` } }),\n      axios.get(\"http://192.168.100.111:8081/api/v1/suppliers\", { headers: { Authorization: `Bearer ${token}` } }),\n    ]);\n\n    categories.value = catRes.data.data || [];\n    units.value = unitRes.data.data || [];\n    suppliers.value = supRes.data.data || [];\n\n  } catch (err) {\n    console.error(\"Error fetching data:\", err.response?.data || err.message);\n  }\n};\n\n// --- Create product ---\nconst createProduct = async () => {\n  // Frontend validation\n  if (\n    !product.value.name ||\n    !product.value.category_id ||\n    !product.value.unit_id ||\n    product.value.cost_price === null ||\n    product.value.sell_price === null ||\n    !product.value.supplier_id\n  ) {\n    alert(\"Please fill in all required fields.\");\n    return;\n  }\n\n  loading.value = true;\n  try {\n    const token = localStorage.getItem(\"token\");\n    if (!token) {\n      alert(\"Authentication token missing. Please log in.\");\n      loading.value = false;\n      return;\n    }\n\n    await axios.post(\"http://192.168.100.111:8081/api/v1/products\", product.value, {\n      headers: { \"Content-Type\": \"application/json\", Authorization: `Bearer ${token}` },\n    });\n\n    alert(\"Product added successfully!\");\n    router.push(\"/management-product\");\n  } catch (err) {\n    console.error(\"Error creating product:\", err.response?.data || err.message);\n    alert(\"Failed to add product. Check console for details.\");\n  } finally {\n    loading.value = false;\n  }\n};\n\nonMounted(() => {\n  fetchData();\n});\n\n// --- Reusable components ---\nconst InputField = {\n  props: [\"label\", \"modelValue\", \"type\", \"placeholder\"],\n  emits: [\"update:modelValue\"],\n  template: `\n    <label class=\"flex flex-col min-w-40 flex-1\">\n      <p class=\"text-[#111418] text-base font-medium leading-normal pb-2\">{{ label }}</p>\n      <input\n        :type=\"type || 'text'\"\n        :placeholder=\"placeholder\"\n        class=\"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border border-[#dbe0e6] bg-white focus:border-[#dbe0e6] h-14 p-[15px] text-base font-normal leading-normal placeholder:text-[#60758a]\"\n        :value=\"modelValue\"\n        @input=\"$emit('update:modelValue', $event.target.value)\"\n      />\n    </label>\n  `\n};\n\nconst TextAreaField = {\n  props: [\"label\", \"modelValue\", \"placeholder\"],\n  emits: [\"update:modelValue\"],\n  template: `\n    <label class=\"flex flex-col min-w-40 flex-1\">\n      <p class=\"text-[#111418] text-base font-medium leading-normal pb-2\">{{ label }}</p>\n      <textarea\n        :placeholder=\"placeholder\"\n        class=\"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border border-[#dbe0e6] bg-white focus:border-[#dbe0e6] min-h-36 p-[15px] text-base font-normal leading-normal placeholder:text-[#60758a]\"\n        :value=\"modelValue\"\n        @input=\"$emit('update:modelValue', $event.target.value)\"\n      ></textarea>\n    </label>\n  `\n};\n\nconst SelectField = {\n  props: [\"label\", \"modelValue\", \"options\"],\n  emits: [\"update:modelValue\"],\n  template: `\n    <label class=\"flex flex-col min-w-40 flex-1\">\n      <p class=\"text-[#111418] text-base font-medium leading-normal pb-2\">{{ label }}</p>\n      <select\n        class=\"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border border-[#dbe0e6] bg-white focus:border-[#dbe0e6] h-14 p-[15px] text-base font-normal leading-normal\"\n        :value=\"modelValue\"\n        @change=\"$emit('update:modelValue', Number($event.target.value))\"\n      >\n        <option disabled value=\"\">Select {{ label.toLowerCase() }}</option>\n        <option v-for=\"opt in options\" :key=\"opt.id\" :value=\"opt.id\">{{ opt.name }}</option>\n      </select>\n    </label>\n  `\n};\n</script>\n\n<style scoped>\n/* Bisa custom styling jika diperlukan */\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}