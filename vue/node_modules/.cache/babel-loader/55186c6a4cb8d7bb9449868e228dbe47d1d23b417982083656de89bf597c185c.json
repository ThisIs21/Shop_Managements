{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, onMounted } from \"vue\";\nimport OwnerLayouts from \"../components/OwnerLayouts.vue\";\nimport { RouterLink } from \"vue-router\";\nimport axios from \"axios\";\nimport jsPDF from \"jspdf\";\nimport autoTable from \"jspdf-autotable\";\nexport default {\n  __name: 'PurchaseReturnSummaryOwners',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const selectedPeriod = ref(\"monthly\");\n    const rows = ref([]);\n    const token = localStorage.getItem(\"token\");\n\n    // Fetch data dari API\n    const fetchData = async () => {\n      try {\n        const res = await axios.get(\"http://localhost:8081/api/v1/owner/reports\", {\n          params: {\n            type: \"purchase-returns\",\n            by: selectedPeriod.value === \"daily\" ? \"day\" : selectedPeriod.value === \"monthly\" ? \"month\" : \"year\"\n          },\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        rows.value = res.data.data || [];\n      } catch (err) {\n        console.error(\"Failed to fetch data:\", err);\n      }\n    };\n    const changePeriod = period => {\n      selectedPeriod.value = period;\n      fetchData();\n    };\n\n    // Export CSV\n    const exportCSV = () => {\n      if (!rows.value.length) return;\n      let csvContent = \"data:text/csv;charset=utf-8,\";\n      csvContent += \"Period,Return Count,Total Return Value\\n\";\n      rows.value.forEach(row => {\n        csvContent += `${row.period},${row.trx},${row.total}\\n`;\n      });\n      const encodedUri = encodeURI(csvContent);\n      const link = document.createElement(\"a\");\n      link.setAttribute(\"href\", encodedUri);\n      link.setAttribute(\"download\", \"purchase_return_summary.csv\");\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    };\n\n    // Export PDF\n    const exportPDF = () => {\n      const doc = new jsPDF();\n      doc.text(\"Purchase Return Summary\", 14, 16);\n      autoTable(doc, {\n        head: [[\"Period\", \"Return Count\", \"Total Return Value\"]],\n        body: rows.value.map(r => [r.period, r.trx, r.total])\n      });\n      doc.save(\"purchase_return_summary.pdf\");\n    };\n    const formatNumber = num => {\n      return new Intl.NumberFormat(\"id-ID\").format(num);\n    };\n    onMounted(() => {\n      fetchData();\n    });\n    const __returned__ = {\n      selectedPeriod,\n      rows,\n      token,\n      fetchData,\n      changePeriod,\n      exportCSV,\n      exportPDF,\n      formatNumber,\n      ref,\n      onMounted,\n      OwnerLayouts,\n      get RouterLink() {\n        return RouterLink;\n      },\n      get axios() {\n        return axios;\n      },\n      get jsPDF() {\n        return jsPDF;\n      },\n      get autoTable() {\n        return autoTable;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","OwnerLayouts","RouterLink","axios","jsPDF","autoTable","selectedPeriod","rows","token","localStorage","getItem","fetchData","res","get","params","type","by","value","headers","Authorization","data","err","console","error","changePeriod","period","exportCSV","length","csvContent","forEach","row","trx","total","encodedUri","encodeURI","link","document","createElement","setAttribute","body","appendChild","click","removeChild","exportPDF","doc","text","head","map","r","save","formatNumber","num","Intl","NumberFormat","format"],"sources":["C:/Users/Personal/Documents/PKL/penjualan/vuee/aplikasi/src/views/PurchaseReturnSummaryOwners.vue"],"sourcesContent":["<template>\n  <OwnerLayouts>\n    <div class=\"flex flex-1 flex-col py-5 p-8\">\n      <div class=\"layout-content-container flex flex-col flex-1\">\n        <!-- Header -->\n        <div class=\"flex items-center gap-4 p-4\">\n          <RouterLink\n            to=\"/report-owners\"\n            class=\"flex items-center justify-center h-10 w-10 text-[#111418] rounded-full hover:bg-gray-100 transition-colors\"\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              width=\"24px\"\n              height=\"24px\"\n              fill=\"currentColor\"\n              viewBox=\"0 0 256 256\"\n            >\n              <path\n                d=\"M165.66,202.34a8,8,0,0,1-11.32,11.32l-80-80a8,8,0,0,1,0-11.32l80-80a8,8,0,0,1,11.32,11.32L91.31,128Z\"\n              ></path>\n            </svg>\n          </RouterLink>\n          <div class=\"flex min-w-72 flex-col gap-1\">\n            <p\n              class=\"text-[#111418] tracking-light text-[32px] font-bold leading-tight\"\n            >\n              Purchase Return Summary\n            </p>\n            <p class=\"text-[#60758a] text-sm font-normal leading-normal\">\n              View and export purchase return data.\n            </p>\n          </div>\n        </div>\n\n        <!-- Tabs Daily/Monthly/Yearly -->\n        <div class=\"flex flex-col\">\n          <div class=\"flex border-b border-[#dbe0e6] px-4 gap-8\">\n            <a\n              class=\"flex flex-col items-center justify-center pb-[13px] pt-4 cursor-pointer\"\n              :class=\"{\n                'border-b-[3px] border-b-[#111418] text-[#111418]':\n                  selectedPeriod === 'daily',\n                'border-b-[3px] border-b-transparent text-[#60758a]':\n                  selectedPeriod !== 'daily',\n              }\"\n              @click=\"changePeriod('daily')\"\n            >\n              <p class=\"text-sm font-bold\">Daily</p>\n            </a>\n\n            <a\n              class=\"flex flex-col items-center justify-center pb-[13px] pt-4 cursor-pointer\"\n              :class=\"{\n                'border-b-[3px] border-b-[#111418] text-[#111418]':\n                  selectedPeriod === 'monthly',\n                'border-b-[3px] border-b-transparent text-[#60758a]':\n                  selectedPeriod !== 'monthly',\n              }\"\n              @click=\"changePeriod('monthly')\"\n            >\n              <p class=\"text-sm font-bold\">Monthly</p>\n            </a>\n\n            <a\n              class=\"flex flex-col items-center justify-center pb-[13px] pt-4 cursor-pointer\"\n              :class=\"{\n                'border-b-[3px] border-b-[#111418] text-[#111418]':\n                  selectedPeriod === 'yearly',\n                'border-b-[3px] border-b-transparent text-[#60758a]':\n                  selectedPeriod !== 'yearly',\n              }\"\n              @click=\"changePeriod('yearly')\"\n            >\n              <p class=\"text-sm font-bold\">Yearly</p>\n            </a>\n          </div>\n        </div>\n\n        <!-- Table -->\n        <div class=\"px-4 py-3 @container\">\n          <div\n            class=\"flex overflow-hidden rounded-lg border border-[#dbe0e6] bg-white\"\n          >\n            <table class=\"flex-1\">\n              <thead>\n                <tr class=\"bg-white\">\n                  <th\n                    class=\"px-4 py-3 text-left text-[#111418] text-sm font-medium\"\n                  >\n                    Period\n                  </th>\n                  <th\n                    class=\"px-4 py-3 text-left text-[#111418] text-sm font-medium\"\n                  >\n                    Return Count\n                  </th>\n                  <th\n                    class=\"px-4 py-3 text-left text-[#111418] text-sm font-medium\"\n                  >\n                    Total Return Value\n                  </th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr\n                  v-for=\"row in rows\"\n                  :key=\"row.period\"\n                  class=\"border-t border-t-[#dbe0e6]\"\n                >\n                  <td class=\"h-[72px] px-4 py-2 text-[#111418] text-sm\">\n                    {{ row.period }}\n                  </td>\n                  <td class=\"h-[72px] px-4 py-2 text-[#60758a] text-sm\">\n                    {{ row.trx }}\n                  </td>\n                  <td class=\"h-[72px] px-4 py-2 text-[#60758a] text-sm\">\n                    Rp {{ formatNumber(row.total) }}\n                  </td>\n                </tr>\n                <tr v-if=\"rows.length === 0\">\n                  <td colspan=\"3\" class=\"text-center text-gray-500 py-6\">\n                    No data available\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n\n        <!-- Export -->\n        <div class=\"flex justify-stretch\">\n          <div class=\"flex flex-1 gap-3 flex-wrap px-4 py-3 justify-end\">\n            <button\n              @click=\"exportCSV\"\n              class=\"flex min-w-[84px] cursor-pointer items-center justify-center rounded-lg h-10 px-4 bg-[#f0f2f5] text-[#111418] text-sm font-bold\"\n            >\n              Export to CSV\n            </button>\n            <button\n              @click=\"exportPDF\"\n              class=\"flex min-w-[84px] cursor-pointer items-center justify-center rounded-lg h-10 px-4 bg-[#0d80f2] text-white text-sm font-bold\"\n            >\n              Export to PDF\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </OwnerLayouts>\n</template>\n\n<script setup>\nimport { ref, onMounted } from \"vue\";\nimport OwnerLayouts from \"../components/OwnerLayouts.vue\";\nimport { RouterLink } from \"vue-router\";\nimport axios from \"axios\";\nimport jsPDF from \"jspdf\";\nimport autoTable from \"jspdf-autotable\";\n\nconst selectedPeriod = ref(\"monthly\");\nconst rows = ref([]);\nconst token = localStorage.getItem(\"token\");\n\n// Fetch data dari API\nconst fetchData = async () => {\n  try {\n    const res = await axios.get(\"http://localhost:8081/api/v1/owner/reports\", {\n      params: {\n        type: \"purchase-returns\",\n        by:\n          selectedPeriod.value === \"daily\"\n            ? \"day\"\n            : selectedPeriod.value === \"monthly\"\n            ? \"month\"\n            : \"year\",\n      },\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    });\n    rows.value = res.data.data || [];\n  } catch (err) {\n    console.error(\"Failed to fetch data:\", err);\n  }\n};\n\nconst changePeriod = (period) => {\n  selectedPeriod.value = period;\n  fetchData();\n};\n\n// Export CSV\nconst exportCSV = () => {\n  if (!rows.value.length) return;\n  let csvContent = \"data:text/csv;charset=utf-8,\";\n  csvContent += \"Period,Return Count,Total Return Value\\n\";\n  rows.value.forEach((row) => {\n    csvContent += `${row.period},${row.trx},${row.total}\\n`;\n  });\n  const encodedUri = encodeURI(csvContent);\n  const link = document.createElement(\"a\");\n  link.setAttribute(\"href\", encodedUri);\n  link.setAttribute(\"download\", \"purchase_return_summary.csv\");\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n};\n\n// Export PDF\nconst exportPDF = () => {\n  const doc = new jsPDF();\n  doc.text(\"Purchase Return Summary\", 14, 16);\n  autoTable(doc, {\n    head: [[\"Period\", \"Return Count\", \"Total Return Value\"]],\n    body: rows.value.map((r) => [r.period, r.trx, r.total]),\n  });\n  doc.save(\"purchase_return_summary.pdf\");\n};\n\nconst formatNumber = (num) => {\n  return new Intl.NumberFormat(\"id-ID\").format(num);\n};\n\nonMounted(() => {\n  fetchData();\n});\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}