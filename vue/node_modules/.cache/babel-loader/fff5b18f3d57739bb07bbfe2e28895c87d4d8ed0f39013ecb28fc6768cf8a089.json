{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, vModelText as _vModelText, withDirectives as _withDirectives } from \"vue\";\nconst _hoisted_1 = {\n  class: \"p-6\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"text-gray-600\"\n};\nconst _hoisted_3 = {\n  class: \"min-w-full bg-white border border-gray-200 shadow rounded\"\n};\nconst _hoisted_4 = {\n  class: \"px-4 py-2 border\"\n};\nconst _hoisted_5 = {\n  class: \"px-4 py-2 border\"\n};\nconst _hoisted_6 = {\n  class: \"px-4 py-2 border\"\n};\nconst _hoisted_7 = {\n  class: \"px-4 py-2 border\"\n};\nconst _hoisted_8 = {\n  class: \"px-4 py-2 border\"\n};\nconst _hoisted_9 = [\"onClick\"];\nconst _hoisted_10 = [\"onClick\"];\nconst _hoisted_11 = {\n  key: 2,\n  class: \"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center\"\n};\nconst _hoisted_12 = {\n  class: \"bg-white p-6 rounded shadow-md w-96\"\n};\nconst _hoisted_13 = {\n  class: \"flex justify-end\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[4] || (_cache[4] = _createElementVNode(\"h1\", {\n    class: \"text-2xl font-bold mb-4\"\n  }, \"Daftar Pengajuan Retur\", -1 /* CACHED */)), _createCommentVNode(\" Loading \"), $setup.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, \"Memuat data retur...\")) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" Tabel Retur \"), _createElementVNode(\"table\", _hoisted_3, [_cache[2] || (_cache[2] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", {\n    class: \"bg-gray-100\"\n  }, [_createElementVNode(\"th\", {\n    class: \"px-4 py-2 border\"\n  }, \"ID\"), _createElementVNode(\"th\", {\n    class: \"px-4 py-2 border\"\n  }, \"Tanggal\"), _createElementVNode(\"th\", {\n    class: \"px-4 py-2 border\"\n  }, \"Kasir\"), _createElementVNode(\"th\", {\n    class: \"px-4 py-2 border\"\n  }, \"Status\"), _createElementVNode(\"th\", {\n    class: \"px-4 py-2 border\"\n  }, \"Aksi\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.returns, ret => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: ret.id\n    }, [_createElementVNode(\"td\", _hoisted_4, _toDisplayString(ret.id), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_5, _toDisplayString(new Date(ret.created_at).toLocaleString()), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_6, _toDisplayString(ret.created_by?.username || '-'), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_7, [_createElementVNode(\"span\", {\n      class: _normalizeClass({\n        'text-yellow-600': ret.status === 'PENDING',\n        'text-green-600': ret.status === 'APPROVED',\n        'text-red-600': ret.status === 'REJECTED'\n      })\n    }, _toDisplayString(ret.status), 3 /* TEXT, CLASS */)]), _createElementVNode(\"td\", _hoisted_8, [ret.status === 'PENDING' ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 0,\n      onClick: $event => $setup.approveReturn(ret.id),\n      class: \"bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded mr-2\"\n    }, \" Setujui \", 8 /* PROPS */, _hoisted_9)) : _createCommentVNode(\"v-if\", true), ret.status === 'PENDING' ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 1,\n      onClick: $event => $setup.openRejectModal(ret.id),\n      class: \"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded\"\n    }, \" Tolak \", 8 /* PROPS */, _hoisted_10)) : _createCommentVNode(\"v-if\", true)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)), _createCommentVNode(\" Modal Penolakan \"), $setup.showRejectModal ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [_createElementVNode(\"div\", _hoisted_12, [_cache[3] || (_cache[3] = _createElementVNode(\"h2\", {\n    class: \"text-xl font-bold mb-4\"\n  }, \"Alasan Penolakan\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.rejectReason = $event),\n    placeholder: \"Masukkan alasan\",\n    class: \"w-full border p-2 rounded mb-4\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.rejectReason]]), _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = $event => $setup.showRejectModal = false),\n    class: \"bg-gray-300 hover:bg-gray-400 text-black px-3 py-1 rounded mr-2\"\n  }, \" Batal \"), _createElementVNode(\"button\", {\n    onClick: $setup.submitReject,\n    class: \"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded\"\n  }, \" Tolak Retur \")])])])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_createCommentVNode","$setup","loading","_hoisted_2","_Fragment","key","_hoisted_3","_renderList","returns","ret","id","_hoisted_4","_toDisplayString","_hoisted_5","Date","created_at","toLocaleString","_hoisted_6","created_by","username","_hoisted_7","_normalizeClass","status","_hoisted_8","onClick","$event","approveReturn","_hoisted_9","openRejectModal","_hoisted_10","showRejectModal","_hoisted_11","_hoisted_12","rejectReason","placeholder","_hoisted_13","_cache","submitReject"],"sources":["C:\\Users\\Personal\\Documents\\PKL\\aplikasi\\aplikasi\\src\\views\\ReturnApprovalOwners.vue"],"sourcesContent":["<template>\n  <div class=\"p-6\">\n    <h1 class=\"text-2xl font-bold mb-4\">Daftar Pengajuan Retur</h1>\n\n    <!-- Loading -->\n    <div v-if=\"loading\" class=\"text-gray-600\">Memuat data retur...</div>\n\n    <!-- Tabel Retur -->\n    <table v-else class=\"min-w-full bg-white border border-gray-200 shadow rounded\">\n      <thead>\n        <tr class=\"bg-gray-100\">\n          <th class=\"px-4 py-2 border\">ID</th>\n          <th class=\"px-4 py-2 border\">Tanggal</th>\n          <th class=\"px-4 py-2 border\">Kasir</th>\n          <th class=\"px-4 py-2 border\">Status</th>\n          <th class=\"px-4 py-2 border\">Aksi</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"ret in returns\" :key=\"ret.id\">\n          <td class=\"px-4 py-2 border\">{{ ret.id }}</td>\n          <td class=\"px-4 py-2 border\">{{ new Date(ret.created_at).toLocaleString() }}</td>\n          <td class=\"px-4 py-2 border\">{{ ret.created_by?.username || '-' }}</td>\n          <td class=\"px-4 py-2 border\">\n            <span\n              :class=\"{\n                'text-yellow-600': ret.status === 'PENDING',\n                'text-green-600': ret.status === 'APPROVED',\n                'text-red-600': ret.status === 'REJECTED',\n              }\"\n            >\n              {{ ret.status }}\n            </span>\n          </td>\n          <td class=\"px-4 py-2 border\">\n            <button\n              v-if=\"ret.status === 'PENDING'\"\n              @click=\"approveReturn(ret.id)\"\n              class=\"bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded mr-2\"\n            >\n              Setujui\n            </button>\n            <button\n              v-if=\"ret.status === 'PENDING'\"\n              @click=\"openRejectModal(ret.id)\"\n              class=\"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded\"\n            >\n              Tolak\n            </button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n\n    <!-- Modal Penolakan -->\n    <div\n      v-if=\"showRejectModal\"\n      class=\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center\"\n    >\n      <div class=\"bg-white p-6 rounded shadow-md w-96\">\n        <h2 class=\"text-xl font-bold mb-4\">Alasan Penolakan</h2>\n        <textarea\n          v-model=\"rejectReason\"\n          placeholder=\"Masukkan alasan\"\n          class=\"w-full border p-2 rounded mb-4\"\n        ></textarea>\n        <div class=\"flex justify-end\">\n          <button\n            @click=\"showRejectModal = false\"\n            class=\"bg-gray-300 hover:bg-gray-400 text-black px-3 py-1 rounded mr-2\"\n          >\n            Batal\n          </button>\n          <button\n            @click=\"submitReject\"\n            class=\"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded\"\n          >\n            Tolak Retur\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue';\nimport axios from 'axios';\n\n// === Axios instance lokal ===\nconst api = axios.create({\n  baseURL: 'http://localhost:8081/api/v1',\n  timeout: 10000,\n});\nconst savedToken = localStorage.getItem('token');\nif (savedToken) {\n  api.defaults.headers.common['Authorization'] = `Bearer ${savedToken}`;\n}\n\n// State\nconst returns = ref([]);\nconst loading = ref(true);\nconst showRejectModal = ref(false);\nconst selectedReturnId = ref(null);\nconst rejectReason = ref('');\n\n// Fetch data retur\nconst fetchReturns = async () => {\n  loading.value = true;\n  try {\n    const res = await api.get('/owner/sale-returns');\n    returns.value = res.data || [];\n  } catch (err) {\n    console.error(err);\n    alert('Gagal memuat data retur');\n  } finally {\n    loading.value = false;\n  }\n};\n\n// Approve retur\nconst approveReturn = async (id) => {\n  try {\n    await api.post(`/owner/sale-returns/${id}/approve`);\n    await fetchReturns();\n    alert('Retur berhasil disetujui');\n  } catch (err) {\n    console.error(err);\n    alert('Gagal menyetujui retur');\n  }\n};\n\n// Buka modal penolakan\nconst openRejectModal = (id) => {\n  selectedReturnId.value = id;\n  rejectReason.value = '';\n  showRejectModal.value = true;\n};\n\n// Submit penolakan\nconst submitReject = async () => {\n  if (!rejectReason.value) {\n    alert('Alasan penolakan wajib diisi');\n    return;\n  }\n  try {\n    await api.post(`/owner/sale-returns/${selectedReturnId.value}/reject`, {\n      reason: rejectReason.value,\n    });\n    await fetchReturns();\n    showRejectModal.value = false;\n    alert('Retur berhasil ditolak');\n  } catch (err) {\n    console.error(err);\n    alert('Gagal menolak retur');\n  }\n};\n\nonMounted(() => {\n  fetchReturns();\n});\n</script>\n\n<style scoped>\n/* opsional: style tambahan */\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}