{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted, computed } from \"vue\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport axios from \"axios\";\nimport OwnerLayouts from \"../components/OwnerLayouts.vue\";\nconst API_URL = \"http://192.168.100.111:8081/api/v1/categories\";\nexport default {\n  __name: 'AddCategoryOwner',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const category = ref({\n      name: \"\"\n    });\n    const route = useRoute();\n    const router = useRouter();\n    const isEdit = computed(() => route.params.id !== undefined);\n    const fetchCategory = async id => {\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (!token) {\n          console.error(\"No JWT token found in localStorage.\");\n          return;\n        }\n        const response = await axios.get(`${API_URL}/${id}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (response.data && response.data.data) {\n          // API balikin field \"Name\"\n          category.value.name = response.data.data.Name;\n        }\n      } catch (error) {\n        console.error(\"Error fetching category:\", error);\n        alert(\"Failed to fetch category data.\");\n      }\n    };\n    const handleSubmit = async () => {\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (!token) {\n          console.error(\"No JWT token found in localStorage.\");\n          return;\n        }\n        if (!category.value.name) {\n          alert(\"Please fill in the category name.\");\n          return;\n        }\n        if (isEdit.value) {\n          await axios.put(`${API_URL}/${route.params.id}`, category.value, {\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: `Bearer ${token}`\n            }\n          });\n          alert(\"Category updated successfully.\");\n        } else {\n          await axios.post(API_URL, category.value, {\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: `Bearer ${token}`\n            }\n          });\n          alert(\"Category created successfully.\");\n        }\n        router.push(\"/management-category\");\n      } catch (error) {\n        console.error(\"Error saving category:\", error);\n        alert(\"Failed to save category. Please check the console.\");\n      }\n    };\n    onMounted(() => {\n      if (isEdit.value) {\n        fetchCategory(route.params.id);\n      }\n    });\n    const __returned__ = {\n      category,\n      route,\n      router,\n      isEdit,\n      API_URL,\n      fetchCategory,\n      handleSubmit,\n      ref,\n      onMounted,\n      computed,\n      get useRoute() {\n        return useRoute;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get axios() {\n        return axios;\n      },\n      OwnerLayouts\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","computed","useRoute","useRouter","axios","OwnerLayouts","API_URL","category","name","route","router","isEdit","params","id","undefined","fetchCategory","token","localStorage","getItem","console","error","response","get","headers","Authorization","data","value","Name","alert","handleSubmit","put","post","push"],"sources":["C:/Users/SPC STYLE 5/aplikasi/src/views/AddCategoryOwner.vue"],"sourcesContent":["<template>\r\n  <OwnerLayouts>\r\n    <div class=\"p-8\">\r\n      <div class=\"flex flex-wrap items-center justify-between gap-3 p-4\">\r\n        <p\r\n          class=\"text-[#111418] tracking-light text-[32px] font-bold leading-tight min-w-72\"\r\n        >\r\n          {{ isEdit ? \"Edit Category\" : \"Add Category\" }}\r\n        </p>\r\n        <router-link\r\n          to=\"/management-category\"\r\n          class=\"flex items-center gap-2 text-[#60758a] text-base font-normal leading-normal\"\r\n        >\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            width=\"20px\"\r\n            height=\"20px\"\r\n            viewBox=\"0 0 24 24\"\r\n            fill=\"none\"\r\n            stroke=\"currentColor\"\r\n            stroke-width=\"2\"\r\n            stroke-linecap=\"round\"\r\n            stroke-linejoin=\"round\"\r\n          >\r\n            <path d=\"M19 12H5\"></path>\r\n            <path d=\"M12 19L5 12L12 5\"></path>\r\n          </svg>\r\n          <span class=\"truncate\">Kembali</span>\r\n        </router-link>\r\n      </div>\r\n\r\n      <form\r\n        @submit.prevent=\"handleSubmit\"\r\n        class=\"flex flex-col w-[512px] max-w-[512px] py-5\"\r\n      >\r\n        <div class=\"flex flex-col flex-wrap items-end gap-4 px-4 py-3\">\r\n          <label class=\"flex flex-col min-w-40 flex-1 w-full\">\r\n            <p class=\"text-[#111418] text-base font-medium leading-normal pb-2\">\r\n              Name\r\n            </p>\r\n            <input\r\n              v-model=\"category.name\"\r\n              placeholder=\"Enter category name\"\r\n              class=\"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border border-[#dbe0e6] bg-white focus:border-[#dbe0e6] h-14 placeholder:text-[#60758a] p-[15px] text-base font-normal leading-normal\"\r\n            />\r\n          </label>\r\n        </div>\r\n        <div class=\"flex justify-stretch\">\r\n          <div class=\"flex flex-1 gap-3 flex-wrap px-4 py-3 justify-end\">\r\n            <router-link\r\n              to=\"/management-category\"\r\n              class=\"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-[#f0f2f5] text-[#111418] text-sm font-bold leading-normal tracking-[0.015em]\"\r\n            >\r\n              <span class=\"truncate\">Cancel</span>\r\n            </router-link>\r\n            <button\r\n              type=\"submit\"\r\n              class=\"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-[#0d80f2] text-white text-sm font-bold leading-normal tracking-[0.015em]\"\r\n            >\r\n              <span class=\"truncate\">Save</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </OwnerLayouts>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed } from \"vue\";\r\nimport { useRoute, useRouter } from \"vue-router\";\r\nimport axios from \"axios\";\r\nimport OwnerLayouts from \"../components/OwnerLayouts.vue\";\r\n\r\nconst category = ref({\r\n  name: \"\",\r\n});\r\n\r\nconst route = useRoute();\r\nconst router = useRouter();\r\nconst isEdit = computed(() => route.params.id !== undefined);\r\n\r\nconst API_URL = \"http://192.168.100.111:8081/api/v1/categories\";\r\n\r\nconst fetchCategory = async (id) => {\r\n  try {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      console.error(\"No JWT token found in localStorage.\");\r\n      return;\r\n    }\r\n    const response = await axios.get(`${API_URL}/${id}`, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    });\r\n    if (response.data && response.data.data) {\r\n      // API balikin field \"Name\"\r\n      category.value.name = response.data.data.Name;\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error fetching category:\", error);\r\n    alert(\"Failed to fetch category data.\");\r\n  }\r\n};\r\n\r\nconst handleSubmit = async () => {\r\n  try {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      console.error(\"No JWT token found in localStorage.\");\r\n      return;\r\n    }\r\n\r\n    if (!category.value.name) {\r\n      alert(\"Please fill in the category name.\");\r\n      return;\r\n    }\r\n\r\n    if (isEdit.value) {\r\n      await axios.put(`${API_URL}/${route.params.id}`, category.value, {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n      alert(\"Category updated successfully.\");\r\n    } else {\r\n      await axios.post(API_URL, category.value, {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n      alert(\"Category created successfully.\");\r\n    }\r\n    router.push(\"/management-category\");\r\n  } catch (error) {\r\n    console.error(\"Error saving category:\", error);\r\n    alert(\"Failed to save category. Please check the console.\");\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  if (isEdit.value) {\r\n    fetchCategory(route.params.id);\r\n  }\r\n});\r\n</script>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}