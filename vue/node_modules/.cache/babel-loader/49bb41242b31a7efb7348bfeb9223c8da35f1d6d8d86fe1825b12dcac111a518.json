{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport { ref, computed, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport OwnerLayout from \"../components/OwnerLayouts.vue\";\nexport default {\n  __name: 'ReportStockOpnameOwners',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const filters = ref({\n      startDate: \"\",\n      endDate: \"\"\n    });\n    const data = ref([]);\n\n    // ambil token dari localStorage jika backend butuh autentikasi\n    const token = localStorage.getItem(\"token\");\n\n    // ambil data dari backend\n    onMounted(async () => {\n      try {\n        const res = await axios.get(\"http://localhost:8081/api/v1/history/stock-opnames\", {\n          headers: token ? {\n            Authorization: `Bearer ${token}`\n          } : undefined\n        });\n        // simpan response langsung sesuai properti backend\n        data.value = res.data;\n      } catch (err) {\n        console.error(\"Gagal ambil data:\", err);\n      }\n    });\n\n    // filter data di frontend\n    const filteredData = computed(() => {\n      if (!filters.value.startDate || !filters.value.endDate) {\n        return data.value;\n      }\n      return data.value.filter(item => item.date >= filters.value.startDate && item.date <= filters.value.endDate);\n    });\n    function applyFilter() {\n      // opsional: bisa trigger request lagi ke backend jika mau filter server-side\n      console.log(\"Filter applied:\", filters.value);\n    }\n    const __returned__ = {\n      filters,\n      data,\n      token,\n      filteredData,\n      applyFilter,\n      ref,\n      computed,\n      onMounted,\n      get axios() {\n        return axios;\n      },\n      OwnerLayout\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","axios","OwnerLayout","filters","startDate","endDate","data","token","localStorage","getItem","res","get","headers","Authorization","undefined","value","err","console","error","filteredData","filter","item","date","applyFilter","log"],"sources":["C:/Users/Personal/Documents/PKL/aplikasi/aplikasi/src/views/ReportStockOpnameOwners.vue"],"sourcesContent":["<template>\n  <OwnerLayout>\n    <div class=\"p-4\">\n      <!-- FILTER -->\n      <div class=\"flex gap-4 mb-4\">\n        <input\n          type=\"date\"\n          v-model=\"filters.startDate\"\n          class=\"border p-2 rounded\"\n        />\n        <input\n          type=\"date\"\n          v-model=\"filters.endDate\"\n          class=\"border p-2 rounded\"\n        />\n        <button\n          @click=\"applyFilter\"\n          class=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\n        >\n          Terapkan\n        </button>\n      </div>\n\n      <!-- TABLE -->\n      <table class=\"w-full border-collapse border border-gray-300\">\n        <thead>\n          <tr class=\"bg-gray-100\">\n            <th class=\"border border-gray-300 px-4 py-2\">Tanggal</th>\n            <th class=\"border border-gray-300 px-4 py-2\">Nama Buku</th>\n            <th class=\"border border-gray-300 px-4 py-2\">Stok Awal</th>\n            <th class=\"border border-gray-300 px-4 py-2\">Stok Akhir</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"(item, index) in filteredData\" :key=\"index\">\n            <td class=\"border border-gray-300 px-4 py-2\">{{ item.date }}</td>\n            <td class=\"border border-gray-300 px-4 py-2\">\n              {{ item.book_name }}\n            </td>\n            <td class=\"border border-gray-300 px-4 py-2\">\n              {{ item.start_stock }}\n            </td>\n            <td class=\"border border-gray-300 px-4 py-2\">\n              {{ item.end_stock }}\n            </td>\n          </tr>\n          <tr v-if=\"filteredData.length === 0\">\n            <td colspan=\"4\" class=\"text-center py-4 text-gray-500\">\n              Tidak ada data\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </OwnerLayout>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport OwnerLayout from \"../components/OwnerLayouts.vue\";\n\nconst filters = ref({\n  startDate: \"\",\n  endDate: \"\",\n});\n\nconst data = ref([]);\n\n// ambil token dari localStorage jika backend butuh autentikasi\nconst token = localStorage.getItem(\"token\");\n\n// ambil data dari backend\nonMounted(async () => {\n  try {\n    const res = await axios.get(\n      \"http://localhost:8081/api/v1/history/stock-opnames\",\n      {\n        headers: token ? { Authorization: `Bearer ${token}` } : undefined,\n      }\n    );\n    // simpan response langsung sesuai properti backend\n    data.value = res.data;\n  } catch (err) {\n    console.error(\"Gagal ambil data:\", err);\n  }\n});\n\n// filter data di frontend\nconst filteredData = computed(() => {\n  if (!filters.value.startDate || !filters.value.endDate) {\n    return data.value;\n  }\n  return data.value.filter(\n    (item) =>\n      item.date >= filters.value.startDate && item.date <= filters.value.endDate\n  );\n});\n\nfunction applyFilter() {\n  // opsional: bisa trigger request lagi ke backend jika mau filter server-side\n  console.log(\"Filter applied:\", filters.value);\n}\n</script>\n"],"mappings":";;AA0DA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,KAAK;AAC9C,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,WAAW,MAAM,gCAAgC;;;;;;;IAExD,MAAMC,OAAO,GAAGL,GAAG,CAAC;MAClBM,SAAS,EAAE,EAAE;MACbC,OAAO,EAAE;IACX,CAAC,CAAC;IAEF,MAAMC,IAAI,GAAGR,GAAG,CAAC,EAAE,CAAC;;IAEpB;IACA,MAAMS,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;;IAE3C;IACAT,SAAS,CAAC,YAAY;MACpB,IAAI;QACF,MAAMU,GAAG,GAAG,MAAMT,KAAK,CAACU,GAAG,CACzB,oDAAoD,EACpD;UACEC,OAAO,EAAEL,KAAK,GAAG;YAAEM,aAAa,EAAE,UAAUN,KAAK;UAAG,CAAC,GAAGO;QAC1D,CACF,CAAC;QACD;QACAR,IAAI,CAACS,KAAK,GAAGL,GAAG,CAACJ,IAAI;MACvB,CAAC,CAAC,OAAOU,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAAC,mBAAmB,EAAEF,GAAG,CAAC;MACzC;IACF,CAAC,CAAC;;IAEF;IACA,MAAMG,YAAY,GAAGpB,QAAQ,CAAC,MAAM;MAClC,IAAI,CAACI,OAAO,CAACY,KAAK,CAACX,SAAS,IAAI,CAACD,OAAO,CAACY,KAAK,CAACV,OAAO,EAAE;QACtD,OAAOC,IAAI,CAACS,KAAK;MACnB;MACA,OAAOT,IAAI,CAACS,KAAK,CAACK,MAAM,CACrBC,IAAI,IACHA,IAAI,CAACC,IAAI,IAAInB,OAAO,CAACY,KAAK,CAACX,SAAS,IAAIiB,IAAI,CAACC,IAAI,IAAInB,OAAO,CAACY,KAAK,CAACV,OACvE,CAAC;IACH,CAAC,CAAC;IAEF,SAASkB,WAAWA,CAAA,EAAG;MACrB;MACAN,OAAO,CAACO,GAAG,CAAC,iBAAiB,EAAErB,OAAO,CAACY,KAAK,CAAC;IAC/C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}