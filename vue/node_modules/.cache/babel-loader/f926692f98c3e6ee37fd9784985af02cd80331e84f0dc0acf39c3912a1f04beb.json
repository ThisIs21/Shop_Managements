{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect } from \"vue\";\nconst _hoisted_1 = {\n  class: \"cashier-page\"\n};\nconst _hoisted_2 = {\n  class: \"form-group\"\n};\nconst _hoisted_3 = {\n  class: \"form-group\"\n};\nconst _hoisted_4 = [\"value\"];\nconst _hoisted_5 = {\n  border: \"1\",\n  cellpadding: \"5\",\n  cellspacing: \"0\"\n};\nconst _hoisted_6 = [\"onClick\"];\nconst _hoisted_7 = {\n  class: \"form-group\"\n};\nconst _hoisted_8 = {\n  key: 0\n};\nconst _hoisted_9 = {\n  class: \"totals\"\n};\nconst _hoisted_10 = {\n  class: \"form-group\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[11] || (_cache[11] = _createElementVNode(\"h2\", null, \"Kasir Penjualan\", -1 /* CACHED */)), _createCommentVNode(\" Input Pelanggan \"), _createElementVNode(\"div\", _hoisted_2, [_cache[5] || (_cache[5] = _createElementVNode(\"label\", null, \"Nama Pelanggan\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.customerName = $event),\n    placeholder: \"Nama pelanggan\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.customerName]])]), _createCommentVNode(\" Produk \"), _createElementVNode(\"div\", _hoisted_3, [_cache[7] || (_cache[7] = _createElementVNode(\"label\", null, \"Tambah Produk\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.selectedProductId = $event)\n  }, [_cache[6] || (_cache[6] = _createElementVNode(\"option\", {\n    disabled: \"\",\n    value: \"\"\n  }, \"Pilih Produk\", -1 /* CACHED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.products, p => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: p.id,\n      value: p.id\n    }, _toDisplayString(p.name) + \" - Rp \" + _toDisplayString(p.sellPrice) + \" (stok: \" + _toDisplayString(p.stock) + \") \", 9 /* TEXT, PROPS */, _hoisted_4);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $setup.selectedProductId]]), _withDirectives(_createElementVNode(\"input\", {\n    type: \"number\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.qty = $event),\n    min: \"1\",\n    placeholder: \"Qty\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.qty, void 0, {\n    number: true\n  }]]), _createElementVNode(\"button\", {\n    onClick: $setup.addToCart\n  }, \"Tambah\")]), _createCommentVNode(\" Keranjang \"), _createElementVNode(\"table\", _hoisted_5, [_cache[8] || (_cache[8] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"Produk\"), _createElementVNode(\"th\", null, \"Qty\"), _createElementVNode(\"th\", null, \"Harga\"), _createElementVNode(\"th\", null, \"Subtotal\"), _createElementVNode(\"th\", null, \"Aksi\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.cart, (item, index) => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: index\n    }, [_createElementVNode(\"td\", null, _toDisplayString(item.name), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(item.qty), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(item.price), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(item.qty * item.price), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      onClick: $event => $setup.removeItem(index)\n    }, \"Hapus\", 8 /* PROPS */, _hoisted_6)])]);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createCommentVNode(\" Voucher \"), _createElementVNode(\"div\", _hoisted_7, [_cache[9] || (_cache[9] = _createElementVNode(\"label\", null, \"Kode Voucher\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.voucherCode = $event),\n    placeholder: \"Masukkan kode voucher\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.voucherCode]]), _createElementVNode(\"button\", {\n    onClick: $setup.validateVoucher\n  }, \"Cek Voucher\"), $setup.voucherMessage ? (_openBlock(), _createElementBlock(\"p\", _hoisted_8, _toDisplayString($setup.voucherMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createCommentVNode(\" Totals \"), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"p\", null, \"Subtotal: Rp \" + _toDisplayString($setup.subtotal), 1 /* TEXT */), _createElementVNode(\"p\", null, \"Diskon: Rp \" + _toDisplayString($setup.discount), 1 /* TEXT */), _createElementVNode(\"p\", null, [_createElementVNode(\"b\", null, \"Total: Rp \" + _toDisplayString($setup.total), 1 /* TEXT */)])]), _createCommentVNode(\" Pembayaran \"), _createElementVNode(\"div\", _hoisted_10, [_cache[10] || (_cache[10] = _createElementVNode(\"label\", null, \"Bayar\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"number\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.paidAmount = $event),\n    placeholder: \"Jumlah bayar\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.paidAmount, void 0, {\n    number: true\n  }]]), _createElementVNode(\"p\", null, \"Kembalian: Rp \" + _toDisplayString($setup.change), 1 /* TEXT */)]), _createCommentVNode(\" Submit \"), _createElementVNode(\"button\", {\n    onClick: $setup.submitSale\n  }, \"Bayar & Simpan\")]);\n}","map":{"version":3,"names":["class","border","cellpadding","cellspacing","_createElementBlock","_hoisted_1","_createElementVNode","_createCommentVNode","_hoisted_2","$setup","customerName","$event","placeholder","_hoisted_3","selectedProductId","disabled","value","_Fragment","_renderList","products","p","key","id","name","_toDisplayString","sellPrice","stock","_hoisted_4","type","qty","min","number","onClick","addToCart","_hoisted_5","cart","item","index","price","removeItem","_hoisted_6","_hoisted_7","voucherCode","validateVoucher","voucherMessage","_hoisted_8","_hoisted_9","subtotal","discount","total","_hoisted_10","paidAmount","change","submitSale"],"sources":["C:\\Users\\Personal\\Documents\\PKL\\aplikasi\\aplikasi\\src\\views\\CashierPage.vue"],"sourcesContent":["<template>\n  <div class=\"cashier-page\">\n    <h2>Kasir Penjualan</h2>\n\n    <!-- Input Pelanggan -->\n    <div class=\"form-group\">\n      <label>Nama Pelanggan</label>\n      <input v-model=\"customerName\" placeholder=\"Nama pelanggan\" />\n    </div>\n\n    <!-- Produk -->\n    <div class=\"form-group\">\n      <label>Tambah Produk</label>\n      <select v-model=\"selectedProductId\">\n        <option disabled value=\"\">Pilih Produk</option>\n        <option v-for=\"p in products\" :key=\"p.id\" :value=\"p.id\">\n          {{ p.name }} - Rp {{ p.sellPrice }} (stok: {{ p.stock }})\n        </option>\n      </select>\n      <input type=\"number\" v-model.number=\"qty\" min=\"1\" placeholder=\"Qty\" />\n      <button @click=\"addToCart\">Tambah</button>\n    </div>\n\n    <!-- Keranjang -->\n    <table border=\"1\" cellpadding=\"5\" cellspacing=\"0\">\n      <thead>\n        <tr>\n          <th>Produk</th>\n          <th>Qty</th>\n          <th>Harga</th>\n          <th>Subtotal</th>\n          <th>Aksi</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"(item, index) in cart\" :key=\"index\">\n          <td>{{ item.name }}</td>\n          <td>{{ item.qty }}</td>\n          <td>{{ item.price }}</td>\n          <td>{{ item.qty * item.price }}</td>\n          <td><button @click=\"removeItem(index)\">Hapus</button></td>\n        </tr>\n      </tbody>\n    </table>\n\n    <!-- Voucher -->\n    <div class=\"form-group\">\n      <label>Kode Voucher</label>\n      <input v-model=\"voucherCode\" placeholder=\"Masukkan kode voucher\" />\n      <button @click=\"validateVoucher\">Cek Voucher</button>\n      <p v-if=\"voucherMessage\">{{ voucherMessage }}</p>\n    </div>\n\n    <!-- Totals -->\n    <div class=\"totals\">\n      <p>Subtotal: Rp {{ subtotal }}</p>\n      <p>Diskon: Rp {{ discount }}</p>\n      <p><b>Total: Rp {{ total }}</b></p>\n    </div>\n\n    <!-- Pembayaran -->\n    <div class=\"form-group\">\n      <label>Bayar</label>\n      <input type=\"number\" v-model.number=\"paidAmount\" placeholder=\"Jumlah bayar\" />\n      <p>Kembalian: Rp {{ change }}</p>\n    </div>\n\n    <!-- Submit -->\n    <button @click=\"submitSale\">Bayar & Simpan</button>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, watch } from \"vue\"\nimport axios from \"axios\"\n\n// State\nconst customerName = ref(\"\")\nconst selectedProductId = ref(\"\")\nconst qty = ref(1)\nconst cart = ref([])\n\nconst voucherCode = ref(\"\")\nconst voucherMessage = ref(\"\")\nconst discount = ref(0)\n\nconst paidAmount = ref(0)\nconst products = ref([]) // ini biasanya dari API\nconst vouchers = ref([]) // daftar voucher aktif dari API\n\n// Subtotal\nconst subtotal = computed(() =>\n  cart.value.reduce((sum, item) => sum + item.qty * item.price, 0)\n)\n\n// Total (subtotal - discount)\nconst total = computed(() => Math.max(0, subtotal.value - discount.value))\n\n// Change (paid - total)\nconst change = computed(() => Math.max(0, paidAmount.value - total.value))\n\n// Ambil produk & voucher (mock API)\nasync function fetchData() {\n  try {\n    const resProducts = await axios.get(\"/api/products\")\n    products.value = resProducts.data.data\n\n    const resVouchers = await axios.get(\"/api/vouchers\")\n    vouchers.value = resVouchers.data.data\n  } catch (err) {\n    console.error(\"Gagal fetch data:\", err)\n  }\n}\nfetchData()\n\n// Tambah produk ke keranjang\nfunction addToCart() {\n  if (!selectedProductId.value || qty.value < 1) return\n\n  const product = products.value.find(p => p.id === selectedProductId.value)\n  if (!product) return\n\n  // cek stok\n  if (product.stock < qty.value) {\n    alert(`Stok produk ${product.name} tidak cukup!`)\n    return\n  }\n\n  cart.value.push({\n    id: product.id,\n    name: product.name,\n    price: product.sellPrice,\n    qty: qty.value,\n  })\n\n  selectedProductId.value = \"\"\n  qty.value = 1\n}\n\n// Hapus item dari cart\nfunction removeItem(index) {\n  cart.value.splice(index, 1)\n}\n\n// Validasi voucher\nfunction validateVoucher() {\n  if (!voucherCode.value) {\n    discount.value = 0\n    voucherMessage.value = \"Tidak ada voucher\"\n    return\n  }\n\n  const v = vouchers.value.find(vc => vc.code === voucherCode.value)\n  if (!v) {\n    discount.value = 0\n    voucherMessage.value = \"Voucher tidak ditemukan / tidak aktif\"\n    return\n  }\n\n  if (v.type === \"percent\") {\n    discount.value = (v.value / 100) * subtotal.value\n    voucherMessage.value = `Diskon ${v.value}% berhasil diterapkan`\n  } else if (v.type === \"amount\") {\n    discount.value = v.value\n    voucherMessage.value = `Diskon Rp ${v.value} berhasil diterapkan`\n  }\n}\n\n// Submit transaksi\nasync function submitSale() {\n  if (cart.value.length === 0) {\n    alert(\"Keranjang kosong\")\n    return\n  }\n\n  if (paidAmount.value < total.value) {\n    alert(\"Jumlah bayar kurang dari total\")\n    return\n  }\n\n  const payload = {\n    customer_name: customerName.value,\n    items: cart.value.map(i => ({\n      product_id: i.id,\n      qty: i.qty,\n    })),\n    voucher_code: voucherCode.value || null,\n    paid_amount: paidAmount.value,\n  }\n\n  try {\n    const res = await axios.post(\"/api/sales\", payload)\n    alert(\"Transaksi berhasil! No: \" + res.data.transaction_number)\n\n    // reset form\n    cart.value = []\n    customerName.value = \"\"\n    voucherCode.value = \"\"\n    discount.value = 0\n    paidAmount.value = 0\n    voucherMessage.value = \"\"\n    fetchData() // refresh stok\n  } catch (err) {\n    console.error(err)\n    alert(\"Gagal menyimpan transaksi\")\n  }\n}\n</script>\n\n<style scoped>\n.cashier-page {\n  max-width: 700px;\n  margin: auto;\n  padding: 20px;\n}\n.form-group {\n  margin-bottom: 15px;\n}\ntable {\n  width: 100%;\n  margin: 10px 0;\n}\n.totals {\n  margin-top: 15px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}