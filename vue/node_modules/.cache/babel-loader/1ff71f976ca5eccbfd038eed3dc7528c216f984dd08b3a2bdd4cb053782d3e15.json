{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\nimport \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nimport { ref, computed, onMounted, watch } from \"vue\";\nimport axios from \"axios\";\nimport CashierSidebar from \"@/components/CashierSidebar.vue\";\n\n// State definitions\n\nexport default {\n  __name: 'CashierPage',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const username = ref(\"\");\n    const password = ref(\"\");\n    const isLoggedIn = ref(!!localStorage.getItem(\"token\"));\n    const customerName = ref(\"\");\n    const products = ref([]);\n    const cart = ref([]);\n    const search = ref(\"\");\n    const selectedCategory = ref(\"All\");\n    const categories = ref([]);\n    const amountReceived = ref(0);\n    const vouchers = ref([]); // Daftar semua voucher dari API\n    const selectedVoucherCode = ref(\"\"); // Kode voucher yang dipilih\n    const discount = ref(0); // Diskon dari voucher\n\n    // Axios instance\n    const api = axios.create({\n      baseURL: \"http://localhost:8081/api/v1\"\n    });\n    const savedToken = localStorage.getItem(\"token\");\n    if (savedToken) {\n      api.defaults.headers.common[\"Authorization\"] = `Bearer ${savedToken}`;\n    }\n\n    // Login function\n    const login = async () => {\n      try {\n        const res = await axios.post(\"http://localhost:8081/api/v1/auth/login\", {\n          username: username.value,\n          password: password.value\n        });\n        const token = res.data.token;\n        localStorage.setItem(\"token\", token);\n        isLoggedIn.value = true;\n        api.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n        await loadData();\n      } catch (err) {\n        alert(\"Login gagal: \" + (err.response?.data?.error || err.message));\n      }\n    };\n\n    // Load products and vouchers\n    const loadData = async () => {\n      try {\n        const [productsRes, vouchersRes] = await Promise.all([api.get(\"/products\"), api.get(\"/vouchers\")]);\n        products.value = productsRes.data.data || [];\n        categories.value = [...new Set(products.value.map(p => p.category?.name || \"Unknown\"))];\n        vouchers.value = vouchersRes.data || [];\n      } catch (err) {\n        if (err.response?.status === 401) {\n          isLoggedIn.value = false;\n          localStorage.removeItem(\"token\");\n        }\n      }\n    };\n\n    // Filter products\n    const filteredProducts = computed(() => {\n      return products.value.filter(p => {\n        const matchSearch = p.name.toLowerCase().includes(search.value.toLowerCase());\n        const matchCategory = selectedCategory.value === \"All\" || p.category?.name === selectedCategory.value;\n        return matchSearch && matchCategory;\n      });\n    });\n\n    // Active vouchers (filter hanya yang aktif)\n    const activeVouchers = computed(() => vouchers.value.filter(v => v.Active));\n\n    // Add to cart\n    const addToCart = product => {\n      const existing = cart.value.find(i => i.id === product.id);\n      if (existing) {\n        if (existing.qty < product.stock) existing.qty++;\n      } else {\n        cart.value.push({\n          ...product,\n          qty: 1\n        });\n      }\n    };\n\n    // Remove from cart\n    const removeFromCart = index => cart.value.splice(index, 1);\n\n    // Compute subtotal\n    const subtotal = computed(() => cart.value.reduce((sum, item) => sum + item.sell_price * item.qty, 0));\n\n    // Update discount based on selected voucher\n    const updateDiscount = () => {\n      const voucher = activeVouchers.value.find(v => v.Code === selectedVoucherCode.value);\n      if (voucher) {\n        switch (voucher.Type) {\n          case \"PERCENT\":\n            discount.value = voucher.Value / 100 * subtotal.value;\n            break;\n          case \"AMOUNT\":\n            discount.value = Math.min(voucher.Value, subtotal.value); // Maksimal diskon tidak melebihi subtotal\n            break;\n          default:\n            discount.value = 0;\n        }\n      } else {\n        discount.value = 0;\n      }\n    };\n\n    // Compute total amount\n    const totalAmount = computed(() => Math.max(0, subtotal.value - discount.value));\n\n    // Compute change\n    const change = computed(() => Math.max(0, amountReceived.value - totalAmount.value));\n\n    // Checkout function\n    const checkout = async () => {\n      if (cart.value.length === 0) {\n        alert(\"Cart masih kosong!\");\n        return;\n      }\n      if (amountReceived.value < totalAmount.value) {\n        alert(\"Uang kurang!\");\n        return;\n      }\n      try {\n        const payload = {\n          customer_name: customerName.value || null,\n          voucher_code: selectedVoucherCode.value || null,\n          paid_amount: amountReceived.value,\n          items: cart.value.map(item => ({\n            product_id: item.id,\n            qty: item.qty\n          }))\n        };\n        const res = await api.post(\"/kasir/sales\", payload);\n        alert(`Pembayaran berhasil! ID Transaksi: ${res.data.id}`);\n\n        // Cetak struk otomatis\n        const receipt = `\n      <div style=\"font-family: Arial, sans-serif; max-width: 300px; margin: 0 auto; padding: 20px; border: 1px solid #ccc;\">\n        <h2 style=\"text-align: center;\">Struk Pembayaran</h2>\n        <p>Tanggal: ${new Date().toLocaleString(\"id-ID\")}</p>\n        <p>ID Transaksi: ${res.data.id}</p>\n        <p>Pelanggan: ${customerName.value || \"Umum\"}</p>\n        <h3>Detail Pembelian</h3>\n        ${cart.value.map(item => `\n          <p>${item.name} x${item.qty} = ${formatCurrency(item.sell_price * item.qty)}</p>\n        `).join(\"\")}\n        <p>Subtotal: ${formatCurrency(subtotal.value)}</p>\n        <p>Diskon: ${formatCurrency(discount.value)}</p>\n        <p>Total: ${formatCurrency(totalAmount.value)}</p>\n        <p>Dibayar: ${formatCurrency(amountReceived.value)}</p>\n        <p>Kembali: ${formatCurrency(change.value)}</p>\n        <p style=\"text-align: center; margin-top: 20px;\">Terima kasih telah berbelanja!</p>\n      </div>\n    `;\n        const printWindow = window.open(\"\", \"\", \"width=300,height=400\");\n        printWindow.document.write(receipt);\n        printWindow.document.close();\n        printWindow.print();\n        printWindow.close();\n\n        // Reset dan auto reload\n        cart.value = [];\n        amountReceived.value = 0;\n        customerName.value = \"\";\n        selectedVoucherCode.value = \"\";\n        discount.value = 0;\n        await loadData(); // Refresh produk dan voucher\n      } catch (err) {\n        console.error(err);\n        const errorMsg = err.response?.data?.message || err.message || \"Transaksi gagal!\";\n        alert(errorMsg);\n      }\n    };\n\n    // Format currency\n    const formatCurrency = num => new Intl.NumberFormat(\"id-ID\", {\n      style: \"currency\",\n      currency: \"IDR\"\n    }).format(num);\n\n    // Load data on mount\n    onMounted(() => {\n      if (isLoggedIn.value) loadData();\n    });\n    const __returned__ = {\n      username,\n      password,\n      isLoggedIn,\n      customerName,\n      products,\n      cart,\n      search,\n      selectedCategory,\n      categories,\n      amountReceived,\n      vouchers,\n      selectedVoucherCode,\n      discount,\n      api,\n      savedToken,\n      login,\n      loadData,\n      filteredProducts,\n      activeVouchers,\n      addToCart,\n      removeFromCart,\n      subtotal,\n      updateDiscount,\n      totalAmount,\n      change,\n      checkout,\n      formatCurrency,\n      ref,\n      computed,\n      onMounted,\n      watch,\n      get axios() {\n        return axios;\n      },\n      CashierSidebar\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","watch","axios","CashierSidebar","username","password","isLoggedIn","localStorage","getItem","customerName","products","cart","search","selectedCategory","categories","amountReceived","vouchers","selectedVoucherCode","discount","api","create","baseURL","savedToken","defaults","headers","common","login","res","post","value","token","data","setItem","loadData","err","alert","response","error","message","productsRes","vouchersRes","Promise","all","get","Set","map","p","category","name","status","removeItem","filteredProducts","filter","matchSearch","toLowerCase","includes","matchCategory","activeVouchers","v","Active","addToCart","product","existing","find","i","id","qty","stock","push","removeFromCart","index","splice","subtotal","reduce","sum","item","sell_price","updateDiscount","voucher","Code","Type","Value","Math","min","totalAmount","max","change","checkout","length","payload","customer_name","voucher_code","paid_amount","items","product_id","receipt","Date","toLocaleString","formatCurrency","join","printWindow","window","open","document","write","close","print","console","errorMsg","num","Intl","NumberFormat","style","currency","format"],"sources":["C:/Users/Personal/Documents/PKL/aplikasi/aplikasi/src/views/CashierPage.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen flex bg-white\">\n    <CashierSidebar v-if=\"isLoggedIn\" />\n\n    <main class=\"flex-1 p-6 max-w-7xl mx-auto w-full\">\n      <h2 class=\"text-2xl font-bold text-center mb-6\">Cashier - Order</h2>\n\n      <!-- LOGIN -->\n      <div\n        v-if=\"!isLoggedIn\"\n        class=\"max-w-sm mx-auto border rounded p-6 shadow\"\n      >\n        <h3 class=\"text-lg font-semibold mb-4\">Login Kasir</h3>\n        <input\n          v-model=\"username\"\n          type=\"text\"\n          placeholder=\"Username\"\n          class=\"w-full border rounded p-2 mb-3 text-sm\"\n        />\n        <input\n          v-model=\"password\"\n          type=\"password\"\n          placeholder=\"Password\"\n          class=\"w-full border rounded p-2 mb-3 text-sm\"\n        />\n        <button\n          @click=\"login\"\n          class=\"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700\"\n        >\n          Login\n        </button>\n      </div>\n\n      <!-- KASIR -->\n      <div v-else class=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        <!-- LEFT: Products -->\n        <section class=\"md:col-span-2\">\n          <h3 class=\"text-lg font-semibold mb-4\">Available Products</h3>\n\n          <div\n            class=\"flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-4\"\n          >\n            <input\n              v-model=\"search\"\n              type=\"text\"\n              placeholder=\"Cari produk...\"\n              class=\"w-full md:w-1/2 border rounded p-2 text-sm\"\n            />\n            <select\n              v-model=\"selectedCategory\"\n              class=\"border rounded p-2 text-sm w-full md:w-48\"\n            >\n              <option value=\"All\">Semua Kategori</option>\n              <option v-for=\"cat in categories\" :key=\"cat\" :value=\"cat\">\n                {{ cat }}\n              </option>\n            </select>\n          </div>\n\n          <div class=\"grid grid-cols-2 gap-4\">\n            <div\n              v-for=\"p in filteredProducts\"\n              :key=\"p.id\"\n              class=\"border rounded-lg p-4 bg-white shadow flex flex-col justify-between\"\n            >\n              <div>\n                <h4 class=\"font-semibold\">{{ p.name }}</h4>\n                <p class=\"text-sm text-gray-600\">\n                  {{ formatCurrency(p.sell_price) }}\n                </p>\n                <p class=\"text-xs text-green-600\">Stock: {{ p.stock }}</p>\n              </div>\n              <button\n                @click=\"addToCart(p)\"\n                class=\"mt-3 bg-blue-500 text-white text-sm py-1 rounded hover:bg-blue-600\"\n              >\n                Add\n              </button>\n            </div>\n          </div>\n        </section>\n\n        <!-- RIGHT: Cart -->\n        <section class=\"md:col-span-1 flex flex-col\">\n          <h3 class=\"text-lg font-semibold mb-4\">Cart Order</h3>\n\n          <div\n            class=\"border rounded-lg p-3 bg-white shadow max-h-64 overflow-y-auto\"\n          >\n            <table class=\"w-full text-sm\">\n              <thead class=\"sticky top-0 bg-gray-100\">\n                <tr>\n                  <th class=\"p-2\">Item</th>\n                  <th class=\"p-2\">Qty</th>\n                  <th class=\"p-2\">Subtotal</th>\n                  <th class=\"p-2\">X</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr v-for=\"(item, i) in cart\" :key=\"item.id\" class=\"border-t\">\n                  <td class=\"p-2\">{{ item.name }}</td>\n                  <td class=\"p-2\">\n                    <input\n                      type=\"number\"\n                      v-model.number=\"item.qty\"\n                      min=\"1\"\n                      :max=\"item.stock\"\n                      class=\"w-14 border rounded p-1\"\n                    />\n                  </td>\n                  <td class=\"p-2\">\n                    {{ formatCurrency(item.sell_price * item.qty) }}\n                  </td>\n                  <td class=\"p-2\">\n                    <button @click=\"removeFromCart(i)\" class=\"text-red-500\">\n                      âœ•\n                    </button>\n                  </td>\n                </tr>\n                <tr v-if=\"cart.length === 0\">\n                  <td colspan=\"4\" class=\"text-center text-gray-500 py-4\">\n                    Cart kosong\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n\n          <div class=\"mt-6 border rounded-lg p-3 bg-white shadow\">\n            <h4 class=\"font-semibold mb-2\">Order Summary</h4>\n            <div class=\"flex justify-between text-sm\">\n              <span>Subtotal</span>\n              <span>{{ formatCurrency(subtotal) }}</span>\n            </div>\n            <div class=\"flex justify-between text-sm\">\n              <span>Discount</span>\n              <span>{{ formatCurrency(discount) }}</span>\n            </div>\n            <div class=\"flex justify-between text-sm font-semibold\">\n              <span>Total</span>\n              <span>{{ formatCurrency(totalAmount) }}</span>\n            </div>\n\n            <div class=\"mt-4\">\n              <label class=\"block mb-2 text-sm\">Customer Name (Optional)</label>\n              <input\n                v-model=\"customerName\"\n                type=\"text\"\n                placeholder=\"Nama pelanggan\"\n                class=\"w-full border rounded p-2 text-sm mb-3\"\n              />\n              <label class=\"block mb-2 text-sm\">Select Voucher (Optional)</label>\n              <select\n                v-model=\"selectedVoucherCode\"\n                class=\"w-full border rounded p-2 text-sm mb-3\"\n                @change=\"updateDiscount\"\n              >\n                <option value=\"\">Pilih Voucher</option>\n                <option\n                  v-for=\"voucher in activeVouchers\"\n                  :key=\"voucher.Code\"\n                  :value=\"voucher.Code\"\n                >\n                  {{ voucher.Code }} ({{ voucher.Type }}: {{ voucher.Value }})\n                </option>\n              </select>\n              <label class=\"block mb-2 text-sm\">Amount Received</label>\n              <input\n                v-model.number=\"amountReceived\"\n                type=\"number\"\n                placeholder=\"Masukkan nominal\"\n                class=\"w-full border rounded p-2 text-sm\"\n              />\n              <p class=\"text-sm mt-1\">\n                Change:\n                <span class=\"font-semibold\">{{ formatCurrency(change) }}</span>\n              </p>\n            </div>\n\n            <div class=\"flex flex-col gap-3 mt-6\">\n              <button\n                @click=\"checkout\"\n                class=\"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700\"\n              >\n                Pay Now\n              </button>\n            </div>\n          </div>\n        </section>\n      </div>\n    </main>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, watch } from \"vue\";\nimport axios from \"axios\";\nimport CashierSidebar from \"@/components/CashierSidebar.vue\";\n\n// State definitions\nconst username = ref(\"\");\nconst password = ref(\"\");\nconst isLoggedIn = ref(!!localStorage.getItem(\"token\"));\nconst customerName = ref(\"\");\nconst products = ref([]);\nconst cart = ref([]);\nconst search = ref(\"\");\nconst selectedCategory = ref(\"All\");\nconst categories = ref([]);\nconst amountReceived = ref(0);\nconst vouchers = ref([]); // Daftar semua voucher dari API\nconst selectedVoucherCode = ref(\"\"); // Kode voucher yang dipilih\nconst discount = ref(0); // Diskon dari voucher\n\n// Axios instance\nconst api = axios.create({ baseURL: \"http://localhost:8081/api/v1\" });\nconst savedToken = localStorage.getItem(\"token\");\nif (savedToken) {\n  api.defaults.headers.common[\"Authorization\"] = `Bearer ${savedToken}`;\n}\n\n// Login function\nconst login = async () => {\n  try {\n    const res = await axios.post(\"http://localhost:8081/api/v1/auth/login\", {\n      username: username.value,\n      password: password.value,\n    });\n    const token = res.data.token;\n    localStorage.setItem(\"token\", token);\n    isLoggedIn.value = true;\n    api.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n    await loadData();\n  } catch (err) {\n    alert(\"Login gagal: \" + (err.response?.data?.error || err.message));\n  }\n};\n\n// Load products and vouchers\nconst loadData = async () => {\n  try {\n    const [productsRes, vouchersRes] = await Promise.all([\n      api.get(\"/products\"),\n      api.get(\"/vouchers\"),\n    ]);\n    products.value = productsRes.data.data || [];\n    categories.value = [\n      ...new Set(products.value.map((p) => p.category?.name || \"Unknown\")),\n    ];\n    vouchers.value = vouchersRes.data || [];\n  } catch (err) {\n    if (err.response?.status === 401) {\n      isLoggedIn.value = false;\n      localStorage.removeItem(\"token\");\n    }\n  }\n};\n\n// Filter products\nconst filteredProducts = computed(() => {\n  return products.value.filter((p) => {\n    const matchSearch = p.name\n      .toLowerCase()\n      .includes(search.value.toLowerCase());\n    const matchCategory =\n      selectedCategory.value === \"All\" ||\n      p.category?.name === selectedCategory.value;\n    return matchSearch && matchCategory;\n  });\n});\n\n// Active vouchers (filter hanya yang aktif)\nconst activeVouchers = computed(() =>\n  vouchers.value.filter((v) => v.Active)\n);\n\n// Add to cart\nconst addToCart = (product) => {\n  const existing = cart.value.find((i) => i.id === product.id);\n  if (existing) {\n    if (existing.qty < product.stock) existing.qty++;\n  } else {\n    cart.value.push({ ...product, qty: 1 });\n  }\n};\n\n// Remove from cart\nconst removeFromCart = (index) => cart.value.splice(index, 1);\n\n// Compute subtotal\nconst subtotal = computed(() =>\n  cart.value.reduce((sum, item) => sum + item.sell_price * item.qty, 0)\n);\n\n// Update discount based on selected voucher\nconst updateDiscount = () => {\n  const voucher = activeVouchers.value.find(\n    (v) => v.Code === selectedVoucherCode.value\n  );\n  if (voucher) {\n    switch (voucher.Type) {\n      case \"PERCENT\":\n        discount.value = (voucher.Value / 100) * subtotal.value;\n        break;\n      case \"AMOUNT\":\n        discount.value = Math.min(voucher.Value, subtotal.value); // Maksimal diskon tidak melebihi subtotal\n        break;\n      default:\n        discount.value = 0;\n    }\n  } else {\n    discount.value = 0;\n  }\n};\n\n// Compute total amount\nconst totalAmount = computed(() => Math.max(0, subtotal.value - discount.value));\n\n// Compute change\nconst change = computed(() => Math.max(0, amountReceived.value - totalAmount.value));\n\n// Checkout function\nconst checkout = async () => {\n  if (cart.value.length === 0) {\n    alert(\"Cart masih kosong!\");\n    return;\n  }\n  if (amountReceived.value < totalAmount.value) {\n    alert(\"Uang kurang!\");\n    return;\n  }\n\n  try {\n    const payload = {\n      customer_name: customerName.value || null,\n      voucher_code: selectedVoucherCode.value || null,\n      paid_amount: amountReceived.value,\n      items: cart.value.map((item) => ({\n        product_id: item.id,\n        qty: item.qty,\n      })),\n    };\n\n    const res = await api.post(\"/kasir/sales\", payload);\n    alert(`Pembayaran berhasil! ID Transaksi: ${res.data.id}`);\n\n    // Cetak struk otomatis\n    const receipt = `\n      <div style=\"font-family: Arial, sans-serif; max-width: 300px; margin: 0 auto; padding: 20px; border: 1px solid #ccc;\">\n        <h2 style=\"text-align: center;\">Struk Pembayaran</h2>\n        <p>Tanggal: ${new Date().toLocaleString(\"id-ID\")}</p>\n        <p>ID Transaksi: ${res.data.id}</p>\n        <p>Pelanggan: ${customerName.value || \"Umum\"}</p>\n        <h3>Detail Pembelian</h3>\n        ${cart.value\n          .map(\n            (item) => `\n          <p>${item.name} x${item.qty} = ${formatCurrency(\n              item.sell_price * item.qty\n            )}</p>\n        `\n          )\n          .join(\"\")}\n        <p>Subtotal: ${formatCurrency(subtotal.value)}</p>\n        <p>Diskon: ${formatCurrency(discount.value)}</p>\n        <p>Total: ${formatCurrency(totalAmount.value)}</p>\n        <p>Dibayar: ${formatCurrency(amountReceived.value)}</p>\n        <p>Kembali: ${formatCurrency(change.value)}</p>\n        <p style=\"text-align: center; margin-top: 20px;\">Terima kasih telah berbelanja!</p>\n      </div>\n    `;\n    const printWindow = window.open(\"\", \"\", \"width=300,height=400\");\n    printWindow.document.write(receipt);\n    printWindow.document.close();\n    printWindow.print();\n    printWindow.close();\n\n    // Reset dan auto reload\n    cart.value = [];\n    amountReceived.value = 0;\n    customerName.value = \"\";\n    selectedVoucherCode.value = \"\";\n    discount.value = 0;\n    await loadData(); // Refresh produk dan voucher\n  } catch (err) {\n    console.error(err);\n    const errorMsg =\n      err.response?.data?.message || err.message || \"Transaksi gagal!\";\n    alert(errorMsg);\n  }\n};\n\n// Format currency\nconst formatCurrency = (num) =>\n  new Intl.NumberFormat(\"id-ID\", { style: \"currency\", currency: \"IDR\" }).format(\n    num\n  );\n\n// Load data on mount\nonMounted(() => {\n  if (isLoggedIn.value) loadData();\n});\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}