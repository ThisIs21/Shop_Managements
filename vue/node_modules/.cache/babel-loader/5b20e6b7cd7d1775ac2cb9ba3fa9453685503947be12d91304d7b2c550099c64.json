{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"relative flex min-h-screen flex-col bg-white overflow-x-hidden font-inter\"\n};\nconst _hoisted_2 = {\n  class: \"flex flex-1 items-center justify-center px-4 sm:px-6 lg:px-8\"\n};\nconst _hoisted_3 = {\n  class: \"w-full max-w-md space-y-6 bg-white p-8 rounded-2xl shadow-md border border-gray-300\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  class: \"text-red-500 text-sm text-center font-medium\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_cache[3] || (_cache[3] = _createElementVNode(\"h2\", {\n    class: \"text-black text-2xl font-bold text-center tracking-tight\"\n  }, \" Welcome! \", -1 /* CACHED */)), _createElementVNode(\"form\", {\n    onSubmit: _withModifiers($setup.handleLogin, [\"prevent\"]),\n    class: \"space-y-5\"\n  }, [_createElementVNode(\"div\", null, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.email = $event),\n    placeholder: \"Email\",\n    class: \"w-full h-14 px-4 rounded-lg bg-gray-100 text-black placeholder-gray-500 text-base focus:outline-none focus:ring-2 focus:ring-black focus:bg-white transition\",\n    type: \"email\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.email]])]), _createElementVNode(\"div\", null, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.password = $event),\n    type: \"password\",\n    placeholder: \"Password\",\n    class: \"w-full h-14 px-4 rounded-lg bg-gray-100 text-black placeholder-gray-500 text-base focus:outline-none focus:ring-2 focus:ring-black focus:bg-white transition\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.password]])]), $setup.errorMessage ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, _toDisplayString($setup.errorMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _cache[2] || (_cache[2] = _createElementVNode(\"div\", null, [_createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"w-full h-12 bg-black hover:bg-gray-800 text-white font-semibold rounded-lg shadow-sm transition\"\n  }, \" Login \")], -1 /* CACHED */))], 32 /* NEED_HYDRATION */)])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","onSubmit","_withModifiers","$setup","handleLogin","email","$event","placeholder","type","required","password","errorMessage","_hoisted_4","_toDisplayString"],"sources":["C:\\Users\\SPC STYLE 5\\aplikasi\\src\\components\\AppLogin.vue"],"sourcesContent":["<template>\n  <div\n    class=\"relative flex min-h-screen flex-col bg-white overflow-x-hidden font-inter\"\n  >\n    <div class=\"flex flex-1 items-center justify-center px-4 sm:px-6 lg:px-8\">\n      <div\n        class=\"w-full max-w-md space-y-6 bg-white p-8 rounded-2xl shadow-md border border-gray-300\"\n      >\n        <h2 class=\"text-black text-2xl font-bold text-center tracking-tight\">\n          Welcome!\n        </h2>\n\n        <form @submit.prevent=\"handleLogin\" class=\"space-y-5\">\n          <div>\n            <input\n              v-model=\"email\"\n              placeholder=\"Email\"\n              class=\"w-full h-14 px-4 rounded-lg bg-gray-100 text-black placeholder-gray-500 text-base focus:outline-none focus:ring-2 focus:ring-black focus:bg-white transition\"\n              type=\"email\"\n              required\n            />\n          </div>\n\n          <div>\n            <input\n              v-model=\"password\"\n              type=\"password\"\n              placeholder=\"Password\"\n              class=\"w-full h-14 px-4 rounded-lg bg-gray-100 text-black placeholder-gray-500 text-base focus:outline-none focus:ring-2 focus:ring-black focus:bg-white transition\"\n              required\n            />\n          </div>\n\n          <div\n            v-if=\"errorMessage\"\n            class=\"text-red-500 text-sm text-center font-medium\"\n          >\n            {{ errorMessage }}\n          </div>\n\n          <div>\n            <button\n              type=\"submit\"\n              class=\"w-full h-12 bg-black hover:bg-gray-800 text-white font-semibold rounded-lg shadow-sm transition\"\n            >\n              Login\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref } from \"vue\";\nimport axios from \"axios\";\nimport { useRouter } from \"vue-router\";\n\n// Inisialisasi router untuk navigasi\nconst router = useRouter();\n\n// Variabel reaktif untuk input form\nconst email = ref(\"\");\nconst password = ref(\"\");\nconst errorMessage = ref(\"\"); // Variabel untuk menyimpan pesan error\n\n// Fungsi yang dipanggil saat form disubmit\n// Perbaikan pada kode Anda\nconst handleLogin = async () => {\n  errorMessage.value = \"\";\n  try {\n    const response = await axios.post(\n      \"http://192.168.100.111:8081/api/v1/auth/login\",\n      {\n        email: email.value,\n        password: password.value,\n      }\n    );\n\n    // Ambil token dan role dari respons backend\n    const { token, role } = response.data.data; // <--- PERBAIKAN DI SINI\n\n    // Simpan token dan role di localStorage\n    localStorage.setItem(\"authToken\", token);\n    localStorage.setItem(\"userRole\", role);\n\n    // Navigasi berdasarkan role\n    switch (role) {\n      case \"OWNER\":\n        router.push(\"/dashboard-owner\");\n        break;\n      case \"KASIR\":\n        router.push(\"/dashboard-cashier\");\n        break;\n      case \"GUDANG\":\n        router.push(\"/dashboard-gudang\");\n        break;\n      case \"PEMBELIAN\":\n        router.push(\"/dashboard-pembelian\");\n        break;\n      case \"KEPALA_GUDANG\":\n        router.push(\"/dashboard-kepalagudang\");\n        break;\n      default:\n        router.push(\"/\");\n        break;\n    }\n  } catch (error) {\n    if (error.response && error.response.status === 401) {\n      errorMessage.value = \"Email atau password salah!\";\n    } else {\n      errorMessage.value = \"Terjadi kesalahan saat login. Mohon coba lagi.\";\n    }\n    console.error(\"Error saat login:\", error);\n  }\n};\n</script>\n\n<style scoped>\n.font-inter {\n  font-family: Inter, \"Noto Sans\", sans-serif;\n}\n</style>\n"],"mappings":";;EAEIA,KAAK,EAAC;AAA2E;;EAE5EA,KAAK,EAAC;AAA8D;;EAErEA,KAAK,EAAC;AAAqF;;;EA6BvFA,KAAK,EAAC;;;uBAlChBC,mBAAA,CAkDM,OAlDNC,UAkDM,GA/CJC,mBAAA,CA8CM,OA9CNC,UA8CM,GA7CJD,mBAAA,CA4CM,OA5CNE,UA4CM,G,0BAzCJF,mBAAA,CAEK;IAFDH,KAAK,EAAC;EAA0D,GAAC,YAErE,qBAEAG,mBAAA,CAoCO;IApCAG,QAAM,EAAAC,cAAA,CAAUC,MAAA,CAAAC,WAAW;IAAET,KAAK,EAAC;MACxCG,mBAAA,CAQM,c,gBAPJA,mBAAA,CAME;+DALSK,MAAA,CAAAE,KAAK,GAAAC,MAAA;IACdC,WAAW,EAAC,OAAO;IACnBZ,KAAK,EAAC,8JAA8J;IACpKa,IAAI,EAAC,OAAO;IACZC,QAAQ,EAAR;iDAJSN,MAAA,CAAAE,KAAK,E,KAQlBP,mBAAA,CAQM,c,gBAPJA,mBAAA,CAME;+DALSK,MAAA,CAAAO,QAAQ,GAAAJ,MAAA;IACjBE,IAAI,EAAC,UAAU;IACfD,WAAW,EAAC,UAAU;IACtBZ,KAAK,EAAC,8JAA8J;IACpKc,QAAQ,EAAR;iDAJSN,MAAA,CAAAO,QAAQ,E,KASbP,MAAA,CAAAQ,YAAY,I,cADpBf,mBAAA,CAKM,OALNgB,UAKM,EAAAC,gBAAA,CADDV,MAAA,CAAAQ,YAAY,oB,6DAGjBb,mBAAA,CAOM,cANJA,mBAAA,CAKS;IAJPU,IAAI,EAAC,QAAQ;IACbb,KAAK,EAAC;KACP,SAED,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}