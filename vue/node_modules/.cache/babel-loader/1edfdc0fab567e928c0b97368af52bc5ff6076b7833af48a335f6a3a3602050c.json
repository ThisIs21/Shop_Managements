{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from \"vue\";\nimport axios from \"axios\";\nimport { useRouter } from \"vue-router\";\n\n// Inisialisasi router untuk navigasi\n\nexport default {\n  __name: 'AppLogin',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n\n    // Variabel reaktif untuk input form\n    const email = ref(\"\");\n    const password = ref(\"\");\n    const errorMessage = ref(\"\"); // Variabel untuk menyimpan pesan error\n\n    // Fungsi yang dipanggil saat form disubmit\n    const handleLogin = async () => {\n      errorMessage.value = \"\";\n      try {\n        const response = await axios.post(\"http://192.168.100.111:8081/api/v1/auth/login\", {\n          email: email.value,\n          password: password.value\n        });\n\n        // Ambil token dan role dari respons backend\n        const {\n          token,\n          role\n        } = response.data.data;\n\n        // Simpan token dan role di localStorage.\n        // Perhatikan nama kunci 'token' ini HARUS sama dengan yang dicari di komponen\n        // Management User\n        localStorage.setItem(\"token\", token);\n        localStorage.setItem(\"userRole\", role);\n\n        // Navigasi berdasarkan role\n        switch (role) {\n          case \"OWNER\":\n            router.push(\"/dashboard-owner\");\n            break;\n          case \"KASIR\":\n            router.push(\"/dashboard-cashier\");\n            break;\n          case \"GUDANG\":\n            router.push(\"/dashboard-gudang\");\n            break;\n          case \"PEMBELIAN\":\n            router.push(\"/dashboard-pembelian\");\n            break;\n          case \"KEPALA_GUDANG\":\n            router.push(\"/dashboard-kepalagudang\");\n            break;\n          default:\n            router.push(\"/\");\n            break;\n        }\n      } catch (error) {\n        if (error.response && error.response.status === 401) {\n          errorMessage.value = \"Email atau password salah!\";\n        } else {\n          errorMessage.value = \"Terjadi kesalahan saat login. Mohon coba lagi.\";\n        }\n        console.error(\"Error saat login:\", error);\n      }\n    };\n    const __returned__ = {\n      router,\n      email,\n      password,\n      errorMessage,\n      handleLogin,\n      ref,\n      get axios() {\n        return axios;\n      },\n      get useRouter() {\n        return useRouter;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","axios","useRouter","router","email","password","errorMessage","handleLogin","value","response","post","token","role","data","localStorage","setItem","push","error","status","console"],"sources":["C:/Users/SPC STYLE 5/aplikasi/src/components/AppLogin.vue"],"sourcesContent":["<template>\n  <div\n    class=\"relative flex min-h-screen flex-col bg-white overflow-x-hidden font-inter\"\n  >\n    <div class=\"flex flex-1 items-center justify-center px-4 sm:px-6 lg:px-8\">\n      <div\n        class=\"w-full max-w-md space-y-6 bg-white p-8 rounded-2xl shadow-md border border-gray-300\"\n      >\n        <h2 class=\"text-black text-2xl font-bold text-center tracking-tight\">\n          Selamat Datang!\n        </h2>\n\n        <form @submit.prevent=\"handleLogin\" class=\"space-y-5\">\n          <div>\n            <input\n              v-model=\"email\"\n              placeholder=\"Email\"\n              class=\"w-full h-14 px-4 rounded-lg bg-gray-100 text-black placeholder-gray-500 text-base focus:outline-none focus:ring-2 focus:ring-black focus:bg-white transition\"\n              type=\"email\"\n              required\n            />\n          </div>\n\n          <div>\n            <input\n              v-model=\"password\"\n              type=\"password\"\n              placeholder=\"Kata Sandi\"\n              class=\"w-full h-14 px-4 rounded-lg bg-gray-100 text-black placeholder-gray-500 text-base focus:outline-none focus:ring-2 focus:ring-black focus:bg-white transition\"\n              required\n            />\n          </div>\n\n          <div\n            v-if=\"errorMessage\"\n            class=\"text-red-500 text-sm text-center font-medium\"\n          >\n            {{ errorMessage }}\n          </div>\n\n          <div>\n            <button\n              type=\"submit\"\n              class=\"w-full h-12 bg-black hover:bg-gray-800 text-white font-semibold rounded-lg shadow-sm transition\"\n            >\n              Masuk\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref } from \"vue\";\nimport axios from \"axios\";\nimport { useRouter } from \"vue-router\";\n\n// Inisialisasi router untuk navigasi\nconst router = useRouter();\n\n// Variabel reaktif untuk input form\nconst email = ref(\"\");\nconst password = ref(\"\");\nconst errorMessage = ref(\"\"); // Variabel untuk menyimpan pesan error\n\n// Fungsi yang dipanggil saat form disubmit\nconst handleLogin = async () => {\n  errorMessage.value = \"\";\n  try {\n    const response = await axios.post(\n      \"http://192.168.100.111:8081/api/v1/auth/login\",\n      {\n        email: email.value,\n        password: password.value,\n      }\n    );\n\n    // Ambil token dan role dari respons backend\n    const { token, role } = response.data.data;\n\n    // Simpan token dan role di localStorage.\n    // Perhatikan nama kunci 'token' ini HARUS sama dengan yang dicari di komponen\n    // Management User\n    localStorage.setItem(\"token\", token);\n    localStorage.setItem(\"userRole\", role);\n\n    // Navigasi berdasarkan role\n    switch (role) {\n      case \"OWNER\":\n        router.push(\"/dashboard-owner\");\n        break;\n      case \"KASIR\":\n        router.push(\"/dashboard-cashier\");\n        break;\n      case \"GUDANG\":\n        router.push(\"/dashboard-gudang\");\n        break;\n      case \"PEMBELIAN\":\n        router.push(\"/dashboard-pembelian\");\n        break;\n      case \"KEPALA_GUDANG\":\n        router.push(\"/dashboard-kepalagudang\");\n        break;\n      default:\n        router.push(\"/\");\n        break;\n    }\n  } catch (error) {\n    if (error.response && error.response.status === 401) {\n      errorMessage.value = \"Email atau password salah!\";\n    } else {\n      errorMessage.value = \"Terjadi kesalahan saat login. Mohon coba lagi.\";\n    }\n    console.error(\"Error saat login:\", error);\n  }\n};\n</script>\n\n<style scoped>\n.font-inter {\n  font-family: Inter, \"Noto Sans\", sans-serif;\n}\n</style>\n"],"mappings":";AAuDA,SAASA,GAAG,QAAQ,KAAK;AACzB,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,QAAQ,YAAY;;AAEtC;;;;;;;;IACA,MAAMC,MAAM,GAAGD,SAAS,CAAC,CAAC;;IAE1B;IACA,MAAME,KAAK,GAAGJ,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMK,QAAQ,GAAGL,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMM,YAAY,GAAGN,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;;IAE9B;IACA,MAAMO,WAAW,GAAG,MAAAA,CAAA,KAAY;MAC9BD,YAAY,CAACE,KAAK,GAAG,EAAE;MACvB,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMR,KAAK,CAACS,IAAI,CAC/B,+CAA+C,EAC/C;UACEN,KAAK,EAAEA,KAAK,CAACI,KAAK;UAClBH,QAAQ,EAAEA,QAAQ,CAACG;QACrB,CACF,CAAC;;QAED;QACA,MAAM;UAAEG,KAAK;UAAEC;QAAK,CAAC,GAAGH,QAAQ,CAACI,IAAI,CAACA,IAAI;;QAE1C;QACA;QACA;QACAC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEJ,KAAK,CAAC;QACpCG,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEH,IAAI,CAAC;;QAEtC;QACA,QAAQA,IAAI;UACV,KAAK,OAAO;YACVT,MAAM,CAACa,IAAI,CAAC,kBAAkB,CAAC;YAC/B;UACF,KAAK,OAAO;YACVb,MAAM,CAACa,IAAI,CAAC,oBAAoB,CAAC;YACjC;UACF,KAAK,QAAQ;YACXb,MAAM,CAACa,IAAI,CAAC,mBAAmB,CAAC;YAChC;UACF,KAAK,WAAW;YACdb,MAAM,CAACa,IAAI,CAAC,sBAAsB,CAAC;YACnC;UACF,KAAK,eAAe;YAClBb,MAAM,CAACa,IAAI,CAAC,yBAAyB,CAAC;YACtC;UACF;YACEb,MAAM,CAACa,IAAI,CAAC,GAAG,CAAC;YAChB;QACJ;MACF,CAAC,CAAC,OAAOC,KAAK,EAAE;QACd,IAAIA,KAAK,CAACR,QAAQ,IAAIQ,KAAK,CAACR,QAAQ,CAACS,MAAM,KAAK,GAAG,EAAE;UACnDZ,YAAY,CAACE,KAAK,GAAG,4BAA4B;QACnD,CAAC,MAAM;UACLF,YAAY,CAACE,KAAK,GAAG,gDAAgD;QACvE;QACAW,OAAO,CAACF,KAAK,CAAC,mBAAmB,EAAEA,KAAK,CAAC;MAC3C;IACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}