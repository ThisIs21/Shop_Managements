{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport axios from \"axios\";\nimport OwnerLayouts from \"../components/OwnerLayouts.vue\";\nexport default {\n  __name: 'ManageUserOwner',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const user = ref({\n      name: \"\",\n      email: \"\",\n      password: \"\",\n      role_id: \"\",\n      status: \"active\" // Default value\n    });\n    const roles = ref([]);\n    const router = useRouter();\n\n    // Fungsi untuk mengambil daftar role dari backend\n    const fetchRoles = async () => {\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (!token) {\n          console.error(\"No JWT token found in localStorage.\");\n          return;\n        }\n        const apiUrl = \"http://192.168.100.111:8081/api/v1/roles\";\n        const response = await axios.get(apiUrl, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (response.data && response.data.data) {\n          roles.value = response.data.data;\n        }\n      } catch (error) {\n        console.error(\"Error fetching roles:\", error.response ? error.response.data : error.message);\n      }\n    };\n\n    // Fungsi untuk mengirim data user baru ke backend\n    const createUser = async () => {\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (!token) {\n          console.error(\"No JWT token found in localStorage.\");\n          return;\n        }\n\n        // Validasi sederhana\n        if (!user.value.name || !user.value.email || !user.value.password || !user.value.role) {\n          alert(\"Please fill in all required fields.\");\n          return;\n        }\n        const apiUrl = \"http://192.168.100.111:8081/api/v1/users\";\n        const response = await axios.post(apiUrl, user.value, {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`\n          }\n        });\n        console.log(\"User created successfully:\", response.data);\n\n        // Navigasi kembali ke halaman manajemen pengguna setelah berhasil\n        router.push(\"/management-user\");\n      } catch (error) {\n        console.error(\"Error creating user:\", error.response ? error.response.data : error.message);\n        alert(\"Failed to create user. Please check the console for details.\");\n      }\n    };\n    onMounted(() => {\n      fetchRoles();\n    });\n    const __returned__ = {\n      user,\n      roles,\n      router,\n      fetchRoles,\n      createUser,\n      ref,\n      onMounted,\n      get useRouter() {\n        return useRouter;\n      },\n      get axios() {\n        return axios;\n      },\n      OwnerLayouts\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","useRouter","axios","OwnerLayouts","user","name","email","password","role_id","status","roles","router","fetchRoles","token","localStorage","getItem","console","error","apiUrl","response","get","headers","Authorization","data","value","message","createUser","role","alert","post","log","push"],"sources":["C:/Users/SPC STYLE 5/aplikasi/src/views/ManageUserOwner.vue"],"sourcesContent":["<template>\n  <OwnerLayouts>\n    <div class=\"p-8\">\n      <div class=\"flex flex-wrap items-center justify-between gap-3 p-4\">\n        <p\n          class=\"text-[#111418] tracking-light text-[32px] font-bold leading-tight min-w-72\"\n        >\n          Add User\n        </p>\n        <router-link\n          to=\"/management-user\"\n          class=\"flex items-center gap-2 text-[#60758a] text-base font-normal leading-normal\"\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"20px\"\n            height=\"20px\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            stroke-width=\"2\"\n            stroke-linecap=\"round\"\n            stroke-linejoin=\"round\"\n          >\n            <path d=\"M19 12H5\"></path>\n            <path d=\"M12 19L5 12L12 5\"></path>\n          </svg>\n          <span class=\"truncate\">Kembali</span>\n        </router-link>\n      </div>\n\n      <form\n        @submit.prevent=\"createUser\"\n        class=\"flex flex-col w-[512px] max-w-[512px] py-5\"\n      >\n        <div class=\"flex flex-col flex-wrap items-end gap-4 px-4 py-3\">\n          <label class=\"flex flex-col min-w-40 flex-1 w-full\">\n            <p class=\"text-[#111418] text-base font-medium leading-normal pb-2\">\n              Name\n            </p>\n            <input\n              v-model=\"user.name\"\n              placeholder=\"Enter name\"\n              class=\"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border border-[#dbe0e6] bg-white focus:border-[#dbe0e6] h-14 placeholder:text-[#60758a] p-[15px] text-base font-normal leading-normal\"\n            />\n          </label>\n        </div>\n        <div class=\"flex flex-col flex-wrap items-end gap-4 px-4 py-3\">\n          <label class=\"flex flex-col min-w-40 flex-1 w-full\">\n            <p class=\"text-[#111418] text-base font-medium leading-normal pb-2\">\n              Email\n            </p>\n            <input\n              v-model=\"user.email\"\n              type=\"email\"\n              placeholder=\"Enter email\"\n              class=\"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border border-[#dbe0e6] bg-white focus:border-[#dbe0e6] h-14 placeholder:text-[#60758a] p-[15px] text-base font-normal leading-normal\"\n            />\n          </label>\n        </div>\n        <div class=\"flex flex-col flex-wrap items-end gap-4 px-4 py-3\">\n          <label class=\"flex flex-col min-w-40 flex-1 w-full\">\n            <p class=\"text-[#111418] text-base font-medium leading-normal pb-2\">\n              Password\n            </p>\n            <input\n              v-model=\"user.password\"\n              type=\"password\"\n              placeholder=\"Enter password\"\n              class=\"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border border-[#dbe0e6] bg-white focus:border-[#dbe0e6] h-14 placeholder:text-[#60758a] p-[15px] text-base font-normal leading-normal\"\n            />\n          </label>\n        </div>\n        <div class=\"flex flex-col flex-wrap items-end gap-4 px-4 py-3\">\n          <label class=\"flex flex-col min-w-40 flex-1 w-full\">\n            <p class=\"text-[#111418] text-base font-medium leading-normal pb-2\">\n              Role\n            </p>\n            <select\n              v-model=\"user.role\"\n              class=\"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border border-[#dbe0e6] bg-white focus:border-[#dbe0e6] h-14 placeholder:text-[#60758a] p-[15px] text-base font-normal leading-normal\"\n            >\n              <option v-for=\"role in roles\" :key=\"role.ID\" :value=\"role.ID\">\n                {{ role.Name }}\n              </option>\n            </select>\n          </label>\n        </div>\n        <div class=\"flex flex-col flex-wrap items-end gap-4 px-4 py-3\">\n          <label class=\"flex flex-col min-w-40 flex-1 w-full\">\n            <p class=\"text-[#111418] text-base font-medium leading-normal pb-2\">\n              Status\n            </p>\n            <select\n              v-model=\"user.status\"\n              class=\"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border border-[#dbe0e6] bg-white focus:border-[#dbe0e6] h-14 placeholder:text-[#60758a] p-[15px] text-base font-normal leading-normal\"\n            >\n              <option value=\"active\">Active</option>\n              <option value=\"inactive\">Inactive</option>\n            </select>\n          </label>\n        </div>\n        <div class=\"flex justify-stretch\">\n          <div class=\"flex flex-1 gap-3 flex-wrap px-4 py-3 justify-end\">\n            <router-link\n              to=\"/management-user\"\n              class=\"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-[#f0f2f5] text-[#111418] text-sm font-bold leading-normal tracking-[0.015em]\"\n            >\n              <span class=\"truncate\">Cancel</span>\n            </router-link>\n            <button\n              type=\"submit\"\n              class=\"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-[#0d80f2] text-white text-sm font-bold leading-normal tracking-[0.015em]\"\n            >\n              <span class=\"truncate\">Save</span>\n            </button>\n          </div>\n        </div>\n      </form>\n    </div>\n  </OwnerLayouts>\n</template>\n\n<script setup>\nimport { ref, onMounted } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport axios from \"axios\";\nimport OwnerLayouts from \"../components/OwnerLayouts.vue\";\n\nconst user = ref({\n  name: \"\",\n  email: \"\",\n  password: \"\",\n  role_id: \"\",\n  status: \"active\", // Default value\n});\n\nconst roles = ref([]);\nconst router = useRouter();\n\n// Fungsi untuk mengambil daftar role dari backend\nconst fetchRoles = async () => {\n  try {\n    const token = localStorage.getItem(\"token\");\n    if (!token) {\n      console.error(\"No JWT token found in localStorage.\");\n      return;\n    }\n\n    const apiUrl = \"http://192.168.100.111:8081/api/v1/roles\";\n    const response = await axios.get(apiUrl, {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    });\n\n    if (response.data && response.data.data) {\n      roles.value = response.data.data;\n    }\n  } catch (error) {\n    console.error(\n      \"Error fetching roles:\",\n      error.response ? error.response.data : error.message\n    );\n  }\n};\n\n// Fungsi untuk mengirim data user baru ke backend\nconst createUser = async () => {\n  try {\n    const token = localStorage.getItem(\"token\");\n    if (!token) {\n      console.error(\"No JWT token found in localStorage.\");\n      return;\n    }\n\n    // Validasi sederhana\n    if (\n      !user.value.name ||\n      !user.value.email ||\n      !user.value.password ||\n      !user.value.role\n    ) {\n      alert(\"Please fill in all required fields.\");\n      return;\n    }\n\n    const apiUrl = \"http://192.168.100.111:8081/api/v1/users\";\n    const response = await axios.post(apiUrl, user.value, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`,\n      },\n    });\n\n    console.log(\"User created successfully:\", response.data);\n\n    // Navigasi kembali ke halaman manajemen pengguna setelah berhasil\n    router.push(\"/management-user\");\n  } catch (error) {\n    console.error(\n      \"Error creating user:\",\n      error.response ? error.response.data : error.message\n    );\n    alert(\"Failed to create user. Please check the console for details.\");\n  }\n};\n\nonMounted(() => {\n  fetchRoles();\n});\n</script>\n"],"mappings":";AA4HA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,SAASC,SAAS,QAAQ,YAAY;AACtC,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,YAAY,MAAM,gCAAgC;;;;;;;IAEzD,MAAMC,IAAI,GAAGL,GAAG,CAAC;MACfM,IAAI,EAAE,EAAE;MACRC,KAAK,EAAE,EAAE;MACTC,QAAQ,EAAE,EAAE;MACZC,OAAO,EAAE,EAAE;MACXC,MAAM,EAAE,QAAQ,CAAE;IACpB,CAAC,CAAC;IAEF,MAAMC,KAAK,GAAGX,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMY,MAAM,GAAGV,SAAS,CAAC,CAAC;;IAE1B;IACA,MAAMW,UAAU,GAAG,MAAAA,CAAA,KAAY;MAC7B,IAAI;QACF,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;QAC3C,IAAI,CAACF,KAAK,EAAE;UACVG,OAAO,CAACC,KAAK,CAAC,qCAAqC,CAAC;UACpD;QACF;QAEA,MAAMC,MAAM,GAAG,0CAA0C;QACzD,MAAMC,QAAQ,GAAG,MAAMjB,KAAK,CAACkB,GAAG,CAACF,MAAM,EAAE;UACvCG,OAAO,EAAE;YACPC,aAAa,EAAE,UAAUT,KAAK;UAChC;QACF,CAAC,CAAC;QAEF,IAAIM,QAAQ,CAACI,IAAI,IAAIJ,QAAQ,CAACI,IAAI,CAACA,IAAI,EAAE;UACvCb,KAAK,CAACc,KAAK,GAAGL,QAAQ,CAACI,IAAI,CAACA,IAAI;QAClC;MACF,CAAC,CAAC,OAAON,KAAK,EAAE;QACdD,OAAO,CAACC,KAAK,CACX,uBAAuB,EACvBA,KAAK,CAACE,QAAQ,GAAGF,KAAK,CAACE,QAAQ,CAACI,IAAI,GAAGN,KAAK,CAACQ,OAC/C,CAAC;MACH;IACF,CAAC;;IAED;IACA,MAAMC,UAAU,GAAG,MAAAA,CAAA,KAAY;MAC7B,IAAI;QACF,MAAMb,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;QAC3C,IAAI,CAACF,KAAK,EAAE;UACVG,OAAO,CAACC,KAAK,CAAC,qCAAqC,CAAC;UACpD;QACF;;QAEA;QACA,IACE,CAACb,IAAI,CAACoB,KAAK,CAACnB,IAAI,IAChB,CAACD,IAAI,CAACoB,KAAK,CAAClB,KAAK,IACjB,CAACF,IAAI,CAACoB,KAAK,CAACjB,QAAQ,IACpB,CAACH,IAAI,CAACoB,KAAK,CAACG,IAAG,EACf;UACAC,KAAK,CAAC,qCAAqC,CAAC;UAC5C;QACF;QAEA,MAAMV,MAAM,GAAG,0CAA0C;QACzD,MAAMC,QAAQ,GAAG,MAAMjB,KAAK,CAAC2B,IAAI,CAACX,MAAM,EAAEd,IAAI,CAACoB,KAAK,EAAE;UACpDH,OAAO,EAAE;YACP,cAAc,EAAE,kBAAkB;YAClCC,aAAa,EAAE,UAAUT,KAAK;UAChC;QACF,CAAC,CAAC;QAEFG,OAAO,CAACc,GAAG,CAAC,4BAA4B,EAAEX,QAAQ,CAACI,IAAI,CAAC;;QAExD;QACAZ,MAAM,CAACoB,IAAI,CAAC,kBAAkB,CAAC;MACjC,CAAC,CAAC,OAAOd,KAAK,EAAE;QACdD,OAAO,CAACC,KAAK,CACX,sBAAsB,EACtBA,KAAK,CAACE,QAAQ,GAAGF,KAAK,CAACE,QAAQ,CAACI,IAAI,GAAGN,KAAK,CAACQ,OAC/C,CAAC;QACDG,KAAK,CAAC,8DAA8D,CAAC;MACvE;IACF,CAAC;IAED5B,SAAS,CAAC,MAAM;MACdY,UAAU,CAAC,CAAC;IACd,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}