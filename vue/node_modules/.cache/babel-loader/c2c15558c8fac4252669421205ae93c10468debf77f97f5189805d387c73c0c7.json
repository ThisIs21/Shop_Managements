{"ast":null,"code":"import { ref, computed } from \"vue\";\nimport axios from \"axios\";\nimport CashierSidebar from \"../components/CashierSidebar.vue\";\nexport default {\n  __name: 'CashierPage',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const subtotal = ref(125.0);\n    const shipping = ref(5.0);\n    const tax = ref(10.0);\n    const discount = ref(5.0);\n    const selectedPaymentMethod = ref(\"cash\");\n    const amountReceived = ref(0);\n    const total = computed(() => subtotal.value + shipping.value + tax.value - discount.value);\n    const change = computed(() => {\n      const receivedValue = parseFloat(amountReceived.value);\n      return receivedValue > total.value ? receivedValue - total.value : 0;\n    });\n    const formatCurrency = value => `$${Number(value).toFixed(2)}`;\n\n    // ðŸ”¹ fungsi handlePayNow terhubung ke backend\n    const handlePayNow = async () => {\n      try {\n        const token = localStorage.getItem(\"token\"); // ambil JWT hasil login\n        const response = await axios.post(\"http://localhost:8081/api/v1/sales\", {\n          customer_id: 1,\n          voucher_code: null,\n          date: new Date().toISOString(),\n          items: [{\n            product_id: 1,\n            qty: 2,\n            price: 50\n          }, {\n            product_id: 2,\n            qty: 1,\n            price: 30\n          }]\n        }, {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            \"Content-Type\": \"application/json\"\n          }\n        });\n        alert(\"Pembayaran berhasil! ID Transaksi: \" + response.data.data.id);\n      } catch (err) {\n        console.error(err);\n        alert(\"Gagal melakukan pembayaran: \" + (err.response?.data?.message || err.message));\n      }\n    };\n    const handlePrintReceipt = () => {\n      alert(\"Mencetak struk...\");\n    };\n    const __returned__ = {\n      subtotal,\n      shipping,\n      tax,\n      discount,\n      selectedPaymentMethod,\n      amountReceived,\n      total,\n      change,\n      formatCurrency,\n      handlePayNow,\n      handlePrintReceipt,\n      ref,\n      computed,\n      get axios() {\n        return axios;\n      },\n      CashierSidebar\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","axios","CashierSidebar","subtotal","shipping","tax","discount","selectedPaymentMethod","amountReceived","total","value","change","receivedValue","parseFloat","formatCurrency","Number","toFixed","handlePayNow","token","localStorage","getItem","response","post","customer_id","voucher_code","date","Date","toISOString","items","product_id","qty","price","headers","Authorization","alert","data","id","err","console","error","message","handlePrintReceipt"],"sources":["C:/Users/SPC STYLE 5/aplikasi/src/views/CashierPage.vue"],"sourcesContent":["<template>\n  <div\n    class=\"relative flex size-full min-h-screen flex-col bg-white group/design-root overflow-x-hidden\"\n    style=\"font-family: Manrope, 'Noto Sans', sans-serif\"\n  >\n    <div class=\"layout-container flex h-full grow\">\n      <CashierSidebar />\n\n      <main\n        class=\"flex flex-col flex-1 pt-10 pb-10 px-8 max-w-5xl mx-auto w-full\"\n      >\n        <h2 class=\"text-2xl font-bold text-[#111418] mb-8 text-center\">\n          Payment Details!\n        </h2>\n\n        <!-- Order Summary -->\n        <section class=\"mb-8\">\n          <h3 class=\"text-lg font-semibold text-[#111418] mb-3 text-left\">\n            Order Summary\n          </h3>\n          <div class=\"space-y-3\">\n            <div class=\"flex justify-between items-center text-base text-[#60758a]\">\n              <span>Subtotal</span>\n              <span>{{ formatCurrency(subtotal) }}</span>\n            </div>\n            <div class=\"flex justify-between items-center text-base text-[#60758a]\">\n              <span>Shipping</span>\n              <span>{{ formatCurrency(shipping) }}</span>\n            </div>\n            <div class=\"flex justify-between items-center text-base text-[#60758a]\">\n              <span>Tax</span>\n              <span>{{ formatCurrency(tax) }}</span>\n            </div>\n            <div class=\"flex justify-between items-center text-base text-[#60758a]\">\n              <span>Discount</span>\n              <span>-{{ formatCurrency(discount) }}</span>\n            </div>\n            <div class=\"flex justify-between items-center border-t border-[#dbe0e6] pt-3 text-lg font-bold text-[#111418]\">\n              <span>Total</span>\n              <span>{{ formatCurrency(total) }}</span>\n            </div>\n          </div>\n        </section>\n\n        <!-- Payment Method (hanya Cash) -->\n        <section class=\"mb-8\">\n          <h3 class=\"text-lg font-semibold text-[#111418] mb-3 text-left\">\n            Payment Method\n          </h3>\n          <div class=\"space-y-3\">\n            <label\n              class=\"flex items-center gap-3 rounded-lg border border-[#dbe0e6] p-4 cursor-pointer bg-[#f8f9fa]\"\n            >\n              <input\n                type=\"radio\"\n                class=\"h-5 w-5 accent-[#0d80f2]\"\n                name=\"paymentMethod\"\n                value=\"cash\"\n                v-model=\"selectedPaymentMethod\"\n              />\n              <span class=\"text-base font-medium\">Cash</span>\n            </label>\n          </div>\n        </section>\n\n        <!-- Cash Input -->\n        <div class=\"mb-8\" v-if=\"selectedPaymentMethod === 'cash'\">\n          <label class=\"block\">\n            <span class=\"block text-sm font-medium text-[#111418] mb-1\">\n              Amount Received\n            </span>\n            <input\n              v-model.number=\"amountReceived\"\n              type=\"number\"\n              placeholder=\"Enter amount\"\n              class=\"w-full rounded-lg border border-[#dbe0e6] p-3 text-base text-[#111418] focus:border-[#0d80f2] focus:ring focus:ring-[#0d80f2] focus:ring-opacity-50 transition-colors duration-200\"\n            />\n          </label>\n          <p class=\"text-sm text-[#60758a]\">\n            Change:\n            <span class=\"font-semibold text-[#111418]\">\n              {{ formatCurrency(change) }}\n            </span>\n          </p>\n        </div>\n\n        <!-- Buttons -->\n        <div class=\"flex flex-col gap-4 w-full max-w-sm mx-auto mt-8\">\n          <button\n            @click=\"handlePayNow\"\n            class=\"w-full rounded-lg bg-[#0d80f2] py-4 text-white text-lg font-semibold shadow-sm hover:bg-[#0a6ad1] transition-colors duration-200\"\n          >\n            Pay Now\n          </button>\n          <button\n            @click=\"handlePrintReceipt\"\n            class=\"w-full rounded-lg bg-[#f0f2f5] py-4 text-[#111418] text-lg font-semibold border border-[#dbe0e6] shadow-sm hover:bg-[#e6e8eb] transition-colors duration-200\"\n          >\n            Print Receipt\n          </button>\n        </div>\n      </main>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from \"vue\";\nimport axios from \"axios\";\nimport CashierSidebar from \"../components/CashierSidebar.vue\";\n\nconst subtotal = ref(125.0);\nconst shipping = ref(5.0);\nconst tax = ref(10.0);\nconst discount = ref(5.0);\n\nconst selectedPaymentMethod = ref(\"cash\");\nconst amountReceived = ref(0);\n\nconst total = computed(\n  () => subtotal.value + shipping.value + tax.value - discount.value\n);\nconst change = computed(() => {\n  const receivedValue = parseFloat(amountReceived.value);\n  return receivedValue > total.value ? receivedValue - total.value : 0;\n});\n\nconst formatCurrency = (value) => `$${Number(value).toFixed(2)}`;\n\n// ðŸ”¹ fungsi handlePayNow terhubung ke backend\nconst handlePayNow = async () => {\n  try {\n    const token = localStorage.getItem(\"token\"); // ambil JWT hasil login\n    const response = await axios.post(\n      \"http://localhost:8081/api/v1/sales\",\n      {\n        customer_id: 1,\n        voucher_code: null,\n        date: new Date().toISOString(),\n        items: [\n          { product_id: 1, qty: 2, price: 50 },\n          { product_id: 2, qty: 1, price: 30 },\n        ],\n      },\n      {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          \"Content-Type\": \"application/json\",\n        },\n      }\n    );\n\n    alert(\"Pembayaran berhasil! ID Transaksi: \" + response.data.data.id);\n  } catch (err) {\n    console.error(err);\n    alert(\n      \"Gagal melakukan pembayaran: \" +\n        (err.response?.data?.message || err.message)\n    );\n  }\n};\n\nconst handlePrintReceipt = () => {\n  alert(\"Mencetak struk...\");\n};\n</script>\n"],"mappings":"AA2GA,SAASA,GAAG,EAAEC,QAAQ,QAAQ,KAAK;AACnC,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,cAAc,MAAM,kCAAkC;;;;;;;IAE7D,MAAMC,QAAQ,GAAGJ,GAAG,CAAC,KAAK,CAAC;IAC3B,MAAMK,QAAQ,GAAGL,GAAG,CAAC,GAAG,CAAC;IACzB,MAAMM,GAAG,GAAGN,GAAG,CAAC,IAAI,CAAC;IACrB,MAAMO,QAAQ,GAAGP,GAAG,CAAC,GAAG,CAAC;IAEzB,MAAMQ,qBAAqB,GAAGR,GAAG,CAAC,MAAM,CAAC;IACzC,MAAMS,cAAc,GAAGT,GAAG,CAAC,CAAC,CAAC;IAE7B,MAAMU,KAAK,GAAGT,QAAQ,CACpB,MAAMG,QAAQ,CAACO,KAAK,GAAGN,QAAQ,CAACM,KAAK,GAAGL,GAAG,CAACK,KAAK,GAAGJ,QAAQ,CAACI,KAC/D,CAAC;IACD,MAAMC,MAAM,GAAGX,QAAQ,CAAC,MAAM;MAC5B,MAAMY,aAAa,GAAGC,UAAU,CAACL,cAAc,CAACE,KAAK,CAAC;MACtD,OAAOE,aAAa,GAAGH,KAAK,CAACC,KAAK,GAAGE,aAAa,GAAGH,KAAK,CAACC,KAAK,GAAG,CAAC;IACtE,CAAC,CAAC;IAEF,MAAMI,cAAc,GAAIJ,KAAK,IAAK,IAAIK,MAAM,CAACL,KAAK,CAAC,CAACM,OAAO,CAAC,CAAC,CAAC,EAAE;;IAEhE;IACA,MAAMC,YAAY,GAAG,MAAAA,CAAA,KAAY;MAC/B,IAAI;QACF,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;QAC7C,MAAMC,QAAQ,GAAG,MAAMpB,KAAK,CAACqB,IAAI,CAC/B,oCAAoC,EACpC;UACEC,WAAW,EAAE,CAAC;UACdC,YAAY,EAAE,IAAI;UAClBC,IAAI,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;UAC9BC,KAAK,EAAE,CACL;YAAEC,UAAU,EAAE,CAAC;YAAEC,GAAG,EAAE,CAAC;YAAEC,KAAK,EAAE;UAAG,CAAC,EACpC;YAAEF,UAAU,EAAE,CAAC;YAAEC,GAAG,EAAE,CAAC;YAAEC,KAAK,EAAE;UAAG,CAAC;QAExC,CAAC,EACD;UACEC,OAAO,EAAE;YACPC,aAAa,EAAE,UAAUf,KAAK,EAAE;YAChC,cAAc,EAAE;UAClB;QACF,CACF,CAAC;QAEDgB,KAAK,CAAC,qCAAqC,GAAGb,QAAQ,CAACc,IAAI,CAACA,IAAI,CAACC,EAAE,CAAC;MACtE,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;QAClBH,KAAK,CACH,8BAA8B,IAC3BG,GAAG,CAAChB,QAAQ,EAAEc,IAAI,EAAEK,OAAO,IAAIH,GAAG,CAACG,OAAO,CAC/C,CAAC;MACH;IACF,CAAC;IAED,MAAMC,kBAAkB,GAAGA,CAAA,KAAM;MAC/BP,KAAK,CAAC,mBAAmB,CAAC;IAC5B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}