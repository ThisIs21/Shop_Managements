{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode, vModelText as _vModelText, withDirectives as _withDirectives, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"flex flex-1 flex-col py-5 p-8\"\n};\nconst _hoisted_2 = {\n  class: \"layout-content-container flex flex-col flex-1\"\n};\nconst _hoisted_3 = {\n  class: \"flex flex-wrap justify-between items-center gap-3 p-4\"\n};\nconst _hoisted_4 = [\"disabled\"];\nconst _hoisted_5 = {\n  class: \"p-4 @container\"\n};\nconst _hoisted_6 = {\n  class: \"flex overflow-hidden rounded-lg border border-[#dbe0e6] bg-white\"\n};\nconst _hoisted_7 = {\n  class: \"flex-1\"\n};\nconst _hoisted_8 = {\n  key: 0\n};\nconst _hoisted_9 = {\n  key: 1\n};\nconst _hoisted_10 = {\n  class: \"table-column-120 h-[72px] px-4 py-2 w-[120px] text-[#111418] text-sm font-normal leading-normal\"\n};\nconst _hoisted_11 = {\n  class: \"table-column-240 h-[72px] px-4 py-2 w-[120px] text-[#60758a] text-sm font-normal leading-normal\"\n};\nconst _hoisted_12 = {\n  class: \"table-column-360 h-[72px] px-4 py-2 w-[150px] text-[#60758a] text-sm font-normal leading-normal\"\n};\nconst _hoisted_13 = {\n  class: \"table-column-480 h-[72px] px-4 py-2 w-[200px] text-[#60758a] text-sm font-normal leading-normal\"\n};\nconst _hoisted_14 = {\n  class: \"table-column-600 h-[72px] px-4 py-2 w-[200px] text-[#60758a] text-sm font-normal leading-normal\"\n};\nconst _hoisted_15 = {\n  class: \"table-column-720 h-[72px] px-4 py-2 w-[120px] text-[#60758a] text-sm font-normal leading-normal\"\n};\nconst _hoisted_16 = {\n  class: \"table-column-840 h-[72px] px-4 py-2 w-[100px] text-sm font-normal leading-normal\"\n};\nconst _hoisted_17 = {\n  class: \"table-column-960 h-[72px] px-4 py-2 w-[120px] text-[#60758a] text-sm font-bold leading-normal tracking-[0.015em]\"\n};\nconst _hoisted_18 = {\n  key: 0,\n  class: \"flex gap-2\"\n};\nconst _hoisted_19 = [\"onClick\"];\nconst _hoisted_20 = [\"onClick\"];\nconst _hoisted_21 = {\n  key: 1,\n  class: \"text-gray-500\"\n};\nconst _hoisted_22 = {\n  key: 0,\n  class: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\n};\nconst _hoisted_23 = {\n  class: \"bg-white rounded-lg p-6 max-w-md w-full\"\n};\nconst _hoisted_24 = {\n  class: \"mb-4\"\n};\nconst _hoisted_25 = {\n  class: \"flex justify-end gap-2\"\n};\nconst _hoisted_26 = [\"disabled\"];\nconst _hoisted_27 = {\n  key: 1,\n  class: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\n};\nconst _hoisted_28 = {\n  class: \"bg-white rounded-lg p-6 max-w-md w-full\"\n};\nconst _hoisted_29 = {\n  class: \"mb-4\"\n};\nconst _hoisted_30 = {\n  class: \"mb-4\"\n};\nconst _hoisted_31 = {\n  class: \"flex justify-end gap-2\"\n};\nconst _hoisted_32 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createBlock($setup[\"OwnerLayouts\"], null, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_cache[2] || (_cache[2] = _createElementVNode(\"p\", {\n      class: \"text-[#111418] tracking-light text-[32px] font-bold leading-tight min-w-72\"\n    }, \" Sales Returns Approval \", -1 /* CACHED */)), _createElementVNode(\"button\", {\n      onClick: _cache[0] || (_cache[0] = $event => $setup.fetchReturns('PENDING')),\n      disabled: $setup.loading,\n      class: \"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50\"\n    }, _toDisplayString($setup.loading ? \"Loading...\" : \"Refresh Pending Returns\"), 9 /* TEXT, PROPS */, _hoisted_4)]), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"table\", _hoisted_7, [_cache[5] || (_cache[5] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", {\n      class: \"bg-white\"\n    }, [_createElementVNode(\"th\", {\n      class: \"table-column-120 px-4 py-3 text-left text-[#111418] w-[120px] text-sm font-medium leading-normal\"\n    }, \" Return No. \"), _createElementVNode(\"th\", {\n      class: \"table-column-240 px-4 py-3 text-left text-[#111418] w-[120px] text-sm font-medium leading-normal\"\n    }, \" Sale No. \"), _createElementVNode(\"th\", {\n      class: \"table-column-360 px-4 py-3 text-left text-[#111418] w-[150px] text-sm font-medium leading-normal\"\n    }, \" Date \"), _createElementVNode(\"th\", {\n      class: \"table-column-480 px-4 py-3 text-left text-[#111418] w-[200px] text-sm font-medium leading-normal\"\n    }, \" Customer \"), _createElementVNode(\"th\", {\n      class: \"table-column-600 px-4 py-3 text-left text-[#111418] w-[200px] text-sm font-medium leading-normal\"\n    }, \" Product \"), _createElementVNode(\"th\", {\n      class: \"table-column-720 px-4 py-3 text-left text-[#111418] w-[120px] text-sm font-medium leading-normal\"\n    }, \" Total \"), _createElementVNode(\"th\", {\n      class: \"table-column-840 px-4 py-3 text-left text-[#111418] w-[100px] text-sm font-medium leading-normal\"\n    }, \" Status \"), _createElementVNode(\"th\", {\n      class: \"table-column-960 px-4 py-3 text-left text-[#111418] w-[120px] text-[#60758a] text-sm font-medium leading-normal\"\n    }, \" Actions \")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [$setup.loading ? (_openBlock(), _createElementBlock(\"tr\", _hoisted_8, [...(_cache[3] || (_cache[3] = [_createElementVNode(\"td\", {\n      colspan: \"8\",\n      class: \"text-center py-8 text-gray-500\"\n    }, \" Loading returns... \", -1 /* CACHED */)]))])) : $setup.saleReturns.length === 0 ? (_openBlock(), _createElementBlock(\"tr\", _hoisted_9, [...(_cache[4] || (_cache[4] = [_createElementVNode(\"td\", {\n      colspan: \"8\",\n      class: \"text-center py-8 text-gray-500\"\n    }, \" Tidak ada retur pending. \", -1 /* CACHED */)]))])) : (_openBlock(true), _createElementBlock(_Fragment, {\n      key: 2\n    }, _renderList($setup.saleReturns, ret => {\n      return _openBlock(), _createElementBlock(\"tr\", {\n        key: ret.id,\n        class: \"border-t border-t-[#dbe0e6]\"\n      }, [_createElementVNode(\"td\", _hoisted_10, \" RTN-\" + _toDisplayString($setup.formatReturnNumber(ret.id)), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_11, _toDisplayString(ret.sale?.transaction_number || `TRX-${ret.sale_id || \"N/A\"}`), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_12, _toDisplayString($setup.formatDate(ret.date)), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_13, _toDisplayString(ret.sale?.Customer?.name || \"N/A\"), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_14, _toDisplayString($setup.getFirstProductName(ret.items)), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_15, _toDisplayString($setup.formatCurrency(ret.total)), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_16, [_createElementVNode(\"span\", {\n        class: _normalizeClass([$setup.getStatusClass(ret.status), \"px-2 py-1 rounded text-xs font-medium\"])\n      }, _toDisplayString($setup.getStatusText(ret.status)), 3 /* TEXT, CLASS */)]), _createElementVNode(\"td\", _hoisted_17, [ret.status === 'PENDING' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_18, [_createElementVNode(\"button\", {\n        onClick: $event => $setup.openApprovalModal(ret.id),\n        class: \"px-3 py-1 bg-green-500 text-white rounded text-xs hover:bg-green-600\"\n      }, \" Approve \", 8 /* PROPS */, _hoisted_19), _createElementVNode(\"button\", {\n        onClick: $event => $setup.openRejectModal(ret.id),\n        class: \"px-3 py-1 bg-red-500 text-white rounded text-xs hover:bg-red-600\"\n      }, \" Reject \", 8 /* PROPS */, _hoisted_20)])) : (_openBlock(), _createElementBlock(\"span\", _hoisted_21, \"Completed\"))])]);\n    }), 128 /* KEYED_FRAGMENT */))])])])])]), _createCommentVNode(\" Approval Modal \"), $setup.showApprovalModal ? (_openBlock(), _createElementBlock(\"div\", _hoisted_22, [_createElementVNode(\"div\", _hoisted_23, [_cache[11] || (_cache[11] = _createElementVNode(\"h2\", {\n      class: \"text-xl font-bold mb-4\"\n    }, \"Approve Sale Return\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_24, [_createElementVNode(\"p\", null, [_cache[6] || (_cache[6] = _createElementVNode(\"strong\", null, \"Return No:\", -1 /* CACHED */)), _createTextVNode(\" RTN-\" + _toDisplayString($setup.formatReturnNumber($setup.selectedReturnId)), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[7] || (_cache[7] = _createElementVNode(\"strong\", null, \"Sale No:\", -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString($setup.selectedReturn?.sale?.transaction_number || \"N/A\"), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[8] || (_cache[8] = _createElementVNode(\"strong\", null, \"Customer:\", -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString($setup.selectedReturn?.sale?.Customer?.name || \"N/A\"), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[9] || (_cache[9] = _createElementVNode(\"strong\", null, \"Total:\", -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString($setup.formatCurrency($setup.selectedReturn?.total || 0)), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[10] || (_cache[10] = _createElementVNode(\"strong\", null, \"Requested By:\", -1 /* CACHED */)), _createTextVNode(\" User ID \" + _toDisplayString($setup.selectedReturn?.user_id), 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_25, [_createElementVNode(\"button\", {\n      onClick: $setup.closeApprovalModal,\n      class: \"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600\"\n    }, \" Cancel \"), _createElementVNode(\"button\", {\n      onClick: $setup.confirmApprove,\n      disabled: $setup.approving,\n      class: \"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:opacity-50\"\n    }, _toDisplayString($setup.approving ? \"Approving...\" : \"Approve\"), 9 /* TEXT, PROPS */, _hoisted_26)])])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Reject Modal \"), $setup.showRejectModal ? (_openBlock(), _createElementBlock(\"div\", _hoisted_27, [_createElementVNode(\"div\", _hoisted_28, [_cache[18] || (_cache[18] = _createElementVNode(\"h2\", {\n      class: \"text-xl font-bold mb-4\"\n    }, \"Reject Sale Return\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_29, [_createElementVNode(\"p\", null, [_cache[12] || (_cache[12] = _createElementVNode(\"strong\", null, \"Return No:\", -1 /* CACHED */)), _createTextVNode(\" RTN-\" + _toDisplayString($setup.formatReturnNumber($setup.selectedReturnId)), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[13] || (_cache[13] = _createElementVNode(\"strong\", null, \"Sale No:\", -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString($setup.selectedReturn?.sale?.transaction_number || \"N/A\"), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[14] || (_cache[14] = _createElementVNode(\"strong\", null, \"Customer:\", -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString($setup.selectedReturn?.sale?.Customer?.name || \"N/A\"), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[15] || (_cache[15] = _createElementVNode(\"strong\", null, \"Total:\", -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString($setup.formatCurrency($setup.selectedReturn?.total || 0)), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[16] || (_cache[16] = _createElementVNode(\"strong\", null, \"Requested By:\", -1 /* CACHED */)), _createTextVNode(\" User ID \" + _toDisplayString($setup.selectedReturn?.user_id), 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_30, [_cache[17] || (_cache[17] = _createElementVNode(\"label\", {\n      class: \"block text-sm font-medium text-gray-700 mb-2\"\n    }, \"Alasan Penolakan\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"textarea\", {\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.rejectReason = $event),\n      placeholder: \"Masukkan alasan penolakan...\",\n      rows: \"3\",\n      class: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500\",\n      required: \"\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.rejectReason]])]), _createElementVNode(\"div\", _hoisted_31, [_createElementVNode(\"button\", {\n      onClick: $setup.closeRejectModal,\n      class: \"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600\"\n    }, \" Cancel \"), _createElementVNode(\"button\", {\n      onClick: $setup.confirmReject,\n      disabled: $setup.rejecting || !$setup.rejectReason.trim(),\n      class: \"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 disabled:opacity-50\"\n    }, _toDisplayString($setup.rejecting ? \"Rejecting...\" : \"Reject\"), 9 /* TEXT, PROPS */, _hoisted_32)])])])) : _createCommentVNode(\"v-if\", true)])]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["class","_createBlock","$setup","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","onClick","_cache","$event","fetchReturns","disabled","loading","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_createElementBlock","_hoisted_8","colspan","saleReturns","length","_hoisted_9","_Fragment","key","_renderList","ret","id","_hoisted_10","_toDisplayString","formatReturnNumber","_hoisted_11","sale","transaction_number","sale_id","_hoisted_12","formatDate","date","_hoisted_13","Customer","name","_hoisted_14","getFirstProductName","items","_hoisted_15","formatCurrency","total","_hoisted_16","_normalizeClass","getStatusClass","status","getStatusText","_hoisted_17","_hoisted_18","openApprovalModal","_hoisted_19","openRejectModal","_hoisted_20","_hoisted_21","_createCommentVNode","showApprovalModal","_hoisted_22","_hoisted_23","_hoisted_24","selectedReturnId","selectedReturn","user_id","_hoisted_25","closeApprovalModal","confirmApprove","approving","_hoisted_26","showRejectModal","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","rejectReason","placeholder","rows","required","_hoisted_31","closeRejectModal","confirmReject","rejecting","trim","_hoisted_32"],"sources":["C:\\Users\\Personal\\Documents\\PKL\\aplikasi\\aplikasi\\src\\views\\ReturnApprovalOwners.vue"],"sourcesContent":["<template>\n  <OwnerLayouts>\n    <div class=\"flex flex-1 flex-col py-5 p-8\">\n      <div class=\"layout-content-container flex flex-col flex-1\">\n        <div class=\"flex flex-wrap justify-between items-center gap-3 p-4\">\n          <p\n            class=\"text-[#111418] tracking-light text-[32px] font-bold leading-tight min-w-72\"\n          >\n            Sales Returns Approval\n          </p>\n          <button\n            @click=\"fetchReturns('PENDING')\"\n            :disabled=\"loading\"\n            class=\"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50\"\n          >\n            {{ loading ? \"Loading...\" : \"Refresh Pending Returns\" }}\n          </button>\n        </div>\n\n        <div class=\"p-4 @container\">\n          <div\n            class=\"flex overflow-hidden rounded-lg border border-[#dbe0e6] bg-white\"\n          >\n            <table class=\"flex-1\">\n              <thead>\n                <tr class=\"bg-white\">\n                  <th\n                    class=\"table-column-120 px-4 py-3 text-left text-[#111418] w-[120px] text-sm font-medium leading-normal\"\n                  >\n                    Return No.\n                  </th>\n                  <th\n                    class=\"table-column-240 px-4 py-3 text-left text-[#111418] w-[120px] text-sm font-medium leading-normal\"\n                  >\n                    Sale No.\n                  </th>\n                  <th\n                    class=\"table-column-360 px-4 py-3 text-left text-[#111418] w-[150px] text-sm font-medium leading-normal\"\n                  >\n                    Date\n                  </th>\n                  <th\n                    class=\"table-column-480 px-4 py-3 text-left text-[#111418] w-[200px] text-sm font-medium leading-normal\"\n                  >\n                    Customer\n                  </th>\n                  <th\n                    class=\"table-column-600 px-4 py-3 text-left text-[#111418] w-[200px] text-sm font-medium leading-normal\"\n                  >\n                    Product\n                  </th>\n                  <th\n                    class=\"table-column-720 px-4 py-3 text-left text-[#111418] w-[120px] text-sm font-medium leading-normal\"\n                  >\n                    Total\n                  </th>\n                  <th\n                    class=\"table-column-840 px-4 py-3 text-left text-[#111418] w-[100px] text-sm font-medium leading-normal\"\n                  >\n                    Status\n                  </th>\n                  <th\n                    class=\"table-column-960 px-4 py-3 text-left text-[#111418] w-[120px] text-[#60758a] text-sm font-medium leading-normal\"\n                  >\n                    Actions\n                  </th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr v-if=\"loading\">\n                  <td colspan=\"8\" class=\"text-center py-8 text-gray-500\">\n                    Loading returns...\n                  </td>\n                </tr>\n                <tr v-else-if=\"saleReturns.length === 0\">\n                  <td colspan=\"8\" class=\"text-center py-8 text-gray-500\">\n                    Tidak ada retur pending.\n                  </td>\n                </tr>\n                <tr\n                  v-else\n                  v-for=\"ret in saleReturns\"\n                  :key=\"ret.id\"\n                  class=\"border-t border-t-[#dbe0e6]\"\n                >\n                  <td\n                    class=\"table-column-120 h-[72px] px-4 py-2 w-[120px] text-[#111418] text-sm font-normal leading-normal\"\n                  >\n                    RTN-{{ formatReturnNumber(ret.id) }}\n                  </td>\n                  <td\n                    class=\"table-column-240 h-[72px] px-4 py-2 w-[120px] text-[#60758a] text-sm font-normal leading-normal\"\n                  >\n                    {{ ret.sale?.transaction_number || `TRX-${ret.sale_id || \"N/A\"}` }}\n                  </td>\n                  <td\n                    class=\"table-column-360 h-[72px] px-4 py-2 w-[150px] text-[#60758a] text-sm font-normal leading-normal\"\n                  >\n                    {{ formatDate(ret.date) }}\n                  </td>\n                  <td\n                    class=\"table-column-480 h-[72px] px-4 py-2 w-[200px] text-[#60758a] text-sm font-normal leading-normal\"\n                  >\n                    {{ ret.sale?.Customer?.name || \"N/A\" }}\n                  </td>\n                  <td\n                    class=\"table-column-600 h-[72px] px-4 py-2 w-[200px] text-[#60758a] text-sm font-normal leading-normal\"\n                  >\n                    {{ getFirstProductName(ret.items) }}\n                  </td>\n                  <td\n                    class=\"table-column-720 h-[72px] px-4 py-2 w-[120px] text-[#60758a] text-sm font-normal leading-normal\"\n                  >\n                    {{ formatCurrency(ret.total) }}\n                  </td>\n                  <td\n                    class=\"table-column-840 h-[72px] px-4 py-2 w-[100px] text-sm font-normal leading-normal\"\n                  >\n                    <span\n                      :class=\"getStatusClass(ret.status)\"\n                      class=\"px-2 py-1 rounded text-xs font-medium\"\n                    >\n                      {{ getStatusText(ret.status) }}\n                    </span>\n                  </td>\n                  <td\n                    class=\"table-column-960 h-[72px] px-4 py-2 w-[120px] text-[#60758a] text-sm font-bold leading-normal tracking-[0.015em]\"\n                  >\n                    <div v-if=\"ret.status === 'PENDING'\" class=\"flex gap-2\">\n                      <button\n                        @click=\"openApprovalModal(ret.id)\"\n                        class=\"px-3 py-1 bg-green-500 text-white rounded text-xs hover:bg-green-600\"\n                      >\n                        Approve\n                      </button>\n                      <button\n                        @click=\"openRejectModal(ret.id)\"\n                        class=\"px-3 py-1 bg-red-500 text-white rounded text-xs hover:bg-red-600\"\n                      >\n                        Reject\n                      </button>\n                    </div>\n                    <span v-else class=\"text-gray-500\">Completed</span>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n\n      <!-- Approval Modal -->\n      <div\n        v-if=\"showApprovalModal\"\n        class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\n      >\n        <div class=\"bg-white rounded-lg p-6 max-w-md w-full\">\n          <h2 class=\"text-xl font-bold mb-4\">Approve Sale Return</h2>\n          <div class=\"mb-4\">\n            <p>\n              <strong>Return No:</strong> RTN-{{ formatReturnNumber(selectedReturnId) }}\n            </p>\n            <p>\n              <strong>Sale No:</strong>\n              {{ selectedReturn?.sale?.transaction_number || \"N/A\" }}\n            </p>\n            <p>\n              <strong>Customer:</strong>\n              {{ selectedReturn?.sale?.Customer?.name || \"N/A\" }}\n            </p>\n            <p>\n              <strong>Total:</strong>\n              {{ formatCurrency(selectedReturn?.total || 0) }}\n            </p>\n            <p>\n              <strong>Requested By:</strong> User ID {{ selectedReturn?.user_id }}\n            </p>\n          </div>\n          <div class=\"flex justify-end gap-2\">\n            <button\n              @click=\"closeApprovalModal\"\n              class=\"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600\"\n            >\n              Cancel\n            </button>\n            <button\n              @click=\"confirmApprove\"\n              :disabled=\"approving\"\n              class=\"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:opacity-50\"\n            >\n              {{ approving ? \"Approving...\" : \"Approve\" }}\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <!-- Reject Modal -->\n      <div\n        v-if=\"showRejectModal\"\n        class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\n      >\n        <div class=\"bg-white rounded-lg p-6 max-w-md w-full\">\n          <h2 class=\"text-xl font-bold mb-4\">Reject Sale Return</h2>\n          <div class=\"mb-4\">\n            <p>\n              <strong>Return No:</strong> RTN-{{ formatReturnNumber(selectedReturnId) }}\n            </p>\n            <p>\n              <strong>Sale No:</strong>\n              {{ selectedReturn?.sale?.transaction_number || \"N/A\" }}\n            </p>\n            <p>\n              <strong>Customer:</strong>\n              {{ selectedReturn?.sale?.Customer?.name || \"N/A\" }}\n            </p>\n            <p>\n              <strong>Total:</strong>\n              {{ formatCurrency(selectedReturn?.total || 0) }}\n            </p>\n            <p>\n              <strong>Requested By:</strong> User ID {{ selectedReturn?.user_id }}\n            </p>\n          </div>\n          <div class=\"mb-4\">\n            <label class=\"block text-sm font-medium text-gray-700 mb-2\"\n              >Alasan Penolakan</label\n            >\n            <textarea\n              v-model=\"rejectReason\"\n              placeholder=\"Masukkan alasan penolakan...\"\n              rows=\"3\"\n              class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500\"\n              required\n            ></textarea>\n          </div>\n          <div class=\"flex justify-end gap-2\">\n            <button\n              @click=\"closeRejectModal\"\n              class=\"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600\"\n            >\n              Cancel\n            </button>\n            <button\n              @click=\"confirmReject\"\n              :disabled=\"rejecting || !rejectReason.trim()\"\n              class=\"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 disabled:opacity-50\"\n            >\n              {{ rejecting ? \"Rejecting...\" : \"Reject\" }}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </OwnerLayouts>\n</template>\n\n<script setup>\nimport { ref, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport OwnerLayouts from \"../components/OwnerLayouts.vue\";\n\nconst saleReturns = ref([]);\nconst loading = ref(false);\nconst showApprovalModal = ref(false);\nconst showRejectModal = ref(false);\nconst selectedReturnId = ref(null);\nconst selectedReturn = ref(null);\nconst rejectReason = ref(\"\");\nconst approving = ref(false);\nconst rejecting = ref(false);\n\nconst api = axios.create({ baseURL: \"http://localhost:8081/api/v1\" });\nconst savedToken = localStorage.getItem(\"token\");\nif (savedToken) {\n  api.defaults.headers.common[\"Authorization\"] = `Bearer ${savedToken}`;\n}\n\nconst fetchReturns = async (status = \"PENDING\") => {\n  loading.value = true;\n  try {\n    const response = await api.get(\"/owner/sale-returns\", {\n      params: { status, page: 1, size: 10 },\n    });\n    saleReturns.value = response.data.data || [];\n    console.log(\"Fetched returns:\", saleReturns.value); // Debug log\n  } catch (error) {\n    console.error(\"Error fetching returns:\", error.response ? error.response.data : error.message);\n    if (error.response) {\n      alert(\n        `Gagal mengambil data retur: ${error.response.status} - ${\n          error.response.data.error || error.message\n        }`\n      );\n    } else {\n      alert(\"Kesalahan jaringan atau server tidak tersedia.\");\n    }\n    saleReturns.value = [];\n  } finally {\n    loading.value = false;\n  }\n};\n\nconst openApprovalModal = async (id) => {\n  try {\n    const response = await api.get(`/owner/sale-returns/${id}`, {\n      params: { include_user: true },\n    });\n    selectedReturn.value = response.data;\n    selectedReturnId.value = id;\n    showApprovalModal.value = true;\n  } catch (error) {\n    console.error(\"Error fetching return:\", error.response ? error.response.data : error.message);\n    alert(\n      \"Gagal memuat detail retur: \" +\n        (error.response?.data?.error || error.message)\n    );\n  }\n};\n\nconst closeApprovalModal = () => {\n  showApprovalModal.value = false;\n  selectedReturn.value = null;\n  selectedReturnId.value = null;\n};\n\nconst confirmApprove = async () => {\n  if (!selectedReturnId.value) return;\n\n  approving.value = true;\n  try {\n    const response = await api.post(`/owner/sale-returns/${selectedReturnId.value}/approve`);\n    if (response.status === 200) {\n      alert(\"Retur berhasil disetujui!\");\n      closeApprovalModal();\n      fetchReturns();\n    }\n  } catch (error) {\n    console.error(\"Error approving return:\", error.response ? error.response.data : error.message);\n    alert(\n      \"Gagal menyetujui retur: \" +\n        (error.response?.data?.error || error.message)\n    );\n  } finally {\n    approving.value = false;\n  }\n};\n\nconst openRejectModal = async (id) => {\n  try {\n    const response = await api.get(`/owner/sale-returns/${id}`, {\n      params: { include_user: true },\n    });\n    selectedReturn.value = response.data;\n    selectedReturnId.value = id;\n    rejectReason.value = \"\";\n    showRejectModal.value = true;\n  } catch (error) {\n    console.error(\"Error fetching return:\", error.response ? error.response.data : error.message);\n    alert(\n      \"Gagal memuat detail retur: \" +\n        (error.response?.data?.error || error.message)\n    );\n  }\n};\n\nconst closeRejectModal = () => {\n  showRejectModal.value = false;\n  selectedReturn.value = null;\n  selectedReturnId.value = null;\n  rejectReason.value = \"\";\n};\n\nconst confirmReject = async () => {\n  if (!selectedReturnId.value || !rejectReason.value.trim()) {\n    alert(\"Alasan penolakan wajib diisi!\");\n    return;\n  }\n\n  rejecting.value = true;\n  try {\n    const response = await api.post(`/owner/sale-returns/${selectedReturnId.value}/reject`, {\n      reason: rejectReason.value.trim(),\n    });\n    if (response.status === 200) {\n      alert(\"Retur berhasil ditolak!\");\n      closeRejectModal();\n      fetchReturns();\n    }\n  } catch (error) {\n    console.error(\"Error rejecting return:\", error.response ? error.response.data : error.message);\n    alert(\n      \"Gagal menolak retur: \" + (error.response?.data?.error || error.message)\n    );\n  } finally {\n    rejecting.value = false;\n  }\n};\n\nconst formatReturnNumber = (id) => {\n  return `2025-${String(id).padStart(3, \"0\")}`;\n};\n\nconst getStatusClass = (status) => {\n  switch (status) {\n    case \"PENDING\":\n      return \"bg-yellow-100 text-yellow-800\";\n    case \"APPROVED\":\n      return \"bg-green-100 text-green-800\";\n    case \"REJECTED\":\n      return \"bg-red-100 text-red-800\";\n    default:\n      return \"bg-gray-100 text-gray-800\";\n  }\n};\n\nconst getStatusText = (status) => {\n  switch (status) {\n    case \"PENDING\":\n      return \"Pending\";\n    case \"APPROVED\":\n      return \"Approved\";\n    case \"REJECTED\":\n      return \"Rejected\";\n    default:\n      return status;\n  }\n};\n\nconst getFirstProductName = (items) => {\n  if (items && items.length > 0 && items[0].product) {\n    return items[0].product.name;\n  }\n  return \"N/A\";\n};\n\nconst formatDate = (dateStr) => {\n  if (!dateStr) return \"N/A\";\n  const date = new Date(dateStr);\n  return date.toLocaleDateString(\"id-ID\", {\n    day: \"2-digit\",\n    month: \"2-digit\",\n    year: \"numeric\",\n  });\n};\n\nconst formatCurrency = (amount) => {\n  return amount !== undefined && amount !== null\n    ? new Intl.NumberFormat(\"id-ID\", {\n        style: \"currency\",\n        currency: \"IDR\",\n        minimumFractionDigits: 0,\n      }).format(amount)\n    : \"Rp 0\";\n};\n\nonMounted(() => {\n  console.log(\"Fetching returns on mount...\");\n  fetchReturns();\n});\n</script>\n\n<style scoped>\n@container (max-width: 120px) {\n  .table-column-120 {\n    display: none;\n  }\n}\n@container (max-width: 240px) {\n  .table-column-240 {\n    display: none;\n  }\n}\n@container (max-width: 360px) {\n  .table-column-360 {\n    display: none;\n  }\n}\n@container (max-width: 480px) {\n  .table-column-480 {\n    display: none;\n  }\n}\n@container (max-width: 600px) {\n  .table-column-600 {\n    display: none;\n  }\n}\n@container (max-width: 720px) {\n  .table-column-720 {\n    display: none;\n  }\n}\n@container (max-width: 840px) {\n  .table-column-840 {\n    display: none;\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}