{"ast":null,"code":"import { ref, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport KepalaGudangSidebar from \"@/components/KepalaGudangSidebar.vue\";\nexport default {\n  __name: 'PurchaseOrderKepalaGudang',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const purchases = ref([]);\n    const loading = ref(false);\n    const showApprovalModal = ref(false);\n    const showRejectModal = ref(false);\n    const showDetailsModal = ref(false);\n    const selectedPurchaseId = ref(null);\n    const selectedPurchase = ref(null);\n    const rejectReason = ref(\"\");\n    const approving = ref(false);\n    const rejecting = ref(false);\n    const token = localStorage.getItem(\"token\");\n    const role = localStorage.getItem(\"role\") || \"kepalagudang\";\n\n    // Fetch purchases (default to SUBMITTED status)\n    const fetchPurchases = async (status = \"SUBMITTED\") => {\n      if (!token) {\n        alert(\"No token found. Please log in again.\");\n        return;\n      }\n      if (role !== \"kepalagudang\") {\n        alert(\"Access denied: This page requires KEPALA_GUDANG role.\");\n        return;\n      }\n      loading.value = true;\n      try {\n        const res = await axios.get(\"http://localhost:8081/api/v1/kepala-gudang/purchases\", {\n          params: {\n            page: 1,\n            size: 20,\n            q: \"\",\n            status\n          },\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        purchases.value = Array.isArray(res.data) ? res.data : res.data.data || [];\n      } catch (err) {\n        console.error(\"Failed to fetch purchases:\", err);\n        const message = err.response?.data?.error || err.message;\n        alert(`Failed to fetch purchases: ${err.response?.status || \"Unknown\"} - ${message}`);\n      } finally {\n        loading.value = false;\n      }\n    };\n\n    // Open approval modal\n    const openApprovalModal = async id => {\n      try {\n        const res = await axios.get(`http://localhost:8081/api/v1/kepala-gudang/purchases/${id}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        selectedPurchase.value = res.data;\n        selectedPurchaseId.value = id;\n        showApprovalModal.value = true;\n      } catch (err) {\n        console.error(\"Failed to fetch purchase details:\", err);\n        alert(`Failed to fetch purchase details: ${err.response?.status || \"Unknown\"} - ${err.response?.data?.error || err.message}`);\n      }\n    };\n\n    // Confirm approval\n    const confirmApprove = async () => {\n      if (!selectedPurchaseId.value) return;\n      approving.value = true;\n      try {\n        const res = await axios.post(`http://localhost:8081/api/v1/kepala-gudang/purchases/${selectedPurchaseId.value}/approve`, {}, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (res.status === 200) {\n          alert(\"Purchase order approved successfully!\");\n          closeApprovalModal();\n          fetchPurchases();\n        }\n      } catch (err) {\n        console.error(\"Failed to approve purchase:\", err);\n        alert(`Failed to approve purchase: ${err.response?.status || \"Unknown\"} - ${err.response?.data?.error || err.message}`);\n      } finally {\n        approving.value = false;\n      }\n    };\n\n    // Open reject modal\n    const openRejectModal = async id => {\n      try {\n        const res = await axios.get(`http://localhost:8081/api/v1/kepala-gudang/purchases/${id}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        selectedPurchase.value = res.data;\n        selectedPurchaseId.value = id;\n        rejectReason.value = \"\";\n        showRejectModal.value = true;\n      } catch (err) {\n        console.error(\"Failed to fetch purchase details:\", err);\n        alert(`Failed to fetch purchase details: ${err.response?.status || \"Unknown\"} - ${err.response?.data?.error || err.message}`);\n      }\n    };\n\n    // Confirm rejection\n    const confirmReject = async () => {\n      if (!selectedPurchaseId.value || !rejectReason.value.trim()) {\n        alert(\"Reason for rejection is required!\");\n        return;\n      }\n      rejecting.value = true;\n      try {\n        const res = await axios.post(`http://localhost:8081/api/v1/kepala-gudang/purchases/${selectedPurchaseId.value}/reject`, {\n          reason: rejectReason.value.trim()\n        }, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (res.status === 200) {\n          alert(\"Purchase order rejected successfully!\");\n          closeRejectModal();\n          fetchPurchases();\n        }\n      } catch (err) {\n        console.error(\"Failed to reject purchase:\", err);\n        alert(`Failed to reject purchase: ${err.response?.status || \"Unknown\"} - ${err.response?.data?.error || err.message}`);\n      } finally {\n        rejecting.value = false;\n      }\n    };\n\n    // View details\n    const viewDetails = async id => {\n      try {\n        const res = await axios.get(`http://localhost:8081/api/v1/kepala-gudang/purchases/${id}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        selectedPurchase.value = res.data;\n        selectedPurchaseId.value = id;\n        showDetailsModal.value = true;\n      } catch (err) {\n        console.error(\"Failed to fetch purchase details:\", err);\n        alert(`Failed to fetch purchase details: ${err.response?.status || \"Unknown\"} - ${err.response?.data?.error || err.message}`);\n      }\n    };\n\n    // Close modals\n    const closeApprovalModal = () => {\n      showApprovalModal.value = false;\n      selectedPurchase.value = null;\n      selectedPurchaseId.value = null;\n    };\n    const closeRejectModal = () => {\n      showRejectModal.value = false;\n      selectedPurchase.value = null;\n      selectedPurchaseId.value = null;\n    };\n    const closeDetailsModal = () => {\n      showDetailsModal.value = false;\n      selectedPurchase.value = null;\n      selectedPurchaseId.value = null;\n    };\n\n    // Format PO number\n    const formatPONumber = id => {\n      return `PO-${String(id).padStart(3, \"0\")}`;\n    };\n\n    // Format tanggal\n    const formatDate = dateStr => {\n      if (!dateStr) return \"-\";\n      return new Date(dateStr).toLocaleDateString(\"id-ID\", {\n        day: \"2-digit\",\n        month: \"short\",\n        year: \"numeric\"\n      });\n    };\n\n    // Format mata uang\n    const formatCurrency = val => {\n      if (val === null || val === undefined) return \"-\";\n      return new Intl.NumberFormat(\"id-ID\", {\n        style: \"currency\",\n        currency: \"IDR\",\n        minimumFractionDigits: 0\n      }).format(val);\n    };\n\n    // Format status\n    const getStatusText = status => {\n      switch (status) {\n        case \"SUBMITTED\":\n          return \"Submitted\";\n        case \"APPROVED\":\n          return \"Approved\";\n        case \"REJECTED\":\n          return \"Rejected\";\n        case \"DRAFT\":\n          return \"Draft\";\n        default:\n          return status || \"-\";\n      }\n    };\n\n    // Get status class\n    const getStatusClass = status => {\n      switch (status) {\n        case \"SUBMITTED\":\n          return \"bg-yellow-200 text-yellow-800\";\n        case \"APPROVED\":\n          return \"bg-green-200 text-green-800\";\n        case \"REJECTED\":\n          return \"bg-red-200 text-red-800\";\n        case \"DRAFT\":\n          return \"bg-gray-200 text-gray-800\";\n        default:\n          return \"bg-gray-200 text-gray-800\";\n      }\n    };\n    onMounted(() => {\n      fetchPurchases();\n    });\n    const __returned__ = {\n      purchases,\n      loading,\n      showApprovalModal,\n      showRejectModal,\n      showDetailsModal,\n      selectedPurchaseId,\n      selectedPurchase,\n      rejectReason,\n      approving,\n      rejecting,\n      token,\n      role,\n      fetchPurchases,\n      openApprovalModal,\n      confirmApprove,\n      openRejectModal,\n      confirmReject,\n      viewDetails,\n      closeApprovalModal,\n      closeRejectModal,\n      closeDetailsModal,\n      formatPONumber,\n      formatDate,\n      formatCurrency,\n      getStatusText,\n      getStatusClass,\n      ref,\n      onMounted,\n      get axios() {\n        return axios;\n      },\n      KepalaGudangSidebar\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","axios","KepalaGudangSidebar","purchases","loading","showApprovalModal","showRejectModal","showDetailsModal","selectedPurchaseId","selectedPurchase","rejectReason","approving","rejecting","token","localStorage","getItem","role","fetchPurchases","status","alert","value","res","get","params","page","size","q","headers","Authorization","Array","isArray","data","err","console","error","message","response","openApprovalModal","id","confirmApprove","post","closeApprovalModal","openRejectModal","confirmReject","trim","reason","closeRejectModal","viewDetails","closeDetailsModal","formatPONumber","String","padStart","formatDate","dateStr","Date","toLocaleDateString","day","month","year","formatCurrency","val","undefined","Intl","NumberFormat","style","currency","minimumFractionDigits","format","getStatusText","getStatusClass"],"sources":["C:/Users/Personal/Documents/PKL/aplikasi/aplikasi/src/views/PurchaseOrderKepalaGudang.vue"],"sourcesContent":["<script setup>\nimport { ref, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport KepalaGudangSidebar from \"@/components/KepalaGudangSidebar.vue\";\n\nconst purchases = ref([]);\nconst loading = ref(false);\nconst showApprovalModal = ref(false);\nconst showRejectModal = ref(false);\nconst showDetailsModal = ref(false);\nconst selectedPurchaseId = ref(null);\nconst selectedPurchase = ref(null);\nconst rejectReason = ref(\"\");\nconst approving = ref(false);\nconst rejecting = ref(false);\nconst token = localStorage.getItem(\"token\");\nconst role = localStorage.getItem(\"role\") || \"kepalagudang\";\n\n// Fetch purchases (default to SUBMITTED status)\nconst fetchPurchases = async (status = \"SUBMITTED\") => {\n  if (!token) {\n    alert(\"No token found. Please log in again.\");\n    return;\n  }\n  if (role !== \"kepalagudang\") {\n    alert(\"Access denied: This page requires KEPALA_GUDANG role.\");\n    return;\n  }\n\n  loading.value = true;\n  try {\n    const res = await axios.get(\n      \"http://localhost:8081/api/v1/kepala-gudang/purchases\",\n      {\n        params: { page: 1, size: 20, q: \"\", status },\n        headers: { Authorization: `Bearer ${token}` },\n      }\n    );\n    purchases.value = Array.isArray(res.data) ? res.data : res.data.data || [];\n  } catch (err) {\n    console.error(\"Failed to fetch purchases:\", err);\n    const message = err.response?.data?.error || err.message;\n    alert(\n      `Failed to fetch purchases: ${\n        err.response?.status || \"Unknown\"\n      } - ${message}`\n    );\n  } finally {\n    loading.value = false;\n  }\n};\n\n// Open approval modal\nconst openApprovalModal = async (id) => {\n  try {\n    const res = await axios.get(\n      `http://localhost:8081/api/v1/kepala-gudang/purchases/${id}`,\n      { headers: { Authorization: `Bearer ${token}` } }\n    );\n    selectedPurchase.value = res.data;\n    selectedPurchaseId.value = id;\n    showApprovalModal.value = true;\n  } catch (err) {\n    console.error(\"Failed to fetch purchase details:\", err);\n    alert(\n      `Failed to fetch purchase details: ${\n        err.response?.status || \"Unknown\"\n      } - ${err.response?.data?.error || err.message}`\n    );\n  }\n};\n\n// Confirm approval\nconst confirmApprove = async () => {\n  if (!selectedPurchaseId.value) return;\n\n  approving.value = true;\n  try {\n    const res = await axios.post(\n      `http://localhost:8081/api/v1/kepala-gudang/purchases/${selectedPurchaseId.value}/approve`,\n      {},\n      { headers: { Authorization: `Bearer ${token}` } }\n    );\n    if (res.status === 200) {\n      alert(\"Purchase order approved successfully!\");\n      closeApprovalModal();\n      fetchPurchases();\n    }\n  } catch (err) {\n    console.error(\"Failed to approve purchase:\", err);\n    alert(\n      `Failed to approve purchase: ${err.response?.status || \"Unknown\"} - ${\n        err.response?.data?.error || err.message\n      }`\n    );\n  } finally {\n    approving.value = false;\n  }\n};\n\n// Open reject modal\nconst openRejectModal = async (id) => {\n  try {\n    const res = await axios.get(\n      `http://localhost:8081/api/v1/kepala-gudang/purchases/${id}`,\n      { headers: { Authorization: `Bearer ${token}` } }\n    );\n    selectedPurchase.value = res.data;\n    selectedPurchaseId.value = id;\n    rejectReason.value = \"\";\n    showRejectModal.value = true;\n  } catch (err) {\n    console.error(\"Failed to fetch purchase details:\", err);\n    alert(\n      `Failed to fetch purchase details: ${\n        err.response?.status || \"Unknown\"\n      } - ${err.response?.data?.error || err.message}`\n    );\n  }\n};\n\n// Confirm rejection\nconst confirmReject = async () => {\n  if (!selectedPurchaseId.value || !rejectReason.value.trim()) {\n    alert(\"Reason for rejection is required!\");\n    return;\n  }\n\n  rejecting.value = true;\n  try {\n    const res = await axios.post(\n      `http://localhost:8081/api/v1/kepala-gudang/purchases/${selectedPurchaseId.value}/reject`,\n      { reason: rejectReason.value.trim() },\n      { headers: { Authorization: `Bearer ${token}` } }\n    );\n    if (res.status === 200) {\n      alert(\"Purchase order rejected successfully!\");\n      closeRejectModal();\n      fetchPurchases();\n    }\n  } catch (err) {\n    console.error(\"Failed to reject purchase:\", err);\n    alert(\n      `Failed to reject purchase: ${err.response?.status || \"Unknown\"} - ${\n        err.response?.data?.error || err.message\n      }`\n    );\n  } finally {\n    rejecting.value = false;\n  }\n};\n\n// View details\nconst viewDetails = async (id) => {\n  try {\n    const res = await axios.get(\n      `http://localhost:8081/api/v1/kepala-gudang/purchases/${id}`,\n      { headers: { Authorization: `Bearer ${token}` } }\n    );\n    selectedPurchase.value = res.data;\n    selectedPurchaseId.value = id;\n    showDetailsModal.value = true;\n  } catch (err) {\n    console.error(\"Failed to fetch purchase details:\", err);\n    alert(\n      `Failed to fetch purchase details: ${\n        err.response?.status || \"Unknown\"\n      } - ${err.response?.data?.error || err.message}`\n    );\n  }\n};\n\n// Close modals\nconst closeApprovalModal = () => {\n  showApprovalModal.value = false;\n  selectedPurchase.value = null;\n  selectedPurchaseId.value = null;\n};\nconst closeRejectModal = () => {\n  showRejectModal.value = false;\n  selectedPurchase.value = null;\n  selectedPurchaseId.value = null;\n};\nconst closeDetailsModal = () => {\n  showDetailsModal.value = false;\n  selectedPurchase.value = null;\n  selectedPurchaseId.value = null;\n};\n\n// Format PO number\nconst formatPONumber = (id) => {\n  return `PO-${String(id).padStart(3, \"0\")}`;\n};\n\n// Format tanggal\nconst formatDate = (dateStr) => {\n  if (!dateStr) return \"-\";\n  return new Date(dateStr).toLocaleDateString(\"id-ID\", {\n    day: \"2-digit\",\n    month: \"short\",\n    year: \"numeric\",\n  });\n};\n\n// Format mata uang\nconst formatCurrency = (val) => {\n  if (val === null || val === undefined) return \"-\";\n  return new Intl.NumberFormat(\"id-ID\", {\n    style: \"currency\",\n    currency: \"IDR\",\n    minimumFractionDigits: 0,\n  }).format(val);\n};\n\n// Format status\nconst getStatusText = (status) => {\n  switch (status) {\n    case \"SUBMITTED\":\n      return \"Submitted\";\n    case \"APPROVED\":\n      return \"Approved\";\n    case \"REJECTED\":\n      return \"Rejected\";\n    case \"DRAFT\":\n      return \"Draft\";\n    default:\n      return status || \"-\";\n  }\n};\n\n// Get status class\nconst getStatusClass = (status) => {\n  switch (status) {\n    case \"SUBMITTED\":\n      return \"bg-yellow-200 text-yellow-800\";\n    case \"APPROVED\":\n      return \"bg-green-200 text-green-800\";\n    case \"REJECTED\":\n      return \"bg-red-200 text-red-800\";\n    case \"DRAFT\":\n      return \"bg-gray-200 text-gray-800\";\n    default:\n      return \"bg-gray-200 text-gray-800\";\n  }\n};\n\nonMounted(() => {\n  fetchPurchases();\n});\n</script>\n\n<template>\n  <div\n    class=\"flex size-full min-h-screen flex-col bg-white font-manrope lg:flex-row\"\n  >\n    <!-- Sidebar -->\n    <KepalaGudangSidebar />\n\n    <div class=\"flex flex-1 flex-col\">\n      <main class=\"flex-1 p-8\">\n        <div class=\"layout-content-container flex flex-col flex-1\">\n          <!-- Header -->\n          <div class=\"mb-6 flex flex-wrap justify-between items-center gap-3\">\n            <div>\n              <p\n                class=\"text-[#111418] tracking-light text-[32px] font-bold leading-tight\"\n              >\n                Purchase Orders Approval\n              </p>\n              <p class=\"text-[#60758a] text-sm font-normal leading-normal\">\n                Review and approve or reject pending purchase orders.\n              </p>\n            </div>\n            <button\n              @click=\"fetchPurchases\"\n              :disabled=\"loading\"\n              class=\"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50\"\n            >\n              {{ loading ? \"Loading...\" : \"Refresh Purchases\" }}\n            </button>\n          </div>\n\n          <!-- Tabel -->\n          <div class=\"px-4 py-3 @container\">\n            <div\n              class=\"flex overflow-hidden rounded-lg border border-[#dbe0e6] bg-white\"\n            >\n              <table class=\"flex-1 w-full\">\n                <thead>\n                  <tr class=\"bg-white\">\n                    <th\n                      class=\"px-4 py-3 text-left text-[#111418] w-[120px] text-sm font-medium\"\n                    >\n                      PO Number\n                    </th>\n                    <th\n                      class=\"px-4 py-3 text-left text-[#111418] w-[200px] text-sm font-medium\"\n                    >\n                      Supplier\n                    </th>\n                    <th\n                      class=\"px-4 py-3 text-left text-[#111418] w-[150px] text-sm font-medium\"\n                    >\n                      Date\n                    </th>\n                    <th\n                      class=\"px-4 py-3 text-left text-[#111418] w-[150px] text-sm font-medium\"\n                    >\n                      Total\n                    </th>\n                    <th\n                      class=\"px-4 py-3 text-left text-[#111418] w-[120px] text-sm font-medium\"\n                    >\n                      Status\n                    </th>\n                    <th\n                      class=\"px-4 py-3 text-left text-[#111418] w-[150px] text-sm font-medium\"\n                    >\n                      Actions\n                    </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <!-- LOOP DATA -->\n                  <tr\n                    v-for=\"po in purchases\"\n                    :key=\"po.id\"\n                    class=\"border-t border-t-[#dbe0e6]\"\n                  >\n                    <td class=\"h-[72px] px-4 py-2 text-[#111418] text-sm\">\n                      {{ formatPONumber(po.id) }}\n                    </td>\n                    <td class=\"h-[72px] px-4 py-2 text-[#60758a] text-sm\">\n                      {{ po.supplier?.name || \"-\" }}\n                    </td>\n                    <td class=\"h-[72px] px-4 py-2 text-[#60758a] text-sm\">\n                      {{ formatDate(po.date) }}\n                    </td>\n                    <td class=\"h-[72px] px-4 py-2 text-[#60758a] text-sm\">\n                      {{ formatCurrency(po.total) }}\n                    </td>\n                    <td class=\"h-[72px] px-4 py-2 text-sm\">\n                      <span\n                        :class=\"getStatusClass(po.status)\"\n                        class=\"px-3 py-1 rounded-lg text-xs font-medium\"\n                      >\n                        {{ getStatusText(po.status) }}\n                      </span>\n                    </td>\n                    <td class=\"h-[72px] px-4 py-2 text-sm font-bold\">\n                      <div v-if=\"po.status === 'SUBMITTED'\" class=\"flex gap-2\">\n                        <button\n                          @click=\"openApprovalModal(po.id)\"\n                          :disabled=\"approving\"\n                          class=\"px-3 py-1 bg-green-500 text-white rounded text-xs hover:bg-green-600 disabled:opacity-50\"\n                        >\n                          {{ approving ? \"Approving...\" : \"Approve\" }}\n                        </button>\n                        <button\n                          @click=\"openRejectModal(po.id)\"\n                          :disabled=\"rejecting\"\n                          class=\"px-3 py-1 bg-red-500 text-white rounded text-xs hover:bg-red-600 disabled:opacity-50\"\n                        >\n                          {{ rejecting ? \"Rejecting...\" : \"Reject\" }}\n                        </button>\n                        <button\n                          @click=\"viewDetails(po.id)\"\n                          class=\"px-3 py-1 bg-blue-500 text-white rounded text-xs hover:bg-blue-600\"\n                        >\n                          View Details\n                        </button>\n                      </div>\n                      <div v-else class=\"flex gap-2\">\n                        <button\n                          @click=\"viewDetails(po.id)\"\n                          class=\"px-3 py-1 bg-blue-500 text-white rounded text-xs hover:bg-blue-600\"\n                        >\n                          View Details\n                        </button>\n                        <span class=\"text-gray-500\">{{\n                          getStatusText(po.status)\n                        }}</span>\n                      </div>\n                    </td>\n                  </tr>\n\n                  <!-- KOSONG -->\n                  <tr v-if=\"!loading && purchases.length === 0\">\n                    <td\n                      colspan=\"6\"\n                      class=\"text-center py-4 text-[#60758a] text-sm\"\n                    >\n                      No purchase orders found\n                    </td>\n                  </tr>\n\n                  <!-- LOADING -->\n                  <tr v-if=\"loading\">\n                    <td\n                      colspan=\"6\"\n                      class=\"text-center py-4 text-[#60758a] text-sm\"\n                    >\n                      Loading...\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n\n          <!-- Approval Modal -->\n          <div\n            v-if=\"showApprovalModal\"\n            class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\n          >\n            <div class=\"bg-white rounded-lg p-6 max-w-md w-full\">\n              <h2 class=\"text-xl font-bold mb-4\">Approve Purchase Order</h2>\n              <div class=\"mb-4\">\n                <p>\n                  <strong>PO Number:</strong>\n                  {{ formatPONumber(selectedPurchaseId) }}\n                </p>\n                <p>\n                  <strong>Supplier:</strong>\n                  {{ selectedPurchase?.supplier?.name || \"-\" }}\n                </p>\n                <p>\n                  <strong>Date:</strong>\n                  {{ formatDate(selectedPurchase?.date) }}\n                </p>\n                <p>\n                  <strong>Total:</strong>\n                  {{ formatCurrency(selectedPurchase?.total) }}\n                </p>\n                <p>\n                  <strong>Requested By:</strong> User ID\n                  {{ selectedPurchase?.user_id || \"-\" }}\n                </p>\n              </div>\n              <div class=\"flex justify-end gap-2\">\n                <button\n                  @click=\"closeApprovalModal\"\n                  class=\"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600\"\n                >\n                  Cancel\n                </button>\n                <button\n                  @click=\"confirmApprove\"\n                  :disabled=\"approving\"\n                  class=\"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:opacity-50\"\n                >\n                  {{ approving ? \"Approving...\" : \"Approve\" }}\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <!-- Reject Modal -->\n          <div\n            v-if=\"showRejectModal\"\n            class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\n          >\n            <div class=\"bg-white rounded-lg p-6 max-w-md w-full\">\n              <h2 class=\"text-xl font-bold mb-4\">Reject Purchase Order</h2>\n              <div class=\"mb-4\">\n                <p>\n                  <strong>PO Number:</strong>\n                  {{ formatPONumber(selectedPurchaseId) }}\n                </p>\n                <p>\n                  <strong>Supplier:</strong>\n                  {{ selectedPurchase?.supplier?.name || \"-\" }}\n                </p>\n                <p>\n                  <strong>Date:</strong>\n                  {{ formatDate(selectedPurchase?.date) }}\n                </p>\n                <p>\n                  <strong>Total:</strong>\n                  {{ formatCurrency(selectedPurchase?.total) }}\n                </p>\n                <p>\n                  <strong>Requested By:</strong> User ID\n                  {{ selectedPurchase?.user_id || \"-\" }}\n                </p>\n              </div>\n              <div class=\"mb-4\">\n                <label class=\"block text-sm font-medium text-gray-700 mb-2\"\n                  >Reason for Rejection</label\n                >\n                <textarea\n                  v-model=\"rejectReason\"\n                  placeholder=\"Enter reason for rejection...\"\n                  rows=\"3\"\n                  class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500\"\n                  required\n                ></textarea>\n              </div>\n              <div class=\"flex justify-end gap-2\">\n                <button\n                  @click=\"closeRejectModal\"\n                  class=\"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600\"\n                >\n                  Cancel\n                </button>\n                <button\n                  @click=\"confirmReject\"\n                  :disabled=\"rejecting || !rejectReason.trim()\"\n                  class=\"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 disabled:opacity-50\"\n                >\n                  {{ rejecting ? \"Rejecting...\" : \"Reject\" }}\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <!-- View Details Modal -->\n          <div\n            v-if=\"showDetailsModal\"\n            class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\n          >\n            <div\n              class=\"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto\"\n            >\n              <div class=\"flex justify-between items-center mb-4\">\n                <h2 class=\"text-xl font-bold\">Purchase Order Details</h2>\n                <button\n                  @click=\"closeDetailsModal\"\n                  class=\"text-gray-500 hover:text-gray-700 text-xl\"\n                >\n                  &times;\n                </button>\n              </div>\n              <div v-if=\"selectedPurchase\" class=\"space-y-4\">\n                <p>\n                  <strong>PO Number:</strong>\n                  {{ formatPONumber(selectedPurchaseId) }}\n                </p>\n                <p>\n                  <strong>Supplier:</strong>\n                  {{ selectedPurchase.supplier?.name || \"-\" }}\n                </p>\n                <p>\n                  <strong>Date:</strong> {{ formatDate(selectedPurchase.date) }}\n                </p>\n                <p>\n                  <strong>Total:</strong>\n                  {{ formatCurrency(selectedPurchase.total) }}\n                </p>\n                <p>\n                  <strong>Status:</strong>\n                  {{ getStatusText(selectedPurchase.status) }}\n                </p>\n                <p>\n                  <strong>Requested By:</strong> User ID\n                  {{ selectedPurchase.user_id || \"-\" }}\n                </p>\n                <p v-if=\"selectedPurchase.approved_by\">\n                  <strong>Approved By:</strong> User ID\n                  {{ selectedPurchase.approved_by }}\n                </p>\n                <p v-if=\"selectedPurchase.approved_at\">\n                  <strong>Approved At:</strong>\n                  {{ formatDate(selectedPurchase.approved_at) }}\n                </p>\n\n                <h3 class=\"text-lg font-semibold mt-4\">Purchase Items</h3>\n                <div class=\"overflow-x-auto\">\n                  <table class=\"min-w-full bg-white border border-gray-300\">\n                    <thead>\n                      <tr class=\"bg-gray-100\">\n                        <th class=\"px-4 py-2 text-left text-gray-600\">\n                          Product\n                        </th>\n                        <th class=\"px-4 py-2 text-left text-gray-600\">\n                          Quantity\n                        </th>\n                        <th class=\"px-4 py-2 text-left text-gray-600\">Price</th>\n                        <th class=\"px-4 py-2 text-left text-gray-600\">\n                          Subtotal\n                        </th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      <tr\n                        v-for=\"(item, index) in selectedPurchase.items\"\n                        :key=\"index\"\n                        class=\"border-t border-gray-300\"\n                      >\n                        <td class=\"px-4 py-2 text-gray-700\">\n                          {{ item.product?.name || \"-\" }}\n                        </td>\n                        <td class=\"px-4 py-2 text-gray-700\">\n                          {{ item.qty || \"-\" }}\n                        </td>\n                        <td class=\"px-4 py-2 text-gray-700\">\n                          {{ formatCurrency(item.price) }}\n                        </td>\n                        <td class=\"px-4 py-2 text-gray-700\">\n                          {{ formatCurrency(item.subtotal) }}\n                        </td>\n                      </tr>\n                      <tr\n                        v-if=\"\n                          !selectedPurchase.items ||\n                          selectedPurchase.items.length === 0\n                        \"\n                      >\n                        <td\n                          colspan=\"4\"\n                          class=\"px-4 py-2 text-center text-gray-700\"\n                        >\n                          No items found\n                        </td>\n                      </tr>\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n@container (max-width: 120px) {\n  .table-column-120 {\n    display: none;\n  }\n}\n@container (max-width: 240px) {\n  .table-column-240 {\n    display: none;\n  }\n}\n@container (max-width: 360px) {\n  .table-column-360 {\n    display: none;\n  }\n}\n@container (max-width: 480px) {\n  .table-column-480 {\n    display: none;\n  }\n}\n@container (max-width: 600px) {\n  .table-column-600 {\n    display: none;\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}