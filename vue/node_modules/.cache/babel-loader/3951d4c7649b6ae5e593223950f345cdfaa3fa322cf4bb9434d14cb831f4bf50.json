{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport { ref, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport jsPDF from \"jspdf\";\nimport \"jspdf-autotable\";\n\n// State\n\nexport default {\n  __name: 'PurchaseSummaryReportOwners',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const period = ref(\"Monthly\"); // default\n    const reportData = ref([]);\n    const loading = ref(false);\n\n    // Ambil data dari backend\n    const fetchReport = async () => {\n      loading.value = true;\n      try {\n        const res = await axios.get(`http://localhost:8081/api/v1/owner/reports/purchases/summary`, {\n          params: {\n            period: period.value\n          },\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n          }\n        });\n        reportData.value = res.data.data || [];\n      } catch (err) {\n        console.error(\"Gagal mengambil data report:\", err);\n        reportData.value = [];\n      } finally {\n        loading.value = false;\n      }\n    };\n\n    // Ganti periode\n    const setPeriod = p => {\n      period.value = p;\n      fetchReport();\n    };\n\n    // Export PDF\n    const exportPDF = () => {\n      const doc = new jsPDF();\n      doc.text(\"Owner Report\", 14, 16);\n      const tableColumn = [\"Period\", \"Number of Transactions\", \"Total Purchase Value\"];\n      const tableRows = [];\n      reportData.value.forEach(item => {\n        const row = [item.period, item.number_of_transactions, item.total_purchase_value.toLocaleString()];\n        tableRows.push(row);\n      });\n      doc.autoTable({\n        head: [tableColumn],\n        body: tableRows,\n        startY: 20\n      });\n      doc.save(`Owner_Report_${period.value}.pdf`);\n    };\n    onMounted(() => {\n      fetchReport();\n    });\n    const __returned__ = {\n      period,\n      reportData,\n      loading,\n      fetchReport,\n      setPeriod,\n      exportPDF,\n      ref,\n      onMounted,\n      get axios() {\n        return axios;\n      },\n      get jsPDF() {\n        return jsPDF;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","axios","jsPDF","period","reportData","loading","fetchReport","value","res","get","params","headers","Authorization","localStorage","getItem","data","err","console","error","setPeriod","p","exportPDF","doc","text","tableColumn","tableRows","forEach","item","row","number_of_transactions","total_purchase_value","toLocaleString","push","autoTable","head","body","startY","save"],"sources":["C:/Users/Personal/Documents/PKL/aplikasi/aplikasi/src/views/PurchaseSummaryReportOwners.vue"],"sourcesContent":["<script setup>\nimport { ref, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport jsPDF from \"jspdf\";\nimport \"jspdf-autotable\";\n\n// State\nconst period = ref(\"Monthly\"); // default\nconst reportData = ref([]);\nconst loading = ref(false);\n\n// Ambil data dari backend\nconst fetchReport = async () => {\n  loading.value = true;\n  try {\n    const res = await axios.get(\n      `http://localhost:8081/api/v1/owner/reports/purchases/summary`,\n      {\n        params: { period: period.value },\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n        },\n      }\n    );\n    reportData.value = res.data.data || [];\n  } catch (err) {\n    console.error(\"Gagal mengambil data report:\", err);\n    reportData.value = [];\n  } finally {\n    loading.value = false;\n  }\n};\n\n// Ganti periode\nconst setPeriod = (p) => {\n  period.value = p;\n  fetchReport();\n};\n\n// Export PDF\nconst exportPDF = () => {\n  const doc = new jsPDF();\n  doc.text(\"Owner Report\", 14, 16);\n  const tableColumn = [\n    \"Period\",\n    \"Number of Transactions\",\n    \"Total Purchase Value\",\n  ];\n  const tableRows = [];\n\n  reportData.value.forEach((item) => {\n    const row = [\n      item.period,\n      item.number_of_transactions,\n      item.total_purchase_value.toLocaleString(),\n    ];\n    tableRows.push(row);\n  });\n\n  doc.autoTable({\n    head: [tableColumn],\n    body: tableRows,\n    startY: 20,\n  });\n  doc.save(`Owner_Report_${period.value}.pdf`);\n};\n\nonMounted(() => {\n  fetchReport();\n});\n</script>\n\n<template>\n  <OwnerLayouts>\n    <div class=\"flex flex-1 flex-col py-5 p-8\">\n      <!-- Filter periode -->\n      <div class=\"flex gap-4 mb-4\">\n        <label class=\"flex items-center gap-1\">\n          <input\n            type=\"radio\"\n            value=\"Daily\"\n            v-model=\"period\"\n            @change=\"setPeriod('Daily')\"\n          />\n          Daily\n        </label>\n        <label class=\"flex items-center gap-1\">\n          <input\n            type=\"radio\"\n            value=\"Monthly\"\n            v-model=\"period\"\n            @change=\"setPeriod('Monthly')\"\n          />\n          Monthly\n        </label>\n        <label class=\"flex items-center gap-1\">\n          <input\n            type=\"radio\"\n            value=\"Yearly\"\n            v-model=\"period\"\n            @change=\"setPeriod('Yearly')\"\n          />\n          Yearly\n        </label>\n        <button\n          @click=\"exportPDF\"\n          class=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n        >\n          Export PDF\n        </button>\n      </div>\n\n      <!-- Loading -->\n      <div v-if=\"loading\" class=\"text-center py-10\">Loading...</div>\n\n      <!-- Table data -->\n      <div v-else class=\"overflow-x-auto\">\n        <table class=\"min-w-full border border-gray-200\">\n          <thead class=\"bg-gray-100\">\n            <tr>\n              <th class=\"border px-4 py-2 text-left\">Period</th>\n              <th class=\"border px-4 py-2 text-left\">Number of Transactions</th>\n              <th class=\"border px-4 py-2 text-left\">Total Purchase Value</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              v-for=\"item in reportData\"\n              :key=\"item.period\"\n              class=\"hover:bg-gray-50\"\n            >\n              <td class=\"border px-4 py-2\">{{ item.period }}</td>\n              <td class=\"border px-4 py-2\">\n                {{ item.number_of_transactions }}\n              </td>\n              <td class=\"border px-4 py-2\">\n                ${{ item.total_purchase_value.toLocaleString() }}\n              </td>\n            </tr>\n            <tr v-if=\"reportData.length === 0\">\n              <td colspan=\"3\" class=\"text-center py-4\">No data available</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </OwnerLayouts>\n</template>\n"],"mappings":";;;AACA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAO,iBAAiB;;AAExB;;;;;;;;IACA,MAAMC,MAAM,GAAGJ,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC;IAC/B,MAAMK,UAAU,GAAGL,GAAG,CAAC,EAAE,CAAC;IAC1B,MAAMM,OAAO,GAAGN,GAAG,CAAC,KAAK,CAAC;;IAE1B;IACA,MAAMO,WAAW,GAAG,MAAAA,CAAA,KAAY;MAC9BD,OAAO,CAACE,KAAK,GAAG,IAAI;MACpB,IAAI;QACF,MAAMC,GAAG,GAAG,MAAMP,KAAK,CAACQ,GAAG,CACzB,8DAA8D,EAC9D;UACEC,MAAM,EAAE;YAAEP,MAAM,EAAEA,MAAM,CAACI;UAAM,CAAC;UAChCI,OAAO,EAAE;YACPC,aAAa,EAAE,UAAUC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;UACxD;QACF,CACF,CAAC;QACDV,UAAU,CAACG,KAAK,GAAGC,GAAG,CAACO,IAAI,CAACA,IAAI,IAAI,EAAE;MACxC,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAAC,8BAA8B,EAAEF,GAAG,CAAC;QAClDZ,UAAU,CAACG,KAAK,GAAG,EAAE;MACvB,CAAC,SAAS;QACRF,OAAO,CAACE,KAAK,GAAG,KAAK;MACvB;IACF,CAAC;;IAED;IACA,MAAMY,SAAS,GAAIC,CAAC,IAAK;MACvBjB,MAAM,CAACI,KAAK,GAAGa,CAAC;MAChBd,WAAW,CAAC,CAAC;IACf,CAAC;;IAED;IACA,MAAMe,SAAS,GAAGA,CAAA,KAAM;MACtB,MAAMC,GAAG,GAAG,IAAIpB,KAAK,CAAC,CAAC;MACvBoB,GAAG,CAACC,IAAI,CAAC,cAAc,EAAE,EAAE,EAAE,EAAE,CAAC;MAChC,MAAMC,WAAW,GAAG,CAClB,QAAQ,EACR,wBAAwB,EACxB,sBAAsB,CACvB;MACD,MAAMC,SAAS,GAAG,EAAE;MAEpBrB,UAAU,CAACG,KAAK,CAACmB,OAAO,CAAEC,IAAI,IAAK;QACjC,MAAMC,GAAG,GAAG,CACVD,IAAI,CAACxB,MAAM,EACXwB,IAAI,CAACE,sBAAsB,EAC3BF,IAAI,CAACG,oBAAoB,CAACC,cAAc,CAAC,CAAC,CAC3C;QACDN,SAAS,CAACO,IAAI,CAACJ,GAAG,CAAC;MACrB,CAAC,CAAC;MAEFN,GAAG,CAACW,SAAS,CAAC;QACZC,IAAI,EAAE,CAACV,WAAW,CAAC;QACnBW,IAAI,EAAEV,SAAS;QACfW,MAAM,EAAE;MACV,CAAC,CAAC;MACFd,GAAG,CAACe,IAAI,CAAC,gBAAgBlC,MAAM,CAACI,KAAK,MAAM,CAAC;IAC9C,CAAC;IAEDP,SAAS,CAAC,MAAM;MACdM,WAAW,CAAC,CAAC;IACf,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}