{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport KepalaGudangLayouts from \"@/components/KepalaGudangLayouts.vue\";\n\n// --- STATE MANAGEMENT ---\n\nexport default {\n  __name: 'DashboardKepalagudang',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const isLoading = ref(false);\n    const error = ref(null);\n\n    // Inisialisasi dengan data mock/default. Data ini akan diperbarui oleh API.\n    const dashboardData = ref({\n      totalStockValue: 0,\n      itemsInboundToday: 0,\n      itemsOutboundToday: 0\n    });\n\n    // Ganti dengan URL API Anda yang sebenarnya dari environment variable\n    const API_URL = import.meta.env.VITE_API_BASE_URL || 'http://localhost:8080/api/v1';\n\n    // Fungsi untuk memformat mata uang\n    const formatCurrency = value => {\n      if (typeof value !== 'number') return `$0`;\n      return new Intl.NumberFormat('en-US', {\n        style: 'currency',\n        currency: 'USD',\n        minimumFractionDigits: 0,\n        maximumFractionDigits: 0\n      }).format(value);\n    };\n\n    // --- API CALL FUNCTION (Menggunakan Fetch API) ---\n    const fetchDashboardData = async () => {\n      isLoading.value = true;\n      error.value = null;\n      try {\n        // KETERANGAN: Karena backend Anda belum memiliki endpoint dashboard,\n        // kita akan memanggil endpoint Produk (`/products`) sebagai contoh koneksi\n        // dan menggunakan data mock untuk ringkasan dashboard.\n\n        const token = localStorage.getItem('token'); // Ambil token dari local storage\n        if (!token) {\n          throw new Error(\"Token otorisasi tidak ditemukan.\");\n        }\n\n        // SIMULASI API CALL (Placeholder untuk endpoint dashboard di masa depan)\n        // Jika endpoint dashboard sudah ada, ganti URL ini:\n        // const response = await fetch(`${API_URL}/kepala-gudang/dashboard-summary`, {\n\n        // Saat ini, kita panggil endpoint yang sudah pasti ada (Products)\n        // untuk memastikan koneksi ke backend berjalan.\n        const response = await fetch(`${API_URL}/products?limit=1`, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}` // Sertakan token otorisasi\n          }\n        });\n        if (!response.ok) {\n          // Menangani status HTTP non-200\n          const errorData = await response.json();\n          throw new Error(errorData.message || `Gagal mengambil data produk: ${response.status}`);\n        }\n\n        // const data = await response.json(); \n        // console.log(\"Data Produk berhasil diambil (untuk testing koneksi):\", data);\n\n        // MENGGUNAKAN DATA MOCK SEMENTARA UNTUK WIDGET RINGKASAN\n        // Ini adalah langkah yang harus diubah jika Anda membuat endpoint summary di backend.\n        const mockData = {\n          totalStockValue: 1250000,\n          itemsInboundToday: 350,\n          itemsOutboundToday: 280\n        };\n        dashboardData.value = mockData;\n      } catch (err) {\n        console.error(\"Gagal mengambil data dashboard:\", err);\n        error.value = err.message || 'Terjadi kesalahan saat berkomunikasi dengan server.';\n\n        // Setel kembali ke 0 jika gagal\n        dashboardData.value = {\n          totalStockValue: 0,\n          itemsInboundToday: 0,\n          itemsOutboundToday: 0\n        };\n      } finally {\n        isLoading.value = false;\n      }\n    };\n\n    // --- LIFECYCLE HOOK ---\n    // Panggil fungsi pengambilan data saat komponen selesai dimuat\n    onMounted(() => {\n      fetchDashboardData();\n    });\n    const __returned__ = {\n      isLoading,\n      error,\n      dashboardData,\n      API_URL,\n      formatCurrency,\n      fetchDashboardData,\n      ref,\n      onMounted,\n      KepalaGudangLayouts\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","KepalaGudangLayouts","isLoading","error","dashboardData","totalStockValue","itemsInboundToday","itemsOutboundToday","API_URL","import","meta","env","VITE_API_BASE_URL","formatCurrency","value","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","format","fetchDashboardData","token","localStorage","getItem","Error","response","fetch","method","headers","ok","errorData","json","message","status","mockData","err","console"],"sources":["C:/Users/Personal/Documents/PKL/aplikasi/aplikasi/src/views/DashboardKepalagudang.vue"],"sourcesContent":["<template>\n  <KepalaGudangLayouts>\n    <div class=\"flex flex-wrap justify-between gap-3 p-4\">\n      <p\n        class=\"text-[#111418] tracking-light text-[32px] font-bold leading-tight min-w-72\"\n      >\n        Warehouse Manager Dashboard\n      </p>\n    </div>\n\n    <div class=\"flex flex-wrap gap-4 p-4\">\n      <div\n        class=\"flex min-w-[158px] flex-1 flex-col gap-2 rounded-lg p-6 bg-[#f0f2f5] shadow\"\n      >\n        <p class=\"text-[#111418] text-base font-medium leading-normal\">\n          Total Stock Value\n        </p>\n        <p\n          class=\"text-[#111418] tracking-light text-2xl font-bold leading-tight\"\n        >\n          {{ formatCurrency(dashboardData.totalStockValue) }}\n        </p>\n      </div>\n\n      <div\n        class=\"flex min-w-[158px] flex-1 flex-col gap-2 rounded-lg p-6 bg-[#f0f2f5] shadow\"\n      >\n        <p class=\"text-[#111418] text-base font-medium leading-normal\">\n          Items Inbound Today\n        </p>\n        <p\n          class=\"text-[#111418] tracking-light text-2xl font-bold leading-tight\"\n        >\n          {{ dashboardData.itemsInboundToday }}\n        </p>\n      </div>\n\n      <div\n        class=\"flex min-w-[158px] flex-1 flex-col gap-2 rounded-lg p-6 bg-[#f0f2f5] shadow\"\n      >\n        <p class=\"text-[#111418] text-base font-medium leading-normal\">\n          Items Outbound Today\n        </p>\n        <p\n          class=\"text-[#111418] tracking-light text-2xl font-bold leading-tight\"\n        >\n          {{ dashboardData.itemsOutboundToday }}\n        </p>\n      </div>\n    </div>\n    \n    <div v-if=\"isLoading\" class=\"p-4 text-center text-gray-500\">\n      Memuat data dashboard...\n    </div>\n    <div v-if=\"error\" class=\"p-4 text-center text-red-500\">\n      Gagal memuat data: {{ error }}\n    </div>\n\n  </KepalaGudangLayouts>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue';\nimport KepalaGudangLayouts from \"@/components/KepalaGudangLayouts.vue\";\n\n// --- STATE MANAGEMENT ---\nconst isLoading = ref(false);\nconst error = ref(null);\n\n// Inisialisasi dengan data mock/default. Data ini akan diperbarui oleh API.\nconst dashboardData = ref({\n  totalStockValue: 0,\n  itemsInboundToday: 0,\n  itemsOutboundToday: 0,\n});\n\n// Ganti dengan URL API Anda yang sebenarnya dari environment variable\nconst API_URL = import.meta.env.VITE_API_BASE_URL || 'http://localhost:8080/api/v1';\n\n// Fungsi untuk memformat mata uang\nconst formatCurrency = (value) => {\n  if (typeof value !== 'number') return `$0`;\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0,\n  }).format(value);\n};\n\n// --- API CALL FUNCTION (Menggunakan Fetch API) ---\nconst fetchDashboardData = async () => {\n  isLoading.value = true;\n  error.value = null;\n\n  try {\n    // KETERANGAN: Karena backend Anda belum memiliki endpoint dashboard,\n    // kita akan memanggil endpoint Produk (`/products`) sebagai contoh koneksi\n    // dan menggunakan data mock untuk ringkasan dashboard.\n\n    const token = localStorage.getItem('token'); // Ambil token dari local storage\n    if (!token) {\n        throw new Error(\"Token otorisasi tidak ditemukan.\");\n    }\n\n    // SIMULASI API CALL (Placeholder untuk endpoint dashboard di masa depan)\n    // Jika endpoint dashboard sudah ada, ganti URL ini:\n    // const response = await fetch(`${API_URL}/kepala-gudang/dashboard-summary`, {\n    \n    // Saat ini, kita panggil endpoint yang sudah pasti ada (Products)\n    // untuk memastikan koneksi ke backend berjalan.\n    const response = await fetch(`${API_URL}/products?limit=1`, {\n        method: 'GET',\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`, // Sertakan token otorisasi\n        },\n    });\n\n    if (!response.ok) {\n      // Menangani status HTTP non-200\n      const errorData = await response.json();\n      throw new Error(errorData.message || `Gagal mengambil data produk: ${response.status}`);\n    }\n\n    // const data = await response.json(); \n    // console.log(\"Data Produk berhasil diambil (untuk testing koneksi):\", data);\n\n    // MENGGUNAKAN DATA MOCK SEMENTARA UNTUK WIDGET RINGKASAN\n    // Ini adalah langkah yang harus diubah jika Anda membuat endpoint summary di backend.\n    const mockData = {\n      totalStockValue: 1250000,\n      itemsInboundToday: 350,\n      itemsOutboundToday: 280,\n    };\n\n    dashboardData.value = mockData;\n\n  } catch (err) {\n    console.error(\"Gagal mengambil data dashboard:\", err);\n    error.value = err.message || 'Terjadi kesalahan saat berkomunikasi dengan server.';\n    \n    // Setel kembali ke 0 jika gagal\n    dashboardData.value = {\n        totalStockValue: 0,\n        itemsInboundToday: 0,\n        itemsOutboundToday: 0,\n    };\n  } finally {\n    isLoading.value = false;\n  }\n};\n\n// --- LIFECYCLE HOOK ---\n// Panggil fungsi pengambilan data saat komponen selesai dimuat\nonMounted(() => {\n  fetchDashboardData();\n});\n</script>"],"mappings":"AA8DA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,OAAOC,mBAAmB,MAAM,sCAAsC;;AAEtE;;;;;;;;IACA,MAAMC,SAAS,GAAGH,GAAG,CAAC,KAAK,CAAC;IAC5B,MAAMI,KAAK,GAAGJ,GAAG,CAAC,IAAI,CAAC;;IAEvB;IACA,MAAMK,aAAa,GAAGL,GAAG,CAAC;MACxBM,eAAe,EAAE,CAAC;MAClBC,iBAAiB,EAAE,CAAC;MACpBC,kBAAkB,EAAE;IACtB,CAAC,CAAC;;IAEF;IACA,MAAMC,OAAO,GAAGC,MAAM,CAACC,IAAI,CAACC,GAAG,CAACC,iBAAiB,IAAI,8BAA8B;;IAEnF;IACA,MAAMC,cAAc,GAAIC,KAAK,IAAK;MAChC,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE,OAAO,IAAI;MAC1C,OAAO,IAAIC,IAAI,CAACC,YAAY,CAAC,OAAO,EAAE;QACpCC,KAAK,EAAE,UAAU;QACjBC,QAAQ,EAAE,KAAK;QACfC,qBAAqB,EAAE,CAAC;QACxBC,qBAAqB,EAAE;MACzB,CAAC,CAAC,CAACC,MAAM,CAACP,KAAK,CAAC;IAClB,CAAC;;IAED;IACA,MAAMQ,kBAAkB,GAAG,MAAAA,CAAA,KAAY;MACrCpB,SAAS,CAACY,KAAK,GAAG,IAAI;MACtBX,KAAK,CAACW,KAAK,GAAG,IAAI;MAElB,IAAI;QACF;QACA;QACA;;QAEA,MAAMS,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;QAC7C,IAAI,CAACF,KAAK,EAAE;UACR,MAAM,IAAIG,KAAK,CAAC,kCAAkC,CAAC;QACvD;;QAEA;QACA;QACA;;QAEA;QACA;QACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGpB,OAAO,mBAAmB,EAAE;UACxDqB,MAAM,EAAE,KAAK;UACbC,OAAO,EAAE;YACL,cAAc,EAAE,kBAAkB;YAClC,eAAe,EAAE,UAAUP,KAAK,EAAE,CAAE;UACxC;QACJ,CAAC,CAAC;QAEF,IAAI,CAACI,QAAQ,CAACI,EAAE,EAAE;UAChB;UACA,MAAMC,SAAS,GAAG,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAC;UACvC,MAAM,IAAIP,KAAK,CAACM,SAAS,CAACE,OAAO,IAAI,gCAAgCP,QAAQ,CAACQ,MAAM,EAAE,CAAC;QACzF;;QAEA;QACA;;QAEA;QACA;QACA,MAAMC,QAAQ,GAAG;UACf/B,eAAe,EAAE,OAAO;UACxBC,iBAAiB,EAAE,GAAG;UACtBC,kBAAkB,EAAE;QACtB,CAAC;QAEDH,aAAa,CAACU,KAAK,GAAGsB,QAAQ;MAEhC,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZC,OAAO,CAACnC,KAAK,CAAC,iCAAiC,EAAEkC,GAAG,CAAC;QACrDlC,KAAK,CAACW,KAAK,GAAGuB,GAAG,CAACH,OAAO,IAAI,qDAAqD;;QAElF;QACA9B,aAAa,CAACU,KAAK,GAAG;UAClBT,eAAe,EAAE,CAAC;UAClBC,iBAAiB,EAAE,CAAC;UACpBC,kBAAkB,EAAE;QACxB,CAAC;MACH,CAAC,SAAS;QACRL,SAAS,CAACY,KAAK,GAAG,KAAK;MACzB;IACF,CAAC;;IAED;IACA;IACAd,SAAS,CAAC,MAAM;MACdsB,kBAAkB,CAAC,CAAC;IACtB,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}