{"ast":null,"code":"import { ref } from \"vue\";\nimport axios from \"axios\";\nimport OwnerLayout from \"./OwnerLayout.vue\"; // ✅ langsung ambil dari src/views\n\nexport default {\n  __name: 'ReportStockOpnameOwners',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const filters = ref({\n      startDate: \"\",\n      endDate: \"\"\n    });\n    const reportData = ref([]);\n    const rawResponse = ref(null);\n    async function fetchReport() {\n      try {\n        const response = await axios.get(\"http://localhost:8081/api/v1/history/stock-opname\", {\n          params: {\n            start_date: filters.value.startDate,\n            end_date: filters.value.endDate\n          }\n        });\n        rawResponse.value = response.data; // simpan raw json untuk debug\n\n        // cek apakah backend kasih { data: [...] } atau langsung array\n        reportData.value = Array.isArray(response.data) ? response.data : response.data.data || [];\n      } catch (error) {\n        console.error(\"Failed to fetch report data:\", error);\n      }\n    }\n\n    // auto load saat pertama kali dibuka\n    fetchReport();\n    const __returned__ = {\n      filters,\n      reportData,\n      rawResponse,\n      fetchReport,\n      ref,\n      get axios() {\n        return axios;\n      },\n      OwnerLayout\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","axios","OwnerLayout","filters","startDate","endDate","reportData","rawResponse","fetchReport","response","get","params","start_date","value","end_date","data","Array","isArray","error","console"],"sources":["C:/Users/Personal/Documents/PKL/aplikasi/aplikasi/src/views/ReportStockOpnameOwners.vue"],"sourcesContent":["<template>\n  <OwnerLayout>\n    <div class=\"p-4\">\n      <!-- FILTER -->\n      <div class=\"flex gap-4 mb-4\">\n        <input\n          type=\"date\"\n          v-model=\"filters.startDate\"\n          class=\"border p-2 rounded\"\n        />\n        <input\n          type=\"date\"\n          v-model=\"filters.endDate\"\n          class=\"border p-2 rounded\"\n        />\n        <button\n          @click=\"fetchReport\"\n          class=\"bg-blue-600 text-white px-4 py-2 rounded\"\n        >\n          Reload Data\n        </button>\n      </div>\n\n      <!-- TABEL -->\n      <div class=\"overflow-x-auto\">\n        <table class=\"table-auto border-collapse border border-gray-300 w-full\">\n          <thead>\n            <tr class=\"bg-gray-100\">\n              <th class=\"border px-4 py-2\">Tanggal</th>\n              <th class=\"border px-4 py-2\">Produk</th>\n              <th class=\"border px-4 py-2\">Stok Awal</th>\n              <th class=\"border px-4 py-2\">Stok Akhir</th>\n              <th class=\"border px-4 py-2\">Selisih</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"item in reportData\" :key=\"item.id\">\n              <td class=\"border px-4 py-2\">{{ item.tanggal || '-' }}</td>\n              <td class=\"border px-4 py-2\">{{ item.product_name || '-' }}</td>\n              <td class=\"border px-4 py-2\">{{ item.stok_awal ?? '-' }}</td>\n              <td class=\"border px-4 py-2\">{{ item.stok_akhir ?? '-' }}</td>\n              <td class=\"border px-4 py-2\">{{ item.selisih ?? '-' }}</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n\n      <!-- DEBUG RAW JSON (sementara biar tahu struktur dari backend) -->\n      <div class=\"mt-6\">\n        <h2 class=\"font-bold mb-2\">Raw JSON dari Backend</h2>\n        <pre class=\"bg-gray-100 p-3 rounded text-sm\">\n{{ rawResponse }}\n        </pre>\n      </div>\n    </div>\n  </OwnerLayout>\n</template>\n\n<script setup>\nimport { ref } from \"vue\";\nimport axios from \"axios\";\nimport OwnerLayout from \"./OwnerLayout.vue\"; // ✅ langsung ambil dari src/views\n\nconst filters = ref({\n  startDate: \"\",\n  endDate: \"\",\n});\n\nconst reportData = ref([]);\nconst rawResponse = ref(null);\n\nasync function fetchReport() {\n  try {\n    const response = await axios.get(\"http://localhost:8081/api/v1/history/stock-opname\", {\n      params: {\n        start_date: filters.value.startDate,\n        end_date: filters.value.endDate,\n      },\n    });\n\n    rawResponse.value = response.data; // simpan raw json untuk debug\n\n    // cek apakah backend kasih { data: [...] } atau langsung array\n    reportData.value = Array.isArray(response.data)\n      ? response.data\n      : response.data.data || [];\n  } catch (error) {\n    console.error(\"Failed to fetch report data:\", error);\n  }\n}\n\n// auto load saat pertama kali dibuka\nfetchReport();\n</script>\n"],"mappings":"AA2DA,SAASA,GAAG,QAAQ,KAAK;AACzB,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,WAAW,MAAM,mBAAmB,CAAC,CAAC;;;;;;;;IAE7C,MAAMC,OAAO,GAAGH,GAAG,CAAC;MAClBI,SAAS,EAAE,EAAE;MACbC,OAAO,EAAE;IACX,CAAC,CAAC;IAEF,MAAMC,UAAU,GAAGN,GAAG,CAAC,EAAE,CAAC;IAC1B,MAAMO,WAAW,GAAGP,GAAG,CAAC,IAAI,CAAC;IAE7B,eAAeQ,WAAWA,CAAA,EAAG;MAC3B,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMR,KAAK,CAACS,GAAG,CAAC,mDAAmD,EAAE;UACpFC,MAAM,EAAE;YACNC,UAAU,EAAET,OAAO,CAACU,KAAK,CAACT,SAAS;YACnCU,QAAQ,EAAEX,OAAO,CAACU,KAAK,CAACR;UAC1B;QACF,CAAC,CAAC;QAEFE,WAAW,CAACM,KAAK,GAAGJ,QAAQ,CAACM,IAAI,CAAC,CAAC;;QAEnC;QACAT,UAAU,CAACO,KAAK,GAAGG,KAAK,CAACC,OAAO,CAACR,QAAQ,CAACM,IAAI,IAC1CN,QAAQ,CAACM,IAAG,GACZN,QAAQ,CAACM,IAAI,CAACA,IAAI,IAAI,EAAE;MAC9B,CAAC,CAAC,OAAOG,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;MACtD;IACF;;IAEA;IACAV,WAAW,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}