{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport KepalaGudangSidebar from \"@/components/KepalaGudangSidebar.vue\";\nimport axios from \"axios\";\nexport default {\n  name: \"ProductCatalog\",\n  components: {\n    KepalaGudangSidebar\n  },\n  data() {\n    return {\n      products: [],\n      // Pastikan diinisialisasi sebagai array\n      filteredProducts: [],\n      // Pastikan diinisialisasi sebagai array\n      searchQuery: \"\",\n      selectedCategory: \"\",\n      selectedStock: \"\",\n      showCategoryDropdown: false,\n      showStockDropdown: false,\n      showAddProductModal: false,\n      newProduct: {\n        name: \"\",\n        code: \"\",\n        stock: 0,\n        purchase_price: 0,\n        selling_price: 0,\n        category: \"\"\n      },\n      categories: [] // Akan diisi dari backend\n    };\n  },\n  methods: {\n    async fetchCategories() {\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (!token) {\n          this.$router.push(\"/login\");\n          throw new Error(\"No token found. Redirecting to login.\");\n        }\n        const response = await axios.get(\"http://localhost:8081/api/v1/categories\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        this.categories = response.data.map(cat => cat.name);\n        console.log(\"Categories:\", this.categories); // Debug\n      } catch (error) {\n        console.error(\"Error fetching categories:\", error.response || error.message);\n        this.categories = [\"Fruits\", \"Bakery\", \"Dairy\", \"Poultry\", \"Meat\", \"Seafood\", \"Grains\", \"Legumes\", \"Pantry\", \"Spices\"];\n      }\n    },\n    async fetchProducts() {\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (!token) {\n          this.$router.push(\"/login\");\n          throw new Error(\"No token found. Redirecting to login.\");\n        }\n        const response = await axios.get(\"http://localhost:8081/api/v1/products\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        console.log(\"Products response:\", response.data); // Debug\n        this.products = Array.isArray(response.data) ? response.data : [];\n        this.filteredProducts = [...this.products];\n      } catch (error) {\n        console.error(\"Error fetching products:\", error.response || error.message);\n        if (error.response && error.response.status === 401) {\n          this.$router.push(\"/login\");\n        }\n        alert(\"Failed to fetch products. Please check your connection or login again.\");\n        this.products = [];\n        this.filteredProducts = [];\n      }\n    },\n    async searchProducts() {\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (!this.searchQuery) {\n          this.filteredProducts = [...this.products];\n          return;\n        }\n        const response = await axios.get(\"http://localhost:8081/api/v1/products\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          },\n          params: {\n            search: this.searchQuery\n          }\n        });\n        console.log(\"Search response:\", response.data); // Debug\n        this.filteredProducts = Array.isArray(response.data) ? response.data : [];\n      } catch (error) {\n        console.error(\"Error searching products:\", error.response || error.message);\n        // Fallback ke filter lokal\n        this.filteredProducts = this.products.filter(product => product.name.toLowerCase().includes(this.searchQuery.toLowerCase()));\n      }\n    },\n    selectCategory(category) {\n      console.log(\"Selected category:\", category); // Debug\n      this.selectedCategory = category;\n      this.showCategoryDropdown = false;\n      this.applyFilters();\n    },\n    selectStock(stock) {\n      console.log(\"Selected stock:\", stock); // Debug\n      this.selectedStock = stock;\n      this.showStockDropdown = false;\n      this.applyFilters();\n    },\n    applyFilters() {\n      if (!Array.isArray(this.products)) {\n        this.filteredProducts = [];\n        return;\n      }\n      let filtered = [...this.products];\n      if (this.selectedCategory) {\n        filtered = filtered.filter(product => product.category === this.selectedCategory);\n      }\n      if (this.selectedStock === \"low\") {\n        filtered = filtered.filter(product => product.stock < 100);\n      } else if (this.selectedStock === \"high\") {\n        filtered = filtered.filter(product => product.stock >= 100);\n      }\n      this.filteredProducts = filtered;\n    },\n    async addProduct() {\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (!token) {\n          this.$router.push(\"/login\");\n          throw new Error(\"No token found. Redirecting to login.\");\n        }\n        await axios.post(\"http://localhost:8081/api/v1/owner/products\", this.newProduct, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        this.showAddProductModal = false;\n        this.newProduct = {\n          name: \"\",\n          code: \"\",\n          stock: 0,\n          purchase_price: 0,\n          selling_price: 0,\n          category: \"\"\n        };\n        await this.fetchProducts(); // Refresh daftar produk\n        alert(\"Product added successfully!\");\n      } catch (error) {\n        console.error(\"Error adding product:\", error.response || error.message);\n        alert(\"Failed to add product. Please try again.\");\n      }\n    },\n    sanitize(str) {\n      if (typeof str !== \"string\") return \"\";\n      return str.replace(/[<>&]/g, match => ({\n        \"<\": \"&lt;\",\n        \">\": \"&gt;\",\n        \"&\": \"&amp;\"\n      })[match]);\n    },\n    formatPrice(value) {\n      if (value == null || isNaN(value)) return \"0.00\";\n      return Number(value).toFixed(2);\n    }\n  },\n  mounted() {\n    this.fetchCategories();\n    this.fetchProducts();\n  }\n};","map":{"version":3,"names":["KepalaGudangSidebar","axios","name","components","data","products","filteredProducts","searchQuery","selectedCategory","selectedStock","showCategoryDropdown","showStockDropdown","showAddProductModal","newProduct","code","stock","purchase_price","selling_price","category","categories","methods","fetchCategories","token","localStorage","getItem","$router","push","Error","response","get","headers","Authorization","map","cat","console","log","error","message","fetchProducts","Array","isArray","status","alert","searchProducts","params","search","filter","product","toLowerCase","includes","selectCategory","applyFilters","selectStock","filtered","addProduct","post","sanitize","str","replace","match","formatPrice","value","isNaN","Number","toFixed","mounted"],"sources":["C:\\Users\\Personal\\Documents\\PKL\\aplikasi\\aplikasi\\src\\views\\ProductCatalogKepalaGudang.vue"],"sourcesContent":["<template>\n  <div\n    class=\"relative flex size-full min-h-screen flex-col bg-white group/design-root overflow-x-hidden\"\n    style=\"font-family: Manrope, 'Noto Sans', sans-serif\"\n  >\n    <div class=\"layout-container flex h-full grow flex-col sm:flex-row\">\n      <KepalaGudangSidebar />\n\n      <div class=\"flex-1 flex flex-col items-center justify-start p-5 sm:p-10\">\n        <div\n          class=\"layout-content-container flex flex-col max-w-[960px] flex-1 w-full\"\n        >\n          <div class=\"flex flex-wrap justify-between gap-3 p-4\">\n            <p\n              class=\"text-[#111418] tracking-light text-[32px] font-bold leading-tight min-w-72\"\n            >\n              Product Catalog\n            </p>\n            <button\n              @click=\"showAddProductModal = true\"\n              class=\"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-8 px-4 bg-[#f0f2f5] text-[#111418] text-sm font-medium leading-normal\"\n            >\n              <span class=\"truncate\">Add Product</span>\n            </button>\n          </div>\n\n          <div class=\"px-4 py-3\">\n            <label class=\"flex flex-col min-w-40 h-12 w-full\">\n              <div class=\"flex w-full flex-1 items-stretch rounded-lg h-full\">\n                <div\n                  class=\"text-[#60758a] flex border-none bg-[#f0f2f5] items-center justify-center pl-4 rounded-l-lg border-r-0\"\n                  data-icon=\"MagnifyingGlass\"\n                  data-size=\"24px\"\n                  data-weight=\"regular\"\n                >\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    width=\"24px\"\n                    height=\"24px\"\n                    fill=\"currentColor\"\n                    viewBox=\"0 0 256 256\"\n                  >\n                    <path\n                      d=\"M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z\"\n                    ></path>\n                  </svg>\n                </div>\n                <input\n                  v-model=\"searchQuery\"\n                  @input=\"searchProducts\"\n                  placeholder=\"Search for products\"\n                  class=\"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border-none bg-[#f0f2f5] focus:border-none h-full placeholder:text-[#60758a] px-4 rounded-l-none border-l-0 pl-2 text-base font-normal leading-normal\"\n                />\n              </div>\n            </label>\n          </div>\n\n          <div class=\"flex gap-3 p-3 flex-wrap pr-4\">\n            <div class=\"relative\">\n              <button\n                @click=\"showCategoryDropdown = !showCategoryDropdown\"\n                class=\"flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-[#f0f2f5] pl-4 pr-2\"\n              >\n                <p class=\"text-[#111418] text-sm font-medium leading-normal\">\n                  {{ selectedCategory || \"Category\" }}\n                </p>\n                <div\n                  class=\"text-[#111418]\"\n                  data-icon=\"CaretDown\"\n                  data-size=\"20px\"\n                  data-weight=\"regular\"\n                >\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    width=\"20px\"\n                    height=\"20px\"\n                    fill=\"currentColor\"\n                    viewBox=\"0 0 256 256\"\n                  >\n                    <path\n                      d=\"M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z\"\n                    ></path>\n                  </svg>\n                </div>\n              </button>\n              <div\n                v-if=\"showCategoryDropdown\"\n                class=\"absolute mt-2 w-48 bg-white border rounded-lg shadow-lg z-10\"\n              >\n                <button\n                  v-for=\"category in categories\"\n                  :key=\"category\"\n                  @click=\"selectCategory(category)\"\n                  class=\"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100\"\n                >\n                  {{ category }}\n                </button>\n                <button\n                  @click=\"selectCategory('')\"\n                  class=\"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100\"\n                >\n                  All Categories\n                </button>\n              </div>\n            </div>\n            <div class=\"relative\">\n              <button\n                @click=\"showStockDropdown = !showStockDropdown\"\n                class=\"flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-[#f0f2f5] pl-4 pr-2\"\n              >\n                <p class=\"text-[#111418] text-sm font-medium leading-normal\">\n                  {{ selectedStock || \"Stock\" }}\n                </p>\n                <div\n                  class=\"text-[#111418]\"\n                  data-icon=\"CaretDown\"\n                  data-size=\"20px\"\n                  data-weight=\"regular\"\n                >\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    width=\"20px\"\n                    height=\"20px\"\n                    fill=\"currentColor\"\n                    viewBox=\"0 0 256 256\"\n                  >\n                    <path\n                      d=\"M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z\"\n                    ></path>\n                  </svg>\n                </div>\n              </button>\n              <div\n                v-if=\"showStockDropdown\"\n                class=\"absolute mt-2 w-48 bg-white border rounded-lg shadow-lg z-10\"\n              >\n                <button\n                  @click=\"selectStock('low')\"\n                  class=\"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100\"\n                >\n                  Low Stock (< 100)\n                </button>\n                <button\n                  @click=\"selectStock('high')\"\n                  class=\"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100\"\n                >\n                  High Stock (>= 100)\n                </button>\n                <button\n                  @click=\"selectStock('')\"\n                  class=\"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100\"\n                >\n                  All Stock\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <!-- Modal untuk Menambahkan Produk -->\n          <div\n            v-if=\"showAddProductModal\"\n            class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center\"\n          >\n            <div class=\"bg-white p-6 rounded-lg w-full max-w-md\">\n              <h2 class=\"text-xl font-bold mb-4\">Add New Product</h2>\n              <form @submit.prevent=\"addProduct\">\n                <div class=\"mb-4\">\n                  <label class=\"block text-sm font-medium\">Name</label>\n                  <input\n                    v-model=\"newProduct.name\"\n                    class=\"w-full p-2 border rounded\"\n                    required\n                  />\n                </div>\n                <div class=\"mb-4\">\n                  <label class=\"block text-sm font-medium\">Code</label>\n                  <input\n                    v-model=\"newProduct.code\"\n                    class=\"w-full p-2 border rounded\"\n                    required\n                  />\n                </div>\n                <div class=\"mb-4\">\n                  <label class=\"block text-sm font-medium\">Stock</label>\n                  <input\n                    v-model.number=\"newProduct.stock\"\n                    type=\"number\"\n                    class=\"w-full p-2 border rounded\"\n                    required\n                  />\n                </div>\n                <div class=\"mb-4\">\n                  <label class=\"block text-sm font-medium\"\n                    >Purchase Price</label\n                  >\n                  <input\n                    v-model.number=\"newProduct.purchase_price\"\n                    type=\"number\"\n                    step=\"0.01\"\n                    class=\"w-full p-2 border rounded\"\n                    required\n                  />\n                </div>\n                <div class=\"mb-4\">\n                  <label class=\"block text-sm font-medium\">Selling Price</label>\n                  <input\n                    v-model.number=\"newProduct.selling_price\"\n                    type=\"number\"\n                    step=\"0.01\"\n                    class=\"w-full p-2 border rounded\"\n                    required\n                  />\n                </div>\n                <div class=\"mb-4\">\n                  <label class=\"block text-sm font-medium\">Category</label>\n                  <select\n                    v-model=\"newProduct.category\"\n                    class=\"w-full p-2 border rounded\"\n                    required\n                  >\n                    <option v-for=\"cat in categories\" :key=\"cat\" :value=\"cat\">\n                      {{ cat }}\n                    </option>\n                  </select>\n                </div>\n                <div class=\"flex justify-end gap-2\">\n                  <button\n                    type=\"button\"\n                    @click=\"showAddProductModal = false\"\n                    class=\"px-4 py-2 bg-gray-300 rounded\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    type=\"submit\"\n                    class=\"px-4 py-2 bg-blue-600 text-white rounded\"\n                  >\n                    Add Product\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n\n          <div class=\"px-4 py-3 @container\">\n            <div\n              class=\"flex overflow-hidden rounded-lg border border-[#dbe0e6] bg-white\"\n            >\n              <table class=\"flex-1\">\n                <thead>\n                  <tr class=\"bg-white\">\n                    <th\n                      class=\"table-d68b89d9-b17c-42ba-9122-a8a78a86ab73-column-120 px-4 py-3 text-left text-[#111418] w-[400px] text-sm font-medium leading-normal\"\n                    >\n                      Name\n                    </th>\n                    <th\n                      class=\"table-d68b89d9-b17c-42ba-9122-a8a78a86ab73-column-240 px-4 py-3 text-left text-[#111418] w-[400px] text-sm font-medium leading-normal\"\n                    >\n                      Code\n                    </th>\n                    <th\n                      class=\"table-d68b89d9-b17c-42ba-9122-a8a78a86ab73-column-360 px-4 py-3 text-left text-[#111418] w-[400px] text-sm font-medium leading-normal\"\n                    >\n                      Stock\n                    </th>\n                    <th\n                      class=\"table-d68b89d9-b17c-42ba-9122-a8a78a86ab73-column-480 px-4 py-3 text-left text-[#111418] w-[400px] text-sm font-medium leading-normal\"\n                    >\n                      Purchase Price\n                    </th>\n                    <th\n                      class=\"table-d68b89d9-b17c-42ba-9122-a8a78a86ab73-column-600 px-4 py-3 text-left text-[#111418] w-[400px] text-sm font-medium leading-normal\"\n                    >\n                      Selling Price\n                    </th>\n                    <th\n                      class=\"table-d68b89d9-b17c-42ba-9122-a8a78a86ab73-column-720 px-4 py-3 text-left text-[#111418] w-60 text-sm font-medium leading-normal\"\n                    >\n                      Category\n                    </th>\n                  </tr>\n                </thead>\n                <tbody\n                  v-if=\"\n                    Array.isArray(filteredProducts) && filteredProducts.length\n                  \"\n                >\n                  <tr\n                    v-for=\"product in filteredProducts\"\n                    :key=\"product.id\"\n                    class=\"border-t border-t-[#dbe0e6]\"\n                  >\n                    <td\n                      class=\"table-d68b89d9-b17c-42ba-9122-a8a78a86ab73-column-120 h-[72px] px-4 py-2 w-[400px] text-[#111418] text-sm font-normal leading-normal\"\n                    >\n                      {{ sanitize(product.name) }}\n                    </td>\n                    <td\n                      class=\"table-d68b89d9-b17c-42ba-9122-a8a78a86ab73-column-240 h-[72px] px-4 py-2 w-[400px] text-[#60758a] text-sm font-normal leading-normal\"\n                    >\n                      {{ sanitize(product.code) }}\n                    </td>\n                    <td\n                      class=\"table-d68b89d9-b17c-42ba-9122-a8a78a86ab73-column-360 h-[72px] px-4 py-2 w-[400px] text-[#60758a] text-sm font-normal leading-normal\"\n                    >\n                      {{ product.stock }}\n                    </td>\n                    <td\n                      class=\"table-d68b89d9-b17c-42ba-9122-a8a78a86ab73-column-480 h-[72px] px-4 py-2 w-[400px] text-[#60758a] text-sm font-normal leading-normal\"\n                    >\n                      ${{ formatPrice(product.purchase_price) }}\n                    </td>\n                    <td\n                      class=\"table-d68b89d9-b17c-42ba-9122-a8a78a86ab73-column-600 h-[72px] px-4 py-2 w-[400px] text-[#60758a] text-sm font-normal leading-normal\"\n                    >\n                      ${{ formatPrice(product.selling_price) }}\n                    </td>\n                    <td\n                      class=\"table-d68b89d9-b17c-42ba-9122-a8a78a86ab73-column-720 h-[72px] px-4 py-2 w-60 text-sm font-normal leading-normal\"\n                    >\n                      <button\n                        class=\"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-8 px-4 bg-[#f0f2f5] text-[#111418] text-sm font-medium leading-normal w-full\"\n                      >\n                        <span class=\"truncate\">{{\n                          sanitize(product.category)\n                        }}</span>\n                      </button>\n                    </td>\n                  </tr>\n                </tbody>\n                <tbody v-else>\n                  <tr>\n                    <td colspan=\"6\" class=\"text-center py-4\">\n                      No products available\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport KepalaGudangSidebar from \"@/components/KepalaGudangSidebar.vue\";\nimport axios from \"axios\";\n\nexport default {\n  name: \"ProductCatalog\",\n  components: {\n    KepalaGudangSidebar,\n  },\n  data() {\n    return {\n      products: [], // Pastikan diinisialisasi sebagai array\n      filteredProducts: [], // Pastikan diinisialisasi sebagai array\n      searchQuery: \"\",\n      selectedCategory: \"\",\n      selectedStock: \"\",\n      showCategoryDropdown: false,\n      showStockDropdown: false,\n      showAddProductModal: false,\n      newProduct: {\n        name: \"\",\n        code: \"\",\n        stock: 0,\n        purchase_price: 0,\n        selling_price: 0,\n        category: \"\",\n      },\n      categories: [], // Akan diisi dari backend\n    };\n  },\n  methods: {\n    async fetchCategories() {\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (!token) {\n          this.$router.push(\"/login\");\n          throw new Error(\"No token found. Redirecting to login.\");\n        }\n        const response = await axios.get(\n          \"http://localhost:8081/api/v1/categories\",\n          {\n            headers: { Authorization: `Bearer ${token}` },\n          }\n        );\n        this.categories = response.data.map((cat) => cat.name);\n        console.log(\"Categories:\", this.categories); // Debug\n      } catch (error) {\n        console.error(\n          \"Error fetching categories:\",\n          error.response || error.message\n        );\n        this.categories = [\n          \"Fruits\",\n          \"Bakery\",\n          \"Dairy\",\n          \"Poultry\",\n          \"Meat\",\n          \"Seafood\",\n          \"Grains\",\n          \"Legumes\",\n          \"Pantry\",\n          \"Spices\",\n        ];\n      }\n    },\n    async fetchProducts() {\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (!token) {\n          this.$router.push(\"/login\");\n          throw new Error(\"No token found. Redirecting to login.\");\n        }\n        const response = await axios.get(\n          \"http://localhost:8081/api/v1/products\",\n          {\n            headers: {\n              Authorization: `Bearer ${token}`,\n            },\n          }\n        );\n        console.log(\"Products response:\", response.data); // Debug\n        this.products = Array.isArray(response.data) ? response.data : [];\n        this.filteredProducts = [...this.products];\n      } catch (error) {\n        console.error(\n          \"Error fetching products:\",\n          error.response || error.message\n        );\n        if (error.response && error.response.status === 401) {\n          this.$router.push(\"/login\");\n        }\n        alert(\n          \"Failed to fetch products. Please check your connection or login again.\"\n        );\n        this.products = [];\n        this.filteredProducts = [];\n      }\n    },\n    async searchProducts() {\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (!this.searchQuery) {\n          this.filteredProducts = [...this.products];\n          return;\n        }\n        const response = await axios.get(\n          \"http://localhost:8081/api/v1/products\",\n          {\n            headers: {\n              Authorization: `Bearer ${token}`,\n            },\n            params: {\n              search: this.searchQuery,\n            },\n          }\n        );\n        console.log(\"Search response:\", response.data); // Debug\n        this.filteredProducts = Array.isArray(response.data)\n          ? response.data\n          : [];\n      } catch (error) {\n        console.error(\n          \"Error searching products:\",\n          error.response || error.message\n        );\n        // Fallback ke filter lokal\n        this.filteredProducts = this.products.filter((product) =>\n          product.name.toLowerCase().includes(this.searchQuery.toLowerCase())\n        );\n      }\n    },\n    selectCategory(category) {\n      console.log(\"Selected category:\", category); // Debug\n      this.selectedCategory = category;\n      this.showCategoryDropdown = false;\n      this.applyFilters();\n    },\n    selectStock(stock) {\n      console.log(\"Selected stock:\", stock); // Debug\n      this.selectedStock = stock;\n      this.showStockDropdown = false;\n      this.applyFilters();\n    },\n    applyFilters() {\n      if (!Array.isArray(this.products)) {\n        this.filteredProducts = [];\n        return;\n      }\n      let filtered = [...this.products];\n      if (this.selectedCategory) {\n        filtered = filtered.filter(\n          (product) => product.category === this.selectedCategory\n        );\n      }\n      if (this.selectedStock === \"low\") {\n        filtered = filtered.filter((product) => product.stock < 100);\n      } else if (this.selectedStock === \"high\") {\n        filtered = filtered.filter((product) => product.stock >= 100);\n      }\n      this.filteredProducts = filtered;\n    },\n    async addProduct() {\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (!token) {\n          this.$router.push(\"/login\");\n          throw new Error(\"No token found. Redirecting to login.\");\n        }\n        await axios.post(\n          \"http://localhost:8081/api/v1/owner/products\",\n          this.newProduct,\n          {\n            headers: {\n              Authorization: `Bearer ${token}`,\n            },\n          }\n        );\n        this.showAddProductModal = false;\n        this.newProduct = {\n          name: \"\",\n          code: \"\",\n          stock: 0,\n          purchase_price: 0,\n          selling_price: 0,\n          category: \"\",\n        };\n        await this.fetchProducts(); // Refresh daftar produk\n        alert(\"Product added successfully!\");\n      } catch (error) {\n        console.error(\"Error adding product:\", error.response || error.message);\n        alert(\"Failed to add product. Please try again.\");\n      }\n    },\n    sanitize(str) {\n      if (typeof str !== \"string\") return \"\";\n      return str.replace(\n        /[<>&]/g,\n        (match) =>\n          ({\n            \"<\": \"&lt;\",\n            \">\": \"&gt;\",\n            \"&\": \"&amp;\",\n          }[match])\n      );\n    },\n    formatPrice(value) {\n      if (value == null || isNaN(value)) return \"0.00\";\n      return Number(value).toFixed(2);\n    },\n  },\n  mounted() {\n    this.fetchCategories();\n    this.fetchProducts();\n  },\n};\n</script>\n\n<style>\n@container (max-width: 120px) {\n  .table-d68b89d9-b17c-42ba-9122-a8a78a86ab73-column-120 {\n    display: none;\n  }\n}\n@container (max-width: 240px) {\n  .table-d68b89d9-b17c-42ba-9122-a8a78a86ab73-column-240 {\n    display: none;\n  }\n}\n@container (max-width: 360px) {\n  .table-d68b89d9-b17c-42ba-9122-a8a78a86ab73-column-360 {\n    display: none;\n  }\n}\n@container (max-width: 480px) {\n  .table-d68b89d9-b17c-42ba-9122-a8a78a86ab73-column-480 {\n    display: none;\n  }\n}\n@container (max-width: 600px) {\n  .table-d68b89d9-b17c-42ba-9122-a8a78a86ab73-column-600 {\n    display: none;\n  }\n}\n@container (max-width: 720px) {\n  .table-d68b89d9-b17c-42ba-9122-a8a78a86ab73-column-720 {\n    display: none;\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}