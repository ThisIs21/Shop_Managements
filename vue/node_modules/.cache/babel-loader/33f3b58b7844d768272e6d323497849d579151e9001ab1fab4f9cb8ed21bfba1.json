{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport axios from \"axios\";\nimport OwnerLayouts from \"../components/OwnerLayouts.vue\";\nexport default {\n  __name: 'AddProductOwner',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const product = ref({\n      Name: \"\",\n      Code: \"\",\n      Description: \"\",\n      CostPrice: null,\n      SellPrice: null,\n      Stock: null,\n      CategoryID: null,\n      UnitID: null\n    });\n    const categories = ref([]);\n    const units = ref([]);\n    const loading = ref(false);\n    const router = useRouter();\n    const fetchCategoriesAndUnits = async () => {\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (!token) {\n          console.error(\"No JWT token found in localStorage.\");\n          return;\n        }\n        const [catResponse, unitResponse] = await Promise.all([axios.get(\"http://192.168.100.111:8081/api/v1/categories\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }), axios.get(\"http://192.168.100.111:8081/api/v1/units\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        })]);\n        if (catResponse.data && catResponse.data.data) {\n          categories.value = catResponse.data.data;\n        }\n        if (unitResponse.data && unitResponse.data.data) {\n          units.value = unitResponse.data.data;\n        }\n      } catch (error) {\n        console.error(\"Error fetching categories or units:\", error.response ? error.response.data : error.message);\n      }\n    };\n    const createProduct = async () => {\n      // Validasi sisi frontend untuk mencegah permintaan tidak lengkap\n      if (!product.value.Name || !product.value.Code || product.value.CostPrice === null || product.value.SellPrice === null || product.value.Stock === null || !product.value.CategoryID || !product.value.UnitID) {\n        alert(\"Please fill in all required fields.\");\n        return;\n      }\n      loading.value = true;\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (!token) {\n          alert(\"Authentication token is missing. Please log in again.\");\n          loading.value = false;\n          return;\n        }\n        const response = await axios.post(\"http://192.168.100.111:8081/api/v1/products\", product.value, {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`\n          }\n        });\n        console.log(\"Product created successfully:\", response.data);\n        alert(\"Product added successfully!\");\n        router.push(\"/management-product\");\n      } catch (error) {\n        console.error(\"Error creating product:\", error.response ? error.response.data : error.message);\n        alert(\"Failed to add product. Please check the console for details.\");\n      } finally {\n        loading.value = false;\n      }\n    };\n    onMounted(() => {\n      fetchCategoriesAndUnits();\n    });\n    const __returned__ = {\n      product,\n      categories,\n      units,\n      loading,\n      router,\n      fetchCategoriesAndUnits,\n      createProduct,\n      ref,\n      onMounted,\n      get useRouter() {\n        return useRouter;\n      },\n      get axios() {\n        return axios;\n      },\n      OwnerLayouts\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","useRouter","axios","OwnerLayouts","product","Name","Code","Description","CostPrice","SellPrice","Stock","CategoryID","UnitID","categories","units","loading","router","fetchCategoriesAndUnits","token","localStorage","getItem","console","error","catResponse","unitResponse","Promise","all","get","headers","Authorization","data","value","response","message","createProduct","alert","post","log","push"],"sources":["C:/Users/SPC STYLE 5/aplikasi/src/views/AddProductOwner.vue"],"sourcesContent":["<template>\n  <OwnerLayouts>\n    <div class=\"flex flex-1 flex-col py-5 p-8\">\n      <div class=\"layout-content-container flex flex-col flex-1\">\n        <form @submit.prevent=\"createProduct\" class=\"flex flex-col flex-1\">\n          <div class=\"flex flex-wrap justify-between gap-3 p-4\">\n            <div class=\"flex flex-col gap-3\">\n              <p\n                class=\"text-[#111418] tracking-light text-[32px] font-bold leading-tight\"\n              >\n                Add Product\n              </p>\n              <p class=\"text-[#60758a] text-sm font-normal leading-normal\">\n                Fill in the details below to add a new product to your\n                inventory.\n              </p>\n            </div>\n            <router-link to=\"/management-product\">\n              <button\n                type=\"button\"\n                class=\"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-8 px-4 bg-[#f0f2f5] text-[#111418] text-sm font-medium leading-normal\"\n              >\n                <span class=\"truncate\">Kembali</span>\n              </button>\n            </router-link>\n          </div>\n\n          <div class=\"flex flex-col gap-4 p-4\">\n            <div class=\"flex max-w-[480px] flex-wrap items-end gap-4\">\n              <label class=\"flex flex-col min-w-40 flex-1\">\n                <p\n                  class=\"text-[#111418] text-base font-medium leading-normal pb-2\"\n                >\n                  Product Name\n                </p>\n                <input\n                  v-model=\"product.Name\"\n                  type=\"text\"\n                  placeholder=\"Enter product name\"\n                  class=\"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border border-[#dbe0e6] bg-white focus:border-[#dbe0e6] h-14 placeholder:text-[#60758a] p-[15px] text-base font-normal leading-normal\"\n                />\n              </label>\n            </div>\n            <div class=\"flex max-w-[480px] flex-wrap items-end gap-4\">\n              <label class=\"flex flex-col min-w-40 flex-1\">\n                <p\n                  class=\"text-[#111418] text-base font-medium leading-normal pb-2\"\n                >\n                  Product Code\n                </p>\n                <input\n                  v-model=\"product.Code\"\n                  type=\"text\"\n                  placeholder=\"Enter product code\"\n                  class=\"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border border-[#dbe0e6] bg-white focus:border-[#dbe0e6] h-14 placeholder:text-[#60758a] p-[15px] text-base font-normal leading-normal\"\n                />\n              </label>\n            </div>\n            <div class=\"flex max-w-[480px] flex-wrap items-end gap-4\">\n              <label class=\"flex flex-col min-w-40 flex-1\">\n                <p\n                  class=\"text-[#111418] text-base font-medium leading-normal pb-2\"\n                >\n                  Description\n                </p>\n                <textarea\n                  v-model=\"product.Description\"\n                  placeholder=\"Enter product description\"\n                  class=\"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border border-[#dbe0e6] bg-white focus:border-[#dbe0e6] min-h-36 placeholder:text-[#60758a] p-[15px] text-base font-normal leading-normal\"\n                ></textarea>\n              </label>\n            </div>\n            <div class=\"flex max-w-[480px] flex-wrap items-end gap-4\">\n              <label class=\"flex flex-col min-w-40 flex-1\">\n                <p\n                  class=\"text-[#111418] text-base font-medium leading-normal pb-2\"\n                >\n                  Purchase Price\n                </p>\n                <input\n                  v-model.number=\"product.CostPrice\"\n                  type=\"number\"\n                  placeholder=\"Enter purchase price\"\n                  class=\"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border border-[#dbe0e6] bg-white focus:border-[#dbe0e6] h-14 placeholder:text-[#60758a] p-[15px] text-base font-normal leading-normal\"\n                />\n              </label>\n            </div>\n            <div class=\"flex max-w-[480px] flex-wrap items-end gap-4\">\n              <label class=\"flex flex-col min-w-40 flex-1\">\n                <p\n                  class=\"text-[#111418] text-base font-medium leading-normal pb-2\"\n                >\n                  Selling Price\n                </p>\n                <input\n                  v-model.number=\"product.SellPrice\"\n                  type=\"number\"\n                  placeholder=\"Enter selling price\"\n                  class=\"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border border-[#dbe0e6] bg-white focus:border-[#dbe0e6] h-14 placeholder:text-[#60758a] p-[15px] text-base font-normal leading-normal\"\n                />\n              </label>\n            </div>\n            <div class=\"flex max-w-[480px] flex-wrap items-end gap-4\">\n              <label class=\"flex flex-col min-w-40 flex-1\">\n                <p\n                  class=\"text-[#111418] text-base font-medium leading-normal pb-2\"\n                >\n                  Stock\n                </p>\n                <input\n                  v-model.number=\"product.Stock\"\n                  type=\"number\"\n                  placeholder=\"Enter stock quantity\"\n                  class=\"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border border-[#dbe0e6] bg-white focus:border-[#dbe0e6] h-14 placeholder:text-[#60758a] p-[15px] text-base font-normal leading-normal\"\n                />\n              </label>\n            </div>\n            <div class=\"flex max-w-[480px] flex-wrap items-end gap-4\">\n              <label class=\"flex flex-col min-w-40 flex-1\">\n                <p\n                  class=\"text-[#111418] text-base font-medium leading-normal pb-2\"\n                >\n                  Category\n                </p>\n                <select\n                  v-model.number=\"product.CategoryID\"\n                  class=\"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border border-[#dbe0e6] bg-white focus:border-[#dbe0e6] h-14 bg-[image:--select-button-svg] placeholder:text-[#60758a] p-[15px] text-base font-normal leading-normal\"\n                >\n                  <option disabled value=\"\">Select category</option>\n                  <option\n                    v-for=\"cat in categories\"\n                    :key=\"cat.ID\"\n                    :value=\"cat.ID\"\n                  >\n                    {{ cat.Name }}\n                  </option>\n                </select>\n              </label>\n            </div>\n            <div class=\"flex max-w-[480px] flex-wrap items-end gap-4\">\n              <label class=\"flex flex-col min-w-40 flex-1\">\n                <p\n                  class=\"text-[#111418] text-base font-medium leading-normal pb-2\"\n                >\n                  Unit\n                </p>\n                <select\n                  v-model.number=\"product.UnitID\"\n                  class=\"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border border-[#dbe0e6] bg-white focus:border-[#dbe0e6] h-14 bg-[image:--select-button-svg] placeholder:text-[#60758a] p-[15px] text-base font-normal leading-normal\"\n                >\n                  <option disabled value=\"\">Select unit</option>\n                  <option v-for=\"un in units\" :key=\"un.ID\" :value=\"un.ID\">\n                    {{ un.Name }}\n                  </option>\n                </select>\n              </label>\n            </div>\n          </div>\n\n          <div class=\"flex justify-stretch\">\n            <div class=\"flex flex-1 gap-3 flex-wrap p-4 justify-end\">\n              <router-link to=\"/management-product\">\n                <button\n                  type=\"button\"\n                  class=\"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-[#f0f2f5] text-[#111418] text-sm font-bold leading-normal tracking-[0.015em]\"\n                >\n                  <span class=\"truncate\">Cancel</span>\n                </button>\n              </router-link>\n              <button\n                type=\"submit\"\n                :disabled=\"loading\"\n                class=\"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-[#0d80f2] text-white text-sm font-bold leading-normal tracking-[0.015em]\"\n                :class=\"{ 'opacity-50 cursor-not-allowed': loading }\"\n              >\n                <span v-if=\"loading\">Saving...</span>\n                <span v-else>Save</span>\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  </OwnerLayouts>\n</template>\n\n<script setup>\nimport { ref, onMounted } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport axios from \"axios\";\nimport OwnerLayouts from \"../components/OwnerLayouts.vue\";\n\nconst product = ref({\n  Name: \"\",\n  Code: \"\",\n  Description: \"\",\n  CostPrice: null,\n  SellPrice: null,\n  Stock: null,\n  CategoryID: null,\n  UnitID: null,\n});\n\nconst categories = ref([]);\nconst units = ref([]);\nconst loading = ref(false);\nconst router = useRouter();\n\nconst fetchCategoriesAndUnits = async () => {\n  try {\n    const token = localStorage.getItem(\"token\");\n    if (!token) {\n      console.error(\"No JWT token found in localStorage.\");\n      return;\n    }\n\n    const [catResponse, unitResponse] = await Promise.all([\n      axios.get(\"http://192.168.100.111:8081/api/v1/categories\", {\n        headers: { Authorization: `Bearer ${token}` },\n      }),\n      axios.get(\"http://192.168.100.111:8081/api/v1/units\", {\n        headers: { Authorization: `Bearer ${token}` },\n      }),\n    ]);\n\n    if (catResponse.data && catResponse.data.data) {\n      categories.value = catResponse.data.data;\n    }\n    if (unitResponse.data && unitResponse.data.data) {\n      units.value = unitResponse.data.data;\n    }\n  } catch (error) {\n    console.error(\n      \"Error fetching categories or units:\",\n      error.response ? error.response.data : error.message\n    );\n  }\n};\n\nconst createProduct = async () => {\n  // Validasi sisi frontend untuk mencegah permintaan tidak lengkap\n  if (\n    !product.value.Name ||\n    !product.value.Code ||\n    product.value.CostPrice === null ||\n    product.value.SellPrice === null ||\n    product.value.Stock === null ||\n    !product.value.CategoryID ||\n    !product.value.UnitID\n  ) {\n    alert(\"Please fill in all required fields.\");\n    return;\n  }\n\n  loading.value = true;\n  try {\n    const token = localStorage.getItem(\"token\");\n    if (!token) {\n      alert(\"Authentication token is missing. Please log in again.\");\n      loading.value = false;\n      return;\n    }\n\n    const response = await axios.post(\n      \"http://192.168.100.111:8081/api/v1/products\",\n      product.value,\n      {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n      }\n    );\n\n    console.log(\"Product created successfully:\", response.data);\n    alert(\"Product added successfully!\");\n    router.push(\"/management-product\");\n  } catch (error) {\n    console.error(\n      \"Error creating product:\",\n      error.response ? error.response.data : error.message\n    );\n    alert(\"Failed to add product. Please check the console for details.\");\n  } finally {\n    loading.value = false;\n  }\n};\n\nonMounted(() => {\n  fetchCategoriesAndUnits();\n});\n</script>\n\n<style scoped>\n/* Anda bisa menambahkan atau menyesuaikan gaya CSS di sini */\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}