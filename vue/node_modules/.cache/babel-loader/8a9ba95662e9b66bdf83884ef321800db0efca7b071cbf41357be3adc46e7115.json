{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, resolveComponent as _resolveComponent, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"p-8\"\n};\nconst _hoisted_2 = {\n  class: \"flex flex-wrap items-center justify-between gap-3 p-4\"\n};\nconst _hoisted_3 = {\n  class: \"text-[#111418] tracking-light text-[32px] font-bold leading-tight min-w-72\"\n};\nconst _hoisted_4 = {\n  class: \"flex flex-col flex-wrap items-end gap-4 px-4 py-3\"\n};\nconst _hoisted_5 = {\n  class: \"flex flex-col min-w-40 flex-1 w-full\"\n};\nconst _hoisted_6 = {\n  class: \"flex justify-stretch\"\n};\nconst _hoisted_7 = {\n  class: \"flex flex-1 gap-3 flex-wrap px-4 py-3 justify-end\"\n};\nconst _hoisted_8 = [\"disabled\"];\nconst _hoisted_9 = {\n  class: \"truncate\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_OwnerLayouts = _resolveComponent(\"OwnerLayouts\");\n  return _openBlock(), _createBlock(_component_OwnerLayouts, null, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, [_createCommentVNode(\" Judul dan tombol kembali \"), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"p\", _hoisted_3, _toDisplayString($setup.isEdit ? \"Edit Unit\" : \"Add Unit\"), 1 /* TEXT */), _createElementVNode(\"button\", {\n      onClick: $setup.resetFormAndNavigate,\n      class: \"flex items-center gap-2 text-[#60758a] text-base font-normal leading-normal\"\n    }, [...(_cache[1] || (_cache[1] = [_createElementVNode(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      width: \"20px\",\n      height: \"20px\",\n      viewBox: \"0 0 24 24\",\n      fill: \"none\",\n      stroke: \"currentColor\",\n      \"stroke-width\": \"2\",\n      \"stroke-linecap\": \"round\",\n      \"stroke-linejoin\": \"round\"\n    }, [_createElementVNode(\"path\", {\n      d: \"M19 12H5\"\n    }), _createElementVNode(\"path\", {\n      d: \"M12 19L5 12L12 5\"\n    })], -1 /* CACHED */), _createElementVNode(\"span\", {\n      class: \"truncate\"\n    }, \"Kembali\", -1 /* CACHED */)]))])]), _createCommentVNode(\" Kotak pesan/alert kustom \"), $setup.messageText ? (_openBlock(), _createElementBlock(\"div\", {\n      key: 0,\n      class: _normalizeClass([$setup.messageClass, \"p-4 rounded-lg mb-4 text-center text-white mx-4\"])\n    }, _toDisplayString($setup.messageText), 3 /* TEXT, CLASS */)) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Formulir \"), _createElementVNode(\"form\", {\n      onSubmit: _withModifiers($setup.handleSubmit, [\"prevent\"]),\n      class: \"flex flex-col w-[512px] max-w-[512px] py-5\"\n    }, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"label\", _hoisted_5, [_cache[2] || (_cache[2] = _createElementVNode(\"p\", {\n      class: \"text-[#111418] text-base font-medium leading-normal pb-2\"\n    }, \" Name \", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.unit.Name = $event),\n      placeholder: \"Enter unit name\",\n      class: \"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border border-[#dbe0e6] bg-white focus:border-[#dbe0e6] h-14 placeholder:text-[#60758a] p-[15px] text-base font-normal leading-normal\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.unit.Name]])])]), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_createCommentVNode(\" Tombol \\\"Cancel\\\" \"), _createElementVNode(\"button\", {\n      type: \"button\",\n      onClick: $setup.resetFormAndNavigate,\n      class: \"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-[#f0f2f5] text-[#111418] text-sm font-bold leading-normal tracking-[0.015em]\"\n    }, [...(_cache[3] || (_cache[3] = [_createElementVNode(\"span\", {\n      class: \"truncate\"\n    }, \"Cancel\", -1 /* CACHED */)]))]), _createCommentVNode(\" Tombol \\\"Save\\\" \"), _createElementVNode(\"button\", {\n      type: \"submit\",\n      disabled: $setup.isSaving,\n      class: \"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-[#0d80f2] text-white text-sm font-bold leading-normal tracking-[0.015em] disabled:opacity-50\"\n    }, [_createElementVNode(\"span\", _hoisted_9, _toDisplayString($setup.isSaving ? \"Saving...\" : \"Save\"), 1 /* TEXT */)], 8 /* PROPS */, _hoisted_8)])])], 32 /* NEED_HYDRATION */)])]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["class","_createBlock","_component_OwnerLayouts","_createElementVNode","_hoisted_1","_createCommentVNode","_hoisted_2","_hoisted_3","_toDisplayString","$setup","isEdit","onClick","resetFormAndNavigate","xmlns","width","height","viewBox","fill","stroke","d","messageText","_createElementBlock","_normalizeClass","messageClass","onSubmit","_withModifiers","handleSubmit","_hoisted_4","_hoisted_5","unit","Name","$event","placeholder","_hoisted_6","_hoisted_7","type","disabled","isSaving","_hoisted_9"],"sources":["C:\\Users\\SPC STYLE 5\\aplikasi\\src\\views\\EditUnitOwner.vue"],"sourcesContent":["<template>\r\n  <OwnerLayouts>\r\n    <div class=\"p-8\">\r\n      <!-- Judul dan tombol kembali -->\r\n      <div class=\"flex flex-wrap items-center justify-between gap-3 p-4\">\r\n        <p\r\n          class=\"text-[#111418] tracking-light text-[32px] font-bold leading-tight min-w-72\"\r\n        >\r\n          {{ isEdit ? \"Edit Unit\" : \"Add Unit\" }}\r\n        </p>\r\n        <button\r\n          @click=\"resetFormAndNavigate\"\r\n          class=\"flex items-center gap-2 text-[#60758a] text-base font-normal leading-normal\"\r\n        >\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            width=\"20px\"\r\n            height=\"20px\"\r\n            viewBox=\"0 0 24 24\"\r\n            fill=\"none\"\r\n            stroke=\"currentColor\"\r\n            stroke-width=\"2\"\r\n            stroke-linecap=\"round\"\r\n            stroke-linejoin=\"round\"\r\n          >\r\n            <path d=\"M19 12H5\"></path>\r\n            <path d=\"M12 19L5 12L12 5\"></path>\r\n          </svg>\r\n          <span class=\"truncate\">Kembali</span>\r\n        </button>\r\n      </div>\r\n\r\n      <!-- Kotak pesan/alert kustom -->\r\n      <div v-if=\"messageText\" :class=\"messageClass\" class=\"p-4 rounded-lg mb-4 text-center text-white mx-4\">\r\n        {{ messageText }}\r\n      </div>\r\n\r\n      <!-- Formulir -->\r\n      <form\r\n        @submit.prevent=\"handleSubmit\"\r\n        class=\"flex flex-col w-[512px] max-w-[512px] py-5\"\r\n      >\r\n        <div class=\"flex flex-col flex-wrap items-end gap-4 px-4 py-3\">\r\n          <label class=\"flex flex-col min-w-40 flex-1 w-full\">\r\n            <p class=\"text-[#111418] text-base font-medium leading-normal pb-2\">\r\n              Name\r\n            </p>\r\n            <input\r\n              v-model=\"unit.Name\"\r\n              placeholder=\"Enter unit name\"\r\n              class=\"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border border-[#dbe0e6] bg-white focus:border-[#dbe0e6] h-14 placeholder:text-[#60758a] p-[15px] text-base font-normal leading-normal\"\r\n            />\r\n          </label>\r\n        </div>\r\n        <div class=\"flex justify-stretch\">\r\n          <div class=\"flex flex-1 gap-3 flex-wrap px-4 py-3 justify-end\">\r\n            <!-- Tombol \"Cancel\" -->\r\n            <button\r\n              type=\"button\"\r\n              @click=\"resetFormAndNavigate\"\r\n              class=\"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-[#f0f2f5] text-[#111418] text-sm font-bold leading-normal tracking-[0.015em]\"\r\n            >\r\n              <span class=\"truncate\">Cancel</span>\r\n            </button>\r\n            <!-- Tombol \"Save\" -->\r\n            <button\r\n              type=\"submit\"\r\n              :disabled=\"isSaving\"\r\n              class=\"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-[#0d80f2] text-white text-sm font-bold leading-normal tracking-[0.015em] disabled:opacity-50\"\r\n            >\r\n              <span class=\"truncate\">{{ isSaving ? \"Saving...\" : \"Save\" }}</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </OwnerLayouts>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed } from \"vue\";\r\nimport { initializeApp } from \"https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js\";\r\nimport { getFirestore, doc, getDoc, setDoc, collection } from \"https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js\";\r\nimport { getAuth, signInWithCustomToken, signInAnonymously } from \"https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js\";\r\n\r\n// CATATAN PENTING: File ini mengimpor komponen OwnerLayouts.vue yang tidak tersedia di sini.\r\n// Untuk menjalankan kode ini, Anda harus memiliki file OwnerLayouts.vue yang sesuai.\r\n// Jika tidak, Anda akan mendapatkan error.\r\n\r\n// --- KONFIGURASI FIREBASE (WAJIB) ---\r\nconst firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');\r\nconst initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;\r\nconst appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';\r\n\r\n// Inisialisasi Firebase\r\nconst app = initializeApp(firebaseConfig);\r\nconst db = getFirestore(app);\r\nconst auth = getAuth(app);\r\n\r\nconst unit = ref({\r\n  Name: \"\",\r\n});\r\n\r\nconst isEdit = ref(false);\r\nconst editingUnitId = ref(null);\r\nconst isSaving = ref(false);\r\nconst messageText = ref(null);\r\nconst messageType = ref('success');\r\n\r\nconst messageClass = computed(() => ({\r\n  'bg-green-500': messageType.value === 'success',\r\n  'bg-red-500': messageType.value === 'error',\r\n}));\r\n\r\n// Fungsi untuk menampilkan pesan kustom\r\nconst showMessage = (text, type = 'success', duration = 3000) => {\r\n  messageText.value = text;\r\n  messageType.value = type;\r\n  setTimeout(() => {\r\n    messageText.value = null;\r\n  }, duration);\r\n};\r\n\r\n// Fungsi untuk mengambil data unit dari Firestore\r\nconst fetchUnit = async (id) => {\r\n  const docRef = doc(db, `artifacts/${appId}/users/${auth.currentUser.uid}/units`, id);\r\n  try {\r\n    const docSnap = await getDoc(docRef);\r\n    if (docSnap.exists()) {\r\n      const data = docSnap.data();\r\n      unit.value.Name = data.Name;\r\n    } else {\r\n      showMessage(\"Dokumen unit tidak ditemukan.\", 'error');\r\n      resetFormAndNavigate();\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Gagal mengambil data unit:\", error);\r\n    showMessage(\"Gagal mengambil data unit.\", 'error');\r\n  }\r\n};\r\n\r\n// Fungsi untuk menyimpan atau memperbarui data unit ke Firestore\r\nconst handleSubmit = async () => {\r\n  isSaving.value = true;\r\n  try {\r\n    if (!unit.value.Name) {\r\n      showMessage(\"Nama unit harus diisi.\", 'error');\r\n      return;\r\n    }\r\n\r\n    const userId = auth.currentUser.uid;\r\n    const collectionPath = `artifacts/${appId}/users/${userId}/units`;\r\n\r\n    if (isEdit.value && editingUnitId.value) {\r\n      const unitDocRef = doc(db, collectionPath, editingUnitId.value);\r\n      await setDoc(unitDocRef, { ...unit.value });\r\n      showMessage(\"Unit berhasil diperbarui!\");\r\n    } else {\r\n      const newUnitDocRef = doc(collection(db, collectionPath));\r\n      await setDoc(newUnitDocRef, { ...unit.value });\r\n      showMessage(\"Unit berhasil ditambahkan!\");\r\n    }\r\n    resetFormAndNavigate();\r\n  } catch (error) {\r\n    console.error(\"Gagal menyimpan unit:\", error);\r\n    showMessage(\"Gagal menyimpan unit. Lihat konsol untuk detail.\", 'error');\r\n  } finally {\r\n    isSaving.value = false;\r\n  }\r\n};\r\n\r\n// Fungsi untuk mengatur ulang formulir dan mensimulasikan navigasi\r\nconst resetFormAndNavigate = () => {\r\n  unit.value = { Name: \"\" };\r\n  isEdit.value = false;\r\n  editingUnitId.value = null;\r\n};\r\n\r\n// Simulasi inisiasi edit pada saat mount\r\n// Dalam aplikasi nyata, ID akan didapat dari route.params.id\r\nonMounted(async () => {\r\n  if (initialAuthToken) {\r\n    await signInWithCustomToken(auth, initialAuthToken);\r\n  } else {\r\n    await signInAnonymously(auth);\r\n  }\r\n\r\n  // Contoh: Jika Anda ingin mengedit, atur isEdit menjadi true dan berikan ID dokumen.\r\n  // Anda bisa mengganti 'contoh_id_unit' dengan ID dokumen dari Firestore.\r\n  // editingUnitId.value = 'contoh_id_unit';\r\n  // isEdit.value = true;\r\n  // if (isEdit.value) {\r\n  //   fetchUnit(editingUnitId.value);\r\n  // }\r\n});\r\n</script>\r\n"],"mappings":";;EAESA,KAAK,EAAC;AAAK;;EAETA,KAAK,EAAC;AAAuD;;EAE9DA,KAAK,EAAC;AAA4E;;EAoC/EA,KAAK,EAAC;AAAmD;;EACrDA,KAAK,EAAC;AAAsC;;EAWhDA,KAAK,EAAC;AAAsB;;EAC1BA,KAAK,EAAC;AAAmD;;;EAepDA,KAAK,EAAC;AAAU;;;uBArElCC,YAAA,CA2EeC,uBAAA;sBA1Eb,MAyEM,CAzENC,mBAAA,CAyEM,OAzENC,UAyEM,GAxEJC,mBAAA,8BAAiC,EACjCF,mBAAA,CA0BM,OA1BNG,UA0BM,GAzBJH,mBAAA,CAII,KAJJI,UAII,EAAAC,gBAAA,CADCC,MAAA,CAAAC,MAAM,6CAEXP,mBAAA,CAmBS;MAlBNQ,OAAK,EAAEF,MAAA,CAAAG,oBAAoB;MAC5BZ,KAAK,EAAC;uCAENG,mBAAA,CAaM;MAZJU,KAAK,EAAC,4BAA4B;MAClCC,KAAK,EAAC,MAAM;MACZC,MAAM,EAAC,MAAM;MACbC,OAAO,EAAC,WAAW;MACnBC,IAAI,EAAC,MAAM;MACXC,MAAM,EAAC,cAAc;MACrB,cAAY,EAAC,GAAG;MAChB,gBAAc,EAAC,OAAO;MACtB,iBAAe,EAAC;QAEhBf,mBAAA,CAA0B;MAApBgB,CAAC,EAAC;IAAU,IAClBhB,mBAAA,CAAkC;MAA5BgB,CAAC,EAAC;IAAkB,G,oBAE5BhB,mBAAA,CAAqC;MAA/BH,KAAK,EAAC;IAAU,GAAC,SAAO,mB,QAIlCK,mBAAA,8BAAiC,EACtBI,MAAA,CAAAW,WAAW,I,cAAtBC,mBAAA,CAEM;;MAFmBrB,KAAK,EAAAsB,eAAA,EAAEb,MAAA,CAAAc,YAAY,EAAQ,iDAAiD;wBAChGd,MAAA,CAAAW,WAAW,2B,mCAGhBf,mBAAA,cAAiB,EACjBF,mBAAA,CAoCO;MAnCJqB,QAAM,EAAAC,cAAA,CAAUhB,MAAA,CAAAiB,YAAY;MAC7B1B,KAAK,EAAC;QAENG,mBAAA,CAWM,OAXNwB,UAWM,GAVJxB,mBAAA,CASQ,SATRyB,UASQ,G,0BARNzB,mBAAA,CAEI;MAFDH,KAAK,EAAC;IAA0D,GAAC,QAEpE,qB,gBACAG,mBAAA,CAIE;iEAHSM,MAAA,CAAAoB,IAAI,CAACC,IAAI,GAAAC,MAAA;MAClBC,WAAW,EAAC,iBAAiB;MAC7BhC,KAAK,EAAC;mDAFGS,MAAA,CAAAoB,IAAI,CAACC,IAAI,E,OAMxB3B,mBAAA,CAmBM,OAnBN8B,UAmBM,GAlBJ9B,mBAAA,CAiBM,OAjBN+B,UAiBM,GAhBJ7B,mBAAA,uBAAwB,EACxBF,mBAAA,CAMS;MALPgC,IAAI,EAAC,QAAQ;MACZxB,OAAK,EAAEF,MAAA,CAAAG,oBAAoB;MAC5BZ,KAAK,EAAC;uCAENG,mBAAA,CAAoC;MAA9BH,KAAK,EAAC;IAAU,GAAC,QAAM,mB,MAE/BK,mBAAA,qBAAsB,EACtBF,mBAAA,CAMS;MALPgC,IAAI,EAAC,QAAQ;MACZC,QAAQ,EAAE3B,MAAA,CAAA4B,QAAQ;MACnBrC,KAAK,EAAC;QAENG,mBAAA,CAAmE,QAAnEmC,UAAmE,EAAA9B,gBAAA,CAAzCC,MAAA,CAAA4B,QAAQ,wC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}