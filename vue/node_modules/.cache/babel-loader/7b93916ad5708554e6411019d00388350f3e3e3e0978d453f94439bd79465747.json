{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nimport { ref, computed, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport CashierSidebar from \"@/components/CashierSidebar.vue\";\n\n// state login\n\nexport default {\n  __name: 'CashierPage',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const username = ref(\"\");\n    const password = ref(\"\");\n    const isLoggedIn = ref(!!localStorage.getItem(\"token\"));\n\n    // ðŸ”‘ gunakan localhost agar sesuai AllowOrigins backend\n    const api = axios.create({\n      baseURL: \"http://localhost:8081/api/v1/\",\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n      }\n    });\n    const products = ref([]);\n    const cart = ref([]);\n    const search = ref(\"\");\n    const selectedCategory = ref(\"All\");\n    const categories = ref([]);\n    const amountReceived = ref(0);\n\n    // login\n    const login = async () => {\n      try {\n        const res = await axios.post(\"http://localhost:8081/api/v1/auth/login\", {\n          username: username.value,\n          password: password.value\n        });\n        const token = res.data.token;\n        localStorage.setItem(\"token\", token);\n        isLoggedIn.value = true;\n        // refresh axios headers\n        api.defaults.headers[\"Authorization\"] = \"Bearer \" + token;\n        await loadProducts();\n      } catch (err) {\n        alert(\"Login gagal: \" + (err.response?.data?.error || err.message));\n      }\n    };\n\n    // load produk\n    const loadProducts = async () => {\n      try {\n        const res = await api.get(\"/products\");\n        console.log(\"Produk dari API:\", res.data);\n        products.value = res.data.data || [];\n        categories.value = [...new Set(products.value.map(p => p.category?.name || \"Unknown\"))];\n      } catch (err) {\n        console.error(\"Gagal load produk:\", err.response?.data || err.message);\n        if (err.response?.status === 401) {\n          isLoggedIn.value = false; // token invalid â†’ balik ke login\n        }\n      }\n    };\n    onMounted(() => {\n      if (isLoggedIn.value) loadProducts();\n    });\n\n    // ... (sisanya tetap sama)\n\n    const __returned__ = {\n      username,\n      password,\n      isLoggedIn,\n      api,\n      products,\n      cart,\n      search,\n      selectedCategory,\n      categories,\n      amountReceived,\n      login,\n      loadProducts,\n      ref,\n      computed,\n      onMounted,\n      get axios() {\n        return axios;\n      },\n      CashierSidebar\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","axios","CashierSidebar","username","password","isLoggedIn","localStorage","getItem","api","create","baseURL","headers","Authorization","products","cart","search","selectedCategory","categories","amountReceived","login","res","post","value","token","data","setItem","defaults","loadProducts","err","alert","response","error","message","get","console","log","Set","map","p","category","name","status"],"sources":["C:/Users/SPC STYLE 5/aplikasi/src/views/CashierPage.vue"],"sourcesContent":["<script setup>\nimport { ref, computed, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport CashierSidebar from \"@/components/CashierSidebar.vue\";\n\n// state login\nconst username = ref(\"\");\nconst password = ref(\"\");\nconst isLoggedIn = ref(!!localStorage.getItem(\"token\"));\n\n// ðŸ”‘ gunakan localhost agar sesuai AllowOrigins backend\nconst api = axios.create({\n  baseURL: \"http://localhost:8081/api/v1/\",\n  headers: {\n    Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n  },\n});\n\nconst products = ref([]);\nconst cart = ref([]);\nconst search = ref(\"\");\nconst selectedCategory = ref(\"All\");\nconst categories = ref([]);\nconst amountReceived = ref(0);\n\n// login\nconst login = async () => {\n  try {\n    const res = await axios.post(\"http://localhost:8081/api/v1/auth/login\", {\n      username: username.value,\n      password: password.value,\n    });\n    const token = res.data.token;\n    localStorage.setItem(\"token\", token);\n    isLoggedIn.value = true;\n    // refresh axios headers\n    api.defaults.headers[\"Authorization\"] = \"Bearer \" + token;\n    await loadProducts();\n  } catch (err) {\n    alert(\"Login gagal: \" + (err.response?.data?.error || err.message));\n  }\n};\n\n// load produk\nconst loadProducts = async () => {\n  try {\n    const res = await api.get(\"/products\");\n    console.log(\"Produk dari API:\", res.data);\n    products.value = res.data.data || [];\n    categories.value = [\n      ...new Set(products.value.map((p) => p.category?.name || \"Unknown\")),\n    ];\n  } catch (err) {\n    console.error(\"Gagal load produk:\", err.response?.data || err.message);\n    if (err.response?.status === 401) {\n      isLoggedIn.value = false; // token invalid â†’ balik ke login\n    }\n  }\n};\n\nonMounted(() => {\n  if (isLoggedIn.value) loadProducts();\n});\n\n// ... (sisanya tetap sama)\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}