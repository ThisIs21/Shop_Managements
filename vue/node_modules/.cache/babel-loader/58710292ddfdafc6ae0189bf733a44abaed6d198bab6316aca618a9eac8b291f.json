{"ast":null,"code":"import { createVNode as _createVNode, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"flex size-full min-h-screen flex-col bg-white font-manrope lg:flex-row\"\n};\nconst _hoisted_2 = {\n  class: \"flex flex-1 flex-col\"\n};\nconst _hoisted_3 = {\n  class: \"flex-1 p-8\"\n};\nconst _hoisted_4 = {\n  class: \"layout-content-container flex flex-col flex-1\"\n};\nconst _hoisted_5 = {\n  class: \"px-4 py-3 @container\"\n};\nconst _hoisted_6 = {\n  class: \"flex overflow-hidden rounded-lg border border-[#dbe0e6] bg-white\"\n};\nconst _hoisted_7 = {\n  class: \"flex-1\"\n};\nconst _hoisted_8 = {\n  class: \"h-[72px] px-4 py-2 text-[#111418] text-sm\"\n};\nconst _hoisted_9 = {\n  class: \"h-[72px] px-4 py-2 text-[#60758a] text-sm\"\n};\nconst _hoisted_10 = {\n  class: \"h-[72px] px-4 py-2 text-[#60758a] text-sm\"\n};\nconst _hoisted_11 = {\n  class: \"h-[72px] px-4 py-2 text-[#60758a] text-sm\"\n};\nconst _hoisted_12 = {\n  class: \"h-[72px] px-4 py-2 text-sm font-bold flex gap-2\"\n};\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = [\"onClick\"];\nconst _hoisted_15 = {\n  key: 0\n};\nconst _hoisted_16 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode($setup[\"KepalaGudangSidebar\"]), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"main\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_cache[3] || (_cache[3] = _createElementVNode(\"div\", {\n    class: \"mb-6\"\n  }, [_createElementVNode(\"p\", {\n    class: \"text-[#111418] tracking-light text-[32px] font-bold leading-tight\"\n  }, \" Purchase Orders Pending Approval \")], -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"table\", _hoisted_7, [_cache[2] || (_cache[2] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", {\n    class: \"bg-white\"\n  }, [_createElementVNode(\"th\", {\n    class: \"px-4 py-3 text-left text-[#111418] text-sm font-medium\"\n  }, \" PO Number \"), _createElementVNode(\"th\", {\n    class: \"px-4 py-3 text-left text-[#111418] text-sm font-medium\"\n  }, \" Supplier \"), _createElementVNode(\"th\", {\n    class: \"px-4 py-3 text-left text-[#111418] text-sm font-medium\"\n  }, \" Date \"), _createElementVNode(\"th\", {\n    class: \"px-4 py-3 text-left text-[#111418] text-sm font-medium\"\n  }, \" Total \"), _createElementVNode(\"th\", {\n    class: \"px-4 py-3 text-left text-[#60758a] text-sm font-medium\"\n  }, \" Action \")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [_createCommentVNode(\" LOOP DATA \"), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.purchases, po => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: po.id,\n      class: \"border-t border-t-[#dbe0e6]\"\n    }, [_createElementVNode(\"td\", _hoisted_8, _toDisplayString(po.id), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_9, _toDisplayString(po.supplier?.name || \"-\"), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_10, _toDisplayString($setup.formatDate(po.date)), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_11, _toDisplayString($setup.formatCurrency(po.total)), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_12, [_createElementVNode(\"button\", {\n      onClick: $event => $setup.approvePO(po.id),\n      class: \"px-3 py-1 rounded bg-green-500 text-white hover:bg-green-600\"\n    }, \" Approve \", 8 /* PROPS */, _hoisted_13), _createElementVNode(\"button\", {\n      onClick: $event => $setup.rejectPO(po.id),\n      class: \"px-3 py-1 rounded bg-red-500 text-white hover:bg-red-600\"\n    }, \" Reject \", 8 /* PROPS */, _hoisted_14)])]);\n  }), 128 /* KEYED_FRAGMENT */)), _createCommentVNode(\" KOSONG \"), !$setup.loading && $setup.purchases.length === 0 ? (_openBlock(), _createElementBlock(\"tr\", _hoisted_15, [...(_cache[0] || (_cache[0] = [_createElementVNode(\"td\", {\n    colspan: \"5\",\n    class: \"text-center py-4 text-[#60758a] text-sm\"\n  }, \" No pending purchase orders \", -1 /* CACHED */)]))])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" LOADING \"), $setup.loading ? (_openBlock(), _createElementBlock(\"tr\", _hoisted_16, [...(_cache[1] || (_cache[1] = [_createElementVNode(\"td\", {\n    colspan: \"5\",\n    class: \"text-center py-4 text-[#60758a] text-sm\"\n  }, \" Loading... \", -1 /* CACHED */)]))])) : _createCommentVNode(\"v-if\", true)])])])])])])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createVNode","$setup","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_createCommentVNode","_Fragment","_renderList","purchases","po","key","id","_hoisted_8","_toDisplayString","_hoisted_9","supplier","name","_hoisted_10","formatDate","date","_hoisted_11","formatCurrency","total","_hoisted_12","onClick","$event","approvePO","_hoisted_13","rejectPO","_hoisted_14","loading","length","_hoisted_15","_cache","colspan","_hoisted_16"],"sources":["C:\\Users\\Personal\\Documents\\PKL\\aplikasi\\aplikasi\\src\\views\\PurchaseOrderKepalaGudang.vue"],"sourcesContent":["<script setup>\nimport { ref, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport KepalaGudangSidebar from \"@/components/KepalaGudangSidebar.vue\";\n\nconst purchases = ref([]);\nconst loading = ref(false);\nconst token = localStorage.getItem(\"token\"); // ambil token login\n\n// Ambil data dari backend\nconst fetchPurchases = async () => {\n  loading.value = true;\n  try {\n    const res = await axios.get(\n      \"http://localhost:8081/api/v1/kepala-gudang/purchases\",\n      {\n        params: { page: 1, size: 20, q: \"\" }, // paging + search\n        headers: { Authorization: `Bearer ${token}` },\n      }\n    );\n\n    // backend bisa return array langsung atau dalam { data: [] }\n    purchases.value = Array.isArray(res.data)\n      ? res.data\n      : res.data.data || [];\n  } catch (err) {\n    console.error(\"Failed to fetch purchases:\", err);\n  } finally {\n    loading.value = false;\n  }\n};\n\n// Approve PO\nconst approvePO = async (id) => {\n  try {\n    await axios.post(\n      `http://localhost:8081/api/v1/purchases/${id}/approve`,\n      {},\n      { headers: { Authorization: `Bearer ${token}` } }\n    );\n    // hapus dari list supaya langsung hilang dari UI\n    purchases.value = purchases.value.filter((po) => po.id !== id);\n  } catch (err) {\n    console.error(\"Failed to approve:\", err);\n  }\n};\n\n// Reject PO\nconst rejectPO = async (id) => {\n  try {\n    await axios.post(\n      `http://localhost:8081/api/v1/purchases/${id}/reject`,\n      {},\n      { headers: { Authorization: `Bearer ${token}` } }\n    );\n    purchases.value = purchases.value.filter((po) => po.id !== id);\n  } catch (err) {\n    console.error(\"Failed to reject:\", err);\n  }\n};\n\n// Format tanggal\nconst formatDate = (dateStr) => {\n  if (!dateStr) return \"-\";\n  return new Date(dateStr).toLocaleDateString();\n};\n\n// Format mata uang\nconst formatCurrency = (val) => {\n  if (val === null || val === undefined) return \"-\";\n  return new Intl.NumberFormat(\"id-ID\", {\n    style: \"currency\",\n    currency: \"IDR\",\n  }).format(val);\n};\n\nonMounted(() => {\n  fetchPurchases();\n});\n</script>\n\n<template>\n  <div\n    class=\"flex size-full min-h-screen flex-col bg-white font-manrope lg:flex-row\"\n  >\n    <KepalaGudangSidebar />\n\n    <div class=\"flex flex-1 flex-col\">\n      <main class=\"flex-1 p-8\">\n        <div class=\"layout-content-container flex flex-col flex-1\">\n          <div class=\"mb-6\">\n            <p\n              class=\"text-[#111418] tracking-light text-[32px] font-bold leading-tight\"\n            >\n              Purchase Orders Pending Approval\n            </p>\n          </div>\n\n          <div class=\"px-4 py-3 @container\">\n            <div\n              class=\"flex overflow-hidden rounded-lg border border-[#dbe0e6] bg-white\"\n            >\n              <table class=\"flex-1\">\n                <thead>\n                  <tr class=\"bg-white\">\n                    <th\n                      class=\"px-4 py-3 text-left text-[#111418] text-sm font-medium\"\n                    >\n                      PO Number\n                    </th>\n                    <th\n                      class=\"px-4 py-3 text-left text-[#111418] text-sm font-medium\"\n                    >\n                      Supplier\n                    </th>\n                    <th\n                      class=\"px-4 py-3 text-left text-[#111418] text-sm font-medium\"\n                    >\n                      Date\n                    </th>\n                    <th\n                      class=\"px-4 py-3 text-left text-[#111418] text-sm font-medium\"\n                    >\n                      Total\n                    </th>\n                    <th\n                      class=\"px-4 py-3 text-left text-[#60758a] text-sm font-medium\"\n                    >\n                      Action\n                    </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <!-- LOOP DATA -->\n                  <tr\n                    v-for=\"po in purchases\"\n                    :key=\"po.id\"\n                    class=\"border-t border-t-[#dbe0e6]\"\n                  >\n                    <td class=\"h-[72px] px-4 py-2 text-[#111418] text-sm\">\n                      {{ po.id }}\n                    </td>\n                    <td class=\"h-[72px] px-4 py-2 text-[#60758a] text-sm\">\n                      {{ po.supplier?.name || \"-\" }}\n                    </td>\n                    <td class=\"h-[72px] px-4 py-2 text-[#60758a] text-sm\">\n                      {{ formatDate(po.date) }}\n                    </td>\n                    <td class=\"h-[72px] px-4 py-2 text-[#60758a] text-sm\">\n                      {{ formatCurrency(po.total) }}\n                    </td>\n                    <td class=\"h-[72px] px-4 py-2 text-sm font-bold flex gap-2\">\n                      <button\n                        @click=\"approvePO(po.id)\"\n                        class=\"px-3 py-1 rounded bg-green-500 text-white hover:bg-green-600\"\n                      >\n                        Approve\n                      </button>\n                      <button\n                        @click=\"rejectPO(po.id)\"\n                        class=\"px-3 py-1 rounded bg-red-500 text-white hover:bg-red-600\"\n                      >\n                        Reject\n                      </button>\n                    </td>\n                  </tr>\n\n                  <!-- KOSONG -->\n                  <tr v-if=\"!loading && purchases.length === 0\">\n                    <td\n                      colspan=\"5\"\n                      class=\"text-center py-4 text-[#60758a] text-sm\"\n                    >\n                      No pending purchase orders\n                    </td>\n                  </tr>\n\n                  <!-- LOADING -->\n                  <tr v-if=\"loading\">\n                    <td\n                      colspan=\"5\"\n                      class=\"text-center py-4 text-[#60758a] text-sm\"\n                    >\n                      Loading...\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  </div>\n</template>\n"],"mappings":";;EAmFIA,KAAK,EAAC;AAAwE;;EAIzEA,KAAK,EAAC;AAAsB;;EACzBA,KAAK,EAAC;AAAY;;EACjBA,KAAK,EAAC;AAA+C;;EASnDA,KAAK,EAAC;AAAsB;;EAE7BA,KAAK,EAAC;AAAkE;;EAEjEA,KAAK,EAAC;AAAQ;;EAqCXA,KAAK,EAAC;AAA2C;;EAGjDA,KAAK,EAAC;AAA2C;;EAGjDA,KAAK,EAAC;AAA2C;;EAGjDA,KAAK,EAAC;AAA2C;;EAGjDA,KAAK,EAAC;AAAiD;;;;;;;;;;uBArE7EC,mBAAA,CA+GM,OA/GNC,UA+GM,GA5GJC,YAAA,CAAuBC,MAAA,0BAEvBC,mBAAA,CAyGM,OAzGNC,UAyGM,GAxGJD,mBAAA,CAuGO,QAvGPE,UAuGO,GAtGLF,mBAAA,CAqGM,OArGNG,UAqGM,G,0BApGJH,mBAAA,CAMM;IANDL,KAAK,EAAC;EAAM,IACfK,mBAAA,CAII;IAHFL,KAAK,EAAC;EAAmE,GAC1E,oCAED,E,qBAGFK,mBAAA,CA2FM,OA3FNI,UA2FM,GA1FJJ,mBAAA,CAyFM,OAzFNK,UAyFM,GAtFJL,mBAAA,CAqFQ,SArFRM,UAqFQ,G,0BApFNN,mBAAA,CA4BQ,gBA3BNA,mBAAA,CA0BK;IA1BDL,KAAK,EAAC;EAAU,IAClBK,mBAAA,CAIK;IAHHL,KAAK,EAAC;EAAwD,GAC/D,aAED,GACAK,mBAAA,CAIK;IAHHL,KAAK,EAAC;EAAwD,GAC/D,YAED,GACAK,mBAAA,CAIK;IAHHL,KAAK,EAAC;EAAwD,GAC/D,QAED,GACAK,mBAAA,CAIK;IAHHL,KAAK,EAAC;EAAwD,GAC/D,SAED,GACAK,mBAAA,CAIK;IAHHL,KAAK,EAAC;EAAwD,GAC/D,UAED,E,uBAGJK,mBAAA,CAsDQ,gBArDNO,mBAAA,eAAkB,G,kBAClBX,mBAAA,CA+BKY,SAAA,QAAAC,WAAA,CA9BUV,MAAA,CAAAW,SAAS,EAAfC,EAAE;yBADXf,mBAAA,CA+BK;MA7BFgB,GAAG,EAAED,EAAE,CAACE,EAAE;MACXlB,KAAK,EAAC;QAENK,mBAAA,CAEK,MAFLc,UAEK,EAAAC,gBAAA,CADAJ,EAAE,CAACE,EAAE,kBAEVb,mBAAA,CAEK,MAFLgB,UAEK,EAAAD,gBAAA,CADAJ,EAAE,CAACM,QAAQ,EAAEC,IAAI,yBAEtBlB,mBAAA,CAEK,MAFLmB,WAEK,EAAAJ,gBAAA,CADAhB,MAAA,CAAAqB,UAAU,CAACT,EAAE,CAACU,IAAI,mBAEvBrB,mBAAA,CAEK,MAFLsB,WAEK,EAAAP,gBAAA,CADAhB,MAAA,CAAAwB,cAAc,CAACZ,EAAE,CAACa,KAAK,mBAE5BxB,mBAAA,CAaK,MAbLyB,WAaK,GAZHzB,mBAAA,CAKS;MAJN0B,OAAK,EAAAC,MAAA,IAAE5B,MAAA,CAAA6B,SAAS,CAACjB,EAAE,CAACE,EAAE;MACvBlB,KAAK,EAAC;OACP,WAED,iBAAAkC,WAAA,GACA7B,mBAAA,CAKS;MAJN0B,OAAK,EAAAC,MAAA,IAAE5B,MAAA,CAAA+B,QAAQ,CAACnB,EAAE,CAACE,EAAE;MACtBlB,KAAK,EAAC;OACP,UAED,iBAAAoC,WAAA,E;kCAIJxB,mBAAA,YAAe,E,CACJR,MAAA,CAAAiC,OAAO,IAAIjC,MAAA,CAAAW,SAAS,CAACuB,MAAM,U,cAAtCrC,mBAAA,CAOK,MAAAsC,WAAA,OAAAC,MAAA,QAAAA,MAAA,OANHnC,mBAAA,CAKK;IAJHoC,OAAO,EAAC,GAAG;IACXzC,KAAK,EAAC;KACP,8BAED,mB,2CAGFY,mBAAA,aAAgB,EACNR,MAAA,CAAAiC,OAAO,I,cAAjBpC,mBAAA,CAOK,MAAAyC,WAAA,OAAAF,MAAA,QAAAA,MAAA,OANHnC,mBAAA,CAKK;IAJHoC,OAAO,EAAC,GAAG;IACXzC,KAAK,EAAC;KACP,cAED,mB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}