{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nimport OwnerLayouts from \"@/components/OwnerLayouts.vue\";\nimport axios from \"axios\";\nexport default {\n  name: \"InventoryValueOwners\",\n  components: {\n    OwnerLayouts\n  },\n  data() {\n    return {\n      inventory: [],\n      filteredInventory: [],\n      categories: [],\n      selectedCategory: \"\",\n      loading: false,\n      errorMessage: \"\"\n    };\n  },\n  methods: {\n    async fetchInventory() {\n      this.loading = true;\n      this.errorMessage = \"\";\n      try {\n        // ✅ gunakan endpoint sesuai backend\n        const res = await axios.get(\"/api/v1/owner/reports/inventory-detail\");\n        this.inventory = res.data.data;\n        this.filteredInventory = this.inventory;\n        this.categories = [...new Set(this.inventory.map(i => i.category))];\n      } catch (err) {\n        console.error(\"Failed to load inventory:\", err);\n        this.errorMessage = \"Failed to fetch inventory data. Please try again.\";\n      } finally {\n        this.loading = false;\n      }\n    },\n    filterByCategory() {\n      if (!this.selectedCategory) {\n        this.filteredInventory = this.inventory;\n      } else {\n        this.filteredInventory = this.inventory.filter(i => i.category === this.selectedCategory);\n      }\n    },\n    exportData(type) {\n      if (!this.loading) {\n        // ✅ export juga ke endpoint yang benar\n        window.open(`/api/v1/owner/reports/inventory-detail?export=${type}`, \"_blank\");\n      }\n    }\n  },\n  mounted() {\n    this.fetchInventory();\n  }\n};","map":{"version":3,"names":["OwnerLayouts","axios","name","components","data","inventory","filteredInventory","categories","selectedCategory","loading","errorMessage","methods","fetchInventory","res","get","Set","map","i","category","err","console","error","filterByCategory","filter","exportData","type","window","open","mounted"],"sources":["C:\\Users\\Personal\\Documents\\PKL\\aplikasi\\aplikasi\\src\\views\\InventoryValueOwners.vue"],"sourcesContent":["<template>\n  <OwnerLayouts>\n    <div class=\"layout-content-container flex flex-col max-w-[960px] flex-1\">\n      <div class=\"flex flex-wrap justify-between gap-3 p-4\">\n        <div class=\"flex min-w-72 flex-col gap-3\">\n          <p class=\"text-[#111418] tracking-light text-[32px] font-bold leading-tight\">\n            Inventory Value Report\n          </p>\n          <p class=\"text-[#60758a] text-sm font-normal leading-normal\">\n            View the total value of your inventory based on purchase price\n          </p>\n        </div>\n        <div class=\"flex items-center\">\n          <router-link to=\"/report-owners\">\n            <button\n              class=\"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-[#f0f2f5] text-[#111418] text-sm font-bold leading-normal tracking-[0.015em]\"\n            >\n              <span class=\"truncate\">Kembali ke Report Owners</span>\n            </button>\n          </router-link>\n        </div>\n      </div>\n\n      <!-- ALERT ERROR -->\n      <div\n        v-if=\"errorMessage\"\n        class=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mx-4\"\n        role=\"alert\"\n      >\n        <span class=\"block sm:inline\">{{ errorMessage }}</span>\n      </div>\n\n      <h3 class=\"text-[#111418] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4\">\n        Filters\n      </h3>\n      <div class=\"flex max-w-[480px] flex-wrap items-end gap-4 px-4 py-3\">\n        <label class=\"flex flex-col min-w-40 flex-1\">\n          <p class=\"text-[#111418] text-base font-medium leading-normal pb-2\">\n            Category\n          </p>\n          <select\n            v-model=\"selectedCategory\"\n            @change=\"filterByCategory\"\n            class=\"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#111418] focus:outline-0 focus:ring-0 border border-[#dbe0e6] bg-white focus:border-[#dbe0e6] h-14 bg-[image:var(--select-button-svg)] placeholder:text-[#60758a] p-[15px] text-base font-normal leading-normal\"\n          >\n            <option value=\"\">All Categories</option>\n            <option v-for=\"cat in categories\" :key=\"cat\" :value=\"cat\">\n              {{ cat }}\n            </option>\n          </select>\n        </label>\n      </div>\n\n      <div class=\"flex justify-stretch\">\n        <div class=\"flex flex-1 gap-3 flex-wrap px-4 py-3 justify-end\">\n          <button\n            @click=\"exportData('csv')\"\n            class=\"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-[#f0f2f5] text-[#111418] text-sm font-bold leading-normal tracking-[0.015em]\"\n            :disabled=\"loading\"\n          >\n            <span class=\"truncate\">Export to CSV</span>\n          </button>\n          <button\n            @click=\"exportData('pdf')\"\n            class=\"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-[#f0f2f5] text-[#111418] text-sm font-bold leading-normal tracking-[0.015em]\"\n            :disabled=\"loading\"\n          >\n            <span class=\"truncate\">Export to PDF</span>\n          </button>\n        </div>\n      </div>\n\n      <div class=\"px-4 py-3 @container\">\n        <div class=\"flex overflow-hidden rounded-lg border border-[#dbe0e6] bg-white\">\n          <table class=\"flex-1\">\n            <thead>\n              <tr class=\"bg-white\">\n                <th class=\"px-4 py-3 text-left text-[#111418] text-sm font-medium\">Product Name</th>\n                <th class=\"px-4 py-3 text-left text-[#111418] text-sm font-medium\">Product Code</th>\n                <th class=\"px-4 py-3 text-left text-[#111418] text-sm font-medium\">Category</th>\n                <th class=\"px-4 py-3 text-left text-[#111418] text-sm font-medium\">Stock Quantity</th>\n                <th class=\"px-4 py-3 text-left text-[#111418] text-sm font-medium\">Purchase Price</th>\n                <th class=\"px-4 py-3 text-left text-[#111418] text-sm font-medium\">Total Stock Value</th>\n              </tr>\n            </thead>\n            <tbody>\n              <!-- LOADING SPINNER -->\n              <tr v-if=\"loading\">\n                <td colspan=\"6\" class=\"text-center py-6\">\n                  <div class=\"flex justify-center items-center space-x-2\">\n                    <svg class=\"animate-spin h-6 w-6 text-gray-600\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\"\n                      viewBox=\"0 0 24 24\">\n                      <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n                      <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8v8H4z\"></path>\n                    </svg>\n                    <span>Loading data...</span>\n                  </div>\n                </td>\n              </tr>\n\n              <!-- DATA -->\n              <tr v-for=\"item in filteredInventory\" :key=\"item.product_code\" class=\"border-t border-t-[#dbe0e6]\" v-else>\n                <td class=\"px-4 py-2 text-[#111418] text-sm\">{{ item.product_name }}</td>\n                <td class=\"px-4 py-2 text-[#60758a] text-sm\">{{ item.product_code }}</td>\n                <td class=\"px-4 py-2 text-[#60758a] text-sm\">{{ item.category }}</td>\n                <td class=\"px-4 py-2 text-[#60758a] text-sm\">{{ item.stock_quantity }}</td>\n                <td class=\"px-4 py-2 text-[#60758a] text-sm\">${{ item.purchase_price.toFixed(2) }}</td>\n                <td class=\"px-4 py-2 text-[#60758a] text-sm\">${{ item.total_value.toFixed(2) }}</td>\n              </tr>\n\n              <!-- EMPTY -->\n              <tr v-if=\"!loading && filteredInventory.length === 0\">\n                <td colspan=\"6\" class=\"text-center py-4 text-[#60758a]\">No data available</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  </OwnerLayouts>\n</template>\n\n<script>\nimport OwnerLayouts from \"@/components/OwnerLayouts.vue\";\nimport axios from \"axios\";\n\nexport default {\n  name: \"InventoryValueOwners\",\n  components: { OwnerLayouts },\n  data() {\n    return {\n      inventory: [],\n      filteredInventory: [],\n      categories: [],\n      selectedCategory: \"\",\n      loading: false,\n      errorMessage: \"\",\n    };\n  },\n  methods: {\n    async fetchInventory() {\n      this.loading = true;\n      this.errorMessage = \"\";\n      try {\n        // ✅ gunakan endpoint sesuai backend\n        const res = await axios.get(\"/api/v1/owner/reports/inventory-detail\");\n        this.inventory = res.data.data;\n        this.filteredInventory = this.inventory;\n        this.categories = [...new Set(this.inventory.map((i) => i.category))];\n      } catch (err) {\n        console.error(\"Failed to load inventory:\", err);\n        this.errorMessage = \"Failed to fetch inventory data. Please try again.\";\n      } finally {\n        this.loading = false;\n      }\n    },\n    filterByCategory() {\n      if (!this.selectedCategory) {\n        this.filteredInventory = this.inventory;\n      } else {\n        this.filteredInventory = this.inventory.filter(\n          (i) => i.category === this.selectedCategory\n        );\n      }\n    },\n    exportData(type) {\n      if (!this.loading) {\n        // ✅ export juga ke endpoint yang benar\n        window.open(`/api/v1/owner/reports/inventory-detail?export=${type}`, \"_blank\");\n      }\n    },\n  },\n  mounted() {\n    this.fetchInventory();\n  },\n};\n</script>\n"],"mappings":";;;;;;;;;;AA2HA,OAAOA,YAAW,MAAO,+BAA+B;AACxD,OAAOC,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAI,EAAE,sBAAsB;EAC5BC,UAAU,EAAE;IAAEH;EAAa,CAAC;EAC5BI,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,SAAS,EAAE,EAAE;MACbC,iBAAiB,EAAE,EAAE;MACrBC,UAAU,EAAE,EAAE;MACdC,gBAAgB,EAAE,EAAE;MACpBC,OAAO,EAAE,KAAK;MACdC,YAAY,EAAE;IAChB,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,cAAcA,CAAA,EAAG;MACrB,IAAI,CAACH,OAAM,GAAI,IAAI;MACnB,IAAI,CAACC,YAAW,GAAI,EAAE;MACtB,IAAI;QACF;QACA,MAAMG,GAAE,GAAI,MAAMZ,KAAK,CAACa,GAAG,CAAC,wCAAwC,CAAC;QACrE,IAAI,CAACT,SAAQ,GAAIQ,GAAG,CAACT,IAAI,CAACA,IAAI;QAC9B,IAAI,CAACE,iBAAgB,GAAI,IAAI,CAACD,SAAS;QACvC,IAAI,CAACE,UAAS,GAAI,CAAC,GAAG,IAAIQ,GAAG,CAAC,IAAI,CAACV,SAAS,CAACW,GAAG,CAAEC,CAAC,IAAKA,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAC;MACvE,EAAE,OAAOC,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAAC,2BAA2B,EAAEF,GAAG,CAAC;QAC/C,IAAI,CAACT,YAAW,GAAI,mDAAmD;MACzE,UAAU;QACR,IAAI,CAACD,OAAM,GAAI,KAAK;MACtB;IACF,CAAC;IACDa,gBAAgBA,CAAA,EAAG;MACjB,IAAI,CAAC,IAAI,CAACd,gBAAgB,EAAE;QAC1B,IAAI,CAACF,iBAAgB,GAAI,IAAI,CAACD,SAAS;MACzC,OAAO;QACL,IAAI,CAACC,iBAAgB,GAAI,IAAI,CAACD,SAAS,CAACkB,MAAM,CAC3CN,CAAC,IAAKA,CAAC,CAACC,QAAO,KAAM,IAAI,CAACV,gBAC7B,CAAC;MACH;IACF,CAAC;IACDgB,UAAUA,CAACC,IAAI,EAAE;MACf,IAAI,CAAC,IAAI,CAAChB,OAAO,EAAE;QACjB;QACAiB,MAAM,CAACC,IAAI,CAAC,iDAAiDF,IAAI,EAAE,EAAE,QAAQ,CAAC;MAChF;IACF;EACF,CAAC;EACDG,OAAOA,CAAA,EAAG;IACR,IAAI,CAAChB,cAAc,CAAC,CAAC;EACvB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}