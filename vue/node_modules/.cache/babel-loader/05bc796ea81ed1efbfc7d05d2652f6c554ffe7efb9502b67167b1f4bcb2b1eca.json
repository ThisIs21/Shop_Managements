{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, vModelRadio as _vModelRadio, createElementVNode as _createElementVNode, withDirectives as _withDirectives, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"flex flex-1 flex-col py-5 p-8\"\n};\nconst _hoisted_2 = {\n  class: \"flex gap-4 mb-4\"\n};\nconst _hoisted_3 = {\n  class: \"flex items-center gap-1\"\n};\nconst _hoisted_4 = {\n  class: \"flex items-center gap-1\"\n};\nconst _hoisted_5 = {\n  class: \"flex items-center gap-1\"\n};\nconst _hoisted_6 = {\n  key: 0,\n  class: \"text-center py-10\"\n};\nconst _hoisted_7 = {\n  class: \"overflow-x-auto\"\n};\nconst _hoisted_8 = {\n  class: \"min-w-full border border-gray-200\"\n};\nconst _hoisted_9 = {\n  class: \"border px-4 py-2\"\n};\nconst _hoisted_10 = {\n  class: \"border px-4 py-2\"\n};\nconst _hoisted_11 = {\n  class: \"border px-4 py-2\"\n};\nconst _hoisted_12 = {\n  key: 0\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_OwnerLayouts = _resolveComponent(\"OwnerLayouts\");\n  return _openBlock(), _createBlock(_component_OwnerLayouts, null, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, [_createCommentVNode(\" Filter periode \"), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"label\", _hoisted_3, [_withDirectives(_createElementVNode(\"input\", {\n      type: \"radio\",\n      value: \"Daily\",\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.period = $event),\n      onChange: _cache[1] || (_cache[1] = $event => $setup.setPeriod('Daily'))\n    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelRadio, $setup.period]]), _cache[6] || (_cache[6] = _createTextVNode(\" Daily \", -1 /* CACHED */))]), _createElementVNode(\"label\", _hoisted_4, [_withDirectives(_createElementVNode(\"input\", {\n      type: \"radio\",\n      value: \"Monthly\",\n      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.period = $event),\n      onChange: _cache[3] || (_cache[3] = $event => $setup.setPeriod('Monthly'))\n    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelRadio, $setup.period]]), _cache[7] || (_cache[7] = _createTextVNode(\" Monthly \", -1 /* CACHED */))]), _createElementVNode(\"label\", _hoisted_5, [_withDirectives(_createElementVNode(\"input\", {\n      type: \"radio\",\n      value: \"Yearly\",\n      \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.period = $event),\n      onChange: _cache[5] || (_cache[5] = $event => $setup.setPeriod('Yearly'))\n    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelRadio, $setup.period]]), _cache[8] || (_cache[8] = _createTextVNode(\" Yearly \", -1 /* CACHED */))]), _createElementVNode(\"button\", {\n      onClick: $setup.exportPDF,\n      class: \"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n    }, \" Export PDF \")]), _createCommentVNode(\" Loading \"), $setup.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, \"Loading...\")) : (_openBlock(), _createElementBlock(_Fragment, {\n      key: 1\n    }, [_createCommentVNode(\" Table data \"), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"table\", _hoisted_8, [_cache[10] || (_cache[10] = _createElementVNode(\"thead\", {\n      class: \"bg-gray-100\"\n    }, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", {\n      class: \"border px-4 py-2 text-left\"\n    }, \"Period\"), _createElementVNode(\"th\", {\n      class: \"border px-4 py-2 text-left\"\n    }, \"Number of Transactions\"), _createElementVNode(\"th\", {\n      class: \"border px-4 py-2 text-left\"\n    }, \"Total Purchase Value\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.reportData, item => {\n      return _openBlock(), _createElementBlock(\"tr\", {\n        key: item.period,\n        class: \"hover:bg-gray-50\"\n      }, [_createElementVNode(\"td\", _hoisted_9, _toDisplayString(item.period), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_10, _toDisplayString(item.number_of_transactions), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_11, \" $\" + _toDisplayString(item.total_purchase_value.toLocaleString()), 1 /* TEXT */)]);\n    }), 128 /* KEYED_FRAGMENT */)), $setup.reportData.length === 0 ? (_openBlock(), _createElementBlock(\"tr\", _hoisted_12, [...(_cache[9] || (_cache[9] = [_createElementVNode(\"td\", {\n      colspan: \"3\",\n      class: \"text-center py-4\"\n    }, \"No data available\", -1 /* CACHED */)]))])) : _createCommentVNode(\"v-if\", true)])])])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))])]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["class","_createBlock","_component_OwnerLayouts","_createElementVNode","_hoisted_1","_createCommentVNode","_hoisted_2","_hoisted_3","type","value","$setup","period","$event","onChange","_cache","setPeriod","_hoisted_4","_hoisted_5","onClick","exportPDF","loading","_createElementBlock","_hoisted_6","_Fragment","key","_hoisted_7","_hoisted_8","_renderList","reportData","item","_hoisted_9","_toDisplayString","_hoisted_10","number_of_transactions","_hoisted_11","total_purchase_value","toLocaleString","length","_hoisted_12","colspan"],"sources":["C:\\Users\\Personal\\Documents\\PKL\\aplikasi\\aplikasi\\src\\views\\PurchaseSummaryReportOwners.vue"],"sourcesContent":["<script setup>\nimport { ref, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport jsPDF from \"jspdf\";\nimport \"jspdf-autotable\";\n\n// State\nconst period = ref(\"Monthly\"); // default\nconst reportData = ref([]);\nconst loading = ref(false);\n\n// Ambil data dari backend\nconst fetchReport = async () => {\n  loading.value = true;\n  try {\n    const res = await axios.get(\n      `http://localhost:8081/api/v1/owner/reports/purchases/summary`,\n      {\n        params: { period: period.value },\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n        },\n      }\n    );\n    reportData.value = res.data.data || [];\n  } catch (err) {\n    console.error(\"Gagal mengambil data report:\", err);\n    reportData.value = [];\n  } finally {\n    loading.value = false;\n  }\n};\n\n// Ganti periode\nconst setPeriod = (p) => {\n  period.value = p;\n  fetchReport();\n};\n\n// Export PDF\nconst exportPDF = () => {\n  const doc = new jsPDF();\n  doc.text(\"Owner Report\", 14, 16);\n  const tableColumn = [\n    \"Period\",\n    \"Number of Transactions\",\n    \"Total Purchase Value\",\n  ];\n  const tableRows = [];\n\n  reportData.value.forEach((item) => {\n    const row = [\n      item.period,\n      item.number_of_transactions,\n      item.total_purchase_value.toLocaleString(),\n    ];\n    tableRows.push(row);\n  });\n\n  doc.autoTable({\n    head: [tableColumn],\n    body: tableRows,\n    startY: 20,\n  });\n  doc.save(`Owner_Report_${period.value}.pdf`);\n};\n\nonMounted(() => {\n  fetchReport();\n});\n</script>\n\n<template>\n  <OwnerLayouts>\n    <div class=\"flex flex-1 flex-col py-5 p-8\">\n      <!-- Filter periode -->\n      <div class=\"flex gap-4 mb-4\">\n        <label class=\"flex items-center gap-1\">\n          <input\n            type=\"radio\"\n            value=\"Daily\"\n            v-model=\"period\"\n            @change=\"setPeriod('Daily')\"\n          />\n          Daily\n        </label>\n        <label class=\"flex items-center gap-1\">\n          <input\n            type=\"radio\"\n            value=\"Monthly\"\n            v-model=\"period\"\n            @change=\"setPeriod('Monthly')\"\n          />\n          Monthly\n        </label>\n        <label class=\"flex items-center gap-1\">\n          <input\n            type=\"radio\"\n            value=\"Yearly\"\n            v-model=\"period\"\n            @change=\"setPeriod('Yearly')\"\n          />\n          Yearly\n        </label>\n        <button\n          @click=\"exportPDF\"\n          class=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n        >\n          Export PDF\n        </button>\n      </div>\n\n      <!-- Loading -->\n      <div v-if=\"loading\" class=\"text-center py-10\">Loading...</div>\n\n      <!-- Table data -->\n      <div v-else class=\"overflow-x-auto\">\n        <table class=\"min-w-full border border-gray-200\">\n          <thead class=\"bg-gray-100\">\n            <tr>\n              <th class=\"border px-4 py-2 text-left\">Period</th>\n              <th class=\"border px-4 py-2 text-left\">Number of Transactions</th>\n              <th class=\"border px-4 py-2 text-left\">Total Purchase Value</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              v-for=\"item in reportData\"\n              :key=\"item.period\"\n              class=\"hover:bg-gray-50\"\n            >\n              <td class=\"border px-4 py-2\">{{ item.period }}</td>\n              <td class=\"border px-4 py-2\">\n                {{ item.number_of_transactions }}\n              </td>\n              <td class=\"border px-4 py-2\">\n                ${{ item.total_purchase_value.toLocaleString() }}\n              </td>\n            </tr>\n            <tr v-if=\"reportData.length === 0\">\n              <td colspan=\"3\" class=\"text-center py-4\">No data available</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </OwnerLayouts>\n</template>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}