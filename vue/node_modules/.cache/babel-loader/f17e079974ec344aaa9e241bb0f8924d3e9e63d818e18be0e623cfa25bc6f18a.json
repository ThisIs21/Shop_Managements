{"ast":null,"code":"import { ref } from \"vue\";\nimport axios from \"axios\";\nimport OwnerLayout from \"@/layouts/OwnerLayout.vue\"; // biarkan sesuai project\n\nexport default {\n  __name: 'ReportStockOpnameOwners',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const filters = ref({\n      start: \"\",\n      end: \"\"\n    });\n    const reportData = ref([]);\n    const rawResponse = ref(null);\n    const fetchReport = async () => {\n      try {\n        const res = await axios.get(\"http://localhost:8881/api/v1/history/purchases\");\n        rawResponse.value = res.data;\n        reportData.value = Array.isArray(res.data) ? res.data : res.data.data || [];\n      } catch (err) {\n        alert(\"Failed to fetch report data\");\n      }\n    };\n    const exportReport = async type => {\n      try {\n        await axios.get(`http://localhost:8881/api/v1/history/purchases?export=${type}`);\n        alert(`Export to ${type.toUpperCase()} not yet implemented`);\n      } catch (err) {\n        alert(\"Export failed\");\n      }\n    };\n\n    // auto load\n    fetchReport();\n    const __returned__ = {\n      filters,\n      reportData,\n      rawResponse,\n      fetchReport,\n      exportReport,\n      ref,\n      get axios() {\n        return axios;\n      },\n      OwnerLayout\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","axios","OwnerLayout","filters","start","end","reportData","rawResponse","fetchReport","res","get","value","data","Array","isArray","err","alert","exportReport","type","toUpperCase"],"sources":["C:/Users/Personal/Documents/PKL/aplikasi/aplikasi/src/views/ReportStockOpnameOwners.vue"],"sourcesContent":["<template>\n  <OwnerLayout>\n    <div class=\"p-6\">\n      <h1 class=\"text-2xl font-bold mb-4\">Purchase Summary Report</h1>\n\n      <!-- Filter tetap sesuai desain lama -->\n      <div class=\"mb-4 flex gap-2\">\n        <input type=\"date\" v-model=\"filters.start\" class=\"border p-2 rounded\" />\n        <input type=\"date\" v-model=\"filters.end\" class=\"border p-2 rounded\" />\n        <button\n          @click=\"fetchReport\"\n          class=\"bg-blue-500 text-white px-4 py-2 rounded\"\n        >\n          Apply\n        </button>\n      </div>\n\n      <!-- Tombol export -->\n      <div class=\"flex gap-2 mb-4\">\n        <button\n          @click=\"exportReport('csv')\"\n          class=\"bg-green-500 text-white px-4 py-2 rounded\"\n        >\n          Export to CSV\n        </button>\n        <button\n          @click=\"exportReport('pdf')\"\n          class=\"bg-red-500 text-white px-4 py-2 rounded\"\n        >\n          Export to PDF\n        </button>\n      </div>\n\n      <!-- Debug JSON kecil, tidak ganggu desain -->\n      <div\n        v-if=\"rawResponse\"\n        class=\"bg-gray-900 text-green-400 text-sm p-2 mb-4 rounded overflow-x-auto\"\n      >\n        <pre>{{ rawResponse }}</pre>\n      </div>\n\n      <!-- Tabel utama (tetap desain lama) -->\n      <table class=\"w-full border\">\n        <thead class=\"bg-gray-200\">\n          <tr>\n            <th class=\"p-2 border\">Date</th>\n            <th class=\"p-2 border\">Supplier</th>\n            <th class=\"p-2 border\">Product</th>\n            <th class=\"p-2 border\">Quantity</th>\n            <th class=\"p-2 border\">Price</th>\n            <th class=\"p-2 border\">Total</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"item in reportData\" :key=\"item.id\">\n            <td class=\"p-2 border\">{{ item.date || item.tanggal }}</td>\n            <td class=\"p-2 border\">{{ item.supplier }}</td>\n            <td class=\"p-2 border\">{{ item.product }}</td>\n            <td class=\"p-2 border\">{{ item.quantity }}</td>\n            <td class=\"p-2 border\">{{ item.price }}</td>\n            <td class=\"p-2 border\">{{ item.total }}</td>\n          </tr>\n          <tr v-if=\"!reportData.length\">\n            <td colspan=\"6\" class=\"text-center p-2\">No data available.</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </OwnerLayout>\n</template>\n\n<script setup>\nimport { ref } from \"vue\";\nimport axios from \"axios\";\nimport OwnerLayout from \"@/layouts/OwnerLayout.vue\"; // biarkan sesuai project\n\nconst filters = ref({ start: \"\", end: \"\" });\nconst reportData = ref([]);\nconst rawResponse = ref(null);\n\nconst fetchReport = async () => {\n  try {\n    const res = await axios.get(\n      \"http://localhost:8881/api/v1/history/purchases\"\n    );\n    rawResponse.value = res.data;\n    reportData.value = Array.isArray(res.data) ? res.data : res.data.data || [];\n  } catch (err) {\n    alert(\"Failed to fetch report data\");\n  }\n};\n\nconst exportReport = async (type) => {\n  try {\n    await axios.get(\n      `http://localhost:8881/api/v1/history/purchases?export=${type}`\n    );\n    alert(`Export to ${type.toUpperCase()} not yet implemented`);\n  } catch (err) {\n    alert(\"Export failed\");\n  }\n};\n\n// auto load\nfetchReport();\n</script>\n"],"mappings":"AAwEA,SAASA,GAAG,QAAQ,KAAK;AACzB,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,WAAW,MAAM,2BAA2B,CAAC,CAAC;;;;;;;;IAErD,MAAMC,OAAO,GAAGH,GAAG,CAAC;MAAEI,KAAK,EAAE,EAAE;MAAEC,GAAG,EAAE;IAAG,CAAC,CAAC;IAC3C,MAAMC,UAAU,GAAGN,GAAG,CAAC,EAAE,CAAC;IAC1B,MAAMO,WAAW,GAAGP,GAAG,CAAC,IAAI,CAAC;IAE7B,MAAMQ,WAAW,GAAG,MAAAA,CAAA,KAAY;MAC9B,IAAI;QACF,MAAMC,GAAG,GAAG,MAAMR,KAAK,CAACS,GAAG,CACzB,gDACF,CAAC;QACDH,WAAW,CAACI,KAAK,GAAGF,GAAG,CAACG,IAAI;QAC5BN,UAAU,CAACK,KAAK,GAAGE,KAAK,CAACC,OAAO,CAACL,GAAG,CAACG,IAAI,CAAC,GAAGH,GAAG,CAACG,IAAI,GAAGH,GAAG,CAACG,IAAI,CAACA,IAAI,IAAI,EAAE;MAC7E,CAAC,CAAC,OAAOG,GAAG,EAAE;QACZC,KAAK,CAAC,6BAA6B,CAAC;MACtC;IACF,CAAC;IAED,MAAMC,YAAY,GAAG,MAAOC,IAAI,IAAK;MACnC,IAAI;QACF,MAAMjB,KAAK,CAACS,GAAG,CACb,yDAAyDQ,IAAI,EAC/D,CAAC;QACDF,KAAK,CAAC,aAAaE,IAAI,CAACC,WAAW,CAAC,CAAC,sBAAsB,CAAC;MAC9D,CAAC,CAAC,OAAOJ,GAAG,EAAE;QACZC,KAAK,CAAC,eAAe,CAAC;MACxB;IACF,CAAC;;IAED;IACAR,WAAW,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}