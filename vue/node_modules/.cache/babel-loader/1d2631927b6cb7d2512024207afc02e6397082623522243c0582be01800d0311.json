{"ast":null,"code":"import { ref, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport KepalaGudangSidebar from \"@/components/KepalaGudangSidebar.vue\";\nexport default {\n  __name: 'PurchaseReturnKepalaGudang',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const purchaseReturns = ref([]);\n    const token = localStorage.getItem(\"token\"); // JWT yang didapat setelah login\n\n    // Ambil data retur dari backend\n    const fetchPurchaseReturns = async () => {\n      try {\n        const res = await axios.get(\"http://localhost:8081/api/v1/history/purchase-returns\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        purchaseReturns.value = res.data.data || []; // sesuaikan struktur respons\n      } catch (err) {\n        console.error(\"Gagal fetch data retur:\", err);\n      }\n    };\n\n    // Approve retur\n    const approveReturn = async id => {\n      try {\n        await axios.post(`http://localhost:8081/api/v1/kepala-gudang/purchase-returns/${id}/approve`, {}, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        fetchPurchaseReturns(); // refresh data\n      } catch (err) {\n        console.error(\"Gagal approve:\", err);\n      }\n    };\n\n    // Reject retur\n    const rejectReturn = async id => {\n      try {\n        await axios.post(`http://localhost:8081/api/v1/kepala-gudang/purchase-returns/${id}/reject`, {}, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        fetchPurchaseReturns();\n      } catch (err) {\n        console.error(\"Gagal reject:\", err);\n      }\n    };\n    onMounted(fetchPurchaseReturns);\n    const __returned__ = {\n      purchaseReturns,\n      token,\n      fetchPurchaseReturns,\n      approveReturn,\n      rejectReturn,\n      ref,\n      onMounted,\n      get axios() {\n        return axios;\n      },\n      KepalaGudangSidebar\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","axios","KepalaGudangSidebar","purchaseReturns","token","localStorage","getItem","fetchPurchaseReturns","res","get","headers","Authorization","value","data","err","console","error","approveReturn","id","post","rejectReturn"],"sources":["C:/Users/Personal/Documents/PKL/aplikasi/aplikasi/src/views/PurchaseReturnKepalaGudang.vue"],"sourcesContent":["<script setup>\nimport { ref, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport KepalaGudangSidebar from \"@/components/KepalaGudangSidebar.vue\";\n\nconst purchaseReturns = ref([]);\nconst token = localStorage.getItem(\"token\"); // JWT yang didapat setelah login\n\n// Ambil data retur dari backend\nconst fetchPurchaseReturns = async () => {\n  try {\n    const res = await axios.get(\n      \"http://localhost:8081/api/v1/history/purchase-returns\",\n      {\n        headers: { Authorization: `Bearer ${token}` },\n      }\n    );\n    purchaseReturns.value = res.data.data || []; // sesuaikan struktur respons\n  } catch (err) {\n    console.error(\"Gagal fetch data retur:\", err);\n  }\n};\n\n// Approve retur\nconst approveReturn = async (id) => {\n  try {\n    await axios.post(\n      `http://localhost:8081/api/v1/kepala-gudang/purchase-returns/${id}/approve`,\n      {},\n      { headers: { Authorization: `Bearer ${token}` } }\n    );\n    fetchPurchaseReturns(); // refresh data\n  } catch (err) {\n    console.error(\"Gagal approve:\", err);\n  }\n};\n\n// Reject retur\nconst rejectReturn = async (id) => {\n  try {\n    await axios.post(\n      `http://localhost:8081/api/v1/kepala-gudang/purchase-returns/${id}/reject`,\n      {},\n      { headers: { Authorization: `Bearer ${token}` } }\n    );\n    fetchPurchaseReturns();\n  } catch (err) {\n    console.error(\"Gagal reject:\", err);\n  }\n};\n\nonMounted(fetchPurchaseReturns);\n</script>\n\n<template>\n  <div\n    class=\"flex size-full min-h-screen flex-col bg-white font-manrope lg:flex-row\"\n  >\n    <KepalaGudangSidebar />\n\n    <div class=\"flex flex-1 flex-col\">\n      <main class=\"flex-1 p-8\">\n        <div class=\"layout-content-container flex flex-col flex-1\">\n          <div class=\"mb-6\">\n            <p class=\"text-[#111418] text-[32px] font-bold\">\n              Purchase Return Requests\n            </p>\n            <p class=\"text-[#60758a] text-sm\">\n              Review and approve or reject purchase return requests.\n            </p>\n          </div>\n\n          <div class=\"px-4 py-3\">\n            <div\n              class=\"flex overflow-hidden rounded-lg border border-[#dbe0e6] bg-white\"\n            >\n              <table class=\"flex-1\">\n                <thead>\n                  <tr>\n                    <th class=\"px-4 py-3 text-left\">Return Number</th>\n                    <th class=\"px-4 py-3 text-left\">Supplier</th>\n                    <th class=\"px-4 py-3 text-left\">Product</th>\n                    <th class=\"px-4 py-3 text-left\">Reason</th>\n                    <th class=\"px-4 py-3 text-left\">Status</th>\n                    <th class=\"px-4 py-3 text-left\">Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr\n                    v-for=\"item in purchaseReturns\"\n                    :key=\"item.id\"\n                    class=\"border-t\"\n                  >\n                    <td class=\"px-4 py-2\">{{ item.return_number }}</td>\n                    <td class=\"px-4 py-2\">{{ item.supplier?.name }}</td>\n                    <td class=\"px-4 py-2\">{{ item.product?.name }}</td>\n                    <td class=\"px-4 py-2\">{{ item.reason }}</td>\n                    <td class=\"px-4 py-2\">\n                      <span\n                        :class=\"{\n                          'bg-yellow-100 text-yellow-800 px-2 py-1 rounded':\n                            item.status === 'PENDING',\n                          'bg-green-100 text-green-800 px-2 py-1 rounded':\n                            item.status === 'APPROVED',\n                          'bg-red-100 text-red-800 px-2 py-1 rounded':\n                            item.status === 'REJECTED',\n                        }\"\n                      >\n                        {{ item.status }}\n                      </span>\n                    </td>\n                    <td class=\"px-4 py-2 space-x-2\">\n                      <button\n                        class=\"bg-green-500 text-white px-3 py-1 rounded\"\n                        @click=\"approveReturn(item.id)\"\n                        :disabled=\"item.status !== 'PENDING'\"\n                      >\n                        Approve\n                      </button>\n                      <button\n                        class=\"bg-red-500 text-white px-3 py-1 rounded\"\n                        @click=\"rejectReturn(item.id)\"\n                        :disabled=\"item.status !== 'PENDING'\"\n                      >\n                        Reject\n                      </button>\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  </div>\n</template>\n"],"mappings":"AACA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,mBAAmB,MAAM,sCAAsC;;;;;;;IAEtE,MAAMC,eAAe,GAAGJ,GAAG,CAAC,EAAE,CAAC;IAC/B,MAAMK,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;;IAE7C;IACA,MAAMC,oBAAoB,GAAG,MAAAA,CAAA,KAAY;MACvC,IAAI;QACF,MAAMC,GAAG,GAAG,MAAMP,KAAK,CAACQ,GAAG,CACzB,uDAAuD,EACvD;UACEC,OAAO,EAAE;YAAEC,aAAa,EAAE,UAAUP,KAAK;UAAG;QAC9C,CACF,CAAC;QACDD,eAAe,CAACS,KAAK,GAAGJ,GAAG,CAACK,IAAI,CAACA,IAAI,IAAI,EAAE,CAAC,CAAC;MAC/C,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAAC,yBAAyB,EAAEF,GAAG,CAAC;MAC/C;IACF,CAAC;;IAED;IACA,MAAMG,aAAa,GAAG,MAAOC,EAAE,IAAK;MAClC,IAAI;QACF,MAAMjB,KAAK,CAACkB,IAAI,CACd,+DAA+DD,EAAE,UAAU,EAC3E,CAAC,CAAC,EACF;UAAER,OAAO,EAAE;YAAEC,aAAa,EAAE,UAAUP,KAAK;UAAG;QAAE,CAClD,CAAC;QACDG,oBAAoB,CAAC,CAAC,CAAC,CAAC;MAC1B,CAAC,CAAC,OAAOO,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAAC,gBAAgB,EAAEF,GAAG,CAAC;MACtC;IACF,CAAC;;IAED;IACA,MAAMM,YAAY,GAAG,MAAOF,EAAE,IAAK;MACjC,IAAI;QACF,MAAMjB,KAAK,CAACkB,IAAI,CACd,+DAA+DD,EAAE,SAAS,EAC1E,CAAC,CAAC,EACF;UAAER,OAAO,EAAE;YAAEC,aAAa,EAAE,UAAUP,KAAK;UAAG;QAAE,CAClD,CAAC;QACDG,oBAAoB,CAAC,CAAC;MACxB,CAAC,CAAC,OAAOO,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAAC,eAAe,EAAEF,GAAG,CAAC;MACrC;IACF,CAAC;IAEDd,SAAS,CAACO,oBAAoB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}