{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"p-4\"\n};\nconst _hoisted_2 = {\n  class: \"flex gap-4 mb-4\"\n};\nconst _hoisted_3 = {\n  class: \"w-full border-collapse border border-gray-300\"\n};\nconst _hoisted_4 = {\n  class: \"border px-2 py-1\"\n};\nconst _hoisted_5 = {\n  class: \"border px-2 py-1\"\n};\nconst _hoisted_6 = {\n  class: \"border px-2 py-1\"\n};\nconst _hoisted_7 = {\n  class: \"border px-2 py-1\"\n};\nconst _hoisted_8 = {\n  class: \"border px-2 py-1\"\n};\nconst _hoisted_9 = {\n  key: 0\n};\nconst _hoisted_10 = {\n  class: \"flex justify-between mt-4\"\n};\nconst _hoisted_11 = [\"disabled\"];\nconst _hoisted_12 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[5] || (_cache[5] = _createElementVNode(\"h2\", {\n    class: \"text-xl font-bold mb-4\"\n  }, \"Stock Opnames\", -1 /* CACHED */)), _createCommentVNode(\" FILTER \"), _createElementVNode(\"div\", _hoisted_2, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"date\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.filters.startDate = $event),\n    class: \"border p-2 rounded\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.filters.startDate]]), _withDirectives(_createElementVNode(\"input\", {\n    type: \"date\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.filters.endDate = $event),\n    class: \"border p-2 rounded\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.filters.endDate]]), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.filters.search = $event),\n    placeholder: \"Search user\",\n    class: \"border p-2 rounded\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.filters.search]]), _createElementVNode(\"button\", {\n    onClick: $setup.fetchStockOpnames,\n    class: \"bg-blue-500 text-white px-4 py-2 rounded\"\n  }, \" Filter \")]), _createCommentVNode(\" TABLE \"), _createElementVNode(\"table\", _hoisted_3, [_cache[4] || (_cache[4] = _createElementVNode(\"thead\", {\n    class: \"bg-gray-200\"\n  }, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", {\n    class: \"border px-2 py-1\"\n  }, \"ID\"), _createElementVNode(\"th\", {\n    class: \"border px-2 py-1\"\n  }, \"User\"), _createElementVNode(\"th\", {\n    class: \"border px-2 py-1\"\n  }, \"Date\"), _createElementVNode(\"th\", {\n    class: \"border px-2 py-1\"\n  }, \"Note\"), _createElementVNode(\"th\", {\n    class: \"border px-2 py-1\"\n  }, \"Items\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.stockOpnames, opname => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: opname.ID,\n      class: \"hover:bg-gray-100\"\n    }, [_createElementVNode(\"td\", _hoisted_4, _toDisplayString(opname.ID), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_5, _toDisplayString(opname.User?.Name || \"-\"), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_6, _toDisplayString($setup.formatDate(opname.Date)), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_7, _toDisplayString(opname.Note), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_8, [_createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(opname.Items, item => {\n      return _openBlock(), _createElementBlock(\"li\", {\n        key: item.ID\n      }, _toDisplayString(item.Product?.Name || \"Unknown\") + \": \" + _toDisplayString(item.QtySystem) + \" → \" + _toDisplayString(item.QtyPhysical), 1 /* TEXT */);\n    }), 128 /* KEYED_FRAGMENT */))])])]);\n  }), 128 /* KEYED_FRAGMENT */)), $setup.stockOpnames.length === 0 ? (_openBlock(), _createElementBlock(\"tr\", _hoisted_9, [...(_cache[3] || (_cache[3] = [_createElementVNode(\"td\", {\n    class: \"border px-2 py-1 text-center\",\n    colspan: \"5\"\n  }, \"No data\", -1 /* CACHED */)]))])) : _createCommentVNode(\"v-if\", true)])]), _createCommentVNode(\" PAGINATION \"), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"button\", {\n    onClick: $setup.prevPage,\n    disabled: $setup.page === 1,\n    class: \"px-3 py-1 border rounded\"\n  }, \" Prev \", 8 /* PROPS */, _hoisted_11), _createElementVNode(\"span\", null, \"Page \" + _toDisplayString($setup.page) + \" of \" + _toDisplayString($setup.totalPages), 1 /* TEXT */), _createElementVNode(\"button\", {\n    onClick: $setup.nextPage,\n    disabled: $setup.page >= $setup.totalPages,\n    class: \"px-3 py-1 border rounded\"\n  }, \" Next \", 8 /* PROPS */, _hoisted_12)])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_createCommentVNode","_hoisted_2","type","$setup","filters","startDate","$event","endDate","search","placeholder","onClick","fetchStockOpnames","_hoisted_3","_Fragment","_renderList","stockOpnames","opname","key","ID","_hoisted_4","_toDisplayString","_hoisted_5","User","Name","_hoisted_6","formatDate","Date","_hoisted_7","Note","_hoisted_8","Items","item","Product","QtySystem","QtyPhysical","length","_hoisted_9","_cache","colspan","_hoisted_10","prevPage","disabled","page","_hoisted_11","totalPages","nextPage","_hoisted_12"],"sources":["C:\\Users\\Personal\\Documents\\PKL\\aplikasi\\aplikasi\\src\\views\\ReportStockOpnameOwners.vue"],"sourcesContent":["<template>\n  <div class=\"p-4\">\n    <h2 class=\"text-xl font-bold mb-4\">Stock Opnames</h2>\n\n    <!-- FILTER -->\n    <div class=\"flex gap-4 mb-4\">\n      <input\n        type=\"date\"\n        v-model=\"filters.startDate\"\n        class=\"border p-2 rounded\"\n      />\n      <input type=\"date\" v-model=\"filters.endDate\" class=\"border p-2 rounded\" />\n      <input\n        type=\"text\"\n        v-model=\"filters.search\"\n        placeholder=\"Search user\"\n        class=\"border p-2 rounded\"\n      />\n      <button\n        @click=\"fetchStockOpnames\"\n        class=\"bg-blue-500 text-white px-4 py-2 rounded\"\n      >\n        Filter\n      </button>\n    </div>\n\n    <!-- TABLE -->\n    <table class=\"w-full border-collapse border border-gray-300\">\n      <thead class=\"bg-gray-200\">\n        <tr>\n          <th class=\"border px-2 py-1\">ID</th>\n          <th class=\"border px-2 py-1\">User</th>\n          <th class=\"border px-2 py-1\">Date</th>\n          <th class=\"border px-2 py-1\">Note</th>\n          <th class=\"border px-2 py-1\">Items</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr\n          v-for=\"opname in stockOpnames\"\n          :key=\"opname.ID\"\n          class=\"hover:bg-gray-100\"\n        >\n          <td class=\"border px-2 py-1\">{{ opname.ID }}</td>\n          <td class=\"border px-2 py-1\">{{ opname.User?.Name || \"-\" }}</td>\n          <td class=\"border px-2 py-1\">{{ formatDate(opname.Date) }}</td>\n          <td class=\"border px-2 py-1\">{{ opname.Note }}</td>\n          <td class=\"border px-2 py-1\">\n            <ul>\n              <li v-for=\"item in opname.Items\" :key=\"item.ID\">\n                {{ item.Product?.Name || \"Unknown\" }}: {{ item.QtySystem }} →\n                {{ item.QtyPhysical }}\n              </li>\n            </ul>\n          </td>\n        </tr>\n        <tr v-if=\"stockOpnames.length === 0\">\n          <td class=\"border px-2 py-1 text-center\" colspan=\"5\">No data</td>\n        </tr>\n      </tbody>\n    </table>\n\n    <!-- PAGINATION -->\n    <div class=\"flex justify-between mt-4\">\n      <button\n        @click=\"prevPage\"\n        :disabled=\"page === 1\"\n        class=\"px-3 py-1 border rounded\"\n      >\n        Prev\n      </button>\n      <span>Page {{ page }} of {{ totalPages }}</span>\n      <button\n        @click=\"nextPage\"\n        :disabled=\"page >= totalPages\"\n        class=\"px-3 py-1 border rounded\"\n      >\n        Next\n      </button>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from \"vue\";\nimport axios from \"axios\";\n\n// STATE\nconst stockOpnames = ref([]);\nconst page = ref(1);\nconst size = ref(10);\nconst total = ref(0);\nconst filters = ref({ startDate: \"\", endDate: \"\", search: \"\" });\n\n// COMPUTED\nconst totalPages = computed(() => Math.ceil(total.value / size.value));\n\n// FUNCTION: fetch data dari backend\nasync function fetchStockOpnames() {\n  try {\n    const params = {\n      page: page.value,\n      size: size.value,\n      q: filters.value.search,\n      start_date: filters.value.startDate,\n      end_date: filters.value.endDate,\n    };\n    const res = await axios.get(\n      \"http://localhost:8081/api/v1/history/stock-opnames\",\n      { params }\n    );\n    stockOpnames.value = res.data.data;\n    total.value = res.data.total;\n  } catch (err) {\n    console.error(\"Gagal ambil data:\", err);\n    stockOpnames.value = []; // fallback kosong\n  }\n}\n\n// FUNCTION: pagination\nfunction nextPage() {\n  if (page.value < totalPages.value) {\n    page.value++;\n    fetchStockOpnames();\n  }\n}\nfunction prevPage() {\n  if (page.value > 1) {\n    page.value--;\n    fetchStockOpnames();\n  }\n}\n\n// FUNCTION: format tanggal\nfunction formatDate(dt) {\n  if (!dt) return \"-\";\n  const d = new Date(dt);\n  return d.toLocaleDateString();\n}\n\n// FETCH saat mounted\nonMounted(() => {\n  fetchStockOpnames();\n});\n</script>\n\n<style scoped>\ntable th,\ntable td {\n  text-align: left;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}