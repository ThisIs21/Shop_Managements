{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"flex flex-col p-8 max-w-4xl mx-auto\"\n};\nconst _hoisted_2 = {\n  class: \"mb-4\"\n};\nconst _hoisted_3 = [\"onUpdate:modelValue\", \"onChange\"];\nconst _hoisted_4 = [\"value\"];\nconst _hoisted_5 = [\"onUpdate:modelValue\"];\nconst _hoisted_6 = [\"onUpdate:modelValue\"];\nconst _hoisted_7 = {\n  class: \"w-28 p-2 text-right\"\n};\nconst _hoisted_8 = [\"onClick\"];\nconst _hoisted_9 = {\n  class: \"space-y-2 border-t pt-4\"\n};\nconst _hoisted_10 = {\n  class: \"flex justify-between\"\n};\nconst _hoisted_11 = {\n  class: \"flex justify-between\"\n};\nconst _hoisted_12 = {\n  class: \"flex justify-between font-bold\"\n};\nconst _hoisted_13 = {\n  class: \"mt-4\"\n};\nconst _hoisted_14 = {\n  class: \"mt-2 text-lg\"\n};\nconst _hoisted_15 = {\n  class: \"font-bold\"\n};\nconst _hoisted_16 = {\n  class: \"flex gap-4 mt-6\"\n};\nexport function render(_ctx, _cache) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[12] || (_cache[12] = _createElementVNode(\"h2\", {\n    class: \"text-2xl font-bold text-center mb-6\"\n  }, \"Kasir - Input Transaksi\", -1 /* CACHED */)), _createCommentVNode(\" Nama Pelanggan \"), _createElementVNode(\"div\", _hoisted_2, [_cache[5] || (_cache[5] = _createElementVNode(\"label\", {\n    class: \"block font-medium mb-1\"\n  }, \"Nama Pelanggan\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _ctx.customerName = $event),\n    type: \"text\",\n    placeholder: \"Masukkan nama pelanggan\",\n    class: \"w-full border rounded p-2\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.customerName]])]), _createCommentVNode(\" Produk \"), _cache[13] || (_cache[13] = _createElementVNode(\"h3\", {\n    class: \"font-semibold text-lg mb-2\"\n  }, \"Daftar Produk\", -1 /* CACHED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.items, (item, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index,\n      class: \"flex gap-2 mb-3\"\n    }, [_createCommentVNode(\" Nama Produk \"), _withDirectives(_createElementVNode(\"select\", {\n      \"onUpdate:modelValue\": $event => item.productId = $event,\n      onChange: $event => _ctx.updatePrice(index),\n      class: \"flex-1 border rounded p-2\"\n    }, [_cache[6] || (_cache[6] = _createElementVNode(\"option\", {\n      disabled: \"\",\n      value: \"\"\n    }, \"Pilih Produk\", -1 /* CACHED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.products, p => {\n      return _openBlock(), _createElementBlock(\"option\", {\n        key: p.id,\n        value: p.id\n      }, _toDisplayString(p.name), 9 /* TEXT, PROPS */, _hoisted_4);\n    }), 128 /* KEYED_FRAGMENT */))], 40 /* PROPS, NEED_HYDRATION */, _hoisted_3), [[_vModelSelect, item.productId]]), _createCommentVNode(\" Qty \"), _withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": $event => item.qty = $event,\n      type: \"number\",\n      min: \"1\",\n      placeholder: \"Qty\",\n      class: \"w-20 border rounded p-2\"\n    }, null, 8 /* PROPS */, _hoisted_5), [[_vModelText, item.qty, void 0, {\n      number: true\n    }]]), _createCommentVNode(\" Harga \"), _withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": $event => item.price = $event,\n      type: \"number\",\n      readonly: \"\",\n      class: \"w-28 border rounded p-2 bg-gray-100\"\n    }, null, 8 /* PROPS */, _hoisted_6), [[_vModelText, item.price, void 0, {\n      number: true\n    }]]), _createCommentVNode(\" Subtotal \"), _createElementVNode(\"span\", _hoisted_7, _toDisplayString(_ctx.formatCurrency(item.qty * item.price)), 1 /* TEXT */), _createCommentVNode(\" Hapus Produk \"), _createElementVNode(\"button\", {\n      onClick: $event => _ctx.removeItem(index),\n      class: \"px-3 bg-red-500 text-white rounded\"\n    }, \"X\", 8 /* PROPS */, _hoisted_8)]);\n  }), 128 /* KEYED_FRAGMENT */)), _createCommentVNode(\" Tambah Produk \"), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => _ctx.addItem && _ctx.addItem(...args)),\n    class: \"mb-6 px-4 py-2 bg-green-500 text-white rounded\"\n  }, \"+ Tambah Produk\"), _createCommentVNode(\" Ringkasan \"), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, [_cache[7] || (_cache[7] = _createElementVNode(\"span\", null, \"Subtotal\", -1 /* CACHED */)), _createElementVNode(\"span\", null, _toDisplayString(_ctx.formatCurrency(_ctx.subtotal)), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_11, [_cache[8] || (_cache[8] = _createElementVNode(\"span\", null, \"Diskon\", -1 /* CACHED */)), _createElementVNode(\"span\", null, \"-\" + _toDisplayString(_ctx.formatCurrency(_ctx.discount)), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_12, [_cache[9] || (_cache[9] = _createElementVNode(\"span\", null, \"Total\", -1 /* CACHED */)), _createElementVNode(\"span\", null, _toDisplayString(_ctx.formatCurrency(_ctx.total)), 1 /* TEXT */)])]), _createCommentVNode(\" Uang Dibayarkan \"), _createElementVNode(\"div\", _hoisted_13, [_cache[10] || (_cache[10] = _createElementVNode(\"label\", {\n    class: \"block font-medium mb-1\"\n  }, \"Uang Dibayarkan\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => _ctx.amountReceived = $event),\n    type: \"number\",\n    placeholder: \"Masukkan uang dibayar\",\n    class: \"w-full border rounded p-2\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.amountReceived, void 0, {\n    number: true\n  }]])]), _createCommentVNode(\" Kembalian \"), _createElementVNode(\"p\", _hoisted_14, [_cache[11] || (_cache[11] = _createTextVNode(\" Kembalian: \", -1 /* CACHED */)), _createElementVNode(\"span\", _hoisted_15, _toDisplayString(_ctx.formatCurrency(_ctx.change)), 1 /* TEXT */)]), _createCommentVNode(\" Tombol \"), _createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"button\", {\n    onClick: _cache[3] || (_cache[3] = (...args) => _ctx.handlePayNow && _ctx.handlePayNow(...args)),\n    class: \"flex-1 py-3 bg-blue-600 text-white rounded\"\n  }, \"Bayar\"), _createElementVNode(\"button\", {\n    onClick: _cache[4] || (_cache[4] = (...args) => _ctx.handlePrintReceipt && _ctx.handlePrintReceipt(...args)),\n    class: \"flex-1 py-3 bg-gray-200 text-black rounded\"\n  }, \"Cetak Struk\")])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_createCommentVNode","_hoisted_2","_ctx","customerName","$event","type","placeholder","_Fragment","_renderList","items","item","index","key","productId","onChange","updatePrice","disabled","value","products","p","id","name","_hoisted_4","qty","min","number","price","readonly","_hoisted_7","_toDisplayString","formatCurrency","onClick","removeItem","_hoisted_8","_cache","args","addItem","_hoisted_9","_hoisted_10","subtotal","_hoisted_11","discount","_hoisted_12","total","_hoisted_13","amountReceived","_hoisted_14","_hoisted_15","change","_hoisted_16","handlePayNow","handlePrintReceipt"],"sources":["C:\\Users\\SPC STYLE 5\\aplikasi\\src\\views\\CashierPage.vue"],"sourcesContent":["<template>\n  <div class=\"flex flex-col p-8 max-w-4xl mx-auto\">\n    <h2 class=\"text-2xl font-bold text-center mb-6\">Kasir - Input Transaksi</h2>\n\n    <!-- Nama Pelanggan -->\n    <div class=\"mb-4\">\n      <label class=\"block font-medium mb-1\">Nama Pelanggan</label>\n      <input v-model=\"customerName\" type=\"text\" placeholder=\"Masukkan nama pelanggan\"\n        class=\"w-full border rounded p-2\" />\n    </div>\n\n    <!-- Produk -->\n    <h3 class=\"font-semibold text-lg mb-2\">Daftar Produk</h3>\n    <div v-for=\"(item, index) in items\" :key=\"index\" class=\"flex gap-2 mb-3\">\n      <!-- Nama Produk -->\n      <select v-model=\"item.productId\" @change=\"updatePrice(index)\" class=\"flex-1 border rounded p-2\">\n        <option disabled value=\"\">Pilih Produk</option>\n        <option v-for=\"p in products\" :key=\"p.id\" :value=\"p.id\">\n          {{ p.name }}\n        </option>\n      </select>\n\n      <!-- Qty -->\n      <input v-model.number=\"item.qty\" type=\"number\" min=\"1\" placeholder=\"Qty\"\n        class=\"w-20 border rounded p-2\" />\n\n      <!-- Harga -->\n      <input v-model.number=\"item.price\" type=\"number\" readonly class=\"w-28 border rounded p-2 bg-gray-100\" />\n\n      <!-- Subtotal -->\n      <span class=\"w-28 p-2 text-right\">{{ formatCurrency(item.qty * item.price) }}</span>\n\n      <!-- Hapus Produk -->\n      <button @click=\"removeItem(index)\" class=\"px-3 bg-red-500 text-white rounded\">X</button>\n    </div>\n\n    <!-- Tambah Produk -->\n    <button @click=\"addItem\" class=\"mb-6 px-4 py-2 bg-green-500 text-white rounded\">+ Tambah Produk</button>\n\n    <!-- Ringkasan -->\n    <div class=\"space-y-2 border-t pt-4\">\n      <div class=\"flex justify-between\"><span>Subtotal</span><span>{{ formatCurrency(subtotal) }}</span></div>\n      <div class=\"flex justify-between\"><span>Diskon</span><span>-{{ formatCurrency(discount) }}</span></div>\n      <div class=\"flex justify-between font-bold\"><span>Total</span><span>{{ formatCurrency(total) }}</span></div>\n    </div>\n\n    <!-- Uang Dibayarkan -->\n    <div class=\"mt-4\">\n      <label class=\"block font-medium mb-1\">Uang Dibayarkan</label>\n      <input v-model.number=\"amountReceived\" type=\"number\" placeholder=\"Masukkan uang dibayar\"\n        class=\"w-full border rounded p-2\" />\n    </div>\n\n    <!-- Kembalian -->\n    <p class=\"mt-2 text-lg\">\n      Kembalian: <span class=\"font-bold\">{{ formatCurrency(change) }}</span>\n    </p>\n\n    <!-- Tombol -->\n    <div class=\"flex gap-4 mt-6\">\n      <button @click=\"handlePayNow\" class=\"flex-1 py-3 bg-blue-600 text-white rounded\">Bayar</button>\n      <button @click=\"handlePrintReceipt\" class=\"flex-1 py-3 bg-gray-200 text-black rounded\">Cetak Struk</button>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from \"vue\";\nimport axios from \"axios\";\n\n// ðŸ”¹ data produk biasanya dari API, di sini contoh dummy\nconst products = ref([\n  { id: 1, name: \"Produk A\", price: 50000 },\n  { id: 2, name: \"Produk B\", price: 30000 },\n  { id: 3, name: \"Produk C\", price: 20000 },\n]);\n\nconst customerName = ref(\"\");\nconst items = ref([{ productId: \"\", qty: 1, price: 0 }]);\nconst discount = ref(0);\nconst amountReceived = ref(0);\n\nconst subtotal = computed(() =>\n  items.value.reduce((sum, i) => sum + i.qty * i.price, 0)\n);\nconst total = computed(() => subtotal.value - discount.value);\nconst change = computed(() =>\n  amountReceived.value >= total.value ? amountReceived.value - total.value : 0\n);\n\nconst formatCurrency = (val) =>\n  \"Rp \" + (val || 0).toLocaleString(\"id-ID\");\n\n// fungsi tambah & hapus item\nconst addItem = () => items.value.push({ productId: \"\", qty: 1, price: 0 });\nconst removeItem = (i) => items.value.splice(i, 1);\n\n// update harga otomatis\nconst updatePrice = (index) => {\n  const product = products.value.find((p) => p.id === items.value[index].productId);\n  if (product) items.value[index].price = product.price;\n};\n\n// bayar\nconst handlePayNow = async () => {\n  try {\n    const token = localStorage.getItem(\"token\");\n    const response = await axios.post(\n      \"http://localhost:8081/api/v1/sales\",\n      {\n        customer_name: customerName.value,\n        date: new Date().toISOString(),\n        items: items.value.map((i) => ({\n          product_id: i.productId,\n          qty: i.qty,\n          price: i.price,\n        })),\n      },\n      { headers: { Authorization: Bearer ${token} } }\n    );\n    alert(\"Pembayaran berhasil! ID Transaksi: \" + response.data.data.id);\n  } catch (err) {\n    alert(\"Gagal melakukan pembayaran: \" + (err.response?.data?.message || err.message));\n  }\n};\n\nconst handlePrintReceipt = () => {\n  alert(\"Cetak struk...\");\n};\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}