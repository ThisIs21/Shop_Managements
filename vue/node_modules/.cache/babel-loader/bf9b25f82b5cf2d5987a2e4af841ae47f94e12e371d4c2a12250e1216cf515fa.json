{"ast":null,"code":"import { ref, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport KepalaGudangSidebar from \"@/components/KepalaGudangSidebar.vue\"; // Sesuaikan path\n\n// URL Base API (Penting: Ganti dengan variabel lingkungan jika ada)\nconst API_BASE = \"http://localhost:8081/api/v1\";\n\n// State\n\nexport default {\n  __name: 'PurchaseOrderKepalaGudang',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const purchases = ref([]);\n    const loading = ref(false);\n    const showApprovalModal = ref(false);\n    const showRejectModal = ref(false);\n    const showDetailsModal = ref(false);\n    const selectedPurchaseId = ref(null);\n    const selectedPurchase = ref(null);\n    const rejectReason = ref(\"\");\n    const approving = ref(false);\n    const rejecting = ref(false);\n    const token = localStorage.getItem(\"token\");\n    const role = localStorage.getItem(\"userRole\") || \"KEPALA_GUDANG\";\n\n    // --- Helper Functions ---\n\n    // Format PO number\n    const formatPONumber = id => {\n      // Asumsi PO Number adalah PO- diikuti ID yang dipad 3 digit\n      return `PO-${String(id).padStart(3, \"0\")}`;\n    };\n\n    // Format tanggal\n    const formatDate = dateStr => {\n      if (!dateStr) return \"-\";\n      // Menghapus Z untuk menghindari masalah zona waktu lokal\n      const date = new Date(dateStr.endsWith(\"Z\") ? dateStr : dateStr + \"Z\");\n      return date.toLocaleDateString(\"id-ID\", {\n        day: \"2-digit\",\n        month: \"short\",\n        year: \"numeric\"\n      });\n    };\n\n    // Format mata uang\n    const formatCurrency = val => {\n      if (val === null || val === undefined) return \"-\";\n      return new Intl.NumberFormat(\"id-ID\", {\n        style: \"currency\",\n        currency: \"IDR\",\n        minimumFractionDigits: 0\n      }).format(val);\n    };\n\n    // Format status\n    const getStatusText = status => {\n      switch (status) {\n        case \"SUBMITTED\":\n          return \"Submitted\";\n        case \"APPROVED\":\n          return \"Approved\";\n        case \"REJECTED\":\n          return \"Rejected\";\n        case \"DRAFT\":\n          return \"Draft\";\n        default:\n          return status || \"-\";\n      }\n    };\n\n    // Get status class\n    const getStatusClass = status => {\n      switch (status) {\n        case \"SUBMITTED\":\n          return \"bg-yellow-200 text-yellow-800\";\n        case \"APPROVED\":\n          return \"bg-green-200 text-green-800\";\n        case \"REJECTED\":\n          return \"bg-red-200 text-red-800\";\n        case \"DRAFT\":\n          return \"bg-gray-200 text-gray-800\";\n        default:\n          return \"bg-gray-200 text-gray-800\";\n      }\n    };\n\n    // --- API Calls ---\n\n    // Fetch purchases (default to SUBMITTED status)\n    const fetchPurchases = async (status = \"SUBMITTED\") => {\n      if (!token) {\n        alert(\"No token found. Please log in again.\");\n        return;\n      }\n      if (role !== \"KEPALA_GUDANG\") {\n        alert(\"Access denied: This page requires KEPALA_GUDANG role.\");\n        return;\n      }\n      loading.value = true;\n      try {\n        const res = await axios.get(`${API_BASE}/kepala-gudang/purchases`, {\n          params: {\n            page: 1,\n            size: 20,\n            q: \"\",\n            status\n          },\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        // Sesuaikan dengan struktur API Anda. Asumsi res.data.data.data adalah array PO.\n        purchases.value = res.data.data?.data || [];\n      } catch (err) {\n        console.error(\"Failed to fetch purchases:\", err);\n        const message = err.response?.data?.error || err.message || \"Network error\";\n        alert(`Failed to fetch purchases: ${message}`);\n        purchases.value = []; // Reset to empty array on error\n      } finally {\n        loading.value = false;\n      }\n    };\n\n    // Fetch details for modals\n    const fetchPurchaseDetails = async id => {\n      if (!id) throw new Error(\"Invalid purchase ID.\");\n      try {\n        const res = await axios.get(`${API_BASE}/kepala-gudang/purchases/${id}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        // Asumsi res.data.data adalah objek PO lengkap\n        return res.data.data;\n      } catch (err) {\n        console.error(\"Failed to fetch purchase details:\", err);\n        throw new Error(err.response?.data?.error || err.message || \"Network error\");\n      }\n    };\n\n    // Open approval modal\n    const openApprovalModal = async id => {\n      try {\n        selectedPurchase.value = await fetchPurchaseDetails(id);\n        selectedPurchaseId.value = id;\n        showApprovalModal.value = true;\n      } catch (e) {\n        alert(`Gagal memuat detail purchase: ${e.message}`);\n      }\n    };\n\n    // Confirm approval\n    const confirmApprove = async () => {\n      if (!selectedPurchaseId.value) return;\n      approving.value = true;\n      try {\n        const res = await axios.post(`${API_BASE}/kepala-gudang/purchases/${selectedPurchaseId.value}/approve`, {}, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (res.status === 200) {\n          alert(\"Purchase order approved successfully!\");\n          closeApprovalModal();\n          await fetchPurchases(); // Refresh list\n        }\n      } catch (err) {\n        console.error(\"Failed to approve purchase:\", err);\n        const message = err.response?.data?.error || err.message || \"Network error\";\n        alert(`Failed to approve purchase: ${message}`);\n      } finally {\n        approving.value = false;\n      }\n    };\n\n    // Open reject modal\n    const openRejectModal = async id => {\n      try {\n        selectedPurchase.value = await fetchPurchaseDetails(id);\n        selectedPurchaseId.value = id;\n        rejectReason.value = \"\";\n        showRejectModal.value = true;\n      } catch (e) {\n        alert(`Gagal memuat detail purchase: ${e.message}`);\n      }\n    };\n\n    // Confirm rejection\n    const confirmReject = async () => {\n      if (!selectedPurchaseId.value || !rejectReason.value.trim()) {\n        alert(\"Reason for rejection is required!\");\n        return;\n      }\n      rejecting.value = true;\n      try {\n        const res = await axios.post(`${API_BASE}/kepala-gudang/purchases/${selectedPurchaseId.value}/reject`, {\n          reason: rejectReason.value.trim()\n        }, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (res.status === 200) {\n          alert(\"Purchase order rejected successfully!\");\n          closeRejectModal();\n          await fetchPurchases(); // Refresh list\n        }\n      } catch (err) {\n        console.error(\"Failed to reject purchase:\", err);\n        const message = err.response?.data?.error || err.message || \"Network error\";\n        alert(`Failed to reject purchase: ${message}`);\n      } finally {\n        rejecting.value = false;\n      }\n    };\n\n    // View details\n    const viewDetails = async id => {\n      try {\n        selectedPurchase.value = await fetchPurchaseDetails(id);\n        selectedPurchaseId.value = id;\n        showDetailsModal.value = true;\n      } catch (e) {\n        alert(`Gagal memuat detail purchase: ${e.message}`);\n      }\n    };\n\n    // Close modals\n    const closeApprovalModal = () => {\n      showApprovalModal.value = false;\n      selectedPurchase.value = null;\n      selectedPurchaseId.value = null;\n    };\n    const closeRejectModal = () => {\n      showRejectModal.value = false;\n      selectedPurchase.value = null;\n      selectedPurchaseId.value = null;\n    };\n    const closeDetailsModal = () => {\n      showDetailsModal.value = false;\n      selectedPurchase.value = null;\n      selectedPurchaseId.value = null;\n    };\n\n    // Initial load\n    onMounted(() => {\n      fetchPurchases();\n    });\n    const __returned__ = {\n      API_BASE,\n      purchases,\n      loading,\n      showApprovalModal,\n      showRejectModal,\n      showDetailsModal,\n      selectedPurchaseId,\n      selectedPurchase,\n      rejectReason,\n      approving,\n      rejecting,\n      token,\n      role,\n      formatPONumber,\n      formatDate,\n      formatCurrency,\n      getStatusText,\n      getStatusClass,\n      fetchPurchases,\n      fetchPurchaseDetails,\n      openApprovalModal,\n      confirmApprove,\n      openRejectModal,\n      confirmReject,\n      viewDetails,\n      closeApprovalModal,\n      closeRejectModal,\n      closeDetailsModal,\n      ref,\n      onMounted,\n      get axios() {\n        return axios;\n      },\n      KepalaGudangSidebar\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","axios","KepalaGudangSidebar","API_BASE","purchases","loading","showApprovalModal","showRejectModal","showDetailsModal","selectedPurchaseId","selectedPurchase","rejectReason","approving","rejecting","token","localStorage","getItem","role","formatPONumber","id","String","padStart","formatDate","dateStr","date","Date","endsWith","toLocaleDateString","day","month","year","formatCurrency","val","undefined","Intl","NumberFormat","style","currency","minimumFractionDigits","format","getStatusText","status","getStatusClass","fetchPurchases","alert","value","res","get","params","page","size","q","headers","Authorization","data","err","console","error","message","response","fetchPurchaseDetails","Error","openApprovalModal","e","confirmApprove","post","closeApprovalModal","openRejectModal","confirmReject","trim","reason","closeRejectModal","viewDetails","closeDetailsModal"],"sources":["C:/Users/Personal/Documents/PKL/aplikasi/aplikasi/src/views/PurchaseOrderKepalaGudang.vue"],"sourcesContent":["<script setup>\nimport { ref, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport KepalaGudangSidebar from \"@/components/KepalaGudangSidebar.vue\"; // Sesuaikan path\n\n// URL Base API (Penting: Ganti dengan variabel lingkungan jika ada)\nconst API_BASE = \"http://localhost:8081/api/v1\";\n\n// State\nconst purchases = ref([]);\nconst loading = ref(false);\nconst showApprovalModal = ref(false);\nconst showRejectModal = ref(false);\nconst showDetailsModal = ref(false);\nconst selectedPurchaseId = ref(null);\nconst selectedPurchase = ref(null);\nconst rejectReason = ref(\"\");\nconst approving = ref(false);\nconst rejecting = ref(false);\nconst token = localStorage.getItem(\"token\");\nconst role = localStorage.getItem(\"userRole\") || \"KEPALA_GUDANG\";\n\n// --- Helper Functions ---\n\n// Format PO number\nconst formatPONumber = (id) => {\n  // Asumsi PO Number adalah PO- diikuti ID yang dipad 3 digit\n  return `PO-${String(id).padStart(3, \"0\")}`;\n};\n\n// Format tanggal\nconst formatDate = (dateStr) => {\n  if (!dateStr) return \"-\";\n  // Menghapus Z untuk menghindari masalah zona waktu lokal\n  const date = new Date(dateStr.endsWith(\"Z\") ? dateStr : dateStr + \"Z\");\n  return date.toLocaleDateString(\"id-ID\", {\n    day: \"2-digit\",\n    month: \"short\",\n    year: \"numeric\",\n  });\n};\n\n// Format mata uang\nconst formatCurrency = (val) => {\n  if (val === null || val === undefined) return \"-\";\n  return new Intl.NumberFormat(\"id-ID\", {\n    style: \"currency\",\n    currency: \"IDR\",\n    minimumFractionDigits: 0,\n  }).format(val);\n};\n\n// Format status\nconst getStatusText = (status) => {\n  switch (status) {\n    case \"SUBMITTED\":\n      return \"Submitted\";\n    case \"APPROVED\":\n      return \"Approved\";\n    case \"REJECTED\":\n      return \"Rejected\";\n    case \"DRAFT\":\n      return \"Draft\";\n    default:\n      return status || \"-\";\n  }\n};\n\n// Get status class\nconst getStatusClass = (status) => {\n  switch (status) {\n    case \"SUBMITTED\":\n      return \"bg-yellow-200 text-yellow-800\";\n    case \"APPROVED\":\n      return \"bg-green-200 text-green-800\";\n    case \"REJECTED\":\n      return \"bg-red-200 text-red-800\";\n    case \"DRAFT\":\n      return \"bg-gray-200 text-gray-800\";\n    default:\n      return \"bg-gray-200 text-gray-800\";\n  }\n};\n\n// --- API Calls ---\n\n// Fetch purchases (default to SUBMITTED status)\nconst fetchPurchases = async (status = \"SUBMITTED\") => {\n  if (!token) {\n    alert(\"No token found. Please log in again.\");\n    return;\n  }\n  if (role !== \"KEPALA_GUDANG\") {\n    alert(\"Access denied: This page requires KEPALA_GUDANG role.\");\n    return;\n  }\n\n  loading.value = true;\n  try {\n    const res = await axios.get(`${API_BASE}/kepala-gudang/purchases`, {\n      params: { page: 1, size: 20, q: \"\", status },\n      headers: { Authorization: `Bearer ${token}` },\n    });\n    // Sesuaikan dengan struktur API Anda. Asumsi res.data.data.data adalah array PO.\n    purchases.value = res.data.data?.data || [];\n  } catch (err) {\n    console.error(\"Failed to fetch purchases:\", err);\n    const message = err.response?.data?.error || err.message || \"Network error\";\n    alert(`Failed to fetch purchases: ${message}`);\n    purchases.value = []; // Reset to empty array on error\n  } finally {\n    loading.value = false;\n  }\n};\n\n// Fetch details for modals\nconst fetchPurchaseDetails = async (id) => {\n  if (!id) throw new Error(\"Invalid purchase ID.\");\n  try {\n    const res = await axios.get(`${API_BASE}/kepala-gudang/purchases/${id}`, {\n      headers: { Authorization: `Bearer ${token}` },\n    });\n    // Asumsi res.data.data adalah objek PO lengkap\n    return res.data.data;\n  } catch (err) {\n    console.error(\"Failed to fetch purchase details:\", err);\n    throw new Error(\n      err.response?.data?.error || err.message || \"Network error\"\n    );\n  }\n};\n\n// Open approval modal\nconst openApprovalModal = async (id) => {\n  try {\n    selectedPurchase.value = await fetchPurchaseDetails(id);\n    selectedPurchaseId.value = id;\n    showApprovalModal.value = true;\n  } catch (e) {\n    alert(`Gagal memuat detail purchase: ${e.message}`);\n  }\n};\n\n// Confirm approval\nconst confirmApprove = async () => {\n  if (!selectedPurchaseId.value) return;\n\n  approving.value = true;\n  try {\n    const res = await axios.post(\n      `${API_BASE}/kepala-gudang/purchases/${selectedPurchaseId.value}/approve`,\n      {},\n      { headers: { Authorization: `Bearer ${token}` } }\n    );\n    if (res.status === 200) {\n      alert(\"Purchase order approved successfully!\");\n      closeApprovalModal();\n      await fetchPurchases(); // Refresh list\n    }\n  } catch (err) {\n    console.error(\"Failed to approve purchase:\", err);\n    const message = err.response?.data?.error || err.message || \"Network error\";\n    alert(`Failed to approve purchase: ${message}`);\n  } finally {\n    approving.value = false;\n  }\n};\n\n// Open reject modal\nconst openRejectModal = async (id) => {\n  try {\n    selectedPurchase.value = await fetchPurchaseDetails(id);\n    selectedPurchaseId.value = id;\n    rejectReason.value = \"\";\n    showRejectModal.value = true;\n  } catch (e) {\n    alert(`Gagal memuat detail purchase: ${e.message}`);\n  }\n};\n\n// Confirm rejection\nconst confirmReject = async () => {\n  if (!selectedPurchaseId.value || !rejectReason.value.trim()) {\n    alert(\"Reason for rejection is required!\");\n    return;\n  }\n\n  rejecting.value = true;\n  try {\n    const res = await axios.post(\n      `${API_BASE}/kepala-gudang/purchases/${selectedPurchaseId.value}/reject`,\n      { reason: rejectReason.value.trim() },\n      { headers: { Authorization: `Bearer ${token}` } }\n    );\n    if (res.status === 200) {\n      alert(\"Purchase order rejected successfully!\");\n      closeRejectModal();\n      await fetchPurchases(); // Refresh list\n    }\n  } catch (err) {\n    console.error(\"Failed to reject purchase:\", err);\n    const message = err.response?.data?.error || err.message || \"Network error\";\n    alert(`Failed to reject purchase: ${message}`);\n  } finally {\n    rejecting.value = false;\n  }\n};\n\n// View details\nconst viewDetails = async (id) => {\n  try {\n    selectedPurchase.value = await fetchPurchaseDetails(id);\n    selectedPurchaseId.value = id;\n    showDetailsModal.value = true;\n  } catch (e) {\n    alert(`Gagal memuat detail purchase: ${e.message}`);\n  }\n};\n\n// Close modals\nconst closeApprovalModal = () => {\n  showApprovalModal.value = false;\n  selectedPurchase.value = null;\n  selectedPurchaseId.value = null;\n};\nconst closeRejectModal = () => {\n  showRejectModal.value = false;\n  selectedPurchase.value = null;\n  selectedPurchaseId.value = null;\n};\nconst closeDetailsModal = () => {\n  showDetailsModal.value = false;\n  selectedPurchase.value = null;\n  selectedPurchaseId.value = null;\n};\n\n// Initial load\nonMounted(() => {\n  fetchPurchases();\n});\n</script>\n\n<template>\n  <div\n    class=\"flex size-full min-h-screen flex-col bg-white font-manrope lg:flex-row\"\n  >\n    <KepalaGudangSidebar />\n\n    <div class=\"flex flex-1 flex-col\">\n      <main class=\"flex-1 p-8\">\n        <div class=\"layout-content-container flex flex-col flex-1\">\n          <div class=\"mb-6 flex flex-wrap justify-between items-center gap-3\">\n            <div>\n              <p\n                class=\"text-[#111418] tracking-light text-[32px] font-bold leading-tight\"\n              >\n                Purchase Orders Approval\n              </p>\n              <p class=\"text-[#60758a] text-sm font-normal leading-normal\">\n                Review and approve or reject pending purchase orders.\n              </p>\n            </div>\n          </div>\n\n          <div class=\"px-4 py-3 @container\">\n            <div\n              class=\"flex overflow-hidden rounded-lg border border-[#dbe0e6] bg-white\"\n            >\n              <table class=\"flex-1 w-full\">\n                <thead>\n                  <tr class=\"bg-white\">\n                    <th\n                      class=\"px-4 py-3 text-left text-[#111418] w-[120px] text-sm font-medium\"\n                    >\n                      PO Number\n                    </th>\n                    <th\n                      class=\"px-4 py-3 text-left text-[#111418] w-[200px] text-sm font-medium\"\n                    >\n                      Supplier\n                    </th>\n                    <th\n                      class=\"px-4 py-3 text-left text-[#111418] w-[150px] text-sm font-medium\"\n                    >\n                      Date\n                    </th>\n                    <th\n                      class=\"px-4 py-3 text-left text-[#111418] w-[150px] text-sm font-medium\"\n                    >\n                      Total\n                    </th>\n                    <th\n                      class=\"px-4 py-3 text-left text-[#111418] w-[120px] text-sm font-medium\"\n                    >\n                      Status\n                    </th>\n                    <th\n                      class=\"px-4 py-3 text-left text-[#111418] w-[150px] text-sm font-medium\"\n                    >\n                      Actions\n                    </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr\n                    v-for=\"po in purchases\"\n                    :key=\"po.ID\"\n                    class=\"border-t border-t-[#dbe0e6]\"\n                  >\n                    <td class=\"h-[72px] px-4 py-2 text-[#111418] text-sm\">\n                      {{ formatPONumber(po.ID) }}\n                    </td>\n                    <td class=\"h-[72px] px-4 py-2 text-[#60758a] text-sm\">\n                      {{ po.Supplier?.name || \"-\" }}\n                    </td>\n                    <td class=\"h-[72px] px-4 py-2 text-[#60758a] text-sm\">\n                      {{ formatDate(po.Date) }}\n                    </td>\n                    <td class=\"h-[72px] px-4 py-2 text-[#60758a] text-sm\">\n                      {{ formatCurrency(po.Total) }}\n                    </td>\n                    <td class=\"h-[72px] px-4 py-2 text-sm\">\n                      <span\n                        :class=\"getStatusClass(po.Status)\"\n                        class=\"px-3 py-1 rounded-lg text-xs font-medium\"\n                      >\n                        {{ getStatusText(po.Status) }}\n                      </span>\n                    </td>\n                    <td class=\"h-[72px] px-4 py-2 text-sm font-bold\">\n                      <div v-if=\"po.Status === 'SUBMITTED'\" class=\"flex gap-2\">\n                        <button\n                          @click=\"openApprovalModal(po.ID)\"\n                          :disabled=\"approving\"\n                          class=\"px-3 py-1 bg-green-500 text-white rounded text-xs hover:bg-green-600 disabled:opacity-50\"\n                        >\n                          Approve\n                        </button>\n                        <button\n                          @click=\"openRejectModal(po.ID)\"\n                          :disabled=\"rejecting\"\n                          class=\"px-3 py-1 bg-red-500 text-white rounded text-xs hover:bg-red-600 disabled:opacity-50\"\n                        >\n                          Reject\n                        </button>\n                        <button\n                          @click=\"viewDetails(po.ID)\"\n                          class=\"px-3 py-1 bg-blue-500 text-white rounded text-xs hover:bg-blue-600\"\n                        >\n                          View Details\n                        </button>\n                      </div>\n                      <div v-else class=\"flex gap-2\">\n                        <button\n                          @click=\"viewDetails(po.ID)\"\n                          class=\"px-3 py-1 bg-blue-500 text-white rounded text-xs hover:bg-blue-600\"\n                        >\n                          View Details\n                        </button>\n                        <span class=\"text-gray-500 text-xs py-1\">{{\n                          getStatusText(po.Status)\n                        }}</span>\n                      </div>\n                    </td>\n                  </tr>\n\n                  <tr v-if=\"!loading && purchases.length === 0\">\n                    <td\n                      colspan=\"6\"\n                      class=\"text-center py-4 text-[#60758a] text-sm\"\n                    >\n                      No purchase orders found\n                    </td>\n                  </tr>\n\n                  <tr v-if=\"loading\">\n                    <td\n                      colspan=\"6\"\n                      class=\"text-center py-4 text-[#60758a] text-sm\"\n                    >\n                      Loading...\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n\n          <div\n            v-if=\"showApprovalModal\"\n            class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\n          >\n            <div class=\"bg-white rounded-lg p-6 max-w-md w-full\">\n              <h2 class=\"text-xl font-bold mb-4\">Approve Purchase Order</h2>\n              <div class=\"mb-4 space-y-2 text-sm\">\n                <p>\n                  <strong>PO Number:</strong>\n                  {{ formatPONumber(selectedPurchaseId) }}\n                </p>\n                <p>\n                  <strong>Supplier:</strong>\n                  {{ selectedPurchase?.Supplier?.name || \"-\" }}\n                </p>\n                <p>\n                  <strong>Date:</strong>\n                  {{ formatDate(selectedPurchase?.Date) }}\n                </p>\n                <p>\n                  <strong>Total:</strong>\n                  {{ formatCurrency(selectedPurchase?.Total) }}\n                </p>\n                <p>\n                  <strong>Requested By:</strong> User ID\n                  {{ selectedPurchase?.UserID || \"-\" }}\n                </p>\n              </div>\n              <div class=\"flex justify-end gap-2\">\n                <button\n                  @click=\"closeApprovalModal\"\n                  class=\"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600\"\n                >\n                  Cancel\n                </button>\n                <button\n                  @click=\"confirmApprove\"\n                  :disabled=\"approving\"\n                  class=\"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:opacity-50\"\n                >\n                  {{ approving ? \"Approving...\" : \"Approve\" }}\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <div\n            v-if=\"showRejectModal\"\n            class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\n          >\n            <div class=\"bg-white rounded-lg p-6 max-w-md w-full\">\n              <h2 class=\"text-xl font-bold mb-4\">Reject Purchase Order</h2>\n              <div class=\"mb-4 space-y-2 text-sm\">\n                <p>\n                  <strong>PO Number:</strong>\n                  {{ formatPONumber(selectedPurchaseId) }}\n                </p>\n                <p>\n                  <strong>Supplier:</strong>\n                  {{ selectedPurchase?.Supplier?.name || \"-\" }}\n                </p>\n                <p>\n                  <strong>Total:</strong>\n                  {{ formatCurrency(selectedPurchase?.Total) }}\n                </p>\n              </div>\n              <div class=\"mb-4\">\n                <label class=\"block text-sm font-medium text-gray-700 mb-2\"\n                  >Reason for Rejection</label\n                >\n                <textarea\n                  v-model=\"rejectReason\"\n                  placeholder=\"Enter reason for rejection...\"\n                  rows=\"3\"\n                  class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500\"\n                  required\n                ></textarea>\n              </div>\n              <div class=\"flex justify-end gap-2\">\n                <button\n                  @click=\"closeRejectModal\"\n                  class=\"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600\"\n                >\n                  Cancel\n                </button>\n                <button\n                  @click=\"confirmReject\"\n                  :disabled=\"rejecting || !rejectReason.trim()\"\n                  class=\"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 disabled:opacity-50\"\n                >\n                  {{ rejecting ? \"Rejecting...\" : \"Reject\" }}\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <div\n            v-if=\"showDetailsModal\"\n            class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\n          >\n            <div\n              class=\"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto\"\n            >\n              <div class=\"flex justify-between items-center mb-4\">\n                <h2 class=\"text-xl font-bold\">Purchase Order Details</h2>\n                <button\n                  @click=\"closeDetailsModal\"\n                  class=\"text-gray-500 hover:text-gray-700 text-xl\"\n                >\n                  &times;\n                </button>\n              </div>\n              <div v-if=\"selectedPurchase\" class=\"space-y-4\">\n                <div class=\"grid grid-cols-2 gap-y-2 gap-x-6 text-sm\">\n                  <p>\n                    <strong>PO Number:</strong>\n                    {{ formatPONumber(selectedPurchase.ID) }}\n                  </p>\n                  <p>\n                    <strong>Supplier:</strong>\n                    {{ selectedPurchase.Supplier?.name || \"-\" }}\n                  </p>\n                  <p>\n                    <strong>Date:</strong>\n                    {{ formatDate(selectedPurchase.Date) }}\n                  </p>\n                  <p>\n                    <strong>Total:</strong>\n                    {{ formatCurrency(selectedPurchase.Total) }}\n                  </p>\n                  <p>\n                    <strong>Status:</strong>\n                    {{ getStatusText(selectedPurchase.Status) }}\n                  </p>\n                  <p>\n                    <strong>Requested By:</strong> User ID\n                    {{ selectedPurchase.UserID || \"-\" }}\n                  </p>\n                  <p v-if=\"selectedPurchase.ApprovedBy\">\n                    <strong>Approved By:</strong> User ID\n                    {{ selectedPurchase.ApprovedBy }}\n                  </p>\n                  <p v-if=\"selectedPurchase.ApprovedAt\">\n                    <strong>Approved At:</strong>\n                    {{ formatDate(selectedPurchase.ApprovedAt) }}\n                  </p>\n                  <p v-if=\"selectedPurchase.RejectReason\">\n                    <strong>Reject Reason:</strong>\n                    {{ selectedPurchase.RejectReason }}\n                  </p>\n                </div>\n\n                <h3 class=\"text-lg font-semibold mt-4\">Purchase Items</h3>\n                <div class=\"overflow-x-auto\">\n                  <table class=\"min-w-full bg-white border border-gray-300\">\n                    <thead>\n                      <tr class=\"bg-gray-100\">\n                        <th class=\"px-4 py-2 text-left text-gray-600 text-sm\">\n                          Product\n                        </th>\n                        <th class=\"px-4 py-2 text-left text-gray-600 text-sm\">\n                          Quantity\n                        </th>\n                        <th class=\"px-4 py-2 text-left text-gray-600 text-sm\">\n                          Price\n                        </th>\n                        <th class=\"px-4 py-2 text-left text-gray-600 text-sm\">\n                          Subtotal\n                        </th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      <tr\n                        v-for=\"(item, index) in selectedPurchase.Items\"\n                        :key=\"index\"\n                        class=\"border-t border-gray-300\"\n                      >\n                        <td class=\"px-4 py-2 text-gray-700 text-sm\">\n                          {{ item.Product?.name || \"-\" }}\n                        </td>\n                        <td class=\"px-4 py-2 text-gray-700 text-sm\">\n                          {{ item.Qty || \"-\" }}\n                        </td>\n                        <td class=\"px-4 py-2 text-gray-700 text-sm\">\n                          {{ formatCurrency(item.Price) }}\n                        </td>\n                        <td class=\"px-4 py-2 text-gray-700 text-sm\">\n                          {{ formatCurrency(item.Subtotal) }}\n                        </td>\n                      </tr>\n                      <tr\n                        v-if=\"\n                          !selectedPurchase.Items ||\n                          selectedPurchase.Items.length === 0\n                        \"\n                      >\n                        <td\n                          colspan=\"4\"\n                          class=\"px-4 py-2 text-center text-gray-700 text-sm\"\n                        >\n                          No items found\n                        </td>\n                      </tr>\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n              <div v-else class=\"text-red-500\">\n                No data available for this purchase.\n              </div>\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n@container (max-width: 120px) {\n  .table-column-120 {\n    display: none;\n  }\n}\n/* ... (style lainnya) */\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}