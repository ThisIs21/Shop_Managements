{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, vModelCheckbox as _vModelCheckbox, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"p-6\"\n};\nconst _hoisted_2 = {\n  class: \"bg-white p-6 rounded-lg shadow\"\n};\nconst _hoisted_3 = {\n  class: \"mb-4\"\n};\nconst _hoisted_4 = [\"value\"];\nconst _hoisted_5 = {\n  class: \"mb-4\"\n};\nconst _hoisted_6 = {\n  class: \"mb-4\"\n};\nconst _hoisted_7 = [\"onUpdate:modelValue\"];\nconst _hoisted_8 = [\"value\"];\nconst _hoisted_9 = [\"onUpdate:modelValue\"];\nconst _hoisted_10 = [\"onUpdate:modelValue\"];\nconst _hoisted_11 = [\"onClick\"];\nconst _hoisted_12 = {\n  class: \"mb-4\"\n};\nconst _hoisted_13 = {\n  class: \"inline-flex items-center\"\n};\nconst _hoisted_14 = {\n  class: \"flex justify-end\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[11] || (_cache[11] = _createElementVNode(\"h2\", {\n    class: \"text-2xl font-bold mb-4\"\n  }, \"Buat Pembelian\", -1 /* CACHED */)), _createCommentVNode(\" Supplier \"), _createElementVNode(\"div\", _hoisted_3, [_cache[6] || (_cache[6] = _createElementVNode(\"label\", {\n    class: \"block font-semibold mb-1\"\n  }, \"Supplier\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.form.supplier_id = $event),\n    class: \"w-full border rounded px-3 py-2\"\n  }, [_cache[5] || (_cache[5] = _createElementVNode(\"option\", {\n    disabled: \"\",\n    value: \"\"\n  }, \"-- Pilih Supplier --\", -1 /* CACHED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.suppliers, s => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: s.id,\n      value: s.id\n    }, _toDisplayString(s.name), 9 /* TEXT, PROPS */, _hoisted_4);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $data.form.supplier_id]])]), _createCommentVNode(\" Date \"), _createElementVNode(\"div\", _hoisted_5, [_cache[7] || (_cache[7] = _createElementVNode(\"label\", {\n    class: \"block font-semibold mb-1\"\n  }, \"Tanggal\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"date\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.form.date = $event),\n    class: \"w-full border rounded px-3 py-2\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.date]])]), _createCommentVNode(\" Produk \"), _createElementVNode(\"div\", _hoisted_6, [_cache[9] || (_cache[9] = _createElementVNode(\"h3\", {\n    class: \"font-semibold mb-2\"\n  }, \"Produk\", -1 /* CACHED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.form.items, (item, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index,\n      class: \"flex gap-2 mb-2\"\n    }, [_withDirectives(_createElementVNode(\"select\", {\n      \"onUpdate:modelValue\": $event => item.product_id = $event,\n      class: \"flex-1 border rounded px-2 py-1\"\n    }, [_cache[8] || (_cache[8] = _createElementVNode(\"option\", {\n      disabled: \"\",\n      value: \"\"\n    }, \"-- Pilih Produk --\", -1 /* CACHED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.products, p => {\n      return _openBlock(), _createElementBlock(\"option\", {\n        key: p.id,\n        value: p.id\n      }, _toDisplayString(p.name), 9 /* TEXT, PROPS */, _hoisted_8);\n    }), 128 /* KEYED_FRAGMENT */))], 8 /* PROPS */, _hoisted_7), [[_vModelSelect, item.product_id]]), _withDirectives(_createElementVNode(\"input\", {\n      type: \"number\",\n      \"onUpdate:modelValue\": $event => item.qty = $event,\n      placeholder: \"Qty\",\n      class: \"w-20 border rounded px-2 py-1\"\n    }, null, 8 /* PROPS */, _hoisted_9), [[_vModelText, item.qty, void 0, {\n      number: true\n    }]]), _withDirectives(_createElementVNode(\"input\", {\n      type: \"number\",\n      \"onUpdate:modelValue\": $event => item.price = $event,\n      placeholder: \"Harga\",\n      class: \"w-28 border rounded px-2 py-1\"\n    }, null, 8 /* PROPS */, _hoisted_10), [[_vModelText, item.price, void 0, {\n      number: true\n    }]]), _createElementVNode(\"button\", {\n      onClick: $event => $options.removeItem(index),\n      class: \"bg-red-500 text-white px-2 py-1 rounded\"\n    }, \" ✕ \", 8 /* PROPS */, _hoisted_11)]);\n  }), 128 /* KEYED_FRAGMENT */)), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.addItem && $options.addItem(...args)),\n    type: \"button\",\n    class: \"bg-blue-500 text-white px-3 py-1 rounded\"\n  }, \" + Tambah Produk \")]), _createCommentVNode(\" Submit Checkbox \"), _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"label\", _hoisted_13, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"checkbox\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.form.submit = $event),\n    class: \"mr-2\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelCheckbox, $data.form.submit]]), _cache[10] || (_cache[10] = _createTextVNode(\" Ajukan ke Kepala Gudang \", -1 /* CACHED */))])]), _createCommentVNode(\" Button \"), _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"button\", {\n    onClick: _cache[4] || (_cache[4] = (...args) => $options.kirimPesanan && $options.kirimPesanan(...args)),\n    class: \"bg-green-600 text-white px-4 py-2 rounded\"\n  }, \" Simpan Pembelian \")])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createCommentVNode","_hoisted_3","$data","form","supplier_id","$event","disabled","value","_Fragment","_renderList","suppliers","s","key","id","name","_hoisted_4","_hoisted_5","type","date","_hoisted_6","items","item","index","product_id","products","p","_hoisted_8","qty","placeholder","number","price","onClick","$options","removeItem","_hoisted_11","_cache","args","addItem","_hoisted_12","_hoisted_13","submit","_hoisted_14","kirimPesanan"],"sources":["C:\\Users\\Personal\\Documents\\PKL\\aplikasi\\aplikasi\\src\\views\\CreatePurchase.vue"],"sourcesContent":["<template>\n  <div class=\"p-6\">\n    <div class=\"bg-white p-6 rounded-lg shadow\">\n      <h2 class=\"text-2xl font-bold mb-4\">Buat Pembelian</h2>\n\n      <!-- Supplier -->\n      <div class=\"mb-4\">\n        <label class=\"block font-semibold mb-1\">Supplier</label>\n        <select\n          v-model=\"form.supplier_id\"\n          class=\"w-full border rounded px-3 py-2\"\n        >\n          <option disabled value=\"\">-- Pilih Supplier --</option>\n          <option v-for=\"s in suppliers\" :key=\"s.id\" :value=\"s.id\">\n            {{ s.name }}\n          </option>\n        </select>\n      </div>\n\n      <!-- Date -->\n      <div class=\"mb-4\">\n        <label class=\"block font-semibold mb-1\">Tanggal</label>\n        <input\n          type=\"date\"\n          v-model=\"form.date\"\n          class=\"w-full border rounded px-3 py-2\"\n        />\n      </div>\n\n      <!-- Produk -->\n      <div class=\"mb-4\">\n        <h3 class=\"font-semibold mb-2\">Produk</h3>\n        <div\n          v-for=\"(item, index) in form.items\"\n          :key=\"index\"\n          class=\"flex gap-2 mb-2\"\n        >\n          <select\n            v-model=\"item.product_id\"\n            class=\"flex-1 border rounded px-2 py-1\"\n          >\n            <option disabled value=\"\">-- Pilih Produk --</option>\n            <option v-for=\"p in products\" :key=\"p.id\" :value=\"p.id\">\n              {{ p.name }}\n            </option>\n          </select>\n          <input\n            type=\"number\"\n            v-model.number=\"item.qty\"\n            placeholder=\"Qty\"\n            class=\"w-20 border rounded px-2 py-1\"\n          />\n          <input\n            type=\"number\"\n            v-model.number=\"item.price\"\n            placeholder=\"Harga\"\n            class=\"w-28 border rounded px-2 py-1\"\n          />\n          <button\n            @click=\"removeItem(index)\"\n            class=\"bg-red-500 text-white px-2 py-1 rounded\"\n          >\n            ✕\n          </button>\n        </div>\n        <button\n          @click=\"addItem\"\n          type=\"button\"\n          class=\"bg-blue-500 text-white px-3 py-1 rounded\"\n        >\n          + Tambah Produk\n        </button>\n      </div>\n\n      <!-- Submit Checkbox -->\n      <div class=\"mb-4\">\n        <label class=\"inline-flex items-center\">\n          <input type=\"checkbox\" v-model=\"form.submit\" class=\"mr-2\" />\n          Ajukan ke Kepala Gudang\n        </label>\n      </div>\n\n      <!-- Button -->\n      <div class=\"flex justify-end\">\n        <button\n          @click=\"kirimPesanan\"\n          class=\"bg-green-600 text-white px-4 py-2 rounded\"\n        >\n          Simpan Pembelian\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"CreatePurchase\",\n  data() {\n    return {\n      suppliers: [],\n      products: [],\n      form: {\n        supplier_id: \"\",\n        date: new Date().toISOString().slice(0, 10),\n        items: [{ product_id: \"\", qty: 1, price: 0 }],\n        submit: false,\n      },\n    };\n  },\n  methods: {\n    async loadSuppliers() {\n      try {\n        const res = await axios.get(\"http://localhost:8080/suppliers\");\n        this.suppliers = res.data.data;\n      } catch (err) {\n        console.error(\"Gagal load supplier:\", err);\n      }\n    },\n    async loadProducts() {\n      try {\n        const res = await axios.get(\"http://localhost:8080/products\");\n        this.products = res.data.data;\n      } catch (err) {\n        console.error(\"Gagal load produk:\", err);\n      }\n    },\n    addItem() {\n      this.form.items.push({ product_id: \"\", qty: 1, price: 0 });\n    },\n    removeItem(index) {\n      this.form.items.splice(index, 1);\n    },\n    async kirimPesanan() {\n      try {\n        const payload = {\n          ...this.form,\n          date: new Date(this.form.date).toISOString(),\n        };\n        const res = await axios.post(\n          \"http://localhost:8080/purchases\",\n          payload,\n          {\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n            },\n          }\n        );\n        alert(\"Pembelian berhasil disimpan!\");\n        console.log(res.data);\n      } catch (err) {\n        console.error(\"Gagal simpan pembelian:\", err);\n        alert(\"Terjadi kesalahan saat simpan pembelian\");\n      }\n    },\n  },\n  mounted() {\n    this.loadSuppliers();\n    this.loadProducts();\n  },\n};\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}