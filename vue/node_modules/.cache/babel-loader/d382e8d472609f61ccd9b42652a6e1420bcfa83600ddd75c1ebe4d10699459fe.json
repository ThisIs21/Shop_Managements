{"ast":null,"code":"import { createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  class: \"flex\"\n};\nconst _hoisted_2 = {\n  class: \"ml-64 flex-1 p-6 bg-gray-100 min-h-screen\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"bg-red-600 text-white p-3 rounded mb-4\"\n};\nconst _hoisted_4 = {\n  class: \"w-full border-collapse bg-white shadow rounded\"\n};\nconst _hoisted_5 = {\n  key: 0\n};\nconst _hoisted_6 = {\n  class: \"p-2 border\"\n};\nconst _hoisted_7 = {\n  class: \"p-2 border\"\n};\nconst _hoisted_8 = {\n  class: \"p-2 border\"\n};\nconst _hoisted_9 = {\n  class: \"p-2 border\"\n};\nconst _hoisted_10 = {\n  class: \"p-2 border\"\n};\nconst _hoisted_11 = {\n  class: \"p-2 border\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode($setup[\"KepalaGudangSidebar\"]), _createElementVNode(\"main\", _hoisted_2, [_cache[2] || (_cache[2] = _createElementVNode(\"h1\", {\n    class: \"text-2xl font-bold mb-4\"\n  }, \"Purchase Return Requests\", -1 /* CACHED */)), $setup.errorMessage ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, _toDisplayString($setup.errorMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"table\", _hoisted_4, [_cache[1] || (_cache[1] = _createElementVNode(\"thead\", {\n    class: \"bg-gray-200\"\n  }, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", {\n    class: \"p-2 border\"\n  }, \"ID\"), _createElementVNode(\"th\", {\n    class: \"p-2 border\"\n  }, \"Purchase ID\"), _createElementVNode(\"th\", {\n    class: \"p-2 border\"\n  }, \"User ID\"), _createElementVNode(\"th\", {\n    class: \"p-2 border\"\n  }, \"Total\"), _createElementVNode(\"th\", {\n    class: \"p-2 border\"\n  }, \"Date\"), _createElementVNode(\"th\", {\n    class: \"p-2 border\"\n  }, \"Status\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [!$setup.loading && $setup.purchaseReturns.length === 0 ? (_openBlock(), _createElementBlock(\"tr\", _hoisted_5, [...(_cache[0] || (_cache[0] = [_createElementVNode(\"td\", {\n    colspan: \"6\",\n    class: \"text-center p-4 text-gray-500\"\n  }, \" Tidak ada data retur pembelian \", -1 /* CACHED */)]))])) : _createCommentVNode(\"v-if\", true), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.purchaseReturns, pr => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: pr.id\n    }, [_createElementVNode(\"td\", _hoisted_6, _toDisplayString(pr.id), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_7, _toDisplayString(pr.purchase_id), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_8, _toDisplayString(pr.user_id), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_9, _toDisplayString(pr.total), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_10, _toDisplayString(pr.date), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_11, _toDisplayString(pr.status), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createVNode","$setup","_createElementVNode","_hoisted_2","errorMessage","_hoisted_3","_toDisplayString","_hoisted_4","loading","purchaseReturns","length","_hoisted_5","_cache","colspan","_Fragment","_renderList","pr","key","id","_hoisted_6","_hoisted_7","purchase_id","_hoisted_8","user_id","_hoisted_9","total","_hoisted_10","date","_hoisted_11","status"],"sources":["C:\\Users\\Personal\\Documents\\PKL\\aplikasi\\aplikasi\\src\\views\\PurchaseReturnKepalaGudang.vue"],"sourcesContent":["<script setup>\nimport { ref, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport KepalaGudangSidebar from \"@/components/KepalaGudangSidebar.vue\";\n\nconst purchaseReturns = ref([]);\nconst errorMessage = ref(\"\");\nconst loading = ref(true);\n\nconst fetchPurchaseReturns = async () => {\n  try {\n    const token = localStorage.getItem(\"token\");\n    if (!token) {\n      errorMessage.value = \"Token hilang, silakan login ulang.\";\n      loading.value = false;\n      return;\n    }\n\n    const response = await axios.get(\n      \"http://localhost:8081/api/v1/history/purchase-returns?page=1&size=20&q=\",\n      {\n        headers: { Authorization: `Bearer ${token}` },\n      }\n    );\n\n    purchaseReturns.value = response.data.data || [];\n  } catch (error) {\n    console.error(\"Gagal fetch data retur:\", error);\n\n    // Tangani error khusus dari backend\n    if (error.response && error.response.data?.error?.includes(\"Unknown column 'pr.reason'\")) {\n      errorMessage.value = \"Data tidak bisa ditampilkan (kolom 'reason' tidak ada di database).\";\n    } else {\n      errorMessage.value = error.response?.data?.error || \"Terjadi kesalahan server.\";\n    }\n  } finally {\n    loading.value = false;\n  }\n};\n\nonMounted(fetchPurchaseReturns);\n</script>\n\n<template>\n  <div class=\"flex\">\n    <KepalaGudangSidebar />\n    <main class=\"ml-64 flex-1 p-6 bg-gray-100 min-h-screen\">\n      <h1 class=\"text-2xl font-bold mb-4\">Purchase Return Requests</h1>\n\n      <div v-if=\"errorMessage\" class=\"bg-red-600 text-white p-3 rounded mb-4\">\n        {{ errorMessage }}\n      </div>\n\n      <table class=\"w-full border-collapse bg-white shadow rounded\">\n        <thead class=\"bg-gray-200\">\n          <tr>\n            <th class=\"p-2 border\">ID</th>\n            <th class=\"p-2 border\">Purchase ID</th>\n            <th class=\"p-2 border\">User ID</th>\n            <th class=\"p-2 border\">Total</th>\n            <th class=\"p-2 border\">Date</th>\n            <th class=\"p-2 border\">Status</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-if=\"!loading && purchaseReturns.length === 0\">\n            <td colspan=\"6\" class=\"text-center p-4 text-gray-500\">\n              Tidak ada data retur pembelian\n            </td>\n          </tr>\n          <tr v-for=\"pr in purchaseReturns\" :key=\"pr.id\">\n            <td class=\"p-2 border\">{{ pr.id }}</td>\n            <td class=\"p-2 border\">{{ pr.purchase_id }}</td>\n            <td class=\"p-2 border\">{{ pr.user_id }}</td>\n            <td class=\"p-2 border\">{{ pr.total }}</td>\n            <td class=\"p-2 border\">{{ pr.date }}</td>\n            <td class=\"p-2 border\">{{ pr.status }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </main>\n  </div>\n</template>\n"],"mappings":";;EA4COA,KAAK,EAAC;AAAM;;EAETA,KAAK,EAAC;AAA2C;;;EAG5BA,KAAK,EAAC;;;EAIxBA,KAAK,EAAC;AAAgD;;;;;EAkBnDA,KAAK,EAAC;AAAY;;EAClBA,KAAK,EAAC;AAAY;;EAClBA,KAAK,EAAC;AAAY;;EAClBA,KAAK,EAAC;AAAY;;EAClBA,KAAK,EAAC;AAAY;;EAClBA,KAAK,EAAC;AAAY;;uBAhChCC,mBAAA,CAqCM,OArCNC,UAqCM,GApCJC,YAAA,CAAuBC,MAAA,0BACvBC,mBAAA,CAkCO,QAlCPC,UAkCO,G,0BAjCLD,mBAAA,CAAiE;IAA7DL,KAAK,EAAC;EAAyB,GAAC,0BAAwB,qBAEjDI,MAAA,CAAAG,YAAY,I,cAAvBN,mBAAA,CAEM,OAFNO,UAEM,EAAAC,gBAAA,CADDL,MAAA,CAAAG,YAAY,oB,mCAGjBF,mBAAA,CA0BQ,SA1BRK,UA0BQ,G,0BAzBNL,mBAAA,CASQ;IATDL,KAAK,EAAC;EAAa,IACxBK,mBAAA,CAOK,aANHA,mBAAA,CAA8B;IAA1BL,KAAK,EAAC;EAAY,GAAC,IAAE,GACzBK,mBAAA,CAAuC;IAAnCL,KAAK,EAAC;EAAY,GAAC,aAAW,GAClCK,mBAAA,CAAmC;IAA/BL,KAAK,EAAC;EAAY,GAAC,SAAO,GAC9BK,mBAAA,CAAiC;IAA7BL,KAAK,EAAC;EAAY,GAAC,OAAK,GAC5BK,mBAAA,CAAgC;IAA5BL,KAAK,EAAC;EAAY,GAAC,MAAI,GAC3BK,mBAAA,CAAkC;IAA9BL,KAAK,EAAC;EAAY,GAAC,QAAM,E,uBAGjCK,mBAAA,CAcQ,gB,CAbKD,MAAA,CAAAO,OAAO,IAAIP,MAAA,CAAAQ,eAAe,CAACC,MAAM,U,cAA5CZ,mBAAA,CAIK,MAAAa,UAAA,OAAAC,MAAA,QAAAA,MAAA,OAHHV,mBAAA,CAEK;IAFDW,OAAO,EAAC,GAAG;IAAChB,KAAK,EAAC;KAAgC,kCAEtD,mB,8DAEFC,mBAAA,CAOKgB,SAAA,QAAAC,WAAA,CAPYd,MAAA,CAAAQ,eAAe,EAArBO,EAAE;yBAAblB,mBAAA,CAOK;MAP8BmB,GAAG,EAAED,EAAE,CAACE;QACzChB,mBAAA,CAAuC,MAAvCiB,UAAuC,EAAAb,gBAAA,CAAbU,EAAE,CAACE,EAAE,kBAC/BhB,mBAAA,CAAgD,MAAhDkB,UAAgD,EAAAd,gBAAA,CAAtBU,EAAE,CAACK,WAAW,kBACxCnB,mBAAA,CAA4C,MAA5CoB,UAA4C,EAAAhB,gBAAA,CAAlBU,EAAE,CAACO,OAAO,kBACpCrB,mBAAA,CAA0C,MAA1CsB,UAA0C,EAAAlB,gBAAA,CAAhBU,EAAE,CAACS,KAAK,kBAClCvB,mBAAA,CAAyC,MAAzCwB,WAAyC,EAAApB,gBAAA,CAAfU,EAAE,CAACW,IAAI,kBACjCzB,mBAAA,CAA2C,MAA3C0B,WAA2C,EAAAtB,gBAAA,CAAjBU,EAAE,CAACa,MAAM,iB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}