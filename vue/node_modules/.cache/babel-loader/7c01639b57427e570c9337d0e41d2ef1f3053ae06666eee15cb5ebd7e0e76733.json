{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, vModelText as _vModelText, createElementVNode as _createElementVNode, withDirectives as _withDirectives, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"p-4\"\n};\nconst _hoisted_2 = {\n  class: \"flex gap-4 mb-4\"\n};\nconst _hoisted_3 = {\n  class: \"mb-4 text-sm text-gray-600\"\n};\nconst _hoisted_4 = {\n  class: \"w-full border-collapse border border-gray-300\"\n};\nconst _hoisted_5 = {\n  key: 0\n};\nconst _hoisted_6 = {\n  class: \"border border-gray-300 px-4 py-2\"\n};\nconst _hoisted_7 = {\n  class: \"border border-gray-300 px-4 py-2\"\n};\nconst _hoisted_8 = {\n  class: \"border border-gray-300 px-4 py-2\"\n};\nconst _hoisted_9 = {\n  class: \"border border-gray-300 px-4 py-2\"\n};\nconst _hoisted_10 = {\n  class: \"border border-gray-300 px-4 py-2\"\n};\nconst _hoisted_11 = {\n  key: 0\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createBlock($setup[\"OwnerLayout\"], null, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, [_createCommentVNode(\" FILTER \"), _createElementVNode(\"div\", _hoisted_2, [_withDirectives(_createElementVNode(\"input\", {\n      type: \"date\",\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.filters.startDate = $event),\n      class: \"border p-2 rounded\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.filters.startDate]]), _withDirectives(_createElementVNode(\"input\", {\n      type: \"date\",\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.filters.endDate = $event),\n      class: \"border p-2 rounded\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.filters.endDate]]), _createElementVNode(\"button\", {\n      onClick: $setup.applyFilter,\n      class: \"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\n    }, \" Terapkan \")]), _createCommentVNode(\" PAGINATION INFO (Optional, based on response) \"), _createElementVNode(\"div\", _hoisted_3, \" Halaman \" + _toDisplayString($setup.page) + \" dari total \" + _toDisplayString($setup.total) + \" data (ukuran per halaman: \" + _toDisplayString($setup.size) + \") \", 1 /* TEXT */), _createCommentVNode(\" TABLE \"), _createElementVNode(\"table\", _hoisted_4, [_cache[4] || (_cache[4] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", {\n      class: \"bg-gray-100\"\n    }, [_createElementVNode(\"th\", {\n      class: \"border border-gray-300 px-4 py-2\"\n    }, \"Tanggal\"), _createElementVNode(\"th\", {\n      class: \"border border-gray-300 px-4 py-2\"\n    }, \"Nama Barang\"), _createElementVNode(\"th\", {\n      class: \"border border-gray-300 px-4 py-2\"\n    }, \"Stok Awal\"), _createElementVNode(\"th\", {\n      class: \"border border-gray-300 px-4 py-2\"\n    }, \"Stok Akhir\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.data, (opname, opnameIndex) => {\n      return _openBlock(), _createElementBlock(_Fragment, {\n        key: opnameIndex\n      }, [!opname.Items || opname.Items.length === 0 ? (_openBlock(), _createElementBlock(\"tr\", _hoisted_5, [_createElementVNode(\"td\", _hoisted_6, _toDisplayString($setup.formatDate(opname.Date)), 1 /* TEXT */), _cache[2] || (_cache[2] = _createElementVNode(\"td\", {\n        class: \"border border-gray-300 px-4 py-2\",\n        colspan: \"3\"\n      }, \" Tidak ada item \", -1 /* CACHED */))])) : _createCommentVNode(\"v-if\", true), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(opname.Items, (item, itemIndex) => {\n        return _openBlock(), _createElementBlock(\"tr\", {\n          key: `${opnameIndex}-${itemIndex}`\n        }, [_createElementVNode(\"td\", _hoisted_7, _toDisplayString($setup.formatDate(opname.Date)), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_8, _toDisplayString(item.Product?.Name || \"N/A\"), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_9, _toDisplayString(item.QtySystem || 0), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_10, _toDisplayString(item.QtyPhysical || 0), 1 /* TEXT */)]);\n      }), 128 /* KEYED_FRAGMENT */))], 64 /* STABLE_FRAGMENT */);\n    }), 128 /* KEYED_FRAGMENT */)), $setup.data.length === 0 ? (_openBlock(), _createElementBlock(\"tr\", _hoisted_11, [...(_cache[3] || (_cache[3] = [_createElementVNode(\"td\", {\n      colspan: \"4\",\n      class: \"text-center py-4 text-gray-500\"\n    }, \" Tidak ada data \", -1 /* CACHED */)]))])) : _createCommentVNode(\"v-if\", true)])])])]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["class","_createBlock","$setup","_createElementVNode","_hoisted_1","_createCommentVNode","_hoisted_2","type","filters","startDate","$event","endDate","onClick","applyFilter","_hoisted_3","_toDisplayString","page","total","size","_hoisted_4","_createElementBlock","_Fragment","_renderList","data","opname","opnameIndex","Items","length","_hoisted_5","_hoisted_6","formatDate","Date","colspan","item","itemIndex","key","_hoisted_7","_hoisted_8","Product","Name","_hoisted_9","QtySystem","_hoisted_10","QtyPhysical","_hoisted_11","_cache"],"sources":["C:\\Users\\Personal\\Documents\\PKL\\aplikasi\\aplikasi\\src\\views\\ReportStockOpnameOwners.vue"],"sourcesContent":["<template>\n  <OwnerLayout>\n    <div class=\"p-4\">\n      <!-- FILTER -->\n      <div class=\"flex gap-4 mb-4\">\n        <input\n          type=\"date\"\n          v-model=\"filters.startDate\"\n          class=\"border p-2 rounded\"\n        />\n        <input\n          type=\"date\"\n          v-model=\"filters.endDate\"\n          class=\"border p-2 rounded\"\n        />\n        <button\n          @click=\"applyFilter\"\n          class=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\n        >\n          Terapkan\n        </button>\n      </div>\n\n      <!-- PAGINATION INFO (Optional, based on response) -->\n      <div class=\"mb-4 text-sm text-gray-600\">\n        Halaman {{ page }} dari total {{ total }} data (ukuran per halaman:\n        {{ size }})\n      </div>\n\n      <!-- TABLE -->\n      <table class=\"w-full border-collapse border border-gray-300\">\n        <thead>\n          <tr class=\"bg-gray-100\">\n            <th class=\"border border-gray-300 px-4 py-2\">Tanggal</th>\n            <th class=\"border border-gray-300 px-4 py-2\">Nama Barang</th>\n            <th class=\"border border-gray-300 px-4 py-2\">Stok Awal</th>\n            <th class=\"border border-gray-300 px-4 py-2\">Stok Akhir</th>\n          </tr>\n        </thead>\n        <tbody>\n          <template v-for=\"(opname, opnameIndex) in data\" :key=\"opnameIndex\">\n            <tr v-if=\"!opname.Items || opname.Items.length === 0\">\n              <td class=\"border border-gray-300 px-4 py-2\">\n                {{ formatDate(opname.Date) }}\n              </td>\n              <td class=\"border border-gray-300 px-4 py-2\" colspan=\"3\">\n                Tidak ada item\n              </td>\n            </tr>\n            <tr\n              v-for=\"(item, itemIndex) in opname.Items\"\n              :key=\"`${opnameIndex}-${itemIndex}`\"\n            >\n              <td class=\"border border-gray-300 px-4 py-2\">\n                {{ formatDate(opname.Date) }}\n              </td>\n              <td class=\"border border-gray-300 px-4 py-2\">\n                {{ item.Product?.Name || \"N/A\" }}\n              </td>\n              <td class=\"border border-gray-300 px-4 py-2\">\n                {{ item.QtySystem || 0 }}\n              </td>\n              <td class=\"border border-gray-300 px-4 py-2\">\n                {{ item.QtyPhysical || 0 }}\n              </td>\n            </tr>\n          </template>\n          <tr v-if=\"data.length === 0\">\n            <td colspan=\"4\" class=\"text-center py-4 text-gray-500\">\n              Tidak ada data\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </OwnerLayout>\n</template>\n\n<script setup>\nimport { ref, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport OwnerLayout from \"../components/OwnerLayouts.vue\";\nimport dayjs from \"dayjs\"; // Import dayjs untuk format tanggal\n\nconst filters = ref({\n  startDate: \"\",\n  endDate: \"\",\n});\n\nconst data = ref([]);\nconst page = ref(1);\nconst size = ref(10);\nconst total = ref(0);\n\n// Ambil token dari localStorage\nconst token = localStorage.getItem(\"token\");\n\n// Fungsi untuk format tanggal\nconst formatDate = (dateString) => {\n  return dayjs(dateString).format(\"YYYY-MM-DD\");\n};\n\n// Fungsi untuk mengambil data dari backend\nconst fetchData = async () => {\n  try {\n    const params = {\n      page: page.value,\n      size: size.value,\n    };\n    if (filters.value.startDate) params.start_date = filters.value.startDate;\n    if (filters.value.endDate) params.end_date = filters.value.endDate;\n\n    const res = await axios.get(\n      \"http://localhost:8081/api/v1/history/stock-opnames\",\n      {\n        headers: token ? { Authorization: `Bearer ${token}` } : undefined,\n        params,\n      }\n    );\n    data.value = res.data.data; // Array StockOpname\n    page.value = res.data.page;\n    size.value = res.data.size;\n    total.value = res.data.total;\n  } catch (err) {\n    console.error(\"Gagal ambil data:\", err);\n    data.value = []; // Reset data jika gagal\n    page.value = 1;\n    size.value = 10;\n    total.value = 0;\n  }\n};\n\n// Ambil data saat komponen dimuat\nonMounted(fetchData);\n\n// Terapkan filter dan ambil ulang data (reset page ke 1)\nconst applyFilter = () => {\n  page.value = 1; // Reset ke halaman pertama saat filter\n  fetchData();\n};\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}