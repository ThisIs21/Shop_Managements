{"ast":null,"code":"import { openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"min-h-screen flex bg-white\"\n};\nconst _hoisted_2 = {\n  class: \"flex-1 p-6 max-w-7xl mx-auto w-full\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"max-w-sm mx-auto border rounded p-6 shadow\"\n};\nconst _hoisted_4 = {\n  class: \"grid grid-cols-1 md:grid-cols-3 gap-6\"\n};\nconst _hoisted_5 = {\n  class: \"md:col-span-2\"\n};\nconst _hoisted_6 = {\n  class: \"flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-4\"\n};\nconst _hoisted_7 = [\"value\"];\nconst _hoisted_8 = {\n  class: \"grid grid-cols-2 gap-4\"\n};\nconst _hoisted_9 = {\n  class: \"font-semibold\"\n};\nconst _hoisted_10 = {\n  class: \"text-sm text-gray-600\"\n};\nconst _hoisted_11 = {\n  class: \"text-xs text-green-600\"\n};\nconst _hoisted_12 = [\"onClick\"];\nconst _hoisted_13 = {\n  class: \"md:col-span-1 flex flex-col\"\n};\nconst _hoisted_14 = {\n  class: \"border rounded-lg p-3 bg-white shadow max-h-64 overflow-y-auto\"\n};\nconst _hoisted_15 = {\n  class: \"w-full text-sm\"\n};\nconst _hoisted_16 = {\n  class: \"p-2\"\n};\nconst _hoisted_17 = {\n  class: \"p-2\"\n};\nconst _hoisted_18 = [\"onUpdate:modelValue\", \"max\"];\nconst _hoisted_19 = {\n  class: \"p-2\"\n};\nconst _hoisted_20 = {\n  class: \"p-2\"\n};\nconst _hoisted_21 = [\"onClick\"];\nconst _hoisted_22 = {\n  key: 0\n};\nconst _hoisted_23 = {\n  class: \"mt-6 border rounded-lg p-3 bg-white shadow\"\n};\nconst _hoisted_24 = {\n  class: \"flex justify-between text-sm\"\n};\nconst _hoisted_25 = {\n  class: \"flex justify-between text-sm\"\n};\nconst _hoisted_26 = {\n  class: \"flex justify-between text-sm font-semibold\"\n};\nconst _hoisted_27 = {\n  class: \"mt-4\"\n};\nconst _hoisted_28 = [\"value\"];\nconst _hoisted_29 = {\n  class: \"text-sm mt-1\"\n};\nconst _hoisted_30 = {\n  class: \"font-semibold\"\n};\nconst _hoisted_31 = {\n  class: \"flex flex-col gap-3 mt-6\"\n};\nconst _hoisted_32 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$setup.isLoggedIn ? (_openBlock(), _createBlock($setup[\"CashierSidebar\"], {\n    key: 0\n  })) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"main\", _hoisted_2, [_cache[22] || (_cache[22] = _createElementVNode(\"h2\", {\n    class: \"text-2xl font-bold text-center mb-6\"\n  }, \"Cashier - Order\", -1 /* CACHED */)), _createCommentVNode(\" Login \"), !$setup.isLoggedIn ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_cache[7] || (_cache[7] = _createElementVNode(\"h3\", {\n    class: \"text-lg font-semibold mb-4\"\n  }, \"Login Kasir\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.username = $event),\n    type: \"text\",\n    placeholder: \"Username\",\n    class: \"w-full border rounded p-2 mb-3 text-sm\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.username]]), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.password = $event),\n    type: \"password\",\n    placeholder: \"Password\",\n    class: \"w-full border rounded p-2 mb-3 text-sm\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.password]]), _createElementVNode(\"button\", {\n    onClick: $setup.login,\n    class: \"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700\"\n  }, \" Login \")])) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" Kasir Dashboard \"), _createElementVNode(\"div\", _hoisted_4, [_createCommentVNode(\" Produk \"), _createElementVNode(\"section\", _hoisted_5, [_cache[9] || (_cache[9] = _createElementVNode(\"h3\", {\n    class: \"text-lg font-semibold mb-4\"\n  }, \"Available Products\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_6, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.search = $event),\n    type: \"text\",\n    placeholder: \"Cari produk...\",\n    class: \"w-full md:w-1/2 border rounded p-2 text-sm\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.search]]), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.selectedCategory = $event),\n    class: \"border rounded p-2 text-sm w-full md:w-48\"\n  }, [_cache[8] || (_cache[8] = _createElementVNode(\"option\", {\n    value: \"All\"\n  }, \"Semua Kategori\", -1 /* CACHED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.categories, cat => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: cat,\n      value: cat\n    }, _toDisplayString(cat), 9 /* TEXT, PROPS */, _hoisted_7);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $setup.selectedCategory]])]), _createElementVNode(\"div\", _hoisted_8, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.filteredProducts, p => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: p.id,\n      class: \"border rounded-lg p-4 bg-white shadow flex flex-col justify-between\"\n    }, [_createElementVNode(\"div\", null, [_createElementVNode(\"h4\", _hoisted_9, _toDisplayString(p.name), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_10, _toDisplayString($setup.formatCurrency(p.sell_price)), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_11, \"Stock: \" + _toDisplayString(p.stock), 1 /* TEXT */)]), _createElementVNode(\"button\", {\n      onClick: $event => $setup.addToCart(p),\n      class: \"mt-3 bg-blue-500 text-white text-sm py-1 rounded hover:bg-blue-600\"\n    }, \" Add \", 8 /* PROPS */, _hoisted_12)]);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createCommentVNode(\" Cart \"), _createElementVNode(\"section\", _hoisted_13, [_cache[21] || (_cache[21] = _createElementVNode(\"h3\", {\n    class: \"text-lg font-semibold mb-4\"\n  }, \"Cart Order\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"table\", _hoisted_15, [_cache[11] || (_cache[11] = _createElementVNode(\"thead\", {\n    class: \"sticky top-0 bg-gray-100\"\n  }, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", {\n    class: \"p-2\"\n  }, \"Item\"), _createElementVNode(\"th\", {\n    class: \"p-2\"\n  }, \"Qty\"), _createElementVNode(\"th\", {\n    class: \"p-2\"\n  }, \"Subtotal\"), _createElementVNode(\"th\", {\n    class: \"p-2\"\n  }, \"X\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.cart, (item, i) => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: item.id,\n      class: \"border-t\"\n    }, [_createElementVNode(\"td\", _hoisted_16, _toDisplayString(item.name), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_17, [_withDirectives(_createElementVNode(\"input\", {\n      type: \"number\",\n      \"onUpdate:modelValue\": $event => item.qty = $event,\n      min: \"1\",\n      max: item.stock,\n      class: \"w-14 border rounded p-1\",\n      onInput: $setup.calculateTotals\n    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_18), [[_vModelText, item.qty, void 0, {\n      number: true\n    }]])]), _createElementVNode(\"td\", _hoisted_19, _toDisplayString($setup.formatCurrency(item.sell_price * item.qty)), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_20, [_createElementVNode(\"button\", {\n      onClick: $event => $setup.removeFromCart(i),\n      class: \"text-red-500\"\n    }, \"✕\", 8 /* PROPS */, _hoisted_21)])]);\n  }), 128 /* KEYED_FRAGMENT */)), $setup.cart.length === 0 ? (_openBlock(), _createElementBlock(\"tr\", _hoisted_22, [...(_cache[10] || (_cache[10] = [_createElementVNode(\"td\", {\n    colspan: \"4\",\n    class: \"text-center text-gray-500 py-4\"\n  }, \"Cart kosong\", -1 /* CACHED */)]))])) : _createCommentVNode(\"v-if\", true)])])]), _createCommentVNode(\" Summary \"), _createElementVNode(\"div\", _hoisted_23, [_cache[20] || (_cache[20] = _createElementVNode(\"h4\", {\n    class: \"font-semibold mb-2\"\n  }, \"Order Summary\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_24, [_cache[12] || (_cache[12] = _createElementVNode(\"span\", null, \"Subtotal\", -1 /* CACHED */)), _createElementVNode(\"span\", null, _toDisplayString($setup.formatCurrency($setup.subtotal)), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_25, [_cache[13] || (_cache[13] = _createElementVNode(\"span\", null, \"Discount\", -1 /* CACHED */)), _createElementVNode(\"span\", null, _toDisplayString($setup.formatCurrency($setup.discount)), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_26, [_cache[14] || (_cache[14] = _createElementVNode(\"span\", null, \"Total\", -1 /* CACHED */)), _createElementVNode(\"span\", null, _toDisplayString($setup.formatCurrency($setup.totalAmount)), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_27, [_cache[17] || (_cache[17] = _createElementVNode(\"label\", {\n    class: \"block mb-2 text-sm\"\n  }, \"Customer Name (Optional)\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.customerName = $event),\n    type: \"text\",\n    placeholder: \"Nama pelanggan\",\n    class: \"w-full border rounded p-2 text-sm mb-3\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.customerName]]), _cache[18] || (_cache[18] = _createElementVNode(\"label\", {\n    class: \"block mb-2 text-sm\"\n  }, \"Voucher (Optional)\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.voucherCode = $event),\n    class: \"w-full border rounded p-2 text-sm mb-3\",\n    onChange: $setup.validateVoucher\n  }, [_cache[15] || (_cache[15] = _createElementVNode(\"option\", {\n    value: \"\"\n  }, \"Pilih Voucher\", -1 /* CACHED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.vouchers, voucher => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: voucher.id,\n      value: voucher.Code\n    }, _toDisplayString(voucher.Code) + \" (\" + _toDisplayString(voucher.Type) + \": \" + _toDisplayString(voucher.Value) + \") \", 9 /* TEXT, PROPS */, _hoisted_28);\n  }), 128 /* KEYED_FRAGMENT */))], 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelSelect, $setup.voucherCode]]), _cache[19] || (_cache[19] = _createElementVNode(\"label\", {\n    class: \"block mb-2 text-sm\"\n  }, \"Amount Received\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $setup.amountReceived = $event),\n    type: \"number\",\n    placeholder: \"Masukkan nominal\",\n    class: \"w-full border rounded p-2 text-sm\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.amountReceived, void 0, {\n    number: true\n  }]]), _createElementVNode(\"p\", _hoisted_29, [_cache[16] || (_cache[16] = _createTextVNode(\"Change: \", -1 /* CACHED */)), _createElementVNode(\"span\", _hoisted_30, _toDisplayString($setup.formatCurrency($setup.change)), 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_31, [_createElementVNode(\"button\", {\n    onClick: $setup.checkout,\n    disabled: $setup.cart.length === 0 || $setup.amountReceived < $setup.totalAmount,\n    class: \"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 disabled:opacity-50\"\n  }, \" Pay Now \", 8 /* PROPS */, _hoisted_32)])])])])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","$setup","isLoggedIn","_createBlock","key","_createElementVNode","_hoisted_2","_createCommentVNode","_hoisted_3","username","$event","type","placeholder","password","onClick","login","_Fragment","_hoisted_4","_hoisted_5","_hoisted_6","search","selectedCategory","value","_renderList","categories","cat","_hoisted_7","_hoisted_8","filteredProducts","p","id","_hoisted_9","_toDisplayString","name","_hoisted_10","formatCurrency","sell_price","_hoisted_11","stock","addToCart","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","cart","item","i","_hoisted_16","_hoisted_17","qty","min","max","onInput","calculateTotals","number","_hoisted_19","_hoisted_20","removeFromCart","_hoisted_21","length","_hoisted_22","_cache","colspan","_hoisted_23","_hoisted_24","subtotal","_hoisted_25","discount","_hoisted_26","totalAmount","_hoisted_27","customerName","voucherCode","onChange","validateVoucher","vouchers","voucher","Code","Type","Value","_hoisted_28","amountReceived","_hoisted_29","_hoisted_30","change","_hoisted_31","checkout","disabled","_hoisted_32"],"sources":["C:\\Users\\Personal\\Documents\\PKL\\aplikasi\\aplikasi\\src\\views\\CashierPage.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen flex bg-white\">\n    <CashierSidebar v-if=\"isLoggedIn\" />\n\n    <main class=\"flex-1 p-6 max-w-7xl mx-auto w-full\">\n      <h2 class=\"text-2xl font-bold text-center mb-6\">Cashier - Order</h2>\n\n      <!-- Login -->\n      <div v-if=\"!isLoggedIn\" class=\"max-w-sm mx-auto border rounded p-6 shadow\">\n        <h3 class=\"text-lg font-semibold mb-4\">Login Kasir</h3>\n        <input v-model=\"username\" type=\"text\" placeholder=\"Username\" class=\"w-full border rounded p-2 mb-3 text-sm\" />\n        <input v-model=\"password\" type=\"password\" placeholder=\"Password\" class=\"w-full border rounded p-2 mb-3 text-sm\" />\n        <button @click=\"login\" class=\"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700\">\n          Login\n        </button>\n      </div>\n\n      <!-- Kasir Dashboard -->\n      <div v-else class=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        <!-- Produk -->\n        <section class=\"md:col-span-2\">\n          <h3 class=\"text-lg font-semibold mb-4\">Available Products</h3>\n\n          <div class=\"flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-4\">\n            <input v-model=\"search\" type=\"text\" placeholder=\"Cari produk...\" class=\"w-full md:w-1/2 border rounded p-2 text-sm\" />\n            <select v-model=\"selectedCategory\" class=\"border rounded p-2 text-sm w-full md:w-48\">\n              <option value=\"All\">Semua Kategori</option>\n              <option v-for=\"cat in categories\" :key=\"cat\" :value=\"cat\">{{ cat }}</option>\n            </select>\n          </div>\n\n          <div class=\"grid grid-cols-2 gap-4\">\n            <div v-for=\"p in filteredProducts\" :key=\"p.id\" class=\"border rounded-lg p-4 bg-white shadow flex flex-col justify-between\">\n              <div>\n                <h4 class=\"font-semibold\">{{ p.name }}</h4>\n                <p class=\"text-sm text-gray-600\">{{ formatCurrency(p.sell_price) }}</p>\n                <p class=\"text-xs text-green-600\">Stock: {{ p.stock }}</p>\n              </div>\n              <button @click=\"addToCart(p)\" class=\"mt-3 bg-blue-500 text-white text-sm py-1 rounded hover:bg-blue-600\">\n                Add\n              </button>\n            </div>\n          </div>\n        </section>\n\n        <!-- Cart -->\n        <section class=\"md:col-span-1 flex flex-col\">\n          <h3 class=\"text-lg font-semibold mb-4\">Cart Order</h3>\n\n          <div class=\"border rounded-lg p-3 bg-white shadow max-h-64 overflow-y-auto\">\n            <table class=\"w-full text-sm\">\n              <thead class=\"sticky top-0 bg-gray-100\">\n                <tr>\n                  <th class=\"p-2\">Item</th>\n                  <th class=\"p-2\">Qty</th>\n                  <th class=\"p-2\">Subtotal</th>\n                  <th class=\"p-2\">X</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr v-for=\"(item, i) in cart\" :key=\"item.id\" class=\"border-t\">\n                  <td class=\"p-2\">{{ item.name }}</td>\n                  <td class=\"p-2\">\n                    <input type=\"number\" v-model.number=\"item.qty\" min=\"1\" :max=\"item.stock\" class=\"w-14 border rounded p-1\" @input=\"calculateTotals\" />\n                  </td>\n                  <td class=\"p-2\">{{ formatCurrency(item.sell_price * item.qty) }}</td>\n                  <td class=\"p-2\"><button @click=\"removeFromCart(i)\" class=\"text-red-500\">✕</button></td>\n                </tr>\n                <tr v-if=\"cart.length === 0\">\n                  <td colspan=\"4\" class=\"text-center text-gray-500 py-4\">Cart kosong</td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n\n          <!-- Summary -->\n          <div class=\"mt-6 border rounded-lg p-3 bg-white shadow\">\n            <h4 class=\"font-semibold mb-2\">Order Summary</h4>\n            <div class=\"flex justify-between text-sm\"><span>Subtotal</span><span>{{ formatCurrency(subtotal) }}</span></div>\n            <div class=\"flex justify-between text-sm\"><span>Discount</span><span>{{ formatCurrency(discount) }}</span></div>\n            <div class=\"flex justify-between text-sm font-semibold\"><span>Total</span><span>{{ formatCurrency(totalAmount) }}</span></div>\n\n            <div class=\"mt-4\">\n              <label class=\"block mb-2 text-sm\">Customer Name (Optional)</label>\n              <input v-model=\"customerName\" type=\"text\" placeholder=\"Nama pelanggan\" class=\"w-full border rounded p-2 text-sm mb-3\" />\n\n              <label class=\"block mb-2 text-sm\">Voucher (Optional)</label>\n              <select v-model=\"voucherCode\" class=\"w-full border rounded p-2 text-sm mb-3\" @change=\"validateVoucher\">\n                <option value=\"\">Pilih Voucher</option>\n                <option v-for=\"voucher in vouchers\" :key=\"voucher.id\" :value=\"voucher.Code\">\n                  {{ voucher.Code }} ({{ voucher.Type }}: {{ voucher.Value }})\n                </option>\n              </select>\n\n              <label class=\"block mb-2 text-sm\">Amount Received</label>\n              <input v-model.number=\"amountReceived\" type=\"number\" placeholder=\"Masukkan nominal\" class=\"w-full border rounded p-2 text-sm\" />\n              <p class=\"text-sm mt-1\">Change: <span class=\"font-semibold\">{{ formatCurrency(change) }}</span></p>\n            </div>\n\n            <div class=\"flex flex-col gap-3 mt-6\">\n              <button @click=\"checkout\" :disabled=\"cart.length === 0 || amountReceived < totalAmount\" class=\"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 disabled:opacity-50\">\n                Pay Now\n              </button>\n            </div>\n          </div>\n        </section>\n      </div>\n    </main>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport CashierSidebar from \"@/components/CashierSidebar.vue\";\n\n// State\nconst username = ref(\"\");\nconst password = ref(\"\");\nconst isLoggedIn = ref(!!localStorage.getItem(\"token\"));\nconst customerName = ref(\"\");\nconst voucherCode = ref(\"\");\nconst products = ref([]);\nconst cart = ref([]);\nconst search = ref(\"\");\nconst selectedCategory = ref(\"All\");\nconst categories = ref([]);\nconst vouchers = ref([]);\nconst amountReceived = ref(0);\nconst discount = ref(0);\n\n// Axios\nconst api = axios.create({ baseURL: \"http://localhost:8081/api/v1\" });\nconst savedToken = localStorage.getItem(\"token\");\nif (savedToken) api.defaults.headers.common[\"Authorization\"] = `Bearer ${savedToken}`;\n\n// Login\nconst login = async () => {\n  try {\n    const res = await axios.post(\"http://localhost:8081/api/v1/auth/login\", {\n      username: username.value,\n      password: password.value,\n    });\n    const token = res.data.token;\n    localStorage.setItem(\"token\", token);\n    isLoggedIn.value = true;\n    api.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n    await loadProducts();\n    await loadVouchers();\n  } catch (err) {\n    alert(\"Login gagal: \" + (err.response?.data?.error || err.message));\n  }\n};\n\n// Produk\nconst loadProducts = async () => {\n  try {\n    const res = await api.get(\"/products\");\n    products.value = res.data.data || [];\n    categories.value = [...new Set(products.value.map((p) => p.category?.name || \"Unknown\"))];\n  } catch (err) {\n    console.error(\"Error loading products:\", err);\n  }\n};\n\n// Vouchers\nconst loadVouchers = async () => {\n  try {\n    const res = await api.get(\"/vouchers\");\n    vouchers.value = res.data.data.filter((v) => v.Active);\n  } catch (err) {\n    console.error(\"Error loading vouchers:\", err);\n  }\n};\n\n// Filter produk\nconst filteredProducts = computed(() =>\n  products.value.filter((p) => {\n    const matchSearch = p.name.toLowerCase().includes(search.value.toLowerCase());\n    const matchCategory = selectedCategory.value === \"All\" || p.category?.name === selectedCategory.value;\n    return matchSearch && matchCategory;\n  })\n);\n\n// Cart\nconst addToCart = (product) => {\n  if (product.stock <= 0) {\n    alert(`Stok untuk ${product.name} sudah habis!`);\n    return;\n  }\n  const existing = cart.value.find((i) => i.id === product.id);\n  if (existing) {\n    if (existing.qty < product.stock) existing.qty++;\n    else alert(\"Stok tidak cukup!\");\n  } else {\n    cart.value.push({ ...product, qty: 1 });\n  }\n  calculateTotals();\n};\n\nconst removeFromCart = (index) => {\n  cart.value.splice(index, 1);\n  calculateTotals();\n};\n\n// Hitungan\nconst subtotal = computed(() => cart.value.reduce((sum, item) => sum + item.sell_price * item.qty, 0));\nconst totalAmount = computed(() => Math.max(0, subtotal.value - discount.value));\nconst change = computed(() => Math.max(0, amountReceived.value - totalAmount.value));\n\n// Voucher\nconst validateVoucher = () => {\n  if (!voucherCode.value) {\n    discount.value = 0;\n    return;\n  }\n  const v = vouchers.value.find((vv) => vv.Code === voucherCode.value);\n  if (!v) {\n    alert(\"Voucher tidak valid!\");\n    discount.value = 0;\n    voucherCode.value = \"\";\n    return;\n  }\n  if (v.Type === \"PERCENT\") discount.value = (v.Value / 100) * subtotal.value;\n  else if (v.Type === \"AMOUNT\") discount.value = Math.min(v.Value, subtotal.value);\n  else discount.value = 0;\n};\n\n// Totals\nconst calculateTotals = () => {\n  cart.value.forEach((item) => {\n    if (item.qty > item.stock) {\n      item.qty = item.stock;\n      alert(`Qty ${item.name} disesuaikan ke stok: ${item.stock}`);\n    }\n  });\n  validateVoucher();\n};\n\n// Checkout\nconst checkout = async () => {\n  try {\n    const payload = {\n      customer_name: customerName.value || null,\n      voucher_code: voucherCode.value || null,\n      paid_amount: amountReceived.value,\n      items: cart.value.map((i) => ({ product_id: i.id, qty: i.qty })),\n    };\n    const res = await api.post(\"/kasir/sales\", payload);\n    alert(`Pembayaran berhasil! ID Transaksi: ${res.data.id}`);\n\n    // Reset\n    cart.value = [];\n    amountReceived.value = 0;\n    customerName.value = \"\";\n    voucherCode.value = \"\";\n    discount.value = 0;\n    await loadProducts();\n  } catch (err) {\n    alert(err.response?.data?.error || \"Transaksi gagal!\");\n  }\n};\n\n// Currency\nconst formatCurrency = (num) =>\n  new Intl.NumberFormat(\"id-ID\", { style: \"currency\", currency: \"IDR\", minimumFractionDigits: 0 }).format(num);\n\n// Mount\nonMounted(() => {\n  if (isLoggedIn.value) {\n    loadProducts();\n    loadVouchers();\n  }\n});\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}