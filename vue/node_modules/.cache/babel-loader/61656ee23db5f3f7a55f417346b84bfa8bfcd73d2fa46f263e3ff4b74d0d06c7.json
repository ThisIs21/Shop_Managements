{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport { ref, onMounted, computed } from \"vue\";\nimport { initializeApp } from \"https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js\";\nimport { getFirestore, collection, onSnapshot, doc, deleteDoc } from \"https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js\";\nimport { getAuth, signInWithCustomToken, signInAnonymously } from \"https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js\";\n\n// CATATAN PENTING: File ini mengimpor komponen OwnerLayouts.vue yang tidak tersedia di sini.\n// Untuk menjalankan kode ini, Anda harus memiliki file OwnerLayouts.vue yang sesuai.\n// Jika tidak, Anda akan mendapatkan error.\n\n// --- KONFIGURASI FIREBASE (WAJIB) ---\n\nexport default {\n  __name: 'UnitOwner',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');\n    const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;\n    const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';\n\n    // Inisialisasi Firebase\n    const app = initializeApp(firebaseConfig);\n    const db = getFirestore(app);\n    const auth = getAuth(app);\n    const units = ref([]);\n    const loading = ref(true);\n    const messageText = ref(null);\n    const messageType = ref('success');\n    const messageClass = computed(() => ({\n      'bg-green-500': messageType.value === 'success',\n      'bg-red-500': messageType.value === 'error'\n    }));\n\n    // Fungsi untuk menampilkan pesan kustom\n    const showMessage = (text, type = 'success', duration = 3000) => {\n      messageText.value = text;\n      messageType.value = type;\n      setTimeout(() => {\n        messageText.value = null;\n      }, duration);\n    };\n\n    // Fungsi untuk mensimulasikan navigasi ke halaman tambah unit\n    const addUnit = () => {\n      showMessage(\"Simulasi navigasi: 'Add Unit' diklik.\", 'success');\n      // Logika navigasi sesungguhnya akan diimplementasikan dengan vue-router\n    };\n\n    // Fungsi untuk mensimulasikan navigasi ke halaman edit unit\n    const editUnit = id => {\n      showMessage(`Simulasi navigasi: Edit unit dengan ID ${id} diklik.`, 'success');\n      // Logika navigasi sesungguhnya akan diimplementasikan dengan vue-router\n    };\n    const deleteUnit = async id => {\n      // Menggunakan pesan kustom sebagai pengganti `confirm`\n      if (window.confirm(\"Apakah Anda yakin ingin menghapus unit ini?\")) {\n        try {\n          const docRef = doc(db, `artifacts/${appId}/users/${auth.currentUser.uid}/units`, id);\n          await deleteDoc(docRef);\n          showMessage(\"Unit berhasil dihapus!\");\n        } catch (error) {\n          console.error(\"Error deleting unit:\", error);\n          showMessage(\"Gagal menghapus unit.\", 'error');\n        }\n      }\n    };\n    onMounted(async () => {\n      // Autentikasi anonim atau dengan token\n      if (initialAuthToken) {\n        await signInWithCustomToken(auth, initialAuthToken);\n      } else {\n        await signInAnonymously(auth);\n      }\n\n      // Mendengarkan perubahan data secara real-time dari Firestore\n      const q = collection(db, `artifacts/${appId}/users/${auth.currentUser.uid}/units`);\n      onSnapshot(q, snapshot => {\n        const fetchedUnits = [];\n        snapshot.forEach(doc => {\n          // Pastikan nama bidang cocok dengan kode aslinya (misalnya, Name)\n          fetchedUnits.push({\n            id: doc.id,\n            Name: doc.data().Name\n          });\n        });\n        units.value = fetchedUnits;\n        loading.value = false;\n      }, error => {\n        console.error(\"Error fetching units:\", error);\n        loading.value = false;\n        showMessage(\"Gagal memuat data unit.\", 'error');\n      });\n    });\n    const __returned__ = {\n      firebaseConfig,\n      initialAuthToken,\n      appId,\n      app,\n      db,\n      auth,\n      units,\n      loading,\n      messageText,\n      messageType,\n      messageClass,\n      showMessage,\n      addUnit,\n      editUnit,\n      deleteUnit,\n      ref,\n      onMounted,\n      computed,\n      get initializeApp() {\n        return initializeApp;\n      },\n      get getFirestore() {\n        return getFirestore;\n      },\n      get collection() {\n        return collection;\n      },\n      get onSnapshot() {\n        return onSnapshot;\n      },\n      get doc() {\n        return doc;\n      },\n      get deleteDoc() {\n        return deleteDoc;\n      },\n      get getAuth() {\n        return getAuth;\n      },\n      get signInWithCustomToken() {\n        return signInWithCustomToken;\n      },\n      get signInAnonymously() {\n        return signInAnonymously;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","computed","initializeApp","getFirestore","collection","onSnapshot","doc","deleteDoc","getAuth","signInWithCustomToken","signInAnonymously","firebaseConfig","JSON","parse","__firebase_config","initialAuthToken","__initial_auth_token","appId","__app_id","app","db","auth","units","loading","messageText","messageType","messageClass","value","showMessage","text","type","duration","setTimeout","addUnit","editUnit","id","deleteUnit","window","confirm","docRef","currentUser","uid","error","console","q","snapshot","fetchedUnits","forEach","push","Name","data"],"sources":["C:/Users/SPC STYLE 5/aplikasi/src/views/UnitOwner.vue"],"sourcesContent":["<template>\r\n  <OwnerLayouts>\r\n    <div class=\"flex flex-1 justify-center py-5\">\r\n      <div class=\"layout-content-container flex flex-col max-w-[960px] flex-1\">\r\n        <div class=\"flex flex-wrap justify-between gap-3 p-4\">\r\n          <p\r\n            class=\"text-[#111418] tracking-light text-[32px] font-bold leading-tight min-w-72\"\r\n          >\r\n            Units\r\n          </p>\r\n          <button\r\n            @click=\"addUnit\"\r\n            class=\"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-8 px-4 bg-[#f0f2f5] text-[#111418] text-sm font-medium leading-normal\"\r\n          >\r\n            <span class=\"truncate\">Add Unit</span>\r\n          </button>\r\n        </div>\r\n\r\n        <!-- Kotak pesan/alert kustom -->\r\n        <div v-if=\"messageText\" :class=\"messageClass\" class=\"p-4 rounded-lg mb-4 text-center text-white mx-4\">\r\n          {{ messageText }}\r\n        </div>\r\n\r\n        <div class=\"px-4 py-3\">\r\n          <div\r\n            class=\"flex overflow-hidden rounded-lg border border-[#dbe0e6] bg-white\"\r\n          >\r\n            <table class=\"flex-1 table-auto\">\r\n              <thead>\r\n                <tr class=\"bg-white\">\r\n                  <th\r\n                    class=\"px-4 py-3 text-left text-[#111418] text-sm font-medium leading-normal\"\r\n                  >\r\n                    Name\r\n                  </th>\r\n                  <th\r\n                    class=\"px-4 py-3 text-left text-[#111418] text-sm font-medium leading-normal\"\r\n                  >\r\n                    Actions\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr v-if=\"loading\" class=\"border-t border-t-[#dbe0e6]\">\r\n                  <td\r\n                    colspan=\"2\"\r\n                    class=\"h-[72px] px-4 py-2 text-center text-[#60758a] text-sm font-normal leading-normal\"\r\n                  >\r\n                    Loading...\r\n                  </td>\r\n                </tr>\r\n                <tr\r\n                  v-else-if=\"units.length === 0\"\r\n                  class=\"border-t border-t-[#dbe0e6]\"\r\n                >\r\n                  <td\r\n                    colspan=\"2\"\r\n                    class=\"h-[72px] px-4 py-2 text-center text-[#60758a] text-sm font-normal leading-normal\"\r\n                  >\r\n                    No units found.\r\n                  </td>\r\n                </tr>\r\n                <tr\r\n                  v-for=\"unit in units\"\r\n                  :key=\"unit.id\"\r\n                  class=\"border-t border-t-[#dbe0e6]\"\r\n                >\r\n                  <td\r\n                    class=\"h-[72px] px-4 py-2 text-[#111418] text-sm font-normal leading-normal\"\r\n                  >\r\n                    {{ unit.Name }}\r\n                  </td>\r\n                  <td\r\n                    class=\"h-[72px] px-4 py-2 text-[#60758a] text-sm font-bold leading-normal tracking-[0.015em]\"\r\n                  >\r\n                    <button\r\n                      @click=\"editUnit(unit.id)\"\r\n                      class=\"text-blue-500 hover:underline cursor-pointer\"\r\n                      >Edit</button\r\n                    >\r\n                    /\r\n                    <button\r\n                      @click=\"deleteUnit(unit.id)\"\r\n                      class=\"text-red-500 hover:underline cursor-pointer\"\r\n                      >Delete</button\r\n                    >\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </OwnerLayouts>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed } from \"vue\";\r\nimport { initializeApp } from \"https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js\";\r\nimport { getFirestore, collection, onSnapshot, doc, deleteDoc } from \"https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js\";\r\nimport { getAuth, signInWithCustomToken, signInAnonymously } from \"https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js\";\r\n\r\n// CATATAN PENTING: File ini mengimpor komponen OwnerLayouts.vue yang tidak tersedia di sini.\r\n// Untuk menjalankan kode ini, Anda harus memiliki file OwnerLayouts.vue yang sesuai.\r\n// Jika tidak, Anda akan mendapatkan error.\r\n\r\n// --- KONFIGURASI FIREBASE (WAJIB) ---\r\nconst firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');\r\nconst initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;\r\nconst appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';\r\n\r\n// Inisialisasi Firebase\r\nconst app = initializeApp(firebaseConfig);\r\nconst db = getFirestore(app);\r\nconst auth = getAuth(app);\r\n\r\nconst units = ref([]);\r\nconst loading = ref(true);\r\nconst messageText = ref(null);\r\nconst messageType = ref('success');\r\n\r\nconst messageClass = computed(() => ({\r\n  'bg-green-500': messageType.value === 'success',\r\n  'bg-red-500': messageType.value === 'error',\r\n}));\r\n\r\n// Fungsi untuk menampilkan pesan kustom\r\nconst showMessage = (text, type = 'success', duration = 3000) => {\r\n  messageText.value = text;\r\n  messageType.value = type;\r\n  setTimeout(() => {\r\n    messageText.value = null;\r\n  }, duration);\r\n};\r\n\r\n// Fungsi untuk mensimulasikan navigasi ke halaman tambah unit\r\nconst addUnit = () => {\r\n  showMessage(\"Simulasi navigasi: 'Add Unit' diklik.\", 'success');\r\n  // Logika navigasi sesungguhnya akan diimplementasikan dengan vue-router\r\n};\r\n\r\n// Fungsi untuk mensimulasikan navigasi ke halaman edit unit\r\nconst editUnit = (id) => {\r\n  showMessage(`Simulasi navigasi: Edit unit dengan ID ${id} diklik.`, 'success');\r\n  // Logika navigasi sesungguhnya akan diimplementasikan dengan vue-router\r\n};\r\n\r\nconst deleteUnit = async (id) => {\r\n  // Menggunakan pesan kustom sebagai pengganti `confirm`\r\n  if (window.confirm(\"Apakah Anda yakin ingin menghapus unit ini?\")) {\r\n    try {\r\n      const docRef = doc(db, `artifacts/${appId}/users/${auth.currentUser.uid}/units`, id);\r\n      await deleteDoc(docRef);\r\n      showMessage(\"Unit berhasil dihapus!\");\r\n    } catch (error) {\r\n      console.error(\"Error deleting unit:\", error);\r\n      showMessage(\"Gagal menghapus unit.\", 'error');\r\n    }\r\n  }\r\n};\r\n\r\nonMounted(async () => {\r\n  // Autentikasi anonim atau dengan token\r\n  if (initialAuthToken) {\r\n    await signInWithCustomToken(auth, initialAuthToken);\r\n  } else {\r\n    await signInAnonymously(auth);\r\n  }\r\n\r\n  // Mendengarkan perubahan data secara real-time dari Firestore\r\n  const q = collection(db, `artifacts/${appId}/users/${auth.currentUser.uid}/units`);\r\n  onSnapshot(q, (snapshot) => {\r\n    const fetchedUnits = [];\r\n    snapshot.forEach((doc) => {\r\n      // Pastikan nama bidang cocok dengan kode aslinya (misalnya, Name)\r\n      fetchedUnits.push({ id: doc.id, Name: doc.data().Name });\r\n    });\r\n    units.value = fetchedUnits;\r\n    loading.value = false;\r\n  }, (error) => {\r\n    console.error(\"Error fetching units:\", error);\r\n    loading.value = false;\r\n    showMessage(\"Gagal memuat data unit.\", 'error');\r\n  });\r\n});\r\n</script>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}