{"ast":null,"code":"import { createVNode as _createVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"flex size-full min-h-screen flex-col bg-white font-manrope lg:flex-row\"\n};\nconst _hoisted_2 = {\n  class: \"flex flex-1 flex-col\"\n};\nconst _hoisted_3 = {\n  class: \"flex-1 p-8\"\n};\nconst _hoisted_4 = {\n  class: \"layout-content-container flex flex-col flex-1\"\n};\nconst _hoisted_5 = {\n  class: \"px-4 py-3 @container\"\n};\nconst _hoisted_6 = {\n  class: \"flex overflow-hidden rounded-lg border border-[#dbe0e6] bg-white\"\n};\nconst _hoisted_7 = {\n  class: \"flex-1\"\n};\nconst _hoisted_8 = {\n  class: \"h-[72px] px-4 py-2 text-[#111418] text-sm\"\n};\nconst _hoisted_9 = {\n  class: \"h-[72px] px-4 py-2 text-[#60758a] text-sm\"\n};\nconst _hoisted_10 = {\n  class: \"h-[72px] px-4 py-2 text-[#60758a] text-sm\"\n};\nconst _hoisted_11 = {\n  class: \"h-[72px] px-4 py-2 text-[#60758a] text-sm\"\n};\nconst _hoisted_12 = {\n  class: \"h-[72px] px-4 py-2 text-sm font-bold flex gap-2\"\n};\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = [\"onClick\"];\nconst _hoisted_15 = {\n  key: 0\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode($setup[\"KepalaGudangSidebar\"]), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"main\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_cache[2] || (_cache[2] = _createElementVNode(\"div\", {\n    class: \"mb-6\"\n  }, [_createElementVNode(\"p\", {\n    class: \"text-[#111418] tracking-light text-[32px] font-bold leading-tight\"\n  }, \" Purchase Orders Pending Approval \")], -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"table\", _hoisted_7, [_cache[1] || (_cache[1] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", {\n    class: \"bg-white\"\n  }, [_createElementVNode(\"th\", {\n    class: \"px-4 py-3 text-left text-[#111418] text-sm font-medium\"\n  }, \" PO Number \"), _createElementVNode(\"th\", {\n    class: \"px-4 py-3 text-left text-[#111418] text-sm font-medium\"\n  }, \" Supplier \"), _createElementVNode(\"th\", {\n    class: \"px-4 py-3 text-left text-[#111418] text-sm font-medium\"\n  }, \" Date \"), _createElementVNode(\"th\", {\n    class: \"px-4 py-3 text-left text-[#111418] text-sm font-medium\"\n  }, \" Total \"), _createElementVNode(\"th\", {\n    class: \"px-4 py-3 text-left text-[#60758a] text-sm font-medium\"\n  }, \" Action \")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.purchases, po => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: po.id,\n      class: \"border-t border-t-[#dbe0e6]\"\n    }, [_createElementVNode(\"td\", _hoisted_8, _toDisplayString(po.id), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_9, _toDisplayString(po.supplier?.name || '-'), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_10, _toDisplayString($setup.formatDate(po.date)), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_11, _toDisplayString($setup.formatCurrency(po.total)), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_12, [_createElementVNode(\"button\", {\n      onClick: $event => $setup.approvePO(po.id),\n      class: \"px-3 py-1 rounded bg-green-500 text-white hover:bg-green-600\"\n    }, \" Approve \", 8 /* PROPS */, _hoisted_13), _createElementVNode(\"button\", {\n      onClick: $event => $setup.rejectPO(po.id),\n      class: \"px-3 py-1 rounded bg-red-500 text-white hover:bg-red-600\"\n    }, \" Reject \", 8 /* PROPS */, _hoisted_14)])]);\n  }), 128 /* KEYED_FRAGMENT */)), $setup.purchases.length === 0 ? (_openBlock(), _createElementBlock(\"tr\", _hoisted_15, [...(_cache[0] || (_cache[0] = [_createElementVNode(\"td\", {\n    colspan: \"5\",\n    class: \"text-center py-4 text-[#60758a] text-sm\"\n  }, \" No pending purchase orders \", -1 /* CACHED */)]))])) : _createCommentVNode(\"v-if\", true)])])])])])])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createVNode","$setup","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_Fragment","_renderList","purchases","po","key","id","_hoisted_8","_toDisplayString","_hoisted_9","supplier","name","_hoisted_10","formatDate","date","_hoisted_11","formatCurrency","total","_hoisted_12","onClick","$event","approvePO","_hoisted_13","rejectPO","_hoisted_14","length","_hoisted_15","_cache","colspan"],"sources":["C:\\Users\\Personal\\Documents\\PKL\\aplikasi\\aplikasi\\src\\views\\PurchaseOrderKepalaGudang.vue"],"sourcesContent":["<script setup>\nimport { ref, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport KepalaGudangSidebar from \"@/components/KepalaGudangSidebar.vue\";\n\nconst purchases = ref([]);\nconst token = localStorage.getItem(\"token\"); // ambil token login\n\n// Ambil data dari backend\nconst fetchPurchases = async () => {\n  try {\n    const res = await axios.get(\"http://localhost:8081/history/purchases\", {\n      params: { page: 1, size: 20, q: \"\" }, // backend support paging & search\n      headers: {\n        Authorization: `Bearer ${token}`, // kirim token ke backend\n      },\n    });\n\n    // Backend return array langsung, bukan data.data\n    purchases.value = Array.isArray(res.data) ? res.data : res.data.data || [];\n  } catch (err) {\n    console.error(\"Failed to fetch purchases:\", err);\n  }\n};\n\n// Approve\nconst approvePO = async (id) => {\n  try {\n    await axios.post(\n      `http://localhost:8081/purchases/${id}/approve`,\n      {},\n      {\n        headers: { Authorization: `Bearer ${token}` },\n      }\n    );\n    purchases.value = purchases.value.filter((po) => po.id !== id);\n  } catch (err) {\n    console.error(\"Failed to approve:\", err);\n  }\n};\n\n// Reject\nconst rejectPO = async (id) => {\n  try {\n    await axios.post(\n      `http://localhost:8081/purchases/${id}/reject`,\n      {},\n      {\n        headers: { Authorization: `Bearer ${token}` },\n      }\n    );\n    purchases.value = purchases.value.filter((po) => po.id !== id);\n  } catch (err) {\n    console.error(\"Failed to reject:\", err);\n  }\n};\n\n// Format tanggal\nconst formatDate = (dateStr) => {\n  if (!dateStr) return \"-\";\n  return new Date(dateStr).toLocaleDateString();\n};\n\n// Format mata uang\nconst formatCurrency = (val) => {\n  if (val === null || val === undefined) return \"-\";\n  return new Intl.NumberFormat(\"en-US\", {\n    style: \"currency\",\n    currency: \"USD\",\n  }).format(val);\n};\n\nonMounted(() => {\n  fetchPurchases();\n});\n</script>\n\n<template>\n  <div class=\"flex size-full min-h-screen flex-col bg-white font-manrope lg:flex-row\">\n    <KepalaGudangSidebar />\n\n    <div class=\"flex flex-1 flex-col\">\n      <main class=\"flex-1 p-8\">\n        <div class=\"layout-content-container flex flex-col flex-1\">\n          <div class=\"mb-6\">\n            <p class=\"text-[#111418] tracking-light text-[32px] font-bold leading-tight\">\n              Purchase Orders Pending Approval\n            </p>\n          </div>\n\n          <div class=\"px-4 py-3 @container\">\n            <div class=\"flex overflow-hidden rounded-lg border border-[#dbe0e6] bg-white\">\n              <table class=\"flex-1\">\n                <thead>\n                  <tr class=\"bg-white\">\n                    <th class=\"px-4 py-3 text-left text-[#111418] text-sm font-medium\">\n                      PO Number\n                    </th>\n                    <th class=\"px-4 py-3 text-left text-[#111418] text-sm font-medium\">\n                      Supplier\n                    </th>\n                    <th class=\"px-4 py-3 text-left text-[#111418] text-sm font-medium\">\n                      Date\n                    </th>\n                    <th class=\"px-4 py-3 text-left text-[#111418] text-sm font-medium\">\n                      Total\n                    </th>\n                    <th class=\"px-4 py-3 text-left text-[#60758a] text-sm font-medium\">\n                      Action\n                    </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr\n                    v-for=\"po in purchases\"\n                    :key=\"po.id\"\n                    class=\"border-t border-t-[#dbe0e6]\"\n                  >\n                    <td class=\"h-[72px] px-4 py-2 text-[#111418] text-sm\">\n                      {{ po.id }}\n                    </td>\n                    <td class=\"h-[72px] px-4 py-2 text-[#60758a] text-sm\">\n                      {{ po.supplier?.name || '-' }}\n                    </td>\n                    <td class=\"h-[72px] px-4 py-2 text-[#60758a] text-sm\">\n                      {{ formatDate(po.date) }}\n                    </td>\n                    <td class=\"h-[72px] px-4 py-2 text-[#60758a] text-sm\">\n                      {{ formatCurrency(po.total) }}\n                    </td>\n                    <td class=\"h-[72px] px-4 py-2 text-sm font-bold flex gap-2\">\n                      <button\n                        @click=\"approvePO(po.id)\"\n                        class=\"px-3 py-1 rounded bg-green-500 text-white hover:bg-green-600\"\n                      >\n                        Approve\n                      </button>\n                      <button\n                        @click=\"rejectPO(po.id)\"\n                        class=\"px-3 py-1 rounded bg-red-500 text-white hover:bg-red-600\"\n                      >\n                        Reject\n                      </button>\n                    </td>\n                  </tr>\n                  <tr v-if=\"purchases.length === 0\">\n                    <td colspan=\"5\" class=\"text-center py-4 text-[#60758a] text-sm\">\n                      No pending purchase orders\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  </div>\n</template>\n"],"mappings":";;EA8EOA,KAAK,EAAC;AAAwE;;EAG5EA,KAAK,EAAC;AAAsB;;EACzBA,KAAK,EAAC;AAAY;;EACjBA,KAAK,EAAC;AAA+C;;EAOnDA,KAAK,EAAC;AAAsB;;EAC1BA,KAAK,EAAC;AAAkE;;EACpEA,KAAK,EAAC;AAAQ;;EA0BXA,KAAK,EAAC;AAA2C;;EAGjDA,KAAK,EAAC;AAA2C;;EAGjDA,KAAK,EAAC;AAA2C;;EAGjDA,KAAK,EAAC;AAA2C;;EAGjDA,KAAK,EAAC;AAAiD;;;;;;;uBApD7EC,mBAAA,CA+EM,OA/ENC,UA+EM,GA9EJC,YAAA,CAAuBC,MAAA,0BAEvBC,mBAAA,CA2EM,OA3ENC,UA2EM,GA1EJD,mBAAA,CAyEO,QAzEPE,UAyEO,GAxELF,mBAAA,CAuEM,OAvENG,UAuEM,G,0BAtEJH,mBAAA,CAIM;IAJDL,KAAK,EAAC;EAAM,IACfK,mBAAA,CAEI;IAFDL,KAAK,EAAC;EAAmE,GAAC,oCAE7E,E,qBAGFK,mBAAA,CA+DM,OA/DNI,UA+DM,GA9DJJ,mBAAA,CA6DM,OA7DNK,UA6DM,GA5DJL,mBAAA,CA2DQ,SA3DRM,UA2DQ,G,0BA1DNN,mBAAA,CAkBQ,gBAjBNA,mBAAA,CAgBK;IAhBDL,KAAK,EAAC;EAAU,IAClBK,mBAAA,CAEK;IAFDL,KAAK,EAAC;EAAwD,GAAC,aAEnE,GACAK,mBAAA,CAEK;IAFDL,KAAK,EAAC;EAAwD,GAAC,YAEnE,GACAK,mBAAA,CAEK;IAFDL,KAAK,EAAC;EAAwD,GAAC,QAEnE,GACAK,mBAAA,CAEK;IAFDL,KAAK,EAAC;EAAwD,GAAC,SAEnE,GACAK,mBAAA,CAEK;IAFDL,KAAK,EAAC;EAAwD,GAAC,UAEnE,E,uBAGJK,mBAAA,CAsCQ,iB,kBArCNJ,mBAAA,CA+BKW,SAAA,QAAAC,WAAA,CA9BUT,MAAA,CAAAU,SAAS,EAAfC,EAAE;yBADXd,mBAAA,CA+BK;MA7BFe,GAAG,EAAED,EAAE,CAACE,EAAE;MACXjB,KAAK,EAAC;QAENK,mBAAA,CAEK,MAFLa,UAEK,EAAAC,gBAAA,CADAJ,EAAE,CAACE,EAAE,kBAEVZ,mBAAA,CAEK,MAFLe,UAEK,EAAAD,gBAAA,CADAJ,EAAE,CAACM,QAAQ,EAAEC,IAAI,yBAEtBjB,mBAAA,CAEK,MAFLkB,WAEK,EAAAJ,gBAAA,CADAf,MAAA,CAAAoB,UAAU,CAACT,EAAE,CAACU,IAAI,mBAEvBpB,mBAAA,CAEK,MAFLqB,WAEK,EAAAP,gBAAA,CADAf,MAAA,CAAAuB,cAAc,CAACZ,EAAE,CAACa,KAAK,mBAE5BvB,mBAAA,CAaK,MAbLwB,WAaK,GAZHxB,mBAAA,CAKS;MAJNyB,OAAK,EAAAC,MAAA,IAAE3B,MAAA,CAAA4B,SAAS,CAACjB,EAAE,CAACE,EAAE;MACvBjB,KAAK,EAAC;OACP,WAED,iBAAAiC,WAAA,GACA5B,mBAAA,CAKS;MAJNyB,OAAK,EAAAC,MAAA,IAAE3B,MAAA,CAAA8B,QAAQ,CAACnB,EAAE,CAACE,EAAE;MACtBjB,KAAK,EAAC;OACP,UAED,iBAAAmC,WAAA,E;kCAGM/B,MAAA,CAAAU,SAAS,CAACsB,MAAM,U,cAA1BnC,mBAAA,CAIK,MAAAoC,WAAA,OAAAC,MAAA,QAAAA,MAAA,OAHHjC,mBAAA,CAEK;IAFDkC,OAAO,EAAC,GAAG;IAACvC,KAAK,EAAC;KAA0C,8BAEhE,mB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}