{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref } from \"vue\";\nimport axios from \"axios\";\n\n// ✅ pastikan sesuai nama file: OwnerLayouts.vue (pakai \"s\")\nimport OwnerLayouts from \"../views/OwnerLayouts.vue\";\nexport default {\n  __name: 'ReportStockOpnameOwners',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const fromDate = ref(\"\");\n    const toDate = ref(\"\");\n    const reportData = ref([]);\n    const formatDate = dateStr => {\n      const date = new Date(dateStr);\n      return date.toLocaleDateString();\n    };\n    const fetchReport = async () => {\n      try {\n        const params = {};\n        if (fromDate.value) params.from = fromDate.value;\n        if (toDate.value) params.to = toDate.value;\n        const response = await axios.get(\"http://localhost:8081/api/v1/history/stock-opname\", {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n          },\n          params\n        });\n\n        // mapping data sesuai backend\n        reportData.value = response.data.map(opname => ({\n          date: opname.date,\n          product_name: opname.product?.nama_barang || \"-\",\n          before_stock: opname.before_stock,\n          after_stock: opname.after_stock,\n          difference: opname.after_stock - opname.before_stock\n        }));\n      } catch (error) {\n        console.error(\"Failed to fetch stock opname report:\", error);\n        alert(\"Gagal ambil data laporan stok opname\");\n      }\n    };\n    const __returned__ = {\n      fromDate,\n      toDate,\n      reportData,\n      formatDate,\n      fetchReport,\n      ref,\n      get axios() {\n        return axios;\n      },\n      OwnerLayouts\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","axios","OwnerLayouts","fromDate","toDate","reportData","formatDate","dateStr","date","Date","toLocaleDateString","fetchReport","params","value","from","to","response","get","headers","Authorization","localStorage","getItem","data","map","opname","product_name","product","nama_barang","before_stock","after_stock","difference","error","console","alert"],"sources":["C:/Users/Personal/Documents/PKL/aplikasi/aplikasi/src/views/ReportStockOpnameOwners.vue"],"sourcesContent":["<template>\n  <OwnerLayouts>\n    <div class=\"p-4\">\n      <h1 class=\"text-2xl font-bold mb-4\">Report Stock Opname</h1>\n\n      <!-- Filter tanggal -->\n      <div class=\"mb-4 flex gap-2 items-center\">\n        <label>From:</label>\n        <input type=\"date\" v-model=\"fromDate\" class=\"border p-1 rounded\" />\n        <label>To:</label>\n        <input type=\"date\" v-model=\"toDate\" class=\"border p-1 rounded\" />\n        <button\n          @click=\"fetchReport\"\n          class=\"bg-blue-500 text-white px-4 py-1 rounded\"\n        >\n          Filter\n        </button>\n      </div>\n\n      <!-- Tabel laporan -->\n      <div ref=\"reportContent\">\n        <table class=\"w-full border-collapse border border-gray-300\">\n          <thead>\n            <tr class=\"bg-gray-200\">\n              <th class=\"border border-gray-300 p-2\">#</th>\n              <th class=\"border border-gray-300 p-2\">Date</th>\n              <th class=\"border border-gray-300 p-2\">Product</th>\n              <th class=\"border border-gray-300 p-2\">Stock Before</th>\n              <th class=\"border border-gray-300 p-2\">Stock After</th>\n              <th class=\"border border-gray-300 p-2\">Difference</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"(item, index) in reportData\" :key=\"index\">\n              <td class=\"border border-gray-300 p-2\">{{ index + 1 }}</td>\n              <td class=\"border border-gray-300 p-2\">\n                {{ formatDate(item.date) }}\n              </td>\n              <td class=\"border border-gray-300 p-2\">\n                {{ item.product_name }}\n              </td>\n              <td class=\"border border-gray-300 p-2\">\n                {{ item.before_stock }}\n              </td>\n              <td class=\"border border-gray-300 p-2\">{{ item.after_stock }}</td>\n              <td class=\"border border-gray-300 p-2\">{{ item.difference }}</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </OwnerLayouts>\n</template>\n\n<script setup>\nimport { ref } from \"vue\";\nimport axios from \"axios\";\n\n// ✅ pastikan sesuai nama file: OwnerLayouts.vue (pakai \"s\")\nimport OwnerLayouts from \"../views/OwnerLayouts.vue\";\n\nconst fromDate = ref(\"\");\nconst toDate = ref(\"\");\nconst reportData = ref([]);\n\nconst formatDate = (dateStr) => {\n  const date = new Date(dateStr);\n  return date.toLocaleDateString();\n};\n\nconst fetchReport = async () => {\n  try {\n    const params = {};\n    if (fromDate.value) params.from = fromDate.value;\n    if (toDate.value) params.to = toDate.value;\n\n    const response = await axios.get(\n      \"http://localhost:8081/api/v1/history/stock-opname\",\n      {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n        },\n        params,\n      }\n    );\n\n    // mapping data sesuai backend\n    reportData.value = response.data.map((opname) => ({\n      date: opname.date,\n      product_name: opname.product?.nama_barang || \"-\",\n      before_stock: opname.before_stock,\n      after_stock: opname.after_stock,\n      difference: opname.after_stock - opname.before_stock,\n    }));\n  } catch (error) {\n    console.error(\"Failed to fetch stock opname report:\", error);\n    alert(\"Gagal ambil data laporan stok opname\");\n  }\n};\n</script>\n"],"mappings":";;AAuDA,SAASA,GAAG,QAAQ,KAAK;AACzB,OAAOC,KAAK,MAAM,OAAO;;AAEzB;AACA,OAAOC,YAAY,MAAM,2BAA2B;;;;;;;IAEpD,MAAMC,QAAQ,GAAGH,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMI,MAAM,GAAGJ,GAAG,CAAC,EAAE,CAAC;IACtB,MAAMK,UAAU,GAAGL,GAAG,CAAC,EAAE,CAAC;IAE1B,MAAMM,UAAU,GAAIC,OAAO,IAAK;MAC9B,MAAMC,IAAI,GAAG,IAAIC,IAAI,CAACF,OAAO,CAAC;MAC9B,OAAOC,IAAI,CAACE,kBAAkB,CAAC,CAAC;IAClC,CAAC;IAED,MAAMC,WAAW,GAAG,MAAAA,CAAA,KAAY;MAC9B,IAAI;QACF,MAAMC,MAAM,GAAG,CAAC,CAAC;QACjB,IAAIT,QAAQ,CAACU,KAAK,EAAED,MAAM,CAACE,IAAI,GAAGX,QAAQ,CAACU,KAAK;QAChD,IAAIT,MAAM,CAACS,KAAK,EAAED,MAAM,CAACG,EAAE,GAAGX,MAAM,CAACS,KAAK;QAE1C,MAAMG,QAAQ,GAAG,MAAMf,KAAK,CAACgB,GAAG,CAC9B,mDAAmD,EACnD;UACEC,OAAO,EAAE;YACPC,aAAa,EAAE,UAAUC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;UACxD,CAAC;UACDT;QACF,CACF,CAAC;;QAED;QACAP,UAAU,CAACQ,KAAK,GAAGG,QAAQ,CAACM,IAAI,CAACC,GAAG,CAAEC,MAAM,KAAM;UAChDhB,IAAI,EAAEgB,MAAM,CAAChB,IAAI;UACjBiB,YAAY,EAAED,MAAM,CAACE,OAAO,EAAEC,WAAW,IAAI,GAAG;UAChDC,YAAY,EAAEJ,MAAM,CAACI,YAAY;UACjCC,WAAW,EAAEL,MAAM,CAACK,WAAW;UAC/BC,UAAU,EAAEN,MAAM,CAACK,WAAW,GAAGL,MAAM,CAACI;QAC1C,CAAC,CAAC,CAAC;MACL,CAAC,CAAC,OAAOG,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,sCAAsC,EAAEA,KAAK,CAAC;QAC5DE,KAAK,CAAC,sCAAsC,CAAC;MAC/C;IACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}