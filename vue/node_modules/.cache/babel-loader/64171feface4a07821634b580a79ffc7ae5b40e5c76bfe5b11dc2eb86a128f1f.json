{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\nimport { ref, computed } from \"vue\";\nimport axios from \"axios\";\nexport default {\n  __name: 'PurchaseSummaryReportOwners',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const fromDate = ref(\"\");\n    const toDate = ref(\"\");\n    const reportData = ref([]);\n\n    // Hitung grand total\n    const grandTotal = computed(() => {\n      return reportData.value.reduce((sum, item) => sum + item.total, 0);\n    });\n\n    // Format tanggal\n    const formatDate = dateStr => {\n      const date = new Date(dateStr);\n      return date.toLocaleDateString();\n    };\n\n    // Format currency\n    const formatCurrency = value => {\n      return new Intl.NumberFormat(\"id-ID\", {\n        style: \"currency\",\n        currency: \"IDR\"\n      }).format(value);\n    };\n\n    // Ambil data laporan dari backend\n    const fetchReport = async () => {\n      try {\n        const response = await axios.get(\"http://localhost:8000/api/purchase-summary\", {\n          params: {\n            from: fromDate.value,\n            to: toDate.value\n          }\n        });\n        reportData.value = response.data;\n      } catch (error) {\n        console.error(error);\n        alert(\"Failed to fetch report data\");\n      }\n    };\n\n    // Cetak laporan\n    const printReport = () => {\n      const printContents = document.createElement(\"div\");\n      printContents.innerHTML = document.querySelector(\"table\").outerHTML;\n      const newWindow = window.open(\"\", \"\", \"width=900,height=600\");\n      newWindow.document.write(`\n    <html>\n      <head>\n        <title>Purchase Report</title>\n        <style>\n          table { width: 100%; border-collapse: collapse; }\n          th, td { border: 1px solid #333; padding: 8px; text-align: left; }\n          th { background-color: #eee; }\n        </style>\n      </head>\n      <body>\n        <h1>Purchase Summary Report</h1>\n        ${printContents.innerHTML}\n      </body>\n    </html>\n  `);\n      newWindow.document.close();\n      newWindow.print();\n    };\n    const __returned__ = {\n      fromDate,\n      toDate,\n      reportData,\n      grandTotal,\n      formatDate,\n      formatCurrency,\n      fetchReport,\n      printReport,\n      ref,\n      computed,\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","axios","fromDate","toDate","reportData","grandTotal","value","reduce","sum","item","total","formatDate","dateStr","date","Date","toLocaleDateString","formatCurrency","Intl","NumberFormat","style","currency","format","fetchReport","response","get","params","from","to","data","error","console","alert","printReport","printContents","document","createElement","innerHTML","querySelector","outerHTML","newWindow","window","open","write","close","print"],"sources":["C:/Users/Personal/Documents/PKL/aplikasi/aplikasi/src/views/PurchaseSummaryReportOwners.vue"],"sourcesContent":["<template>\n  <div class=\"p-4\">\n    <h1 class=\"text-2xl font-bold mb-4\">Purchase Summary Report</h1>\n\n    <!-- Filter tanggal -->\n    <div class=\"mb-4 flex gap-2 items-center\">\n      <label>From:</label>\n      <input type=\"date\" v-model=\"fromDate\" class=\"border p-1 rounded\" />\n      <label>To:</label>\n      <input type=\"date\" v-model=\"toDate\" class=\"border p-1 rounded\" />\n      <button\n        @click=\"fetchReport\"\n        class=\"bg-blue-500 text-white px-4 py-1 rounded\"\n      >\n        Filter\n      </button>\n      <button\n        @click=\"printReport\"\n        class=\"bg-green-500 text-white px-4 py-1 rounded\"\n      >\n        Print PDF\n      </button>\n    </div>\n\n    <!-- Tabel laporan -->\n    <div ref=\"reportContent\">\n      <table class=\"w-full border-collapse border border-gray-300\">\n        <thead>\n          <tr class=\"bg-gray-200\">\n            <th class=\"border border-gray-300 p-2\">#</th>\n            <th class=\"border border-gray-300 p-2\">Date</th>\n            <th class=\"border border-gray-300 p-2\">Customer</th>\n            <th class=\"border border-gray-300 p-2\">Product</th>\n            <th class=\"border border-gray-300 p-2\">Quantity</th>\n            <th class=\"border border-gray-300 p-2\">Price</th>\n            <th class=\"border border-gray-300 p-2\">Total</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"(item, index) in reportData\" :key=\"index\">\n            <td class=\"border border-gray-300 p-2\">{{ index + 1 }}</td>\n            <td class=\"border border-gray-300 p-2\">\n              {{ formatDate(item.date) }}\n            </td>\n            <td class=\"border border-gray-300 p-2\">{{ item.customer_name }}</td>\n            <td class=\"border border-gray-300 p-2\">{{ item.product_name }}</td>\n            <td class=\"border border-gray-300 p-2\">{{ item.quantity }}</td>\n            <td class=\"border border-gray-300 p-2\">\n              {{ formatCurrency(item.price) }}\n            </td>\n            <td class=\"border border-gray-300 p-2\">\n              {{ formatCurrency(item.total) }}\n            </td>\n          </tr>\n          <tr>\n            <td\n              colspan=\"6\"\n              class=\"border border-gray-300 p-2 font-bold text-right\"\n            >\n              Grand Total\n            </td>\n            <td class=\"border border-gray-300 p-2 font-bold\">\n              {{ formatCurrency(grandTotal) }}\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from \"vue\";\nimport axios from \"axios\";\n\nconst fromDate = ref(\"\");\nconst toDate = ref(\"\");\nconst reportData = ref([]);\n\n// Hitung grand total\nconst grandTotal = computed(() => {\n  return reportData.value.reduce((sum, item) => sum + item.total, 0);\n});\n\n// Format tanggal\nconst formatDate = (dateStr) => {\n  const date = new Date(dateStr);\n  return date.toLocaleDateString();\n};\n\n// Format currency\nconst formatCurrency = (value) => {\n  return new Intl.NumberFormat(\"id-ID\", {\n    style: \"currency\",\n    currency: \"IDR\",\n  }).format(value);\n};\n\n// Ambil data laporan dari backend\nconst fetchReport = async () => {\n  try {\n    const response = await axios.get(\n      \"http://localhost:8000/api/purchase-summary\",\n      {\n        params: {\n          from: fromDate.value,\n          to: toDate.value,\n        },\n      }\n    );\n    reportData.value = response.data;\n  } catch (error) {\n    console.error(error);\n    alert(\"Failed to fetch report data\");\n  }\n};\n\n// Cetak laporan\nconst printReport = () => {\n  const printContents = document.createElement(\"div\");\n  printContents.innerHTML = document.querySelector(\"table\").outerHTML;\n  const newWindow = window.open(\"\", \"\", \"width=900,height=600\");\n  newWindow.document.write(`\n    <html>\n      <head>\n        <title>Purchase Report</title>\n        <style>\n          table { width: 100%; border-collapse: collapse; }\n          th, td { border: 1px solid #333; padding: 8px; text-align: left; }\n          th { background-color: #eee; }\n        </style>\n      </head>\n      <body>\n        <h1>Purchase Summary Report</h1>\n        ${printContents.innerHTML}\n      </body>\n    </html>\n  `);\n  newWindow.document.close();\n  newWindow.print();\n};\n</script>\n\n<style scoped>\n/* Opsional: styling untuk tampilan halaman */\n</style>\n"],"mappings":";;AAwEA,SAASA,GAAG,EAAEC,QAAQ,QAAQ,KAAK;AACnC,OAAOC,KAAK,MAAM,OAAO;;;;;;;IAEzB,MAAMC,QAAQ,GAAGH,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMI,MAAM,GAAGJ,GAAG,CAAC,EAAE,CAAC;IACtB,MAAMK,UAAU,GAAGL,GAAG,CAAC,EAAE,CAAC;;IAE1B;IACA,MAAMM,UAAU,GAAGL,QAAQ,CAAC,MAAM;MAChC,OAAOI,UAAU,CAACE,KAAK,CAACC,MAAM,CAAC,CAACC,GAAG,EAAEC,IAAI,KAAKD,GAAG,GAAGC,IAAI,CAACC,KAAK,EAAE,CAAC,CAAC;IACpE,CAAC,CAAC;;IAEF;IACA,MAAMC,UAAU,GAAIC,OAAO,IAAK;MAC9B,MAAMC,IAAI,GAAG,IAAIC,IAAI,CAACF,OAAO,CAAC;MAC9B,OAAOC,IAAI,CAACE,kBAAkB,CAAC,CAAC;IAClC,CAAC;;IAED;IACA,MAAMC,cAAc,GAAIV,KAAK,IAAK;MAChC,OAAO,IAAIW,IAAI,CAACC,YAAY,CAAC,OAAO,EAAE;QACpCC,KAAK,EAAE,UAAU;QACjBC,QAAQ,EAAE;MACZ,CAAC,CAAC,CAACC,MAAM,CAACf,KAAK,CAAC;IAClB,CAAC;;IAED;IACA,MAAMgB,WAAW,GAAG,MAAAA,CAAA,KAAY;MAC9B,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMtB,KAAK,CAACuB,GAAG,CAC9B,4CAA4C,EAC5C;UACEC,MAAM,EAAE;YACNC,IAAI,EAAExB,QAAQ,CAACI,KAAK;YACpBqB,EAAE,EAAExB,MAAM,CAACG;UACb;QACF,CACF,CAAC;QACDF,UAAU,CAACE,KAAK,GAAGiB,QAAQ,CAACK,IAAI;MAClC,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;QACpBE,KAAK,CAAC,6BAA6B,CAAC;MACtC;IACF,CAAC;;IAED;IACA,MAAMC,WAAW,GAAGA,CAAA,KAAM;MACxB,MAAMC,aAAa,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;MACnDF,aAAa,CAACG,SAAS,GAAGF,QAAQ,CAACG,aAAa,CAAC,OAAO,CAAC,CAACC,SAAS;MACnE,MAAMC,SAAS,GAAGC,MAAM,CAACC,IAAI,CAAC,EAAE,EAAE,EAAE,EAAE,sBAAsB,CAAC;MAC7DF,SAAS,CAACL,QAAQ,CAACQ,KAAK,CAAC;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAUT,aAAa,CAACG,SAAS;AACjC;AACA;AACA,GAAG,CAAC;MACFG,SAAS,CAACL,QAAQ,CAACS,KAAK,CAAC,CAAC;MAC1BJ,SAAS,CAACK,KAAK,CAAC,CAAC;IACnB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}