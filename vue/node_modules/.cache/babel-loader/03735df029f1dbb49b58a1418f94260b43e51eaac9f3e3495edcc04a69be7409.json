{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, onMounted } from \"vue\";\nimport GudangLayouts from \"@/components/GudangLayouts.vue\";\nimport axios from \"axios\";\nexport default {\n  __name: 'DashboardGudang',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const stockOpnames = ref([]);\n    const loading = ref(false);\n    const api = axios.create({\n      baseURL: \"http://localhost:8081/api/v1\"\n    });\n    const savedToken = localStorage.getItem(\"token\");\n    if (savedToken) {\n      api.defaults.headers.common[\"Authorization\"] = `Bearer ${savedToken}`;\n    }\n    const fetchStockOpnames = async () => {\n      loading.value = true;\n      try {\n        const response = await api.get(\"/gudang/stock-opnames\", {\n          params: {\n            limit: 3,\n            sort: \"date_desc\"\n          } // Ambil 3 terbaru\n        });\n        stockOpnames.value = response.data.data.map(op => ({\n          ID: op.ID,\n          Date: op.Date,\n          Status: op.Status || \"Pending\",\n          // Asumsi status dari backend\n          ProductsCount: op.Items.length,\n          // Hitung dari jumlah items\n          StaffName: op.User.Name || \"Unknown\" // Asumsi relasi User\n        }));\n      } catch (error) {\n        console.error(\"Gagal fetch stock opnames:\", error);\n        alert(\"Gagal memuat data stock opname.\");\n      } finally {\n        loading.value = false;\n      }\n    };\n    const formatDate = dateStr => {\n      if (!dateStr) return \"N/A\";\n      const date = new Date(dateStr);\n      return date.toLocaleDateString(\"id-ID\", {\n        day: \"2-digit\",\n        month: \"2-digit\",\n        year: \"numeric\"\n      });\n    };\n    onMounted(() => {\n      fetchStockOpnames();\n    });\n    const __returned__ = {\n      stockOpnames,\n      loading,\n      api,\n      savedToken,\n      fetchStockOpnames,\n      formatDate,\n      ref,\n      onMounted,\n      GudangLayouts,\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","GudangLayouts","axios","stockOpnames","loading","api","create","baseURL","savedToken","localStorage","getItem","defaults","headers","common","fetchStockOpnames","value","response","get","params","limit","sort","data","map","op","ID","Date","Status","ProductsCount","Items","length","StaffName","User","Name","error","console","alert","formatDate","dateStr","date","toLocaleDateString","day","month","year"],"sources":["C:/Users/Personal/Documents/PKL/aplikasi/aplikasi/src/views/DashboardGudang.vue"],"sourcesContent":["<template>\n  <GudangLayouts>\n    <div class=\"space-y-6\">\n      <div>\n        <h1 class=\"text-3xl font-bold text-gray-900\">\n          Warehouse Staff Dashboard\n        </h1>\n        <p class=\"text-lg text-gray-600 mt-1\">\n          Welcome back! Here's an overview of your warehouse activities.\n        </p>\n      </div>\n      <div class=\"bg-white rounded-lg shadow-sm p-6 border border-gray-200\">\n        <h2 class=\"text-xl font-semibold text-gray-800 mb-4\">\n          Stock Opname Terbaru\n        </h2>\n        <div class=\"overflow-x-auto\">\n          <table class=\"min-w-full divide-y divide-gray-200\">\n            <thead class=\"bg-gray-50\">\n              <tr>\n                <th\n                  class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                >\n                  Date\n                </th>\n                <th\n                  class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                >\n                  Status\n                </th>\n                <th\n                  class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                >\n                  Products Count\n                </th>\n                <th\n                  class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                >\n                  Staff\n                </th>\n              </tr>\n            </thead>\n            <tbody class=\"bg-white divide-y divide-gray-200\">\n              <tr v-if=\"loading\">\n                <td\n                  colspan=\"4\"\n                  class=\"px-6 py-4 text-center text-sm text-gray-500\"\n                >\n                  Loading...\n                </td>\n              </tr>\n              <tr v-else-if=\"stockOpnames.length === 0\">\n                <td\n                  colspan=\"4\"\n                  class=\"px-6 py-4 text-center text-sm text-gray-500\"\n                >\n                  No data available\n                </td>\n              </tr>\n              <tr v-else v-for=\"opname in stockOpnames\" :key=\"opname.ID\">\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                  {{ formatDate(opname.Date) }}\n                </td>\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm\">\n                  <span\n                    class=\"inline-flex items-center rounded-full px-3 py-0.5 text-sm font-medium\"\n                    :class=\"{\n                      'bg-green-100 text-green-800':\n                        opname.Status === 'Completed',\n                      'bg-yellow-100 text-yellow-800':\n                        opname.Status === 'Pending',\n                    }\"\n                  >\n                    {{ opname.Status }}\n                  </span>\n                </td>\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                  {{ opname.ProductsCount }}\n                </td>\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                  {{ opname.StaffName }}\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  </GudangLayouts>\n</template>\n\n<script setup>\nimport { ref, onMounted } from \"vue\";\nimport GudangLayouts from \"@/components/GudangLayouts.vue\";\nimport axios from \"axios\";\n\nconst stockOpnames = ref([]);\nconst loading = ref(false);\n\nconst api = axios.create({ baseURL: \"http://localhost:8081/api/v1\" });\nconst savedToken = localStorage.getItem(\"token\");\nif (savedToken) {\n  api.defaults.headers.common[\"Authorization\"] = `Bearer ${savedToken}`;\n}\n\nconst fetchStockOpnames = async () => {\n  loading.value = true;\n  try {\n    const response = await api.get(\"/gudang/stock-opnames\", {\n      params: { limit: 3, sort: \"date_desc\" }, // Ambil 3 terbaru\n    });\n    stockOpnames.value = response.data.data.map((op) => ({\n      ID: op.ID,\n      Date: op.Date,\n      Status: op.Status || \"Pending\", // Asumsi status dari backend\n      ProductsCount: op.Items.length, // Hitung dari jumlah items\n      StaffName: op.User.Name || \"Unknown\", // Asumsi relasi User\n    }));\n  } catch (error) {\n    console.error(\"Gagal fetch stock opnames:\", error);\n    alert(\"Gagal memuat data stock opname.\");\n  } finally {\n    loading.value = false;\n  }\n};\n\nconst formatDate = (dateStr) => {\n  if (!dateStr) return \"N/A\";\n  const date = new Date(dateStr);\n  return date.toLocaleDateString(\"id-ID\", {\n    day: \"2-digit\",\n    month: \"2-digit\",\n    year: \"numeric\",\n  });\n};\n\nonMounted(() => {\n  fetchStockOpnames();\n});\n</script>\n"],"mappings":";;AA2FA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,OAAOC,aAAa,MAAM,gCAAgC;AAC1D,OAAOC,KAAK,MAAM,OAAO;;;;;;;IAEzB,MAAMC,YAAY,GAAGJ,GAAG,CAAC,EAAE,CAAC;IAC5B,MAAMK,OAAO,GAAGL,GAAG,CAAC,KAAK,CAAC;IAE1B,MAAMM,GAAG,GAAGH,KAAK,CAACI,MAAM,CAAC;MAAEC,OAAO,EAAE;IAA+B,CAAC,CAAC;IACrE,MAAMC,UAAU,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAChD,IAAIF,UAAU,EAAE;MACdH,GAAG,CAACM,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,GAAG,UAAUL,UAAU,EAAE;IACvE;IAEA,MAAMM,iBAAiB,GAAG,MAAAA,CAAA,KAAY;MACpCV,OAAO,CAACW,KAAK,GAAG,IAAI;MACpB,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMX,GAAG,CAACY,GAAG,CAAC,uBAAuB,EAAE;UACtDC,MAAM,EAAE;YAAEC,KAAK,EAAE,CAAC;YAAEC,IAAI,EAAE;UAAY,CAAC,CAAE;QAC3C,CAAC,CAAC;QACFjB,YAAY,CAACY,KAAK,GAAGC,QAAQ,CAACK,IAAI,CAACA,IAAI,CAACC,GAAG,CAAEC,EAAE,KAAM;UACnDC,EAAE,EAAED,EAAE,CAACC,EAAE;UACTC,IAAI,EAAEF,EAAE,CAACE,IAAI;UACbC,MAAM,EAAEH,EAAE,CAACG,MAAM,IAAI,SAAS;UAAE;UAChCC,aAAa,EAAEJ,EAAE,CAACK,KAAK,CAACC,MAAM;UAAE;UAChCC,SAAS,EAAEP,EAAE,CAACQ,IAAI,CAACC,IAAI,IAAI,SAAS,CAAE;QACxC,CAAC,CAAC,CAAC;MACL,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;QAClDE,KAAK,CAAC,iCAAiC,CAAC;MAC1C,CAAC,SAAS;QACR/B,OAAO,CAACW,KAAK,GAAG,KAAK;MACvB;IACF,CAAC;IAED,MAAMqB,UAAU,GAAIC,OAAO,IAAK;MAC9B,IAAI,CAACA,OAAO,EAAE,OAAO,KAAK;MAC1B,MAAMC,IAAI,GAAG,IAAIb,IAAI,CAACY,OAAO,CAAC;MAC9B,OAAOC,IAAI,CAACC,kBAAkB,CAAC,OAAO,EAAE;QACtCC,GAAG,EAAE,SAAS;QACdC,KAAK,EAAE,SAAS;QAChBC,IAAI,EAAE;MACR,CAAC,CAAC;IACJ,CAAC;IAED1C,SAAS,CAAC,MAAM;MACdc,iBAAiB,CAAC,CAAC;IACrB,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}