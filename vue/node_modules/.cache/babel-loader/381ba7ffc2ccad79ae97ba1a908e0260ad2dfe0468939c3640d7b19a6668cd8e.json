{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, vModelCheckbox as _vModelCheckbox, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"purchase-form\"\n};\nconst _hoisted_2 = [\"value\"];\nconst _hoisted_3 = [\"onUpdate:modelValue\"];\nconst _hoisted_4 = [\"value\"];\nconst _hoisted_5 = [\"onUpdate:modelValue\"];\nconst _hoisted_6 = [\"onUpdate:modelValue\"];\nconst _hoisted_7 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[11] || (_cache[11] = _createElementVNode(\"h2\", null, \"Buat Pembelian\", -1 /* CACHED */)), _createCommentVNode(\" Pilih Supplier \"), _createElementVNode(\"div\", null, [_cache[6] || (_cache[6] = _createElementVNode(\"label\", null, \"Supplier\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.form.supplier_id = $event)\n  }, [_cache[5] || (_cache[5] = _createElementVNode(\"option\", {\n    disabled: \"\",\n    value: \"\"\n  }, \"-- Pilih Supplier --\", -1 /* CACHED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.suppliers, s => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: s.id,\n      value: s.id\n    }, _toDisplayString(s.name), 9 /* TEXT, PROPS */, _hoisted_2);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $data.form.supplier_id]])]), _createCommentVNode(\" Pilih Tanggal \"), _createElementVNode(\"div\", null, [_cache[7] || (_cache[7] = _createElementVNode(\"label\", null, \"Tanggal\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"date\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.form.date = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.date]])]), _createCommentVNode(\" Tambah Produk \"), _createElementVNode(\"div\", null, [_cache[9] || (_cache[9] = _createElementVNode(\"h3\", null, \"Produk\", -1 /* CACHED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.form.items, (item, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index,\n      class: \"product-row\"\n    }, [_withDirectives(_createElementVNode(\"select\", {\n      \"onUpdate:modelValue\": $event => item.product_id = $event\n    }, [_cache[8] || (_cache[8] = _createElementVNode(\"option\", {\n      disabled: \"\",\n      value: \"\"\n    }, \"-- Pilih Produk --\", -1 /* CACHED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.products, p => {\n      return _openBlock(), _createElementBlock(\"option\", {\n        key: p.id,\n        value: p.id\n      }, _toDisplayString(p.name), 9 /* TEXT, PROPS */, _hoisted_4);\n    }), 128 /* KEYED_FRAGMENT */))], 8 /* PROPS */, _hoisted_3), [[_vModelSelect, item.product_id]]), _withDirectives(_createElementVNode(\"input\", {\n      type: \"number\",\n      \"onUpdate:modelValue\": $event => item.qty = $event,\n      placeholder: \"Qty\"\n    }, null, 8 /* PROPS */, _hoisted_5), [[_vModelText, item.qty, void 0, {\n      number: true\n    }]]), _withDirectives(_createElementVNode(\"input\", {\n      type: \"number\",\n      \"onUpdate:modelValue\": $event => item.price = $event,\n      placeholder: \"Harga\"\n    }, null, 8 /* PROPS */, _hoisted_6), [[_vModelText, item.price, void 0, {\n      number: true\n    }]]), _createElementVNode(\"button\", {\n      onClick: $event => $options.removeItem(index)\n    }, \"Hapus\", 8 /* PROPS */, _hoisted_7)]);\n  }), 128 /* KEYED_FRAGMENT */)), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.addItem && $options.addItem(...args))\n  }, \"+ Tambah Produk\")]), _createCommentVNode(\" Submit \"), _createElementVNode(\"div\", null, [_createElementVNode(\"label\", null, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"checkbox\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.form.submit = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelCheckbox, $data.form.submit]]), _cache[10] || (_cache[10] = _createTextVNode(\" Ajukan ke Kepala Gudang \", -1 /* CACHED */))])]), _createElementVNode(\"button\", {\n    onClick: _cache[4] || (_cache[4] = (...args) => $options.kirimPesanan && $options.kirimPesanan(...args))\n  }, \"Simpan Pembelian\")]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_createCommentVNode","$data","form","supplier_id","$event","disabled","value","_Fragment","_renderList","suppliers","s","key","id","name","_hoisted_2","type","date","items","item","index","product_id","products","p","_hoisted_4","qty","placeholder","number","price","onClick","$options","removeItem","_hoisted_7","_cache","args","addItem","submit","kirimPesanan"],"sources":["C:\\Users\\Personal\\Documents\\PKL\\aplikasi\\aplikasi\\src\\views\\CreatePurchase.vue"],"sourcesContent":["<template>\n  <div class=\"purchase-form\">\n    <h2>Buat Pembelian</h2>\n\n    <!-- Pilih Supplier -->\n    <div>\n      <label>Supplier</label>\n      <select v-model=\"form.supplier_id\">\n        <option disabled value=\"\">-- Pilih Supplier --</option>\n        <option v-for=\"s in suppliers\" :key=\"s.id\" :value=\"s.id\">\n          {{ s.name }}\n        </option>\n      </select>\n    </div>\n\n    <!-- Pilih Tanggal -->\n    <div>\n      <label>Tanggal</label>\n      <input type=\"date\" v-model=\"form.date\" />\n    </div>\n\n    <!-- Tambah Produk -->\n    <div>\n      <h3>Produk</h3>\n      <div v-for=\"(item, index) in form.items\" :key=\"index\" class=\"product-row\">\n        <select v-model=\"item.product_id\">\n          <option disabled value=\"\">-- Pilih Produk --</option>\n          <option v-for=\"p in products\" :key=\"p.id\" :value=\"p.id\">\n            {{ p.name }}\n          </option>\n        </select>\n        <input type=\"number\" v-model.number=\"item.qty\" placeholder=\"Qty\" />\n        <input type=\"number\" v-model.number=\"item.price\" placeholder=\"Harga\" />\n        <button @click=\"removeItem(index)\">Hapus</button>\n      </div>\n      <button @click=\"addItem\">+ Tambah Produk</button>\n    </div>\n\n    <!-- Submit -->\n    <div>\n      <label>\n        <input type=\"checkbox\" v-model=\"form.submit\" /> Ajukan ke Kepala Gudang\n      </label>\n    </div>\n\n    <button @click=\"kirimPesanan\">Simpan Pembelian</button>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"CreatePurchase\",\n  data() {\n    return {\n      suppliers: [],\n      products: [],\n      form: {\n        supplier_id: \"\",\n        date: new Date().toISOString().slice(0, 10), // format YYYY-MM-DD\n        items: [{ product_id: \"\", qty: 1, price: 0 }],\n        submit: false,\n      },\n    };\n  },\n  methods: {\n    async loadSuppliers() {\n      const res = await axios.get(\"http://localhost:8080/suppliers\");\n      this.suppliers = res.data.data;\n    },\n    async loadProducts() {\n      const res = await axios.get(\"http://localhost:8080/products\");\n      this.products = res.data.data;\n    },\n    addItem() {\n      this.form.items.push({ product_id: \"\", qty: 1, price: 0 });\n    },\n    removeItem(index) {\n      this.form.items.splice(index, 1);\n    },\n    async kirimPesanan() {\n      try {\n        // ubah tanggal jadi format ISO agar cocok dengan backend (DTO pakai time.Time)\n        const payload = {\n          ...this.form,\n          date: new Date(this.form.date).toISOString(),\n        };\n\n        const res = await axios.post(\n          \"http://localhost:8080/purchases\",\n          payload,\n          {\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n            },\n          }\n        );\n\n        alert(\"Pembelian berhasil disimpan!\");\n        console.log(res.data);\n      } catch (err) {\n        console.error(err);\n        alert(\"Gagal menyimpan pembelian\");\n      }\n    },\n  },\n  mounted() {\n    this.loadSuppliers();\n    this.loadProducts();\n  },\n};\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}