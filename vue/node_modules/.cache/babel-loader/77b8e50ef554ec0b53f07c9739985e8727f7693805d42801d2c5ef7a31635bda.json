{"ast":null,"code":"import { ref, computed } from \"vue\";\nimport CashierSidebar from \"../components/CashierSidebar.vue\";\nexport default {\n  __name: 'CashierPage',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const subtotal = ref(125.0);\n    const shipping = ref(5.0);\n    const tax = ref(10.0);\n    const discount = ref(5.0);\n    const paymentMethods = ref([{\n      id: 1,\n      name: \"Cash\",\n      value: \"cash\"\n    }, {\n      id: 2,\n      name: \"Card\",\n      value: \"card\"\n    }, {\n      id: 3,\n      name: \"Digital\",\n      value: \"digital\"\n    }]);\n    const selectedPaymentMethod = ref(\"cash\");\n    const amountReceived = ref(0);\n    const total = computed(() => subtotal.value + shipping.value + tax.value - discount.value);\n    const change = computed(() => {\n      const receivedValue = parseFloat(amountReceived.value);\n      return receivedValue > total.value ? receivedValue - total.value : 0;\n    });\n    const cardNumber = ref(\"\");\n    const expiryDate = ref(\"\");\n    const cvv = ref(\"\");\n    const cardName = ref(\"\");\n    const digitalPaymentProviders = ref([{\n      id: 1,\n      name: \"PayBuddy\",\n      value: \"paybuddy\"\n    }, {\n      id: 2,\n      name: \"ShopPay\",\n      value: \"shoppay\"\n    }, {\n      id: 3,\n      name: \"GPay\",\n      value: \"gpay\"\n    }]);\n    const selectedDigitalProvider = ref(\"paybuddy\");\n    const formatCurrency = value => {\n      return `$${Number(value).toFixed(2)}`;\n    };\n\n    // Data dummy untuk items. Dalam aplikasi nyata, ini diambil dari keranjang belanja.\n    const saleItems = ref([{\n      product_id: 1,\n      qty: 2,\n      price: 50.0\n    }, {\n      product_id: 2,\n      qty: 1,\n      price: 25.0\n    }]);\n\n    // Fungsi untuk menangani pembayaran dan mengirim data ke backend\n    const handlePayNow = async () => {\n      // Payload yang akan dikirim ke backend Go\n      const payload = {\n        customer_id: null,\n        voucher_code: null,\n        date: new Date().toISOString(),\n        // Mengirim tanggal saat ini\n        items: saleItems.value // Menggunakan data items dummy\n      };\n      try {\n        // Lakukan permintaan POST ke endpoint backend\n        const response = await fetch(\"http://localhost:8081/api/v1/sales\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            // PENTING: Ganti token ini dengan token JWT yang valid dari login\n            Authorization: `Bearer YOUR_JWT_TOKEN_HERE`\n          },\n          body: JSON.stringify(payload)\n        });\n\n        // Periksa jika respons berhasil (status 2xx)\n        if (!response.ok) {\n          const errorData = await response.json();\n          throw new Error(`HTTP error! Status: ${response.status}. Message: ${errorData.message}`);\n        }\n        const result = await response.json();\n        alert(\"Pembayaran Berhasil! ID Penjualan: \" + result.data.ID);\n        console.log(\"Penjualan berhasil:\", result.data);\n\n        // TODO: Arahkan ke halaman struk atau reset form\n      } catch (error) {\n        console.error(\"Gagal melakukan pembayaran:\", error);\n        alert(`Gagal melakukan pembayaran. Error: ${error.message}`);\n      }\n    };\n    const handlePrintReceipt = () => {\n      alert(\"Mencetak struk...\");\n    };\n    const __returned__ = {\n      subtotal,\n      shipping,\n      tax,\n      discount,\n      paymentMethods,\n      selectedPaymentMethod,\n      amountReceived,\n      total,\n      change,\n      cardNumber,\n      expiryDate,\n      cvv,\n      cardName,\n      digitalPaymentProviders,\n      selectedDigitalProvider,\n      formatCurrency,\n      saleItems,\n      handlePayNow,\n      handlePrintReceipt,\n      ref,\n      computed,\n      CashierSidebar\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","CashierSidebar","subtotal","shipping","tax","discount","paymentMethods","id","name","value","selectedPaymentMethod","amountReceived","total","change","receivedValue","parseFloat","cardNumber","expiryDate","cvv","cardName","digitalPaymentProviders","selectedDigitalProvider","formatCurrency","Number","toFixed","saleItems","product_id","qty","price","handlePayNow","payload","customer_id","voucher_code","date","Date","toISOString","items","response","fetch","method","headers","Authorization","body","JSON","stringify","ok","errorData","json","Error","status","message","result","alert","data","ID","console","log","error","handlePrintReceipt"],"sources":["C:/Users/SPC STYLE 5/aplikasi/src/views/CashierPage.vue"],"sourcesContent":["<template>\n  <div\n    class=\"relative flex size-full min-h-screen flex-col bg-white group/design-root overflow-x-hidden\"\n    style=\"font-family: Manrope, 'Noto Sans', sans-serif\"\n  >\n    <div class=\"layout-container flex h-full grow\">\n      <CashierSidebar />\n\n      <main\n        class=\"flex flex-col flex-1 pt-10 pb-10 px-8 max-w-5xl mx-auto w-full\"\n      >\n        <h2 class=\"text-2xl font-bold text-[#111418] mb-8 text-center\">\n          Payment Details!\n        </h2>\n\n        <section class=\"mb-8\">\n          <h3 class=\"text-lg font-semibold text-[#111418] mb-3 text-left\">\n            Order Summary\n          </h3>\n          <div class=\"space-y-3\">\n            <div\n              class=\"flex justify-between items-center text-base text-[#60758a]\"\n            >\n              <span>Subtotal</span>\n              <span>{{ formatCurrency(subtotal) }}</span>\n            </div>\n            <div\n              class=\"flex justify-between items-center text-base text-[#60758a]\"\n            >\n              <span>Shipping</span>\n              <span>{{ formatCurrency(shipping) }}</span>\n            </div>\n            <div\n              class=\"flex justify-between items-center text-base text-[#60758a]\"\n            >\n              <span>Tax</span>\n              <span>{{ formatCurrency(tax) }}</span>\n            </div>\n            <div\n              class=\"flex justify-between items-center text-base text-[#60758a]\"\n            >\n              <span>Discount</span>\n              <span>-{{ formatCurrency(discount) }}</span>\n            </div>\n            <div\n              class=\"flex justify-between items-center border-t border-[#dbe0e6] pt-3 text-lg font-bold text-[#111418]\"\n            >\n              <span>Total</span>\n              <span>{{ formatCurrency(total) }}</span>\n            </div>\n          </div>\n        </section>\n\n        <section class=\"mb-8\">\n          <h3 class=\"text-lg font-semibold text-[#111418] mb-3 text-left\">\n            Payment Method\n          </h3>\n          <div class=\"space-y-3\">\n            <label\n              v-for=\"method in paymentMethods\"\n              :key=\"method.id\"\n              class=\"flex items-center gap-3 rounded-lg border border-[#dbe0e6] p-4 cursor-pointer hover:bg-[#f8f9fa] transition-colors duration-200\"\n            >\n              <input\n                type=\"radio\"\n                class=\"h-5 w-5 accent-[#0d80f2]\"\n                name=\"paymentMethod\"\n                :value=\"method.value\"\n                v-model=\"selectedPaymentMethod\"\n              />\n              <span class=\"text-base font-medium\">{{ method.name }}</span>\n            </label>\n          </div>\n        </section>\n\n        <div class=\"mb-8\">\n          <div v-if=\"selectedPaymentMethod === 'cash'\" class=\"space-y-3\">\n            <label class=\"block\">\n              <span class=\"block text-sm font-medium text-[#111418] mb-1\"\n                >Amount Received</span\n              >\n              <input\n                v-model.number=\"amountReceived\"\n                type=\"number\"\n                placeholder=\"Enter amount\"\n                class=\"w-full rounded-lg border border-[#dbe0e6] p-3 text-base text-[#111418] focus:border-[#0d80f2] focus:ring focus:ring-[#0d80f2] focus:ring-opacity-50 transition-colors duration-200\"\n              />\n            </label>\n            <p class=\"text-sm text-[#60758a]\">\n              Change:\n              <span class=\"font-semibold text-[#111418]\">\n                {{ formatCurrency(change) }}\n              </span>\n            </p>\n          </div>\n\n          <div v-if=\"selectedPaymentMethod === 'card'\" class=\"space-y-4\">\n            <label class=\"block\">\n              <span class=\"block text-sm font-medium text-[#111418] mb-1\"\n                >Card Number</span\n              >\n              <input\n                v-model=\"cardNumber\"\n                placeholder=\"Card Number\"\n                class=\"w-full rounded-lg border border-[#dbe0e6] p-3 text-base text-[#111418] focus:border-[#0d80f2] focus:ring focus:ring-[#0d80f2] focus:ring-opacity-50 transition-colors duration-200\"\n              />\n            </label>\n            <div class=\"flex gap-4\">\n              <label class=\"flex-1\">\n                <span class=\"block text-sm font-medium text-[#111418] mb-1\"\n                  >Expiry Date</span\n                >\n                <input\n                  v-model=\"expiryDate\"\n                  placeholder=\"MM/YY\"\n                  class=\"w-full rounded-lg border border-[#dbe0e6] p-3 text-base text-[#111418] focus:border-[#0d80f2] focus:ring focus:ring-[#0d80f2] focus:ring-opacity-50 transition-colors duration-200\"\n                />\n              </label>\n              <label class=\"flex-1\">\n                <span class=\"block text-sm font-medium text-[#111418] mb-1\"\n                  >CVV</span\n                >\n                <input\n                  v-model=\"cvv\"\n                  placeholder=\"CVV\"\n                  class=\"w-full rounded-lg border border-[#dbe0e6] p-3 text-base text-[#111418] focus:border-[#0d80f2] focus:ring focus:ring-[#0d80f2] focus:ring-opacity-50 transition-colors duration-200\"\n                />\n              </label>\n            </div>\n            <label class=\"block\">\n              <span class=\"block text-sm font-medium text-[#111418] mb-1\"\n                >Name on Card</span\n              >\n              <input\n                v-model=\"cardName\"\n                placeholder=\"Name on Card\"\n                class=\"w-full rounded-lg border border-[#dbe0e6] p-3 text-base text-[#111418] focus:border-[#0d80f2] focus:ring focus:ring-[#0d80f2] focus:ring-opacity-50 transition-colors duration-200\"\n              />\n            </label>\n          </div>\n\n          <div v-if=\"selectedPaymentMethod === 'digital'\" class=\"space-y-3\">\n            <h3 class=\"text-lg font-semibold text-[#111418] mb-3\">\n              Digital Payment Options\n            </h3>\n            <label\n              v-for=\"provider in digitalPaymentProviders\"\n              :key=\"provider.id\"\n              class=\"flex items-center gap-3 rounded-lg border border-[#dbe0e6] p-4 cursor-pointer hover:bg-[#f8f9fa] transition-colors duration-200\"\n            >\n              <input\n                type=\"radio\"\n                class=\"h-5 w-5 accent-[#0d80f2]\"\n                name=\"digitalPaymentProvider\"\n                :value=\"provider.value\"\n                v-model=\"selectedDigitalProvider\"\n              />\n              <span class=\"text-base font-medium\">{{ provider.name }}</span>\n            </label>\n          </div>\n        </div>\n\n        <div class=\"flex flex-col gap-4 w-full max-w-sm mx-auto mt-8\">\n          <button\n            @click=\"handlePayNow\"\n            class=\"w-full rounded-lg bg-[#0d80f2] py-4 text-white text-lg font-semibold shadow-sm hover:bg-[#0a6ad1] transition-colors duration-200\"\n          >\n            Pay Now\n          </button>\n          <button\n            @click=\"handlePrintReceipt\"\n            class=\"w-full rounded-lg bg-[#f0f2f5] py-4 text-[#111418] text-lg font-semibold border border-[#dbe0e6] shadow-sm hover:bg-[#e6e8eb] transition-colors duration-200\"\n          >\n            Print Receipt\n          </button>\n        </div>\n      </main>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from \"vue\";\nimport CashierSidebar from \"../components/CashierSidebar.vue\";\n\nconst subtotal = ref(125.0);\nconst shipping = ref(5.0);\nconst tax = ref(10.0);\nconst discount = ref(5.0);\n\nconst paymentMethods = ref([\n  { id: 1, name: \"Cash\", value: \"cash\" },\n  { id: 2, name: \"Card\", value: \"card\" },\n  { id: 3, name: \"Digital\", value: \"digital\" },\n]);\nconst selectedPaymentMethod = ref(\"cash\");\n\nconst amountReceived = ref(0);\nconst total = computed(\n  () => subtotal.value + shipping.value + tax.value - discount.value\n);\nconst change = computed(() => {\n  const receivedValue = parseFloat(amountReceived.value);\n  return receivedValue > total.value ? receivedValue - total.value : 0;\n});\n\nconst cardNumber = ref(\"\");\nconst expiryDate = ref(\"\");\nconst cvv = ref(\"\");\nconst cardName = ref(\"\");\n\nconst digitalPaymentProviders = ref([\n  { id: 1, name: \"PayBuddy\", value: \"paybuddy\" },\n  { id: 2, name: \"ShopPay\", value: \"shoppay\" },\n  { id: 3, name: \"GPay\", value: \"gpay\" },\n]);\nconst selectedDigitalProvider = ref(\"paybuddy\");\n\nconst formatCurrency = (value) => {\n  return `$${Number(value).toFixed(2)}`;\n};\n\n// Data dummy untuk items. Dalam aplikasi nyata, ini diambil dari keranjang belanja.\nconst saleItems = ref([\n  { product_id: 1, qty: 2, price: 50.0 },\n  { product_id: 2, qty: 1, price: 25.0 },\n]);\n\n// Fungsi untuk menangani pembayaran dan mengirim data ke backend\nconst handlePayNow = async () => {\n  // Payload yang akan dikirim ke backend Go\n  const payload = {\n    customer_id: null,\n    voucher_code: null,\n    date: new Date().toISOString(), // Mengirim tanggal saat ini\n    items: saleItems.value, // Menggunakan data items dummy\n  };\n\n  try {\n    // Lakukan permintaan POST ke endpoint backend\n    const response = await fetch(\"http://localhost:8081/api/v1/sales\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        // PENTING: Ganti token ini dengan token JWT yang valid dari login\n        Authorization: `Bearer YOUR_JWT_TOKEN_HERE`,\n      },\n      body: JSON.stringify(payload),\n    });\n\n    // Periksa jika respons berhasil (status 2xx)\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(\n        `HTTP error! Status: ${response.status}. Message: ${errorData.message}`\n      );\n    }\n\n    const result = await response.json();\n    alert(\"Pembayaran Berhasil! ID Penjualan: \" + result.data.ID);\n    console.log(\"Penjualan berhasil:\", result.data);\n\n    // TODO: Arahkan ke halaman struk atau reset form\n  } catch (error) {\n    console.error(\"Gagal melakukan pembayaran:\", error);\n    alert(`Gagal melakukan pembayaran. Error: ${error.message}`);\n  }\n};\n\nconst handlePrintReceipt = () => {\n  alert(\"Mencetak struk...\");\n};\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}