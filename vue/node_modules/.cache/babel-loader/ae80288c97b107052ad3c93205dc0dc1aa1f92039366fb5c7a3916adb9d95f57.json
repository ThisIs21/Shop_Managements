{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\nimport { ref, onMounted } from \"vue\";\nimport PurchasingLayouts from \"@/components/PurchasingLayouts.vue\";\n\n// State\n\nexport default {\n  __name: 'CreatePurchase',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const suppliers = ref([]);\n    const products = ref([]);\n    const form = ref({\n      supplier_id: null,\n      date: new Date().toISOString().substring(0, 10),\n      items: [{\n        product_id: null,\n        qty: 1,\n        price: 0\n      }]\n    });\n\n    // Ambil data supplier dari backend\n    async function loadSuppliers() {\n      const res = await fetch(\"http://localhost:8080/suppliers\");\n      suppliers.value = await res.json();\n    }\n\n    // Ambil data produk dari backend\n    async function loadProducts() {\n      const res = await fetch(\"http://localhost:8080/products\");\n      products.value = await res.json();\n    }\n\n    // Tambah baris produk\n    function tambahProduk() {\n      form.value.items.push({\n        product_id: null,\n        qty: 1,\n        price: 0\n      });\n    }\n\n    // Hitung subtotal, pajak, total\n    const subtotal = () => form.value.items.reduce((acc, item) => acc + item.qty * item.price, 0);\n    const pajak = () => subtotal() * 0.1;\n    const total = () => subtotal() + pajak();\n\n    // Kirim pesanan ke backend\n    async function kirimPesanan() {\n      const res = await fetch(\"http://localhost:8080/purchases\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(form.value)\n      });\n      if (!res.ok) {\n        const err = await res.json();\n        alert(\"Gagal: \" + err.message);\n        return;\n      }\n      const data = await res.json();\n      alert(\"Pesanan berhasil dibuat dengan ID \" + data.id);\n    }\n\n    // Lifecycle\n    onMounted(() => {\n      loadSuppliers();\n      loadProducts();\n    });\n    const __returned__ = {\n      suppliers,\n      products,\n      form,\n      loadSuppliers,\n      loadProducts,\n      tambahProduk,\n      subtotal,\n      pajak,\n      total,\n      kirimPesanan,\n      ref,\n      onMounted,\n      PurchasingLayouts\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","PurchasingLayouts","suppliers","products","form","supplier_id","date","Date","toISOString","substring","items","product_id","qty","price","loadSuppliers","res","fetch","value","json","loadProducts","tambahProduk","push","subtotal","reduce","acc","item","pajak","total","kirimPesanan","method","headers","body","JSON","stringify","ok","err","alert","message","data","id"],"sources":["C:/Users/Personal/Documents/PKL/aplikasi/aplikasi/src/views/CreatePurchase.vue"],"sourcesContent":["<template>\n  <PurchasingLayouts>\n    <div\n      class=\"relative flex min-h-screen flex-col bg-[#f8f9fa] overflow-x-hidden\"\n      style=\"font-family: Manrope, 'Noto Sans', sans-serif\"\n    >\n      <div\n        class=\"layout-container flex h-full grow flex-col px-4 sm:px-6 lg:px-8\"\n      >\n        <div class=\"flex flex-1 justify-center py-8\">\n          <div class=\"flex w-full flex-col max-w-[960px]\">\n            <div class=\"mb-6\">\n              <h1 class=\"text-3xl font-bold text-gray-900\">\n                Buat Pesanan Pembelian Baru\n              </h1>\n            </div>\n\n            <div class=\"space-y-6\">\n              <div\n                class=\"bg-white rounded-lg shadow-sm p-6 border border-gray-200\"\n              >\n                <h2 class=\"text-xl font-semibold text-gray-800 mb-4\">\n                  Informasi Pemasok\n                </h2>\n                <div class=\"flex flex-col sm:flex-row max-w-sm gap-4\">\n                  <label class=\"flex-1\">\n                    <span class=\"text-sm font-medium text-gray-700\"\n                      >Pemasok</span\n                    >\n                    <select\n                      class=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50\"\n                    >\n                      <option value=\"\">Pilih Pemasok</option>\n                      <option value=\"two\">two</option>\n                      <option value=\"three\">three</option>\n                    </select>\n                  </label>\n                </div>\n              </div>\n\n              <div\n                class=\"bg-white rounded-lg shadow-sm p-6 border border-gray-200\"\n              >\n                <h2 class=\"text-xl font-semibold text-gray-800 mb-4\">\n                  Detail Produk\n                </h2>\n                <div class=\"overflow-x-auto\">\n                  <table class=\"min-w-full divide-y divide-gray-200\">\n                    <thead class=\"bg-gray-50\">\n                      <tr>\n                        <th\n                          class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                        >\n                          Produk\n                        </th>\n                        <th\n                          class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                        >\n                          Jumlah\n                        </th>\n                        <th\n                          class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                        >\n                          Harga Satuan\n                        </th>\n                        <th\n                          class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                        >\n                          Total\n                        </th>\n                      </tr>\n                    </thead>\n                    <tbody class=\"bg-white divide-y divide-gray-200\">\n                      <tr>\n                        <td\n                          class=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\"\n                        >\n                          Baut M8 x 25mm\n                        </td>\n                        <td\n                          class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\"\n                        >\n                          1000\n                        </td>\n                        <td\n                          class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\"\n                        >\n                          Rp 500\n                        </td>\n                        <td\n                          class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\"\n                        >\n                          Rp 500.000\n                        </td>\n                      </tr>\n                      <tr>\n                        <td\n                          class=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\"\n                        >\n                          Mur M8\n                        </td>\n                        <td\n                          class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\"\n                        >\n                          1000\n                        </td>\n                        <td\n                          class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\"\n                        >\n                          Rp 250\n                        </td>\n                        <td\n                          class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\"\n                        >\n                          Rp 250.000\n                        </td>\n                      </tr>\n                      <tr>\n                        <td\n                          class=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\"\n                        >\n                          Ring Plat M8\n                        </td>\n                        <td\n                          class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\"\n                        >\n                          1000\n                        </td>\n                        <td\n                          class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\"\n                        >\n                          Rp 100\n                        </td>\n                        <td\n                          class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\"\n                        >\n                          Rp 100.000\n                        </td>\n                      </tr>\n                    </tbody>\n                  </table>\n                </div>\n                <div class=\"mt-4 flex justify-end\">\n                  <button\n                    class=\"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\"\n                  >\n                    Tambah Produk\n                  </button>\n                </div>\n              </div>\n\n              <div\n                class=\"bg-white rounded-lg shadow-sm p-6 border border-gray-200\"\n              >\n                <h2 class=\"text-xl font-semibold text-gray-800 mb-4\">\n                  Ringkasan Pesanan\n                </h2>\n                <div class=\"space-y-2\">\n                  <div class=\"flex justify-between text-sm\">\n                    <p class=\"text-gray-600\">Subtotal</p>\n                    <p class=\"font-medium text-gray-900\">Rp 850.000</p>\n                  </div>\n                  <div class=\"flex justify-between text-sm\">\n                    <p class=\"text-gray-600\">Pajak (10%)</p>\n                    <p class=\"font-medium text-gray-900\">Rp 85.000</p>\n                  </div>\n                  <div\n                    class=\"flex justify-between text-base font-bold text-gray-900 pt-2 border-t border-gray-200 mt-2\"\n                  >\n                    <p>Total</p>\n                    <p>Rp 935.000</p>\n                  </div>\n                </div>\n              </div>\n\n              <div class=\"flex justify-end gap-3 mt-6\">\n                <button\n                  class=\"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\"\n                >\n                  Simpan sebagai Draf\n                </button>\n                <button\n                  class=\"rounded-md border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\"\n                >\n                  Kirim Pesanan\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </PurchasingLayouts>\n</template>\n\n<script setup>\nimport { ref, onMounted } from \"vue\";\nimport PurchasingLayouts from \"@/components/PurchasingLayouts.vue\";\n\n// State\nconst suppliers = ref([]);\nconst products = ref([]);\nconst form = ref({\n  supplier_id: null,\n  date: new Date().toISOString().substring(0, 10),\n  items: [{ product_id: null, qty: 1, price: 0 }],\n});\n\n// Ambil data supplier dari backend\nasync function loadSuppliers() {\n  const res = await fetch(\"http://localhost:8080/suppliers\");\n  suppliers.value = await res.json();\n}\n\n// Ambil data produk dari backend\nasync function loadProducts() {\n  const res = await fetch(\"http://localhost:8080/products\");\n  products.value = await res.json();\n}\n\n// Tambah baris produk\nfunction tambahProduk() {\n  form.value.items.push({ product_id: null, qty: 1, price: 0 });\n}\n\n// Hitung subtotal, pajak, total\nconst subtotal = () =>\n  form.value.items.reduce((acc, item) => acc + item.qty * item.price, 0);\n\nconst pajak = () => subtotal() * 0.1;\nconst total = () => subtotal() + pajak();\n\n// Kirim pesanan ke backend\nasync function kirimPesanan() {\n  const res = await fetch(\"http://localhost:8080/purchases\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(form.value),\n  });\n  if (!res.ok) {\n    const err = await res.json();\n    alert(\"Gagal: \" + err.message);\n    return;\n  }\n  const data = await res.json();\n  alert(\"Pesanan berhasil dibuat dengan ID \" + data.id);\n}\n\n// Lifecycle\nonMounted(() => {\n  loadSuppliers();\n  loadProducts();\n});\n</script>\n"],"mappings":";;;AAoMA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,OAAOC,iBAAiB,MAAM,oCAAoC;;AAElE;;;;;;;;IACA,MAAMC,SAAS,GAAGH,GAAG,CAAC,EAAE,CAAC;IACzB,MAAMI,QAAQ,GAAGJ,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMK,IAAI,GAAGL,GAAG,CAAC;MACfM,WAAW,EAAE,IAAI;MACjBC,IAAI,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC;MAC/CC,KAAK,EAAE,CAAC;QAAEC,UAAU,EAAE,IAAI;QAAEC,GAAG,EAAE,CAAC;QAAEC,KAAK,EAAE;MAAE,CAAC;IAChD,CAAC,CAAC;;IAEF;IACA,eAAeC,aAAaA,CAAA,EAAG;MAC7B,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,iCAAiC,CAAC;MAC1Dd,SAAS,CAACe,KAAK,GAAG,MAAMF,GAAG,CAACG,IAAI,CAAC,CAAC;IACpC;;IAEA;IACA,eAAeC,YAAYA,CAAA,EAAG;MAC5B,MAAMJ,GAAG,GAAG,MAAMC,KAAK,CAAC,gCAAgC,CAAC;MACzDb,QAAQ,CAACc,KAAK,GAAG,MAAMF,GAAG,CAACG,IAAI,CAAC,CAAC;IACnC;;IAEA;IACA,SAASE,YAAYA,CAAA,EAAG;MACtBhB,IAAI,CAACa,KAAK,CAACP,KAAK,CAACW,IAAI,CAAC;QAAEV,UAAU,EAAE,IAAI;QAAEC,GAAG,EAAE,CAAC;QAAEC,KAAK,EAAE;MAAE,CAAC,CAAC;IAC/D;;IAEA;IACA,MAAMS,QAAQ,GAAGA,CAAA,KACflB,IAAI,CAACa,KAAK,CAACP,KAAK,CAACa,MAAM,CAAC,CAACC,GAAG,EAAEC,IAAI,KAAKD,GAAG,GAAGC,IAAI,CAACb,GAAG,GAAGa,IAAI,CAACZ,KAAK,EAAE,CAAC,CAAC;IAExE,MAAMa,KAAK,GAAGA,CAAA,KAAMJ,QAAQ,CAAC,CAAC,GAAG,GAAG;IACpC,MAAMK,KAAK,GAAGA,CAAA,KAAML,QAAQ,CAAC,CAAC,GAAGI,KAAK,CAAC,CAAC;;IAExC;IACA,eAAeE,YAAYA,CAAA,EAAG;MAC5B,MAAMb,GAAG,GAAG,MAAMC,KAAK,CAAC,iCAAiC,EAAE;QACzDa,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC7B,IAAI,CAACa,KAAK;MACjC,CAAC,CAAC;MACF,IAAI,CAACF,GAAG,CAACmB,EAAE,EAAE;QACX,MAAMC,GAAG,GAAG,MAAMpB,GAAG,CAACG,IAAI,CAAC,CAAC;QAC5BkB,KAAK,CAAC,SAAS,GAAGD,GAAG,CAACE,OAAO,CAAC;QAC9B;MACF;MACA,MAAMC,IAAI,GAAG,MAAMvB,GAAG,CAACG,IAAI,CAAC,CAAC;MAC7BkB,KAAK,CAAC,oCAAoC,GAAGE,IAAI,CAACC,EAAE,CAAC;IACvD;;IAEA;IACAvC,SAAS,CAAC,MAAM;MACdc,aAAa,CAAC,CAAC;MACfK,YAAY,CAAC,CAAC;IAChB,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}