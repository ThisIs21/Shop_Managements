{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\nimport { ref, onMounted } from \"vue\";\nimport { RouterLink } from \"vue-router\";\nimport OwnerLayouts from \"../components/OwnerLayouts.vue\";\nimport axios from \"axios\";\nexport default {\n  __name: 'ReportStockOpnameOwners',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const stockOpnames = ref([]);\n    const filters = ref({\n      period: \"\"\n    });\n    const fetchStockOpnames = async () => {\n      try {\n        const token = localStorage.getItem(\"token\");\n        const res = await axios.get(\"http://localhost:8081/api/v1/history/stock-opnames\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        stockOpnames.value = res.data.data || res.data; // tergantung format backend\n      } catch (err) {\n        console.error(\"Failed to fetch stock opnames:\", err);\n      }\n    };\n    const calculateDiscrepancy = items => {\n      return items.reduce((sum, item) => sum + (item.qty_physical - item.qty_system), 0);\n    };\n    const formatDate = dateStr => {\n      const d = new Date(dateStr);\n      return d.toLocaleDateString(\"id-ID\", {\n        year: \"numeric\",\n        month: \"long\",\n        day: \"numeric\"\n      });\n    };\n    const exportCSV = () => {\n      console.log(\"Export to CSV not yet implemented\");\n    };\n    const exportPDF = () => {\n      console.log(\"Export to PDF not yet implemented\");\n    };\n    onMounted(fetchStockOpnames);\n    const __returned__ = {\n      stockOpnames,\n      filters,\n      fetchStockOpnames,\n      calculateDiscrepancy,\n      formatDate,\n      exportCSV,\n      exportPDF,\n      ref,\n      onMounted,\n      get RouterLink() {\n        return RouterLink;\n      },\n      OwnerLayouts,\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","RouterLink","OwnerLayouts","axios","stockOpnames","filters","period","fetchStockOpnames","token","localStorage","getItem","res","get","headers","Authorization","value","data","err","console","error","calculateDiscrepancy","items","reduce","sum","item","qty_physical","qty_system","formatDate","dateStr","d","Date","toLocaleDateString","year","month","day","exportCSV","log","exportPDF"],"sources":["C:/Users/Personal/Documents/PKL/aplikasi/aplikasi/src/views/ReportStockOpnameOwners.vue"],"sourcesContent":["<template>\n  <OwnerLayouts>\n    <div class=\"flex flex-1 flex-col py-5 p-8\">\n      <div class=\"layout-content-container flex flex-col flex-1\">\n        <!-- HEADER -->\n        <div class=\"flex items-center gap-4 p-4\">\n          <RouterLink\n            to=\"/report-owners\"\n            class=\"flex items-center justify-center h-10 w-10 text-[#111418] rounded-full hover:bg-gray-100 transition-colors\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24px\" height=\"24px\" fill=\"currentColor\" viewBox=\"0 0 256 256\">\n              <path d=\"M165.66,202.34a8,8,0,0,1-11.32,11.32l-80-80a8,8,0,0,1,0-11.32l80-80a8,8,0,0,1,11.32,11.32L91.31,128Z\"></path>\n            </svg>\n          </RouterLink>\n\n          <div class=\"flex min-w-72 flex-col gap-1\">\n            <p class=\"text-[#111418] tracking-light text-[32px] font-bold leading-tight\">\n              Stockopname Summary Report\n            </p>\n            <p class=\"text-[#60758a] text-sm font-normal leading-normal\">\n              Overview of stocktake activities and discrepancies.\n            </p>\n          </div>\n        </div>\n\n        <!-- FILTER + EXPORT -->\n        <div class=\"flex flex-wrap items-center justify-start gap-4 p-4 lg:justify-between\">\n          <h3 class=\"text-[#111418] text-lg font-bold leading-tight tracking-[-0.015em]\">\n            Filters\n          </h3>\n          <div class=\"flex max-w-[480px] flex-wrap items-end gap-4\">\n            <label class=\"flex flex-col min-w-40 flex-1\">\n              <input\n                type=\"month\"\n                v-model=\"filters.period\"\n                class=\"form-input flex w-full min-w-0 flex-1 rounded-lg text-[#111418] border border-[#dbe0e6] bg-white h-14 p-[15px] text-base\"\n              />\n            </label>\n          </div>\n          <div class=\"flex justify-start flex-1 gap-3 flex-wrap\">\n            <button\n              @click=\"exportCSV\"\n              class=\"flex min-w-[84px] cursor-pointer items-center justify-center rounded-lg h-10 px-4 bg-[#f0f2f5] text-[#111418] text-sm font-bold\"\n            >\n              Export to CSV\n            </button>\n            <button\n              @click=\"exportPDF\"\n              class=\"flex min-w-[84px] cursor-pointer items-center justify-center rounded-lg h-10 px-4 bg-[#f0f2f5] text-[#111418] text-sm font-bold\"\n            >\n              Export to PDF\n            </button>\n          </div>\n        </div>\n\n        <!-- TABLE -->\n        <h3 class=\"text-[#111418] text-lg font-bold px-4 pb-2 pt-4\">\n          Summary Data\n        </h3>\n        <div class=\"px-4 py-3 @container\">\n          <div class=\"flex overflow-hidden rounded-lg border border-[#dbe0e6] bg-white\">\n            <table class=\"flex-1\">\n              <thead>\n                <tr class=\"bg-white\">\n                  <th class=\"px-4 py-3 text-left w-[200px] text-sm font-medium\">Date</th>\n                  <th class=\"px-4 py-3 text-left w-[200px] text-sm font-medium\">Note</th>\n                  <th class=\"px-4 py-3 text-left w-[200px] text-sm font-medium\">Products Counted</th>\n                  <th class=\"px-4 py-3 text-left w-[200px] text-sm font-medium\">Total Discrepancy</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr v-for=\"opname in stockOpnames\" :key=\"opname.id\" class=\"border-t border-[#dbe0e6]\">\n                  <td class=\"px-4 py-2 text-sm\">{{ formatDate(opname.date) }}</td>\n                  <td class=\"px-4 py-2 text-sm\">{{ opname.note }}</td>\n                  <td class=\"px-4 py-2 text-sm\">{{ opname.items.length }}</td>\n                  <td class=\"px-4 py-2 text-sm\">\n                    {{ calculateDiscrepancy(opname.items) }}\n                  </td>\n                </tr>\n                <tr v-if=\"stockOpnames.length === 0\">\n                  <td colspan=\"4\" class=\"text-center py-4 text-[#60758a]\">No data available</td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n  </OwnerLayouts>\n</template>\n\n<script setup>\nimport { ref, onMounted } from \"vue\";\nimport { RouterLink } from \"vue-router\";\nimport OwnerLayouts from \"../components/OwnerLayouts.vue\";\nimport axios from \"axios\";\n\nconst stockOpnames = ref([]);\nconst filters = ref({ period: \"\" });\n\nconst fetchStockOpnames = async () => {\n  try {\n    const token = localStorage.getItem(\"token\");\n    const res = await axios.get(\"http://localhost:8081/api/v1/history/stock-opnames\", {\n      headers: { Authorization: `Bearer ${token}` },\n    });\n    stockOpnames.value = res.data.data || res.data; // tergantung format backend\n  } catch (err) {\n    console.error(\"Failed to fetch stock opnames:\", err);\n  }\n};\n\nconst calculateDiscrepancy = (items) => {\n  return items.reduce((sum, item) => sum + (item.qty_physical - item.qty_system), 0);\n};\n\nconst formatDate = (dateStr) => {\n  const d = new Date(dateStr);\n  return d.toLocaleDateString(\"id-ID\", { year: \"numeric\", month: \"long\", day: \"numeric\" });\n};\n\nconst exportCSV = () => {\n  console.log(\"Export to CSV not yet implemented\");\n};\nconst exportPDF = () => {\n  console.log(\"Export to PDF not yet implemented\");\n};\n\nonMounted(fetchStockOpnames);\n</script>\n\n<style scoped>\n@container (max-width: 120px) {\n  .table-column-120 {\n    display: none;\n  }\n}\n@container (max-width: 240px) {\n  .table-column-240 {\n    display: none;\n  }\n}\n@container (max-width: 360px) {\n  .table-column-360 {\n    display: none;\n  }\n}\n</style>\n"],"mappings":";;AA4FA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,SAASC,UAAU,QAAQ,YAAY;AACvC,OAAOC,YAAY,MAAM,gCAAgC;AACzD,OAAOC,KAAK,MAAM,OAAO;;;;;;;IAEzB,MAAMC,YAAY,GAAGL,GAAG,CAAC,EAAE,CAAC;IAC5B,MAAMM,OAAO,GAAGN,GAAG,CAAC;MAAEO,MAAM,EAAE;IAAG,CAAC,CAAC;IAEnC,MAAMC,iBAAiB,GAAG,MAAAA,CAAA,KAAY;MACpC,IAAI;QACF,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;QAC3C,MAAMC,GAAG,GAAG,MAAMR,KAAK,CAACS,GAAG,CAAC,oDAAoD,EAAE;UAChFC,OAAO,EAAE;YAAEC,aAAa,EAAE,UAAUN,KAAK;UAAG;QAC9C,CAAC,CAAC;QACFJ,YAAY,CAACW,KAAK,GAAGJ,GAAG,CAACK,IAAI,CAACA,IAAI,IAAIL,GAAG,CAACK,IAAI,CAAC,CAAC;MAClD,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAAC,gCAAgC,EAAEF,GAAG,CAAC;MACtD;IACF,CAAC;IAED,MAAMG,oBAAoB,GAAIC,KAAK,IAAK;MACtC,OAAOA,KAAK,CAACC,MAAM,CAAC,CAACC,GAAG,EAAEC,IAAI,KAAKD,GAAG,IAAIC,IAAI,CAACC,YAAY,GAAGD,IAAI,CAACE,UAAU,CAAC,EAAE,CAAC,CAAC;IACpF,CAAC;IAED,MAAMC,UAAU,GAAIC,OAAO,IAAK;MAC9B,MAAMC,CAAC,GAAG,IAAIC,IAAI,CAACF,OAAO,CAAC;MAC3B,OAAOC,CAAC,CAACE,kBAAkB,CAAC,OAAO,EAAE;QAAEC,IAAI,EAAE,SAAS;QAAEC,KAAK,EAAE,MAAM;QAAEC,GAAG,EAAE;MAAU,CAAC,CAAC;IAC1F,CAAC;IAED,MAAMC,SAAS,GAAGA,CAAA,KAAM;MACtBjB,OAAO,CAACkB,GAAG,CAAC,mCAAmC,CAAC;IAClD,CAAC;IACD,MAAMC,SAAS,GAAGA,CAAA,KAAM;MACtBnB,OAAO,CAACkB,GAAG,CAAC,mCAAmC,CAAC;IAClD,CAAC;IAEDpC,SAAS,CAACO,iBAAiB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}