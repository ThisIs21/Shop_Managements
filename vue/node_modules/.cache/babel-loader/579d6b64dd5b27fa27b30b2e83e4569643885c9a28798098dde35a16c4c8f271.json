{"ast":null,"code":"import { ref, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport KepalaGudangSidebar from \"@/components/KepalaGudangSidebar.vue\";\nexport default {\n  __name: 'PurchaseOrderKepalaGudang',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const purchases = ref([]);\n    const loading = ref(false);\n    const token = localStorage.getItem(\"token\"); // ambil token login\n\n    // Ambil data dari backend\n    const fetchPurchases = async () => {\n      loading.value = true;\n      try {\n        const res = await axios.get(\"http://localhost:8081/api/v1/history/purchases\", {\n          params: {\n            page: 1,\n            size: 20,\n            q: \"\"\n          },\n          // paging + search\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n\n        // backend bisa return array langsung atau dalam { data: [] }\n        purchases.value = Array.isArray(res.data) ? res.data : res.data.data || [];\n      } catch (err) {\n        console.error(\"Failed to fetch purchases:\", err);\n      } finally {\n        loading.value = false;\n      }\n    };\n\n    // Format tanggal\n    const formatDate = dateStr => {\n      if (!dateStr) return \"-\";\n      return new Date(dateStr).toLocaleDateString(\"id-ID\", {\n        day: \"2-digit\",\n        month: \"short\",\n        year: \"numeric\"\n      });\n    };\n\n    // Format mata uang\n    const formatCurrency = val => {\n      if (val === null || val === undefined) return \"-\";\n      return new Intl.NumberFormat(\"id-ID\", {\n        style: \"currency\",\n        currency: \"IDR\"\n      }).format(val);\n    };\n    onMounted(() => {\n      fetchPurchases();\n    });\n    const __returned__ = {\n      purchases,\n      loading,\n      token,\n      fetchPurchases,\n      formatDate,\n      formatCurrency,\n      ref,\n      onMounted,\n      get axios() {\n        return axios;\n      },\n      KepalaGudangSidebar\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","axios","KepalaGudangSidebar","purchases","loading","token","localStorage","getItem","fetchPurchases","value","res","get","params","page","size","q","headers","Authorization","Array","isArray","data","err","console","error","formatDate","dateStr","Date","toLocaleDateString","day","month","year","formatCurrency","val","undefined","Intl","NumberFormat","style","currency","format"],"sources":["C:/Users/Personal/Documents/PKL/aplikasi/aplikasi/src/views/PurchaseOrderKepalaGudang.vue"],"sourcesContent":["<script setup>\nimport { ref, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport KepalaGudangSidebar from \"@/components/KepalaGudangSidebar.vue\";\n\nconst purchases = ref([]);\nconst loading = ref(false);\nconst token = localStorage.getItem(\"token\"); // ambil token login\n\n// Ambil data dari backend\nconst fetchPurchases = async () => {\n  loading.value = true;\n  try {\n    const res = await axios.get(\n      \"http://localhost:8081/api/v1/history/purchases\",\n      {\n        params: { page: 1, size: 20, q: \"\" }, // paging + search\n        headers: { Authorization: `Bearer ${token}` },\n      }\n    );\n\n    // backend bisa return array langsung atau dalam { data: [] }\n    purchases.value = Array.isArray(res.data) ? res.data : res.data.data || [];\n  } catch (err) {\n    console.error(\"Failed to fetch purchases:\", err);\n  } finally {\n    loading.value = false;\n  }\n};\n\n// Format tanggal\nconst formatDate = (dateStr) => {\n  if (!dateStr) return \"-\";\n  return new Date(dateStr).toLocaleDateString(\"id-ID\", {\n    day: \"2-digit\",\n    month: \"short\",\n    year: \"numeric\",\n  });\n};\n\n// Format mata uang\nconst formatCurrency = (val) => {\n  if (val === null || val === undefined) return \"-\";\n  return new Intl.NumberFormat(\"id-ID\", {\n    style: \"currency\",\n    currency: \"IDR\",\n  }).format(val);\n};\n\nonMounted(() => {\n  fetchPurchases();\n});\n</script>\n\n<template>\n  <div class=\"flex size-full min-h-screen flex-col bg-white font-manrope lg:flex-row\">\n    <!-- Sidebar -->\n    <KepalaGudangSidebar />\n\n    <div class=\"flex flex-1 flex-col\">\n      <main class=\"flex-1 p-8\">\n        <div class=\"layout-content-container flex flex-col flex-1\">\n          <!-- Header -->\n          <div class=\"mb-6\">\n            <p\n              class=\"text-[#111418] tracking-light text-[32px] font-bold leading-tight\"\n            >\n              Purchase Orders History\n            </p>\n          </div>\n\n          <!-- Tabel -->\n          <div class=\"px-4 py-3 @container\">\n            <div\n              class=\"flex overflow-hidden rounded-lg border border-[#dbe0e6] bg-white\"\n            >\n              <table class=\"flex-1 w-full\">\n                <thead>\n                  <tr class=\"bg-white\">\n                    <th\n                      class=\"px-4 py-3 text-left text-[#111418] text-sm font-medium\"\n                    >\n                      PO Number\n                    </th>\n                    <th\n                      class=\"px-4 py-3 text-left text-[#111418] text-sm font-medium\"\n                    >\n                      Supplier\n                    </th>\n                    <th\n                      class=\"px-4 py-3 text-left text-[#111418] text-sm font-medium\"\n                    >\n                      Date\n                    </th>\n                    <th\n                      class=\"px-4 py-3 text-left text-[#111418] text-sm font-medium\"\n                    >\n                      Total\n                    </th>\n                    <th\n                      class=\"px-4 py-3 text-left text-[#111418] text-sm font-medium\"\n                    >\n                      Status\n                    </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <!-- LOOP DATA -->\n                  <tr\n                    v-for=\"po in purchases\"\n                    :key=\"po.id\"\n                    class=\"border-t border-t-[#dbe0e6]\"\n                  >\n                    <td class=\"h-[72px] px-4 py-2 text-[#111418] text-sm\">\n                      {{ po.id }}\n                    </td>\n                    <td class=\"h-[72px] px-4 py-2 text-[#60758a] text-sm\">\n                      {{ po.supplier?.name || \"-\" }}\n                    </td>\n                    <td class=\"h-[72px] px-4 py-2 text-[#60758a] text-sm\">\n                      {{ formatDate(po.date) }}\n                    </td>\n                    <td class=\"h-[72px] px-4 py-2 text-[#60758a] text-sm\">\n                      {{ formatCurrency(po.total) }}\n                    </td>\n                    <td class=\"h-[72px] px-4 py-2 text-[#60758a] text-sm\">\n                      {{ po.status }}\n                    </td>\n                  </tr>\n\n                  <!-- KOSONG -->\n                  <tr v-if=\"!loading && purchases.length === 0\">\n                    <td\n                      colspan=\"5\"\n                      class=\"text-center py-4 text-[#60758a] text-sm\"\n                    >\n                      No purchase orders found\n                    </td>\n                  </tr>\n\n                  <!-- LOADING -->\n                  <tr v-if=\"loading\">\n                    <td\n                      colspan=\"5\"\n                      class=\"text-center py-4 text-[#60758a] text-sm\"\n                    >\n                      Loading...\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  </div>\n</template>\n"],"mappings":"AACA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,mBAAmB,MAAM,sCAAsC;;;;;;;IAEtE,MAAMC,SAAS,GAAGJ,GAAG,CAAC,EAAE,CAAC;IACzB,MAAMK,OAAO,GAAGL,GAAG,CAAC,KAAK,CAAC;IAC1B,MAAMM,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;;IAE7C;IACA,MAAMC,cAAc,GAAG,MAAAA,CAAA,KAAY;MACjCJ,OAAO,CAACK,KAAK,GAAG,IAAI;MACpB,IAAI;QACF,MAAMC,GAAG,GAAG,MAAMT,KAAK,CAACU,GAAG,CACzB,gDAAgD,EAChD;UACEC,MAAM,EAAE;YAAEC,IAAI,EAAE,CAAC;YAAEC,IAAI,EAAE,EAAE;YAAEC,CAAC,EAAE;UAAG,CAAC;UAAE;UACtCC,OAAO,EAAE;YAAEC,aAAa,EAAE,UAAUZ,KAAK;UAAG;QAC9C,CACF,CAAC;;QAED;QACAF,SAAS,CAACM,KAAK,GAAGS,KAAK,CAACC,OAAO,CAACT,GAAG,CAACU,IAAI,CAAC,GAAGV,GAAG,CAACU,IAAI,GAAGV,GAAG,CAACU,IAAI,CAACA,IAAI,IAAI,EAAE;MAC5E,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAAC,4BAA4B,EAAEF,GAAG,CAAC;MAClD,CAAC,SAAS;QACRjB,OAAO,CAACK,KAAK,GAAG,KAAK;MACvB;IACF,CAAC;;IAED;IACA,MAAMe,UAAU,GAAIC,OAAO,IAAK;MAC9B,IAAI,CAACA,OAAO,EAAE,OAAO,GAAG;MACxB,OAAO,IAAIC,IAAI,CAACD,OAAO,CAAC,CAACE,kBAAkB,CAAC,OAAO,EAAE;QACnDC,GAAG,EAAE,SAAS;QACdC,KAAK,EAAE,OAAO;QACdC,IAAI,EAAE;MACR,CAAC,CAAC;IACJ,CAAC;;IAED;IACA,MAAMC,cAAc,GAAIC,GAAG,IAAK;MAC9B,IAAIA,GAAG,KAAK,IAAI,IAAIA,GAAG,KAAKC,SAAS,EAAE,OAAO,GAAG;MACjD,OAAO,IAAIC,IAAI,CAACC,YAAY,CAAC,OAAO,EAAE;QACpCC,KAAK,EAAE,UAAU;QACjBC,QAAQ,EAAE;MACZ,CAAC,CAAC,CAACC,MAAM,CAACN,GAAG,CAAC;IAChB,CAAC;IAEDhC,SAAS,CAAC,MAAM;MACdQ,cAAc,CAAC,CAAC;IAClB,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}