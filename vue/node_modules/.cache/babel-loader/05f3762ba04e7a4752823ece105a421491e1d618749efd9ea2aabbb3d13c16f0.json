{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, onMounted } from \"vue\";\nimport OwnerLayouts from \"../components/OwnerLayouts.vue\";\nimport { useRouter } from \"vue-router\";\n// Import instance `api` yang sudah dikonfigurasi\nimport api from \"/src/services/api.js\";\nexport default {\n  __name: 'AddProductOwner',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const product = ref({\n      name: \"\",\n      cost_price: null,\n      sell_price: null,\n      stock: 0,\n      category_id: null,\n      unit_id: null,\n      supplier_id: null\n    });\n    const categories = ref([]);\n    const units = ref([]);\n    const suppliers = ref([]);\n    const fetchData = async () => {\n      try {\n        // Menggunakan `api.get()` sehingga URL dasar dan token otomatis ditambahkan\n        const [catRes, unitRes, supRes] = await Promise.all([api.get(\"/owner/categories\"), api.get(\"/owner/units\"), api.get(\"/owner/suppliers\")]);\n\n        // PERBAIKAN: Menggunakan properti dengan huruf kecil (id, name)\n        categories.value = catRes.data.data.map(c => ({\n          id: c.id,\n          name: c.name\n        }));\n        units.value = unitRes.data.data.map(u => ({\n          id: u.id,\n          name: u.name\n        }));\n        suppliers.value = supRes.data.data.map(s => ({\n          id: s.id,\n          name: s.name\n        }));\n      } catch (err) {\n        console.error(\"Failed to fetch dropdown data:\", err);\n      }\n    };\n    const createProduct = async () => {\n      try {\n        // Menggunakan `api.post()` sehingga URL dasar dan token otomatis ditambahkan\n        await api.post(\"/owner/products\", product.value);\n        alert(\"Product added\");\n        router.push(\"/management-product\");\n      } catch (err) {\n        console.error(\"Failed to add product:\", err);\n        alert(\"Failed to add product\");\n      }\n    };\n    onMounted(() => fetchData());\n    const __returned__ = {\n      router,\n      product,\n      categories,\n      units,\n      suppliers,\n      fetchData,\n      createProduct,\n      ref,\n      onMounted,\n      OwnerLayouts,\n      get useRouter() {\n        return useRouter;\n      },\n      get api() {\n        return api;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","OwnerLayouts","useRouter","api","router","product","name","cost_price","sell_price","stock","category_id","unit_id","supplier_id","categories","units","suppliers","fetchData","catRes","unitRes","supRes","Promise","all","get","value","data","map","c","id","u","s","err","console","error","createProduct","post","alert","push"],"sources":["C:/Users/Personal/Documents/PKL/aplikasi/aplikasi/src/views/AddProductOwner.vue"],"sourcesContent":[" <template>\n  <OwnerLayouts>\n    <div class=\"flex flex-1 flex-col py-5 p-8\">\n      <div class=\"layout-content-container flex flex-col flex-1\">\n        <form @submit.prevent=\"createProduct\" class=\"flex flex-col flex-1\">\n          <div class=\"flex flex-wrap justify-between gap-3 p-4\">\n            <div class=\"flex flex-col gap-3\">\n              <p\n                class=\"text-[#111418] tracking-light text-[32px] font-bold leading-tight\"\n              >\n                Add Product\n              </p>\n            </div>\n          </div>\n\n          <div class=\"flex flex-col gap-4 p-4\">\n            <div>\n              <label>Product Name</label>\n              <input\n                type=\"text\"\n                v-model=\"product.name\"\n                class=\"w-full border p-2 rounded\"\n                required\n              />\n            </div>\n\n            <div>\n              <label>Purchase Price</label>\n              <input\n                type=\"number\"\n                v-model.number=\"product.cost_price\"\n                class=\"w-full border p-2 rounded\"\n                required\n              />\n            </div>\n\n            <div>\n              <label>Selling Price</label>\n              <input\n                type=\"number\"\n                v-model.number=\"product.sell_price\"\n                class=\"w-full border p-2 rounded\"\n                required\n              />\n            </div>\n\n            <div>\n              <label>Stock</label>\n              <input\n                type=\"number\"\n                v-model.number=\"product.stock\"\n                class=\"w-full border p-2 rounded\"\n              />\n            </div>\n\n            <div>\n              <label>Category</label>\n              <select\n                v-model.number=\"product.category_id\"\n                class=\"w-full border p-2 rounded\"\n                required\n              >\n                <option disabled value=\"\">Select category</option>\n                <option v-for=\"cat in categories\" :key=\"cat.id\" :value=\"cat.id\">\n                  {{ cat.name }}\n                </option>\n              </select>\n            </div>\n\n            <div>\n              <label>Unit</label>\n              <select\n                v-model.number=\"product.unit_id\"\n                class=\"w-full border p-2 rounded\"\n                required\n              >\n                <option disabled value=\"\">Select unit</option>\n                <option v-for=\"unit in units\" :key=\"unit.id\" :value=\"unit.id\">\n                  {{ unit.name }}\n                </option>\n              </select>\n            </div>\n\n            <div>\n              <label>Supplier</label>\n              <select\n                v-model.number=\"product.supplier_id\"\n                class=\"w-full border p-2 rounded\"\n                required\n              >\n                <option disabled value=\"\">Select supplier</option>\n                <option v-for=\"sup in suppliers\" :key=\"sup.id\" :value=\"sup.id\">\n                  {{ sup.name }}\n                </option>\n              </select>\n            </div>\n          </div>\n\n          <div class=\"flex justify-end p-4 gap-3\">\n            <router-link to=\"/management-product\">\n              <button type=\"button\" class=\"bg-gray-300 px-4 py-2 rounded\">\n                Cancel\n              </button>\n            </router-link>\n            <button\n              type=\"submit\"\n              class=\"bg-blue-500 text-white px-4 py-2 rounded\"\n            >\n              Save\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </OwnerLayouts>\n</template>\n\n<script setup>\nimport { ref, onMounted } from \"vue\";\nimport OwnerLayouts from \"../components/OwnerLayouts.vue\";\nimport { useRouter } from \"vue-router\";\n// Import instance `api` yang sudah dikonfigurasi\nimport api from \"/src/services/api.js\";\n\nconst router = useRouter();\n\nconst product = ref({\n  name: \"\",\n  cost_price: null,\n  sell_price: null,\n  stock: 0,\n  category_id: null,\n  unit_id: null,\n  supplier_id: null,\n});\n\nconst categories = ref([]);\nconst units = ref([]);\nconst suppliers = ref([]);\n\nconst fetchData = async () => {\n  try {\n    // Menggunakan `api.get()` sehingga URL dasar dan token otomatis ditambahkan\n    const [catRes, unitRes, supRes] = await Promise.all([\n      api.get(\"/owner/categories\"),\n      api.get(\"/owner/units\"),\n      api.get(\"/owner/suppliers\"),\n    ]);\n\n    // PERBAIKAN: Menggunakan properti dengan huruf kecil (id, name)\n    categories.value = catRes.data.data.map((c) => ({\n      id: c.id,\n      name: c.name,\n    }));\n    units.value = unitRes.data.data.map((u) => ({ id: u.id, name: u.name }));\n    suppliers.value = supRes.data.data.map((s) => ({ id: s.id, name: s.name }));\n  } catch (err) {\n    console.error(\"Failed to fetch dropdown data:\", err);\n  }\n};\n\nconst createProduct = async () => {\n  try {\n    // Menggunakan `api.post()` sehingga URL dasar dan token otomatis ditambahkan\n    await api.post(\"/owner/products\", product.value);\n    alert(\"Product added\");\n    router.push(\"/management-product\");\n  } catch (err) {\n    console.error(\"Failed to add product:\", err);\n    alert(\"Failed to add product\");\n  }\n};\n\nonMounted(() => fetchData());\n</script>\n\n<style scoped>\n/* Opsional styling */\n</style>\n"],"mappings":";;;AAsHA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,OAAOC,YAAY,MAAM,gCAAgC;AACzD,SAASC,SAAS,QAAQ,YAAY;AACtC;AACA,OAAOC,GAAG,MAAM,sBAAsB;;;;;;;IAEtC,MAAMC,MAAM,GAAGF,SAAS,CAAC,CAAC;IAE1B,MAAMG,OAAO,GAAGN,GAAG,CAAC;MAClBO,IAAI,EAAE,EAAE;MACRC,UAAU,EAAE,IAAI;MAChBC,UAAU,EAAE,IAAI;MAChBC,KAAK,EAAE,CAAC;MACRC,WAAW,EAAE,IAAI;MACjBC,OAAO,EAAE,IAAI;MACbC,WAAW,EAAE;IACf,CAAC,CAAC;IAEF,MAAMC,UAAU,GAAGd,GAAG,CAAC,EAAE,CAAC;IAC1B,MAAMe,KAAK,GAAGf,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMgB,SAAS,GAAGhB,GAAG,CAAC,EAAE,CAAC;IAEzB,MAAMiB,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC5B,IAAI;QACF;QACA,MAAM,CAACC,MAAM,EAAEC,OAAO,EAAEC,MAAM,CAAC,GAAG,MAAMC,OAAO,CAACC,GAAG,CAAC,CAClDlB,GAAG,CAACmB,GAAG,CAAC,mBAAmB,CAAC,EAC5BnB,GAAG,CAACmB,GAAG,CAAC,cAAc,CAAC,EACvBnB,GAAG,CAACmB,GAAG,CAAC,kBAAkB,CAAC,CAC5B,CAAC;;QAEF;QACAT,UAAU,CAACU,KAAK,GAAGN,MAAM,CAACO,IAAI,CAACA,IAAI,CAACC,GAAG,CAAEC,CAAC,KAAM;UAC9CC,EAAE,EAAED,CAAC,CAACC,EAAE;UACRrB,IAAI,EAAEoB,CAAC,CAACpB;QACV,CAAC,CAAC,CAAC;QACHQ,KAAK,CAACS,KAAK,GAAGL,OAAO,CAACM,IAAI,CAACA,IAAI,CAACC,GAAG,CAAEG,CAAC,KAAM;UAAED,EAAE,EAAEC,CAAC,CAACD,EAAE;UAAErB,IAAI,EAAEsB,CAAC,CAACtB;QAAK,CAAC,CAAC,CAAC;QACxES,SAAS,CAACQ,KAAK,GAAGJ,MAAM,CAACK,IAAI,CAACA,IAAI,CAACC,GAAG,CAAEI,CAAC,KAAM;UAAEF,EAAE,EAAEE,CAAC,CAACF,EAAE;UAAErB,IAAI,EAAEuB,CAAC,CAACvB;QAAK,CAAC,CAAC,CAAC;MAC7E,CAAC,CAAC,OAAOwB,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAAC,gCAAgC,EAAEF,GAAG,CAAC;MACtD;IACF,CAAC;IAED,MAAMG,aAAa,GAAG,MAAAA,CAAA,KAAY;MAChC,IAAI;QACF;QACA,MAAM9B,GAAG,CAAC+B,IAAI,CAAC,iBAAiB,EAAE7B,OAAO,CAACkB,KAAK,CAAC;QAChDY,KAAK,CAAC,eAAe,CAAC;QACtB/B,MAAM,CAACgC,IAAI,CAAC,qBAAqB,CAAC;MACpC,CAAC,CAAC,OAAON,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAAC,wBAAwB,EAAEF,GAAG,CAAC;QAC5CK,KAAK,CAAC,uBAAuB,CAAC;MAChC;IACF,CAAC;IAEDnC,SAAS,CAAC,MAAMgB,SAAS,CAAC,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}