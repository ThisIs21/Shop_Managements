{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport { ref, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport OwnerLayouts from \"../components/OwnerLayouts.vue\";\nexport default {\n  __name: 'ReturnApprovalOwners',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const saleReturns = ref([]);\n    const totalReturns = ref(0);\n    const pendingCount = ref(0);\n    const approvedCount = ref(0);\n    const rejectedCount = ref(0);\n    const loading = ref(false);\n    const currentPage = ref(1);\n    const pageSize = ref(10);\n    const currentStatus = ref(\"\"); // \"\" for all, \"PENDING\", \"APPROVED\", \"REJECTED\"\n    const fromDate = ref(\"\");\n    const toDate = ref(\"\");\n    const searchQuery = ref(\"\");\n\n    // Modals\n    const showApprovalModal = ref(false);\n    const showRejectModal = ref(false);\n    const showDetailsModal = ref(false);\n    const selectedReturnId = ref(null);\n    const selectedReturn = ref(null);\n    const rejectReason = ref(\"\");\n    const approving = ref(false);\n    const rejecting = ref(false);\n    const api = axios.create({\n      baseURL: \"http://localhost:8081/api/v1\"\n    });\n    const savedToken = localStorage.getItem(\"token\");\n    if (savedToken) {\n      api.defaults.headers.common[\"Authorization\"] = `Bearer ${savedToken}`;\n    }\n    const fetchReturns = async (status = \"\") => {\n      loading.value = true;\n      currentStatus.value = status;\n      try {\n        const params = {\n          page: currentPage.value,\n          size: pageSize.value,\n          status: status\n        };\n        if (fromDate.value) {\n          params.start_date = fromDate.value;\n        }\n        if (toDate.value) {\n          params.end_date = toDate.value;\n        }\n        if (searchQuery.value) {\n          params.q = searchQuery.value;\n        }\n        console.log(\"Fetch returns params:\", params);\n        const response = await api.get(\"/owner/sale-returns\", {\n          params\n        });\n        console.log(\"Returns response:\", response.data);\n        const data = response.data;\n        if (data && data.data) {\n          saleReturns.value = data.data;\n          totalReturns.value = data.total;\n\n          // Calculate counts\n          pendingCount.value = saleReturns.value.filter(r => r.Status === \"PENDING\").length;\n          approvedCount.value = saleReturns.value.filter(r => r.Status === \"APPROVED\").length;\n          rejectedCount.value = saleReturns.value.filter(r => r.Status === \"REJECTED\").length;\n        } else {\n          saleReturns.value = [];\n          totalReturns.value = 0;\n          pendingCount.value = 0;\n          approvedCount.value = 0;\n          rejectedCount.value = 0;\n        }\n      } catch (error) {\n        console.error(\"Error fetching returns:\", error);\n        if (error.response) {\n          alert(`Error mengambil data retur: ${error.response.status} - ${error.response.data.error || error.message}`);\n        } else {\n          alert(\"Kesalahan jaringan atau server tidak tersedia.\");\n        }\n        saleReturns.value = [];\n      } finally {\n        loading.value = false;\n      }\n    };\n    const changePage = page => {\n      if (page >= 1 && page * pageSize.value <= totalReturns.value) {\n        currentPage.value = page;\n        fetchReturns(currentStatus.value);\n      }\n    };\n    const resetFilter = () => {\n      fromDate.value = \"\";\n      toDate.value = \"\";\n      searchQuery.value = \"\";\n      currentPage.value = 1;\n      fetchReturns(currentStatus.value);\n    };\n    const formatReturnNumber = id => {\n      return `2025-${String(id).padStart(3, \"0\")}`;\n    };\n    const getStatusClass = status => {\n      switch (status) {\n        case \"PENDING\":\n          return \"bg-yellow-100 text-yellow-800\";\n        case \"APPROVED\":\n          return \"bg-green-100 text-green-800\";\n        case \"REJECTED\":\n          return \"bg-red-100 text-red-800\";\n        default:\n          return \"bg-gray-100 text-gray-800\";\n      }\n    };\n    const getStatusText = status => {\n      switch (status) {\n        case \"PENDING\":\n          return \"Pending\";\n        case \"APPROVED\":\n          return \"Approved\";\n        case \"REJECTED\":\n          return \"Rejected\";\n        default:\n          return status;\n      }\n    };\n    const getFirstProductName = items => {\n      if (items && items.length > 0 && items[0].Product) {\n        return items[0].Product.Name;\n      }\n      return \"N/A\";\n    };\n    const openApprovalModal = async id => {\n      try {\n        const response = await api.get(`/owner/sale-returns/${id}`);\n        selectedReturn.value = response.data;\n        selectedReturnId.value = id;\n        showApprovalModal.value = true;\n      } catch (error) {\n        console.error(\"Error fetching return:\", error);\n        alert(\"Gagal memuat detail retur.\");\n      }\n    };\n    const closeApprovalModal = () => {\n      showApprovalModal.value = false;\n      selectedReturn.value = null;\n      selectedReturnId.value = null;\n    };\n    const confirmApprove = async () => {\n      if (!selectedReturnId.value) return;\n      approving.value = true;\n      try {\n        const response = await api.post(`/owner/sale-returns/${selectedReturnId.value}/approve`);\n        if (response.status === 200) {\n          alert(\"Retur berhasil disetujui!\");\n          closeApprovalModal();\n          fetchReturns(currentStatus.value);\n        }\n      } catch (error) {\n        console.error(\"Error approving return:\", error);\n        alert(\"Gagal menyetujui retur: \" + (error.response?.data?.error || error.message));\n      } finally {\n        approving.value = false;\n      }\n    };\n    const openRejectModal = async id => {\n      try {\n        const response = await api.get(`/owner/sale-returns/${id}`);\n        selectedReturn.value = response.data;\n        selectedReturnId.value = id;\n        rejectReason.value = \"\";\n        showRejectModal.value = true;\n      } catch (error) {\n        console.error(\"Error fetching return:\", error);\n        alert(\"Gagal memuat detail retur.\");\n      }\n    };\n    const closeRejectModal = () => {\n      showRejectModal.value = false;\n      selectedReturn.value = null;\n      selectedReturnId.value = null;\n      rejectReason.value = \"\";\n    };\n    const confirmReject = async () => {\n      if (!selectedReturnId.value || !rejectReason.value.trim()) {\n        alert(\"Alasan penolakan wajib diisi!\");\n        return;\n      }\n      rejecting.value = true;\n      try {\n        const params = new URLSearchParams();\n        params.append(\"reason\", rejectReason.value.trim());\n        const response = await api.post(`/owner/sale-returns/${selectedReturnId.value}/reject?${params.toString()}`);\n        if (response.status === 200) {\n          alert(\"Retur berhasil ditolak!\");\n          closeRejectModal();\n          fetchReturns(currentStatus.value);\n        }\n      } catch (error) {\n        console.error(\"Error rejecting return:\", error);\n        alert(\"Gagal menolak retur: \" + (error.response?.data?.error || error.message));\n      } finally {\n        rejecting.value = false;\n      }\n    };\n    const viewDetails = async id => {\n      try {\n        const response = await api.get(`/owner/sale-returns/${id}`);\n        selectedReturn.value = response.data;\n        showDetailsModal.value = true;\n      } catch (error) {\n        console.error(\"Error fetching return details:\", error);\n        alert(\"Gagal memuat detail retur.\");\n      }\n    };\n    const closeDetailsModal = () => {\n      showDetailsModal.value = false;\n      selectedReturn.value = null;\n    };\n    const formatDate = dateStr => {\n      if (!dateStr) return \"N/A\";\n      const date = new Date(dateStr);\n      if (isNaN(date.getTime())) {\n        const sliced = dateStr.split(\"T\")[0];\n        return sliced || \"Invalid Date\";\n      }\n      return date.toLocaleDateString(\"id-ID\", {\n        day: \"2-digit\",\n        month: \"2-digit\",\n        year: \"numeric\"\n      });\n    };\n    const formatDateTime = dateStr => {\n      if (!dateStr) return \"N/A\";\n      const date = new Date(dateStr);\n      return date.toLocaleString(\"id-ID\", {\n        day: \"2-digit\",\n        month: \"2-digit\",\n        year: \"numeric\",\n        hour: \"2-digit\",\n        minute: \"2-digit\"\n      });\n    };\n    const formatCurrency = amount => {\n      return amount !== undefined && amount !== null ? new Intl.NumberFormat(\"id-ID\", {\n        style: \"currency\",\n        currency: \"IDR\",\n        minimumFractionDigits: 0\n      }).format(amount) : \"Rp 0\";\n    };\n    onMounted(() => {\n      fetchReturns(); // Load all returns by default\n    });\n    const __returned__ = {\n      saleReturns,\n      totalReturns,\n      pendingCount,\n      approvedCount,\n      rejectedCount,\n      loading,\n      currentPage,\n      pageSize,\n      currentStatus,\n      fromDate,\n      toDate,\n      searchQuery,\n      showApprovalModal,\n      showRejectModal,\n      showDetailsModal,\n      selectedReturnId,\n      selectedReturn,\n      rejectReason,\n      approving,\n      rejecting,\n      api,\n      savedToken,\n      fetchReturns,\n      changePage,\n      resetFilter,\n      formatReturnNumber,\n      getStatusClass,\n      getStatusText,\n      getFirstProductName,\n      openApprovalModal,\n      closeApprovalModal,\n      confirmApprove,\n      openRejectModal,\n      closeRejectModal,\n      confirmReject,\n      viewDetails,\n      closeDetailsModal,\n      formatDate,\n      formatDateTime,\n      formatCurrency,\n      ref,\n      onMounted,\n      get axios() {\n        return axios;\n      },\n      OwnerLayouts\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","axios","OwnerLayouts","saleReturns","totalReturns","pendingCount","approvedCount","rejectedCount","loading","currentPage","pageSize","currentStatus","fromDate","toDate","searchQuery","showApprovalModal","showRejectModal","showDetailsModal","selectedReturnId","selectedReturn","rejectReason","approving","rejecting","api","create","baseURL","savedToken","localStorage","getItem","defaults","headers","common","fetchReturns","status","value","params","page","size","start_date","end_date","q","console","log","response","get","data","total","filter","r","Status","length","error","alert","message","changePage","resetFilter","formatReturnNumber","id","String","padStart","getStatusClass","getStatusText","getFirstProductName","items","Product","Name","openApprovalModal","closeApprovalModal","confirmApprove","post","openRejectModal","closeRejectModal","confirmReject","trim","URLSearchParams","append","toString","viewDetails","closeDetailsModal","formatDate","dateStr","date","Date","isNaN","getTime","sliced","split","toLocaleDateString","day","month","year","formatDateTime","toLocaleString","hour","minute","formatCurrency","amount","undefined","Intl","NumberFormat","style","currency","minimumFractionDigits","format"],"sources":["C:/Users/Personal/Documents/PKL/aplikasi/aplikasi/src/views/ReturnApprovalOwners.vue"],"sourcesContent":["<template>\n  <OwnerLayouts>\n    <div class=\"flex flex-1 flex-col py-5 p-8\">\n      <div class=\"layout-content-container flex flex-col flex-1\">\n        <div class=\"flex flex-wrap justify-between items-center gap-3 p-4\">\n          <p\n            class=\"text-[#111418] tracking-light text-[32px] font-bold leading-tight min-w-72\"\n          >\n            Sales Returns Approval\n          </p>\n          <div class=\"flex gap-2\">\n            <button\n              @click=\"fetchReturns('PENDING')\"\n              class=\"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600\"\n            >\n              Pending Returns\n            </button>\n            <button\n              @click=\"fetchReturns('')\"\n              class=\"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600\"\n            >\n              All Returns\n            </button>\n          </div>\n        </div>\n\n        <!-- Filter Tanggal -->\n        <div class=\"p-4 bg-[#f0f2f5] rounded-lg mb-4\">\n          <div class=\"flex flex-wrap gap-4 items-end\">\n            <div>\n              <label class=\"block text-sm font-medium text-gray-700 mb-1\"\n                >Dari Tanggal</label\n              >\n              <input\n                type=\"date\"\n                v-model=\"fromDate\"\n                class=\"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              />\n            </div>\n            <div>\n              <label class=\"block text-sm font-medium text-gray-700 mb-1\"\n                >Sampai Tanggal</label\n              >\n              <input\n                type=\"date\"\n                v-model=\"toDate\"\n                class=\"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              />\n            </div>\n            <input\n              v-model=\"searchQuery\"\n              type=\"text\"\n              placeholder=\"Cari berdasarkan nomor retur, pelanggan, atau produk...\"\n              class=\"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            />\n            <button\n              @click=\"fetchReturns(currentStatus)\"\n              :disabled=\"loading\"\n              class=\"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50\"\n            >\n              {{ loading ? \"Loading...\" : \"Filter\" }}\n            </button>\n            <button\n              @click=\"resetFilter\"\n              class=\"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600\"\n            >\n              Reset\n            </button>\n          </div>\n          <p\n            v-if=\"fromDate || toDate || searchQuery\"\n            class=\"text-sm text-gray-600 mt-2\"\n          >\n            Filter: {{ fromDate || \"N/A\" }} s/d {{ toDate || \"N/A\" }} |\n            Pencarian: {{ searchQuery || \"N/A\" }}\n          </p>\n        </div>\n\n        <!-- Summary Cards -->\n        <div v-if=\"!loading\" class=\"flex flex-wrap gap-4 p-4 mb-4\">\n          <div\n            class=\"flex min-w-[158px] flex-1 flex-col gap-2 rounded-lg p-6 bg-[#f0f2f5]\"\n          >\n            <p class=\"text-[#111418] text-base font-medium leading-normal\">\n              Total Returns\n            </p>\n            <p\n              class=\"text-[#111418] tracking-light text-2xl font-bold leading-tight\"\n            >\n              {{ totalReturns }}\n            </p>\n          </div>\n          <div\n            class=\"flex min-w-[158px] flex-1 flex-col gap-2 rounded-lg p-6 bg-[#f0f2f5]\"\n          >\n            <p class=\"text-[#111418] text-base font-medium leading-normal\">\n              Pending Approval\n            </p>\n            <p\n              class=\"text-[#111418] tracking-light text-2xl font-bold leading-tight\"\n            >\n              {{ pendingCount }}\n            </p>\n          </div>\n          <div\n            class=\"flex min-w-[158px] flex-1 flex-col gap-2 rounded-lg p-6 bg-[#f0f2f5]\"\n          >\n            <p class=\"text-[#111418] text-base font-medium leading-normal\">\n              Approved\n            </p>\n            <p\n              class=\"text-[#111418] tracking-light text-2xl font-bold leading-tight\"\n            >\n              {{ approvedCount }}\n            </p>\n          </div>\n          <div\n            class=\"flex min-w-[158px] flex-1 flex-col gap-2 rounded-lg p-6 bg-[#f0f2f5]\"\n          >\n            <p class=\"text-[#111418] text-base font-medium leading-normal\">\n              Rejected\n            </p>\n            <p\n              class=\"text-[#111418] tracking-light text-2xl font-bold leading-tight\"\n            >\n              {{ rejectedCount }}\n            </p>\n          </div>\n        </div>\n\n        <div class=\"p-4 @container\">\n          <div\n            class=\"flex overflow-hidden rounded-lg border border-[#dbe0e6] bg-white\"\n          >\n            <table class=\"flex-1\">\n              <thead>\n                <tr class=\"bg-white\">\n                  <th\n                    class=\"table-column-120 px-4 py-3 text-left text-[#111418] w-[120px] text-sm font-medium leading-normal\"\n                  >\n                    Return No.\n                  </th>\n                  <th\n                    class=\"table-column-240 px-4 py-3 text-left text-[#111418] w-[150px] text-sm font-medium leading-normal\"\n                  >\n                    Date\n                  </th>\n                  <th\n                    class=\"table-column-360 px-4 py-3 text-left text-[#111418] w-[200px] text-sm font-medium leading-normal\"\n                  >\n                    Customer\n                  </th>\n                  <th\n                    class=\"table-column-480 px-4 py-3 text-left text-[#111418] w-[200px] text-sm font-medium leading-normal\"\n                  >\n                    Product\n                  </th>\n                  <th\n                    class=\"table-column-600 px-4 py-3 text-left text-[#111418] w-[120px] text-sm font-medium leading-normal\"\n                  >\n                    Total\n                  </th>\n                  <th\n                    class=\"table-column-720 px-4 py-3 text-left text-[#111418] w-[100px] text-sm font-medium leading-normal\"\n                  >\n                    Status\n                  </th>\n                  <th\n                    class=\"table-column-840 px-4 py-3 text-left text-[#111418] w-[120px] text-[#60758a] text-sm font-medium leading-normal\"\n                  >\n                    Actions\n                  </th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr v-if=\"loading\">\n                  <td colspan=\"7\" class=\"text-center py-8 text-gray-500\">\n                    Loading returns...\n                  </td>\n                </tr>\n                <tr v-else-if=\"saleReturns.length === 0\">\n                  <td colspan=\"7\" class=\"text-center py-8 text-gray-500\">\n                    Tidak ada retur penjualan.\n                  </td>\n                </tr>\n                <tr\n                  v-else\n                  v-for=\"ret in saleReturns\"\n                  :key=\"ret.ID\"\n                  class=\"border-t border-t-[#dbe0e6]\"\n                >\n                  <td\n                    class=\"table-column-120 h-[72px] px-4 py-2 w-[120px] text-[#111418] text-sm font-normal leading-normal\"\n                  >\n                    RTN-{{ formatReturnNumber(ret.ID) }}\n                  </td>\n                  <td\n                    class=\"table-column-240 h-[72px] px-4 py-2 w-[150px] text-[#60758a] text-sm font-normal leading-normal\"\n                  >\n                    {{ formatDate(ret.Date) }}\n                  </td>\n                  <td\n                    class=\"table-column-360 h-[72px] px-4 py-2 w-[200px] text-[#60758a] text-sm font-normal leading-normal\"\n                  >\n                    {{ ret.Sale?.Customer?.Name || \"N/A\" }}\n                  </td>\n                  <td\n                    class=\"table-column-480 h-[72px] px-4 py-2 w-[200px] text-[#60758a] text-sm font-normal leading-normal\"\n                  >\n                    {{ getFirstProductName(ret.Items) }}\n                  </td>\n                  <td\n                    class=\"table-column-600 h-[72px] px-4 py-2 w-[120px] text-[#60758a] text-sm font-normal leading-normal\"\n                  >\n                    {{ formatCurrency(ret.Total) }}\n                  </td>\n                  <td\n                    class=\"table-column-720 h-[72px] px-4 py-2 w-[100px] text-sm font-normal leading-normal\"\n                  >\n                    <span\n                      :class=\"getStatusClass(ret.Status)\"\n                      class=\"px-2 py-1 rounded text-xs font-medium\"\n                    >\n                      {{ getStatusText(ret.Status) }}\n                    </span>\n                  </td>\n                  <td\n                    class=\"table-column-840 h-[72px] px-4 py-2 w-[120px] text-[#60758a] text-sm font-bold leading-normal tracking-[0.015em]\"\n                  >\n                    <div v-if=\"ret.Status === 'PENDING'\" class=\"flex gap-2\">\n                      <button\n                        @click=\"openApprovalModal(ret.ID)\"\n                        class=\"px-3 py-1 bg-green-500 text-white rounded text-xs hover:bg-green-600\"\n                      >\n                        Approve\n                      </button>\n                      <button\n                        @click=\"openRejectModal(ret.ID)\"\n                        class=\"px-3 py-1 bg-red-500 text-white rounded text-xs hover:bg-red-600\"\n                      >\n                        Reject\n                      </button>\n                    </div>\n                    <button\n                      v-else\n                      @click=\"viewDetails(ret.ID)\"\n                      class=\"px-3 py-1 bg-blue-500 text-white rounded text-xs hover:bg-blue-600\"\n                    >\n                      View Details\n                    </button>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n\n          <!-- Pagination -->\n          <div\n            v-if=\"!loading && totalReturns > 0\"\n            class=\"flex justify-between items-center p-4 border-t border-t-[#dbe0e6]\"\n          >\n            <p class=\"text-sm text-gray-600\">\n              Menampilkan {{ (currentPage - 1) * pageSize + 1 }} -\n              {{ Math.min(currentPage * pageSize, totalReturns) }} dari\n              {{ totalReturns }} retur\n            </p>\n            <div class=\"flex gap-2\">\n              <button\n                @click=\"changePage(currentPage - 1)\"\n                :disabled=\"currentPage === 1\"\n                class=\"px-3 py-1 bg-gray-200 text-gray-700 rounded disabled:opacity-50\"\n              >\n                Previous\n              </button>\n              <button\n                @click=\"changePage(currentPage + 1)\"\n                :disabled=\"currentPage * pageSize >= totalReturns\"\n                class=\"px-3 py-1 bg-gray-200 text-gray-700 rounded disabled:opacity-50\"\n              >\n                Next\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Approval Modal -->\n    <div\n      v-if=\"showApprovalModal\"\n      class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\n    >\n      <div\n        class=\"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto\"\n      >\n        <h2 class=\"text-xl font-bold mb-4\">Approve Sale Return</h2>\n        <div class=\"mb-4\">\n          <p>\n            <strong>Return No:</strong> RTN-{{\n              formatReturnNumber(selectedReturnId)\n            }}\n          </p>\n          <p>\n            <strong>Customer:</strong>\n            {{ selectedReturn?.Sale?.Customer?.Name || \"N/A\" }}\n          </p>\n          <p>\n            <strong>Total:</strong>\n            {{ formatCurrency(selectedReturn?.Total || 0) }}\n          </p>\n          <p><strong>Notes:</strong> {{ selectedReturn?.Notes || \"N/A\" }}</p>\n        </div>\n        <div class=\"mb-6\">\n          <h3 class=\"font-semibold mb-2\">Return Items:</h3>\n          <div\n            v-for=\"item in selectedReturn?.Items\"\n            :key=\"item.ID\"\n            class=\"border-b py-2 last:border-b-0\"\n          >\n            <p class=\"font-medium\">{{ item.Product?.Name || \"N/A\" }}</p>\n            <p class=\"text-sm text-gray-600\">\n              Qty: {{ item.Qty }} | Price: {{ formatCurrency(item.Price) }} |\n              Subtotal: {{ formatCurrency(item.Subtotal) }}\n            </p>\n            <p class=\"text-sm text-red-600\">Reason: {{ item.Reason }}</p>\n          </div>\n        </div>\n        <div class=\"flex justify-end gap-2\">\n          <button\n            @click=\"closeApprovalModal\"\n            class=\"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600\"\n          >\n            Cancel\n          </button>\n          <button\n            @click=\"confirmApprove\"\n            :disabled=\"approving\"\n            class=\"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:opacity-50\"\n          >\n            {{ approving ? \"Approving...\" : \"Approve Return\" }}\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- Reject Modal -->\n    <div\n      v-if=\"showRejectModal\"\n      class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\n    >\n      <div\n        class=\"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto\"\n      >\n        <h2 class=\"text-xl font-bold mb-4\">Reject Sale Return</h2>\n        <div class=\"mb-4\">\n          <p>\n            <strong>Return No:</strong> RTN-{{\n              formatReturnNumber(selectedReturnId)\n            }}\n          </p>\n          <p>\n            <strong>Customer:</strong>\n            {{ selectedReturn?.Sale?.Customer?.Name || \"N/A\" }}\n          </p>\n          <p>\n            <strong>Total:</strong>\n            {{ formatCurrency(selectedReturn?.Total || 0) }}\n          </p>\n        </div>\n        <div class=\"mb-6\">\n          <label class=\"block text-sm font-medium text-gray-700 mb-2\"\n            >Alasan Penolakan (Wajib)</label\n          >\n          <textarea\n            v-model=\"rejectReason\"\n            placeholder=\"Masukkan alasan penolakan retur ini...\"\n            rows=\"4\"\n            class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500\"\n            required\n          ></textarea>\n        </div>\n        <div class=\"flex justify-end gap-2\">\n          <button\n            @click=\"closeRejectModal\"\n            class=\"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600\"\n          >\n            Cancel\n          </button>\n          <button\n            @click=\"confirmReject\"\n            :disabled=\"rejecting || !rejectReason.trim()\"\n            class=\"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 disabled:opacity-50\"\n          >\n            {{ rejecting ? \"Rejecting...\" : \"Reject Return\" }}\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- View Details Modal -->\n    <div\n      v-if=\"showDetailsModal\"\n      class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\n    >\n      <div\n        class=\"bg-white rounded-lg p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto\"\n      >\n        <div class=\"flex justify-between items-center mb-4\">\n          <h2 class=\"text-xl font-bold\">Return Details</h2>\n          <button\n            @click=\"closeDetailsModal\"\n            class=\"text-gray-500 hover:text-gray-700\"\n          >\n            âœ•\n          </button>\n        </div>\n\n        <div v-if=\"selectedReturn\" class=\"space-y-4\">\n          <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <p>\n                <strong>Return No:</strong> RTN-{{\n                  formatReturnNumber(selectedReturn.ID)\n                }}\n              </p>\n              <p>\n                <strong>Date:</strong> {{ formatDate(selectedReturn.Date) }}\n              </p>\n              <p>\n                <strong>Customer:</strong>\n                {{ selectedReturn.Sale?.Customer?.Name || \"N/A\" }}\n              </p>\n              <p>\n                <strong>Sale No:</strong>\n                {{ selectedReturn.Sale?.TransactionNumber || \"N/A\" }}\n              </p>\n            </div>\n            <div>\n              <p>\n                <strong>Total:</strong>\n                {{ formatCurrency(selectedReturn.Total) }}\n              </p>\n              <p>\n                <strong>Status:</strong>\n                <span\n                  :class=\"getStatusClass(selectedReturn.Status)\"\n                  class=\"px-2 py-1 rounded text-xs font-medium\"\n                >\n                  {{ getStatusText(selectedReturn.Status) }}\n                </span>\n              </p>\n              <p v-if=\"selectedReturn.ApprovedBy\">\n                <strong>Approved By:</strong> User ID\n                {{ selectedReturn.ApprovedBy }}\n              </p>\n              <p v-if=\"selectedReturn.ApprovedAt\">\n                <strong>Approved At:</strong>\n                {{ formatDateTime(selectedReturn.ApprovedAt) }}\n              </p>\n            </div>\n          </div>\n\n          <div>\n            <h3 class=\"font-semibold mb-2\">Notes:</h3>\n            <p class=\"bg-gray-50 p-3 rounded\">\n              {{ selectedReturn.Notes || \"No notes\" }}\n            </p>\n          </div>\n\n          <div>\n            <h3 class=\"font-semibold mb-2\">Return Items:</h3>\n            <div class=\"overflow-x-auto\">\n              <table class=\"min-w-full bg-white border border-gray-200\">\n                <thead>\n                  <tr class=\"bg-gray-100\">\n                    <th\n                      class=\"px-4 py-2 text-left text-xs font-medium text-gray-500\"\n                    >\n                      Product\n                    </th>\n                    <th\n                      class=\"px-4 py-2 text-left text-xs font-medium text-gray-500\"\n                    >\n                      Qty\n                    </th>\n                    <th\n                      class=\"px-4 py-2 text-left text-xs font-medium text-gray-500\"\n                    >\n                      Price\n                    </th>\n                    <th\n                      class=\"px-4 py-2 text-left text-xs font-medium text-gray-500\"\n                    >\n                      Subtotal\n                    </th>\n                    <th\n                      class=\"px-4 py-2 text-left text-xs font-medium text-gray-500\"\n                    >\n                      Reason\n                    </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr\n                    v-for=\"item in selectedReturn.Items\"\n                    :key=\"item.ID\"\n                    class=\"border-t\"\n                  >\n                    <td class=\"px-4 py-2 text-sm\">\n                      {{ item.Product?.Name || \"N/A\" }}\n                    </td>\n                    <td class=\"px-4 py-2 text-sm\">{{ item.Qty }}</td>\n                    <td class=\"px-4 py-2 text-sm\">\n                      {{ formatCurrency(item.Price) }}\n                    </td>\n                    <td class=\"px-4 py-2 text-sm\">\n                      {{ formatCurrency(item.Subtotal) }}\n                    </td>\n                    <td class=\"px-4 py-2 text-sm text-red-600\">\n                      {{ item.Reason || \"N/A\" }}\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n\n          <div\n            v-if=\"selectedReturn.Status === 'PENDING'\"\n            class=\"flex justify-end gap-2 mt-6\"\n          >\n            <button\n              @click=\"openApprovalModal(selectedReturn.ID)\"\n              class=\"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600\"\n            >\n              Approve\n            </button>\n            <button\n              @click=\"openRejectModal(selectedReturn.ID)\"\n              class=\"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600\"\n            >\n              Reject\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </OwnerLayouts>\n</template>\n\n<script setup>\nimport { ref, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport OwnerLayouts from \"../components/OwnerLayouts.vue\";\n\nconst saleReturns = ref([]);\nconst totalReturns = ref(0);\nconst pendingCount = ref(0);\nconst approvedCount = ref(0);\nconst rejectedCount = ref(0);\nconst loading = ref(false);\nconst currentPage = ref(1);\nconst pageSize = ref(10);\nconst currentStatus = ref(\"\"); // \"\" for all, \"PENDING\", \"APPROVED\", \"REJECTED\"\nconst fromDate = ref(\"\");\nconst toDate = ref(\"\");\nconst searchQuery = ref(\"\");\n\n// Modals\nconst showApprovalModal = ref(false);\nconst showRejectModal = ref(false);\nconst showDetailsModal = ref(false);\nconst selectedReturnId = ref(null);\nconst selectedReturn = ref(null);\nconst rejectReason = ref(\"\");\nconst approving = ref(false);\nconst rejecting = ref(false);\n\nconst api = axios.create({ baseURL: \"http://localhost:8081/api/v1\" });\nconst savedToken = localStorage.getItem(\"token\");\nif (savedToken) {\n  api.defaults.headers.common[\"Authorization\"] = `Bearer ${savedToken}`;\n}\n\nconst fetchReturns = async (status = \"\") => {\n  loading.value = true;\n  currentStatus.value = status;\n  try {\n    const params = {\n      page: currentPage.value,\n      size: pageSize.value,\n      status: status,\n    };\n\n    if (fromDate.value) {\n      params.start_date = fromDate.value;\n    }\n    if (toDate.value) {\n      params.end_date = toDate.value;\n    }\n    if (searchQuery.value) {\n      params.q = searchQuery.value;\n    }\n\n    console.log(\"Fetch returns params:\", params);\n    const response = await api.get(\"/owner/sale-returns\", { params });\n    console.log(\"Returns response:\", response.data);\n\n    const data = response.data;\n    if (data && data.data) {\n      saleReturns.value = data.data;\n      totalReturns.value = data.total;\n\n      // Calculate counts\n      pendingCount.value = saleReturns.value.filter(\n        (r) => r.Status === \"PENDING\"\n      ).length;\n      approvedCount.value = saleReturns.value.filter(\n        (r) => r.Status === \"APPROVED\"\n      ).length;\n      rejectedCount.value = saleReturns.value.filter(\n        (r) => r.Status === \"REJECTED\"\n      ).length;\n    } else {\n      saleReturns.value = [];\n      totalReturns.value = 0;\n      pendingCount.value = 0;\n      approvedCount.value = 0;\n      rejectedCount.value = 0;\n    }\n  } catch (error) {\n    console.error(\"Error fetching returns:\", error);\n    if (error.response) {\n      alert(\n        `Error mengambil data retur: ${error.response.status} - ${\n          error.response.data.error || error.message\n        }`\n      );\n    } else {\n      alert(\"Kesalahan jaringan atau server tidak tersedia.\");\n    }\n    saleReturns.value = [];\n  } finally {\n    loading.value = false;\n  }\n};\n\nconst changePage = (page) => {\n  if (page >= 1 && page * pageSize.value <= totalReturns.value) {\n    currentPage.value = page;\n    fetchReturns(currentStatus.value);\n  }\n};\n\nconst resetFilter = () => {\n  fromDate.value = \"\";\n  toDate.value = \"\";\n  searchQuery.value = \"\";\n  currentPage.value = 1;\n  fetchReturns(currentStatus.value);\n};\n\nconst formatReturnNumber = (id) => {\n  return `2025-${String(id).padStart(3, \"0\")}`;\n};\n\nconst getStatusClass = (status) => {\n  switch (status) {\n    case \"PENDING\":\n      return \"bg-yellow-100 text-yellow-800\";\n    case \"APPROVED\":\n      return \"bg-green-100 text-green-800\";\n    case \"REJECTED\":\n      return \"bg-red-100 text-red-800\";\n    default:\n      return \"bg-gray-100 text-gray-800\";\n  }\n};\n\nconst getStatusText = (status) => {\n  switch (status) {\n    case \"PENDING\":\n      return \"Pending\";\n    case \"APPROVED\":\n      return \"Approved\";\n    case \"REJECTED\":\n      return \"Rejected\";\n    default:\n      return status;\n  }\n};\n\nconst getFirstProductName = (items) => {\n  if (items && items.length > 0 && items[0].Product) {\n    return items[0].Product.Name;\n  }\n  return \"N/A\";\n};\n\nconst openApprovalModal = async (id) => {\n  try {\n    const response = await api.get(`/owner/sale-returns/${id}`);\n    selectedReturn.value = response.data;\n    selectedReturnId.value = id;\n    showApprovalModal.value = true;\n  } catch (error) {\n    console.error(\"Error fetching return:\", error);\n    alert(\"Gagal memuat detail retur.\");\n  }\n};\n\nconst closeApprovalModal = () => {\n  showApprovalModal.value = false;\n  selectedReturn.value = null;\n  selectedReturnId.value = null;\n};\n\nconst confirmApprove = async () => {\n  if (!selectedReturnId.value) return;\n\n  approving.value = true;\n  try {\n    const response = await api.post(\n      `/owner/sale-returns/${selectedReturnId.value}/approve`\n    );\n    if (response.status === 200) {\n      alert(\"Retur berhasil disetujui!\");\n      closeApprovalModal();\n      fetchReturns(currentStatus.value);\n    }\n  } catch (error) {\n    console.error(\"Error approving return:\", error);\n    alert(\n      \"Gagal menyetujui retur: \" +\n        (error.response?.data?.error || error.message)\n    );\n  } finally {\n    approving.value = false;\n  }\n};\n\nconst openRejectModal = async (id) => {\n  try {\n    const response = await api.get(`/owner/sale-returns/${id}`);\n    selectedReturn.value = response.data;\n    selectedReturnId.value = id;\n    rejectReason.value = \"\";\n    showRejectModal.value = true;\n  } catch (error) {\n    console.error(\"Error fetching return:\", error);\n    alert(\"Gagal memuat detail retur.\");\n  }\n};\n\nconst closeRejectModal = () => {\n  showRejectModal.value = false;\n  selectedReturn.value = null;\n  selectedReturnId.value = null;\n  rejectReason.value = \"\";\n};\n\nconst confirmReject = async () => {\n  if (!selectedReturnId.value || !rejectReason.value.trim()) {\n    alert(\"Alasan penolakan wajib diisi!\");\n    return;\n  }\n\n  rejecting.value = true;\n  try {\n    const params = new URLSearchParams();\n    params.append(\"reason\", rejectReason.value.trim());\n\n    const response = await api.post(\n      `/owner/sale-returns/${\n        selectedReturnId.value\n      }/reject?${params.toString()}`\n    );\n    if (response.status === 200) {\n      alert(\"Retur berhasil ditolak!\");\n      closeRejectModal();\n      fetchReturns(currentStatus.value);\n    }\n  } catch (error) {\n    console.error(\"Error rejecting return:\", error);\n    alert(\n      \"Gagal menolak retur: \" + (error.response?.data?.error || error.message)\n    );\n  } finally {\n    rejecting.value = false;\n  }\n};\n\nconst viewDetails = async (id) => {\n  try {\n    const response = await api.get(`/owner/sale-returns/${id}`);\n    selectedReturn.value = response.data;\n    showDetailsModal.value = true;\n  } catch (error) {\n    console.error(\"Error fetching return details:\", error);\n    alert(\"Gagal memuat detail retur.\");\n  }\n};\n\nconst closeDetailsModal = () => {\n  showDetailsModal.value = false;\n  selectedReturn.value = null;\n};\n\nconst formatDate = (dateStr) => {\n  if (!dateStr) return \"N/A\";\n  const date = new Date(dateStr);\n  if (isNaN(date.getTime())) {\n    const sliced = dateStr.split(\"T\")[0];\n    return sliced || \"Invalid Date\";\n  }\n  return date.toLocaleDateString(\"id-ID\", {\n    day: \"2-digit\",\n    month: \"2-digit\",\n    year: \"numeric\",\n  });\n};\n\nconst formatDateTime = (dateStr) => {\n  if (!dateStr) return \"N/A\";\n  const date = new Date(dateStr);\n  return date.toLocaleString(\"id-ID\", {\n    day: \"2-digit\",\n    month: \"2-digit\",\n    year: \"numeric\",\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n  });\n};\n\nconst formatCurrency = (amount) => {\n  return amount !== undefined && amount !== null\n    ? new Intl.NumberFormat(\"id-ID\", {\n        style: \"currency\",\n        currency: \"IDR\",\n        minimumFractionDigits: 0,\n      }).format(amount)\n    : \"Rp 0\";\n};\n\nonMounted(() => {\n  fetchReturns(); // Load all returns by default\n});\n</script>\n\n<style scoped>\n@container (max-width:120px) {\n  .table-column-120 {\n    display: none;\n  }\n}\n@container (max-width:240px) {\n  .table-column-240 {\n    display: none;\n  }\n}\n@container (max-width:360px) {\n  .table-column-360 {\n    display: none;\n  }\n}\n@container (max-width:480px) {\n  .table-column-480 {\n    display: none;\n  }\n}\n@container (max-width:600px) {\n  .table-column-600 {\n    display: none;\n  }\n}\n@container (max-width:720px) {\n  .table-column-720 {\n    display: none;\n  }\n}\n@container (max-width:840px) {\n  .table-column-840 {\n    display: none;\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}